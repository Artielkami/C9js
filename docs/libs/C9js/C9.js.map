{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 6d9bee1c013b660aa196","webpack:///./src/index.js","webpack:///./src/charts/C9.BarChart.js","webpack:///./src/charts/C9.Chart.js","webpack:///./src/helper/C9.Helper.js","webpack:///./src/charts/utils/C9.Axis.js","webpack:///./src/charts/utils/C9.Title.js","webpack:///./src/charts/utils/C9.Legend.js","webpack:///./src/charts/utils/C9.Table.js","webpack:///./src/charts/utils/C9.Tooltip.js","webpack:///./src/helper/C9.DataAdapter.js","webpack:///./src/charts/C9.DonutChart.js","webpack:///./src/charts/C9.LineChart.js","webpack:///./src/charts/C9.PieChart.js","webpack:///./src/charts/C9.TimeLine.js","webpack:///./src/map/C9.Map.js","webpack:///./src/C9.css"],"names":["module","exports","BarChart","DonutChart","LineChart","PieChart","TimeLine","Map","DataAdapter","Helper","options","self","config","isLogaric","callback","mergeDeep","chartType","dataOption","colorRange","da","getDataTarget","data","dataTarget","barChartType","getDataTypeForBarChart","_groupNames","groups","length","stacks","_isGroup","width","margin","left","right","height","top","bottom","x","d3","scale","ordinal","rangeRoundBands","y","log","range","linear","minMax","getMinMax","domain","map","d","name","min","max","groupNames","xGroup","rangeBand","isFunction","call","dataCfg","body","selectAll","exit","remove","color","bar","enter","append","attr","bars","style","i","isGroup","group","undefined","y1","y0","Math","abs","updateInteraction","groupNamesOld","newLabel","type","groupType","axis","update","xGroupOld","midGroup","indexOf","transition","duration","lower","upper","d1","floor","toString","split","d2","toFixed","hoverEnable","hover","enable","hoverOptions","selector","selectAllBar","onMouseOverCallback","onMouseOver","onMouseOutCallback","onMouseOut","onClickCallback","click","tooltip","eventFactory","table","show","tr","filter","selectedItem","scroll","select","offsetTop","getLightenColor","draw","on","eventType","eventName","updateConfig","title","legend","updateInteractionForBarChart","key","value","set","newData","newDataConfig","newCfg","isEmpty","plain","keys","updateDataConfig","_groupType","arg","_xGroup","Chart","id","template","fadeIn","fadeOut","onMouseMove","text","position","fontSize","size","fontColor","fontWeight","space","backgroundColor","format","container","headings","serial","file","url","time","tick","rotate","count","padding","values","hours","interval","label","grid","subchart","_options","initConfig","merge","svg","shadeColor","dataConfig","_container","_id","_width","_height","_actualWidth","_actualHeight","_colorRange","err","_margin","_dataOption","_svg","_body","_hover","_click","_dataTarget","_dataSource","_eventFactory","_x","_y","_chartType","_title","_axis","_legend","_table","_tooltip","each","loopable","reverse","len","isArray","Object","setValue","setPrefix","constPrefix","Util","isObject","object","array","Array","prototype","func","target","source","obj3","attrname","get","_key","_data","_keys","_current","_value","_context","_handle","arr","sum","reduce","a","b","guid","replace","c","r","random","v","_temp","_min","_max","forEach","s","push","_newMin","_newMax","dateParser","parse","dateFormatter","p","from","to","convertColorToHex","sbcRip","l","RGB","slice","parseFloat","parseInt","round","h","f","t","element","difference","scrollTop","perTick","setTimeout","colour","colours","toLowerCase","assign","Axis","chart","_chart","isLogaricVariant","xScale","starting","ending","xAxis","orient","tickFormat","ticks","tickPadding","tickValues","yAxis","innerTickSize","outerTickSize","textAnchor","angle","sin","PI","textDx","textY","_xAxis","_yAxis","Title","setYLocation","Legend","box","maxWidth","maxHeight","item","getSize","getBoundingClientRect","getXY","xy","items","itemHeight","numItemsCol","maxWidthCol","n","pos","preItem","newR","prePos","itemEventFactory","dataSet","totalEnable","updateDomain","subChartX","subChartY","subChartXAxis","updateSubChart","legendSelector","lightenLegendItem","normalizeLegendItem","path","pie","currentData","arc","chartInnerBefore","innerRadius","chartOuterBefore","radius","outerRadius","chartInnerAfter","chartOuterAfter","selectAllPath","attrTween","interpolate","ease","dataBackup","enableSet","enableSetOld","negElement","posElement","e","updateLegendInteraction","_item","_itemEventFactory","_maxWidth","_maxHeight","Table","headTbl","thead","bodyTbl","getTableStyle","tbody","hRows","bRows","valueY","selectAllRow","Tooltip","divOnHover","getTriangleClass","html","getFormatByChartType","getCoordinate","mouseover","mouseout","mousemove","_format","valueX","start","end","offset","getOffset","event","pageX","pageY","elem","window","pageYOffset","clientTop","pageXOffset","scrollLeft","clientLeft","setDefaultFormatByChartType","coor","timeFormat","_groups","_stacks","_timeFormat","_dataRefs","_callback","dataSource","getCsv","getTsv","getText","getJson","getXml","hasFile","executeFile","generateDataTarget","hasPlainData","executePlainData","getDataTargetForBarChart","getDataTargetForLineChart","getDataTargetForPieChart","getDataTargetForDonutChart","getDataTargetForTimelineChart","getDataTargetForMap","groupRefs","index","_dsArray","_stack","_stackItem","_negBase","_posBase","icon","_valueArray","_valueItem","Date","_valueXArray","_valueYArray","_parser","getDataValue","_v","getData","k","csv","tsv","json","xml","querySelectorAll","querySelector","textContent","_file","R","layout","sort","arcs","updateInteractionForDonutPieChart","_pie","_arc","_currentData","point","fill","stroke","opacity","area","line","bisectDate","bisector","isTimeDomain","console","lineGen","areaGen","paddingX","paddingY","hoverLine","hoverCircle","valueXArray","valueYArray","extent","xDomain","yDomain","areaContainer","pathContainer","getLineStyle","pointContainer","_d","chartBox","node","getBBox","actualWidth","actualHeight","subChartWidth","subChartHeight","subChartMargin","_isTimeDomain","brush","empty","subChartAreaGen","subChart","subChartAreaContainer","selectRectLayer","onMouseMoveCallback","selectAllCircle","circle","mouse","mouseX","mouseY","curValueX","invert","sameTimeArr","sameTimeValueArr","idx","d0","checkBoundary","bound","checkWidth","updateOverlay","updateHoverLine","updateInteractionForLineChart","_bisectDate","_hoverLine","_subChartX","_subChartY","_subChartWidth","_subChartHeight","_subChartMargin","_subChartXAxis","_brush","_subChartAreaGen","_lineGen","_areaGen","separatorColor","stack","itemMargin","labelMargin","striped","maxStack","stackList","minTime","maxTime","datum","labelContainer","barYAxis","bgContainer","insert","itemContainer","document","createElementNS","ns","prefix","getXPos","getStackPosition","lineYAxis","rowsDown","selectAllRect","_maxStack","_stackList","layers","view","lat","lon","zoom","initMapConfig","c9Layers","c9Objs","ol","Vector","c9GeojsonObjs","initLayer","popup","createElement","className","appendChild","c9View","View","center","proj","fromLonLat","minZoom","c9Map","interactions","interaction","defaults","doubleClickZoom","c9ObjsLayer","layer","c9Popup","Overlay","positioning","getElementById","addOverlay","c9CustomHover","Style","Stroke","Fill","setSource","setupSource","containFeature","vs","getSource","getFeatures","readFormat","feature","result","getKeys","getProperties","getId","setStyle","obj","once","getState","objs","o","condition","j","createLayer","BingMaps","imagerySet","Stamen","TileJSON","crossOrigin","TileArcGISRest","extractStyles","Cluster","distance","ImageVector","OSM","LEFT_KEY","RIGHT_KEY","DEL_KEY","DURATION","LOAD_MAP_DELAY","getCenterLonLat","transform","getCenter","getGeometry","getExtent","transformCoordinates","panAnimation","pan","animation","beforeRender","setCenter","createMarkerEffect","getTime","listenerKey","animate","vectorContext","frameState","flashGeom","clone","elapsed","elapsedRatio","easing","easeOut","image","Circle","snapToPixel","drawGeometry","Observable","unByKey","render","distanceAndDirection","fCoordinates","sqrt","pow","formatPopup","capitalizeFirstLetter","string","charAt","toUpperCase","strongSpan","strong","span","evt","forEachFeatureAtPixel","pixel","lastHoveredObj","removeFeature","fStyle","strokeColor","strokeWidth","fillColor","getStroke","getColor","getWidth","getFill","newStyle","addFeature","getTargetElement","cursor","getElement","display","content","trim","innerHTML","setPosition","coordinate","lastSelectedObj","addEventListener","keydownAnimate","selectedFeature","minDistance","Infinity","checkAnimate","keyCode","createMarker","DEFAULT_SRC","DEFAULT_SCALE","imgSrc","marker","Feature","geometry","geom","Point","createMarkerStyle","Icon","anchor","src","coorAndType","normalizeCoordinate","Polygon","LineString","MultiPolygon","createObjStyle","objStyle","normCoor","error","isNaN","isArrayOrObject","check","pc","createObj","concat","eventFactoryViewport","getEventPixel","getViewport","includes","alpha","currentColor","newColor"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;ACrCA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAGA;;;;AAGA;;;;AACA;;;;AAGA;;;;;;AARA;AAUAA,QAAOC,OAAP,GAAiB;AAChBC,uBADgB;AAEhBC,yBAFgB;AAGhBC,wBAHgB;AAIhBC,uBAJgB;AAKhBC,wBALgB;;AAOhBC,mBAPgB;;AAShBC,2BATgB;AAUhBC;AAVgB,EAAjB;;AAHA;;;AAJA;AAVA,kB;;;;;;;;;;;;;;;;ACAA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;;;;;;;;;KAEqBP,Q;;;AACjB,uBAAYQ,OAAZ,EAAqB;AAAA;;AAAA,yHACXA,OADW;;AAGjB,aAAIC,YAAJ;;AAEA;AACA;AACA;AACA;;AAEAA,cAAKC,MAAL,GAAc;AACV;AACAC,wBAAW;AAFD,UAAd;;AAKA;AAfiB;AAgBpB;;AAED;;;AAGA;AACA;AACA;;;;;AAmDA;;AAEA;;;AAGA;;;sCAGaD,M,EAAQE,Q,EAAS;AAC1B,8HAAmBF,MAAnB;;AAEA,iBAAID,OAAQ,IAAZ;;AAEAA,kBAAKD,OAAL,GAAe,aAAOK,SAAP,CAAiBH,MAAjB,EAAyBD,KAAKD,OAA9B,CAAf;;AAEAC,kBAAKK,SAAL,GAAsB,KAAtB;;AAEA,iBAAIC,aAAsBN,KAAKM,UAA/B;AACAA,wBAAWC,UAAX,GAA0BP,KAAKO,UAA/B;;AAEA;AACA,iBAAIC,KAAK,iBAAgBF,UAAhB,EAA4BN,KAAKK,SAAjC,EAA4C,IAA5C,CAAT;AACAG,gBAAGC,aAAH,CAAiBT,KAAKK,SAAtB,EAAiC,UAASK,IAAT,EAAe;AAC5CV,sBAAKW,UAAL,GAAkBD,IAAlB;;AAEA,qBAAIE,eAAeJ,GAAGK,sBAAH,EAAnB;AACA,qBAAID,gBAAgB,QAApB,EAA8B;AAC1BZ,0BAAKc,WAAL,GAAsBN,GAAGO,MAAH,CAAUC,MAAV,GAAmB,CAAnB,GAAuBR,GAAGO,MAA1B,GAAmCP,GAAGS,MAA5D,CAD0B,CAC2C;AACrEjB,0BAAKkB,QAAL,GAAsBN,gBAAgB,OAAtC;AACH;;AAED,qBAAIO,QAAenB,KAAKmB,KAAL,GAAanB,KAAKoB,MAAL,CAAYC,IAAzB,GAAgCrB,KAAKoB,MAAL,CAAYE,KAA/D;AAAA,qBACIC,SAAevB,KAAKuB,MAAL,GAAcvB,KAAKoB,MAAL,CAAYI,GAA1B,GAAgCxB,KAAKoB,MAAL,CAAYK,MAD/D;;AAGA;AACA,qBAAIC,IAAIC,GAAGC,KAAH,CAASC,OAAT,GAAmBC,eAAnB,CAAmC,CAAC,CAAD,EAAIX,KAAJ,CAAnC,EAA+C,EAA/C,CAAR;AAAA,qBACIY,IAAI/B,KAAKD,OAAL,CAAaG,SAAb,GAAyByB,GAAGC,KAAH,CAASI,GAAT,GAAeC,KAAf,CAAqB,CAACV,MAAD,EAAS,CAAT,CAArB,CAAzB,GAA6DI,GAAGC,KAAH,CAASM,MAAT,GAAkBD,KAAlB,CAAwB,CAACV,MAAD,EAAS,CAAT,CAAxB,CADrE;;AAGA,qBAAIY,SAAS,aAAOC,SAAP,CAAiBpC,KAAKW,UAAtB,EAAkCC,YAAlC,EAAgDZ,KAAKD,OAAL,CAAaG,SAA7D,CAAb;;AAEAwB,mBAAEW,MAAF,CAASrC,KAAKW,UAAL,CAAgB2B,GAAhB,CAAoB,UAASC,CAAT,EAAY;AACrC,4BAAOA,EAAE,CAAF,EAAKC,IAAZ;AACH,kBAFQ,CAAT;;AAIAT,mBAAEM,MAAF,CAAS,CAACF,OAAOM,GAAR,EAAaN,OAAOO,GAApB,CAAT;;AAEA;AACA,qBAAI1C,KAAK2C,UAAT,EAAqB;AACjB3C,0BAAK4C,MAAL,GAAcjB,GAAGC,KAAH,CAASC,OAAT,EAAd;AACA7B,0BAAK4C,MAAL,CAAYP,MAAZ,CAAmBrC,KAAK2C,UAAxB,EAAoCb,eAApC,CAAoD,CAAC,CAAD,EAAIJ,EAAEmB,SAAF,EAAJ,CAApD;AACH;;AAED;;AAEA;AACA;AACA7C,sBAAK0B,CAAL,GAAsBA,CAAtB;AACA1B,sBAAK+B,CAAL,GAAsBA,CAAtB;;AAEA,qBAAI,aAAOe,UAAP,CAAkB3C,QAAlB,CAAJ,EAAiC;AAC7BA,8BAAS4C,IAAT,CAAc/C,IAAd,EAAoBA,KAAKW,UAAzB;AACH;AACJ,cAxCD;;AA2CA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACH;;AAED;;;;;;;;0CAKiBqC,O,EAAS7C,Q,EAAS;AAC/B,iBAAIH,OAAQ,IAAZ;;AAEAA,kBAAKD,OAAL,GAAe,aAAOK,SAAP,CAAiBJ,KAAKD,OAAtB,EAA+BiD,OAA/B,CAAf;;AAEA,iBAAI1C,aAAsBN,KAAKM,UAA/B;AACAA,wBAAWC,UAAX,GAA0BP,KAAKO,UAA/B;;AAEA,iBAAIC,KAAK,iBAAgBF,UAAhB,EAA4BN,KAAKK,SAAjC,EAA4C,IAA5C,CAAT;AACAG,gBAAGC,aAAH,CAAiBT,KAAKK,SAAtB,EAAiC,UAASK,IAAT,EAAe;AAC5CV,sBAAKW,UAAL,GAAkBD,IAAlB;;AAEA,qBAAIE,eAAeJ,GAAGK,sBAAH,EAAnB;AACA,qBAAID,gBAAgB,QAApB,EAA8B;AAC1BZ,0BAAKc,WAAL,GAAsBN,GAAGO,MAAH,CAAUC,MAAV,GAAmB,CAAnB,GAAuBR,GAAGO,MAA1B,GAAmCP,GAAGS,MAA5D,CAD0B,CAC2C;AACrEjB,0BAAKkB,QAAL,GAAsBN,gBAAgB,OAAtC;AACH;;AAED,qBAAIO,QAAenB,KAAKmB,KAAL,GAAanB,KAAKoB,MAAL,CAAYC,IAAzB,GAAgCrB,KAAKoB,MAAL,CAAYE,KAA/D;AAAA,qBACIC,SAAevB,KAAKuB,MAAL,GAAcvB,KAAKoB,MAAL,CAAYI,GAA1B,GAAgCxB,KAAKoB,MAAL,CAAYK,MAD/D;;AAGA;AACA,qBAAIC,IAAIC,GAAGC,KAAH,CAASC,OAAT,GAAmBC,eAAnB,CAAmC,CAAC,CAAD,EAAIX,KAAJ,CAAnC,EAA+C,EAA/C,CAAR;AAAA,qBACIY,IAAI/B,KAAKD,OAAL,CAAaG,SAAb,GAAyByB,GAAGC,KAAH,CAASI,GAAT,GAAeC,KAAf,CAAqB,CAACV,MAAD,EAAS,CAAT,CAArB,CAAzB,GAA6DI,GAAGC,KAAH,CAASM,MAAT,GAAkBD,KAAlB,CAAwB,CAACV,MAAD,EAAS,CAAT,CAAxB,CADrE;;AAGA,qBAAIY,SAAS,aAAOC,SAAP,CAAiBpC,KAAKW,UAAtB,EAAkCC,YAAlC,EAAgDZ,KAAKD,OAAL,CAAaG,SAA7D,CAAb;;AAEAwB,mBAAEW,MAAF,CAASrC,KAAKW,UAAL,CAAgB2B,GAAhB,CAAoB,UAASC,CAAT,EAAY;AACrC,4BAAOA,EAAE,CAAF,EAAKC,IAAZ;AACH,kBAFQ,CAAT;;AAIAT,mBAAEM,MAAF,CAAS,CAACF,OAAOM,GAAR,EAAaN,OAAOO,GAApB,CAAT;;AAEA;AACA,qBAAI1C,KAAK2C,UAAT,EAAqB;AACjB3C,0BAAK4C,MAAL,GAAcjB,GAAGC,KAAH,CAASC,OAAT,EAAd;AACA7B,0BAAK4C,MAAL,CAAYP,MAAZ,CAAmBrC,KAAK2C,UAAxB,EAAoCb,eAApC,CAAoD,CAAC,CAAD,EAAIJ,EAAEmB,SAAF,EAAJ,CAApD;AACH;;AAED;;AAEA;AACA;AACA7C,sBAAK0B,CAAL,GAAsBA,CAAtB;AACA1B,sBAAK+B,CAAL,GAAsBA,CAAtB;;AAEA,qBAAI,aAAOe,UAAP,CAAkB3C,QAAlB,CAAJ,EAAiC;AAC7BA,8BAAS4C,IAAT,CAAc/C,IAAd,EAAoBA,KAAKW,UAAzB;AACH;AACJ,cAxCD;AA0CH;;AAED;;;;;;;gCAIOD,I,EAAM;AACT,iBAAIV,OAAO,IAAX;;AAEAA,kBAAKiD,IAAL,CAAUC,SAAV,CAAoB,8BAApB,EAAoDxC,IAApD,CAAyD,EAAzD,EAA6DyC,IAA7D,GAAoEC,MAApE;AACApD,kBAAKiD,IAAL,CAAUC,SAAV,CAAoB,6BAApB,EAAmDxC,IAAnD,CAAwD,EAAxD,EAA4DyC,IAA5D,GAAmEC,MAAnE;;AAEA,iBAAIC,QAAQrD,KAAKO,UAAjB;AAAA,iBACImB,IAAQ1B,KAAK0B,CADjB;AAAA,iBAEIK,IAAQ/B,KAAK+B,CAFjB;AAAA,iBAGIa,SAAQ5C,KAAK4C,MAHjB;;AAKA,iBAAIU,MAAMtD,KAAKiD,IAAL,CACGC,SADH,CACa,6BADb,EAEGxC,IAFH,CAEQA,IAFR,EAGG6C,KAHH,GAIOC,MAJP,CAIc,GAJd,EAKOC,IALP,CAKY,OALZ,EAKqB,4BALrB,EAMOA,IANP,CAMY,WANZ,EAMyB,UAASlB,CAAT,EAAY;AAAE,wBAAO,eAAeb,EAAEa,EAAE,CAAF,EAAKC,IAAP,CAAf,GAA8B,KAArC;AAA6C,cANpF,CAAV;;AAQA,iBAAIkB,OAAOJ,IAAIJ,SAAJ,CAAc,8BAAd,EACNxC,IADM,CACD,UAAS6B,CAAT,EAAY;AAAE,wBAAOA,CAAP;AAAW,cADxB,CAAX;;AAGAmB,kBAAKH,KAAL,GACKC,MADL,CACY,MADZ,EAEKC,IAFL,CAEU,OAFV,EAEmB,6BAFnB,EAGKE,KAHL,CAGW,MAHX,EAGmB,UAAUpB,CAAV,EAAaqB,CAAb,EAAgB;AAAE,wBAAOrB,EAAEc,KAAF,IAAWA,MAAMO,CAAN,CAAlB;AAA6B,cAHlE,EAIKH,IAJL,CAIU,GAJV,EAIe,UAASlB,CAAT,EAAY;AAAE,wBAAOvC,KAAK6D,OAAL,GAAejB,OAAOL,EAAEuB,KAAT,CAAf,GAAiCC,SAAxC;AAAoD,cAJjF,EAKKN,IALL,CAKU,GALV,EAKe,UAASlB,CAAT,EAAY;AAAE,wBAAOR,EAAEQ,EAAEyB,EAAJ,CAAP;AAAiB,cAL9C,EAMKP,IANL,CAMU,OANV,EAMmB,UAASlB,CAAT,EAAY;AAAE,wBAAOvC,KAAK6D,OAAL,GAAejB,OAAOC,SAAP,EAAf,GAAoCnB,EAAEmB,SAAF,EAA3C;AAA2D,cAN5F,EAOKY,IAPL,CAOU,QAPV,EAOoB,UAASlB,CAAT,EAAY;AAAE,wBAAOvC,KAAKD,OAAL,CAAaG,SAAb,GAAyB6B,EAAEA,EAAEM,MAAF,GAAW,CAAX,CAAF,IAAmBN,EAAEQ,EAAE0B,EAAJ,CAA5C,GAAsDlC,EAAE,CAAF,IAAOA,EAAEmC,KAAKC,GAAL,CAAS5B,EAAE0B,EAAX,CAAF,CAApE;AAAwF,cAP1H;;AASAjE,kBAAKoE,iBAAL;AACH;;AAED;;;;;;;;;;iDAOwB1D,I,EAAMiC,U,EAAY0B,a,EAAeC,Q,EAAS;AAC9D,iBAAItE,OAAO,IAAX;AACA,iBAAIuE,OAAOvE,KAAKwE,SAAhB;;AAEA,iBAAIzC,IAAI/B,KAAK+B,CAAb;AACA,iBAAII,SAAS,aAAOC,SAAP,CAAiB1B,IAAjB,EAAuBV,KAAK6D,OAAL,IAAgB,KAAhB,GAAwB,OAAxB,GAAkC,IAAzD,EAA+D7D,KAAKD,OAAL,CAAaG,SAA5E,CAAb;AACA6B,eAAEM,MAAF,CAAS,CAACF,OAAOM,GAAR,EAAaN,OAAOO,GAApB,CAAT;AACA1C,kBAAKyE,IAAL,CAAUC,MAAV,CAAiB,IAAjB,EAAuB3C,CAAvB,EAA0B,GAA1B;;AAEA,iBAAIa,SAASjB,GAAGC,KAAH,CAASC,OAAT,EAAb;AACAe,oBAAOP,MAAP,CAAcM,UAAd,EAA0Bb,eAA1B,CAA0C,CAAC,CAAD,EAAI9B,KAAK0B,CAAL,CAAOmB,SAAP,EAAJ,CAA1C;;AAEA,iBAAI8B,YAAYhD,GAAGC,KAAH,CAASC,OAAT,EAAhB;AACA8C,uBAAUtC,MAAV,CAAiBgC,aAAjB,EAAgCvC,eAAhC,CAAgD,CAAC,CAAD,EAAI9B,KAAK0B,CAAL,CAAOmB,SAAP,EAAJ,CAAhD;;AAEA,iBAAI+B,WAAWb,SAAf;AACA;AACA,iBAAIpB,WAAW3B,MAAX,GAAoBqD,cAAcrD,MAAlC,IAA4C,IAAI2B,WAAWkC,OAAX,CAAmBP,QAAnB,CAAhD,IAAgF3B,WAAWkC,OAAX,CAAmBP,QAAnB,IAA+B3B,WAAW3B,MAAX,GAAoB,CAAvI,EACI4D,WAAWP,cAAc1B,WAAWkC,OAAX,CAAmBP,QAAnB,CAAd,CAAX;;AAEJ;AACAtE,kBAAKiD,IAAL,CAAUC,SAAV,CAAoB,8BAApB,EAAoDxC,IAApD,CAAyD,EAAzD,EAA6DyC,IAA7D,GAAoEC,MAApE;AACApD,kBAAKiD,IAAL,CAAUC,SAAV,CAAoB,6BAApB,EAAmDxC,IAAnD,CAAwD,EAAxD,EAA4DyC,IAA5D,GAAmEC,MAAnE;;AAEA,iBAAIE,MAAMtD,KAAKiD,IAAL,CACGC,SADH,CACa,6BADb,EAEGxC,IAFH,CAEQA,IAFR,EAGG6C,KAHH,GAIGC,MAJH,CAIU,GAJV,EAKGC,IALH,CAKQ,OALR,EAKiB,4BALjB,EAMGA,IANH,CAMQ,WANR,EAMqB,UAAUlB,CAAV,EAAaqB,CAAb,EAAgB;AAAE,wBAAO,eAAe5D,KAAK0B,CAAL,CAAO1B,KAAKW,UAAL,CAAgBiD,CAAhB,EAAmB,CAAnB,EAAsBpB,IAA7B,CAAf,GAAoD,KAA3D;AAAmE,cAN1G,CAAV;;AAQA,iBAAIkB,OAAOJ,IAAIJ,SAAJ,CAAc,iBAAd,EACNxC,IADM,CACD,UAAS6B,CAAT,EAAY;AAAE,wBAAOA,CAAP;AAAW,cADxB,CAAX;;AAGAmB,kBAAKH,KAAL,GACKC,MADL,CACY,MADZ,EAEKC,IAFL,CAEU,OAFV,EAEmB,6BAFnB,EAGKE,KAHL,CAGW,MAHX,EAGmB,UAASpB,CAAT,EAAY;AAAE,wBAAOA,EAAEc,KAAT;AAAiB,cAHlD,EAIKI,IAJL,CAIU,GAJV,EAIe,UAASlB,CAAT,EAAY;AACnB;AACA,qBAAI,CAACvC,KAAK6D,OAAV,EAAmB,OAAOE,SAAP;AACnB;AACA;AACA,qBAAIpB,WAAW3B,MAAX,GAAoBqD,cAAcrD,MAAlC,IAA4CuB,EAAEuB,KAAF,IAAWQ,QAAvD,IAAmE3B,WAAWkC,OAAX,CAAmBP,QAAnB,KAAgC3B,WAAW3B,MAAX,GAAoB,CAA3H,EACI,OAAOhB,KAAK0B,CAAL,CAAOmB,SAAP,EAAP;AACJ,wBAAO+B,WAAWrC,EAAEuB,KAAF,IAAWQ,QAAX,GAAsBK,UAAUC,QAAV,CAAtB,GAA4CD,UAAUpC,EAAEuB,KAAZ,CAAvD,GAA4Ea,UAAUpC,EAAEuB,KAAZ,CAAnF;AACH,cAZL,EAaKL,IAbL,CAaU,GAbV,EAae,UAASlB,CAAT,EAAY;AAAE,wBAAOvC,KAAK6D,OAAL,GAAe9B,EAAEQ,EAAEyB,EAAJ,CAAf,GAAyBhE,KAAKD,OAAL,CAAaG,SAAb,GAAyB6B,EAAEA,EAAEM,MAAF,GAAW,CAAX,CAAF,CAAzB,GAA4CN,EAAE,CAAF,CAA5E;AAAmF,cAbhH,EAcK0B,IAdL,CAcU,OAdV,EAcmB,UAASlB,CAAT,EAAY;AACvB,wBAAO,CAACvC,KAAK6D,OAAN,GAAgB7D,KAAK0B,CAAL,CAAOmB,SAAP,EAAhB,GAAqCN,EAAEuB,KAAF,IAAWQ,QAAX,GAAsB,CAAtB,GAA0BK,UAAU9B,SAAV,EAAtE;AACH,cAhBL,EAiBKY,IAjBL,CAiBU,QAjBV,EAiBoB,UAASlB,CAAT,EAAY;AAAE,wBAAOvC,KAAKD,OAAL,CAAaG,SAAb,GAAyB6B,EAAEA,EAAEM,MAAF,GAAW,CAAX,CAAF,IAAmBN,EAAEQ,EAAE0B,EAAJ,CAA5C,GAAsDjE,KAAK6D,OAAL,GAAe9B,EAAE,CAAF,IAAOA,EAAEmC,KAAKC,GAAL,CAAS5B,EAAE0B,EAAX,CAAF,CAAtB,GAA0C,CAAvG;AAA2G,cAjB7I;;AAmBAP,kBAAKoB,UAAL,GAAkBC,QAAlB,CAA2B,GAA3B,EACKtB,IADL,CACU,GADV,EACe,UAASlB,CAAT,EAAY;AAAE,wBAAO,CAACvC,KAAK6D,OAAN,GAAgBE,SAAhB,GAA4BnB,OAAOL,EAAEuB,KAAT,CAAnC;AAAqD,cADlF,EAEKL,IAFL,CAEU,OAFV,EAEmB,UAASlB,CAAT,EAAY;AAAE,wBAAO,CAACvC,KAAK6D,OAAN,GAAgB7D,KAAK0B,CAAL,CAAOmB,SAAP,EAAhB,GAAqCD,OAAOC,SAAP,EAA5C;AAAiE,cAFlG,EAGKY,IAHL,CAGU,GAHV,EAGe,UAASlB,CAAT,EAAY;AAAE,wBAAOR,EAAEQ,EAAEyB,EAAJ,CAAP;AAAiB,cAH9C,EAIKP,IAJL,CAIU,QAJV,EAIoB,UAASlB,CAAT,EAAY;AAAE,wBAAOvC,KAAKD,OAAL,CAAaG,SAAb,GAAyB6B,EAAEA,EAAEM,MAAF,GAAW,CAAX,CAAF,IAAmBN,EAAEQ,EAAE0B,EAAJ,CAA5C,GAAsDlC,EAAE,CAAF,IAAOA,EAAEmC,KAAKC,GAAL,CAAS5B,EAAE0B,EAAX,CAAF,CAApE;AAAwF,cAJ1H;;AAMAjE,kBAAKoE,iBAAL;AACH;;AAED;;;;;;;;;uCAMcY,K,EAAOC,K,EAAO;AACxB,iBAAIC,KAAKhB,KAAKiB,KAAL,CAAWH,KAAX,MAAsBA,KAAtB,GAA8B,CAA9B,GAAkCA,MAAMI,QAAN,GAAiBC,KAAjB,CAAuB,GAAvB,EAA4B,CAA5B,EAA+BrE,MAA1E;AACA,iBAAIsE,KAAKpB,KAAKiB,KAAL,CAAWF,KAAX,MAAsBA,KAAtB,GAA8B,CAA9B,GAAkCA,MAAMG,QAAN,GAAiBC,KAAjB,CAAuB,GAAvB,EAA4B,CAA5B,EAA+BrE,MAA1E;AACA,oBAAOkE,KAAKI,EAAL,GAAU,CAACL,QAAQD,KAAT,EAAgBO,OAAhB,CAAwBL,EAAxB,CAAV,GAAwC,CAACD,QAAQD,KAAT,EAAgBO,OAAhB,CAAwBD,EAAxB,CAA/C;AACH;;AAED;;;;;;wCAGe;AACX,iBAAItF,OAAO,IAAX;;AAEA,oBAAOA,KAAKiD,IAAL,CAAUC,SAAV,CAAoB,iBAApB,CAAP;AACH;;AAED;;;;;;6CAGoB;AAChB,iBAAIlD,OAAO,IAAX;AAAA,iBACIwF,cAAkBxF,KAAKyF,KAAL,CAAWC,MADjC;AAAA,iBAEIC,eAAkB3F,KAAKyF,KAAL,CAAW1F,OAFjC;AAAA,iBAGI6F,WAAkB5F,KAAK6F,YAAL,EAHtB;AAAA,iBAIIC,sBAAsBH,aAAaI,WAAb,CAAyB5F,QAJnD;AAAA,iBAKI6F,qBAAsBL,aAAaM,UAAb,CAAwB9F,QALlD;AAAA,iBAMI+F,kBAAmBlG,KAAKmG,KAAL,CAAWhG,QANlC;;AAQA,iBAAIiG,UAAU,iBAAYpG,KAAKD,OAAL,CAAaqG,OAAzB,CAAd;;AAEA;AACApG,kBAAKqG,YAAL,GAAoB;AAChB,0BAAS,eAAS9D,CAAT,EAAY;AACjB,yBAAI,aAAOO,UAAP,CAAkBoD,eAAlB,CAAJ,EAAwC;AACpCA,yCAAgBnD,IAAhB,CAAqB,IAArB,EAA2BR,CAA3B;AACH;AACJ,kBALe;AAMhB,8BAAa,mBAASA,CAAT,EAAY;AACrB,yBAAI,CAACiD,WAAL,EAAkB;;AAElB,yBAAI,aAAO1C,UAAP,CAAkBgD,mBAAlB,CAAJ,EAA4C;AACxCA,6CAAoB/C,IAApB,CAAyB,IAAzB,EAA+BR,CAA/B;AACH;;AAED;AACA,yBAAIvC,KAAKD,OAAL,CAAauG,KAAb,CAAmBC,IAAvB,EAA6B;AACzB,6BAAIC,KAAK7E,GAAGuB,SAAH,CAAa,uCAAb,CAAT;AACAsD,4BAAGC,MAAH,CAAU,UAAS7C,CAAT,EAAY;AAAE,oCAAOA,EAAE,UAAF,KAAiBrB,EAAE,UAAF,CAAxB;AAAuC,0BAA/D,EAAiEW,SAAjE,CAA2E,IAA3E,EAAiFS,KAAjF,CAAuF,SAAvF,EAAkG,KAAlG;AACA,6BAAI+C,eAAeF,GAAGC,MAAH,CAAU,UAAS7C,CAAT,EAAY;AAAE,oCAAOA,EAAE,UAAF,KAAiBrB,EAAE,UAAF,CAAxB;AAAuC,0BAA/D,CAAnB;AACA;AACAmE,sCAAaxD,SAAb,CAAuB,IAAvB,EAA6BS,KAA7B,CAAmC,SAAnC,EAA8C,GAA9C;AACA,sCAAOgD,MAAP,CAAchF,GAAGiF,MAAH,CAAU,qBAAV,EAAiC,CAAjC,EAAoC,CAApC,CAAd,EAAsDF,aAAa,CAAb,EAAgB,CAAhB,EAAmBG,SAAzE,EAAoF,GAApF;AACH;;AAEDlF,wBAAGiF,MAAH,CAAU,IAAV,EAAgBjD,KAAhB,CAAsB,MAAtB,EAA8B,UAAUpB,CAAV,EAAaqB,CAAb,EAAgB;AAAE,gCAAO5D,KAAK8G,eAAL,CAAqBvE,EAAEc,KAAF,IAAWA,MAAMO,CAAN,CAAhC,CAAP;AAAmD,sBAAnG;;AAEAwC,6BAAQW,IAAR,CAAaxE,CAAb,EAAgBvC,IAAhB,EAAsB,WAAtB;AACH,kBA1Be;AA2BhB,6BAAY,kBAASuC,CAAT,EAAY;AACpB,yBAAI,CAACiD,WAAL,EAAkB;;AAElB,yBAAI,aAAO1C,UAAP,CAAkBkD,kBAAlB,CAAJ,EAA2C;AACvCA,4CAAmBjD,IAAnB,CAAwB,IAAxB,EAA8BR,CAA9B;AACH;;AAED;AACA,yBAAIvC,KAAKD,OAAL,CAAauG,KAAb,CAAmBC,IAAvB,EACI5E,GAAGuB,SAAH,CAAa,uCAAb,EAAsDA,SAAtD,CAAgE,IAAhE,EAAsES,KAAtE,CAA4E,SAA5E,EAAuF,EAAvF;;AAEJhC,wBAAGiF,MAAH,CAAU,IAAV,EAAgBjD,KAAhB,CAAsB,MAAtB,EAA8B,UAAUpB,CAAV,EAAaqB,CAAb,EAAgB;AAAE,gCAAOrB,EAAEc,KAAF,IAAWA,MAAMO,CAAN,CAAlB;AAA6B,sBAA7E;;AAEAwC,6BAAQW,IAAR,CAAaxE,CAAb,EAAgBvC,IAAhB,EAAsB,UAAtB;AACH;AAzCe,cAApB;;AA4CA4F,sBAASoB,EAAT,CAAYhH,KAAKqG,YAAjB;AACH;;AAED;;AAEA;;;;AAKA;;;;;;;;4BAKGY,S,EAAW9G,Q,EAAU;AACpB,oHAAS8G,SAAT,EAAoB9G,QAApB;;AAEA,iBAAIH,OAAO,IAAX;AACA,iBAAI4F,WAAc5F,KAAK6F,YAAL,EAAlB;;AAEA;AACA,iBAAIQ,eAAe;AACf,gCAAe,oBAAS9D,CAAT,EAAY;AACvB,yBAAI,aAAOO,UAAP,CAAkB3C,QAAlB,CAAJ,EAAiC;AAC7BA,kCAAS4C,IAAT,CAAc,IAAd,EAAoBR,CAApB;AACH;AACJ,kBALc;AAMf,oCAAmB,wBAASA,CAAT,EAAY;AAC3B,yBAAI,aAAOO,UAAP,CAAkB3C,QAAlB,CAAJ,EAAiC;AAC7BA,kCAAS4C,IAAT,CAAc,IAAd,EAAoBR,CAApB;AACH;AACJ,kBAVc;AAWf,mCAAkB,uBAASA,CAAT,EAAY;AAC1B,yBAAI,aAAOO,UAAP,CAAkB3C,QAAlB,CAAJ,EAAiC;AAC7BA,kCAAS4C,IAAT,CAAc,IAAd,EAAoBR,CAApB;AACH;AACJ;AAfc,cAAnB;;AAkBA,iBAAI2E,YAAYD,YAAY,QAA5B;;AAEArB,sBAASoB,EAAT,CAAYE,SAAZ,EAAuBb,aAAaa,SAAb,CAAvB;AACH;;AAED;;;;;;;gCAIO;AACH;;AAEA,iBAAIlH,OAAO,IAAX;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACAA,kBAAKmH,YAAL,CAAkBnH,KAAKC,MAAvB,EAA+B,UAASS,IAAT,EAAe;AAC1C,qBAAI+D,OAAU,gBAASzE,KAAKD,OAAL,CAAa0E,IAAtB,EAA4BzE,IAA5B,EAAkCA,KAAKmB,KAAL,GAAanB,KAAKoB,MAAL,CAAYC,IAAzB,GAAgCrB,KAAKoB,MAAL,CAAYE,KAA9E,EAAqFtB,KAAKuB,MAAL,GAAcvB,KAAKoB,MAAL,CAAYI,GAA1B,GAAgCxB,KAAKoB,MAAL,CAAYK,MAAjI,CAAd;AACA,qBAAI2F,QAAU,gBAAUpH,KAAKD,OAAL,CAAaqH,KAAvB,EAA8BpH,IAA9B,CAAd;AACA,qBAAIqH,SAAU,gBAAWrH,KAAKD,OAAL,CAAasH,MAAxB,EAAgCrH,IAAhC,EAAsCA,KAAKW,UAA3C,CAAd;AACA,qBAAI2F,QAAU,iBAAUtG,KAAKD,OAAL,CAAauG,KAAvB,EAA8BtG,IAA9B,EAAoCA,KAAKW,UAAzC,CAAd;AACAX,sBAAKyE,IAAL,GAAYA,IAAZ;AACAzE,sBAAKoH,KAAL,GAAaA,KAAb;AACApH,sBAAKsG,KAAL,GAAaA,KAAb;AACAtG,sBAAKqH,MAAL,GAAcA,MAAd;;AAEA;AACA;;AAEA;AACArH,sBAAKoH,KAAL,CAAWL,IAAX;AACA;AACA/G,sBAAK0E,MAAL,CAAYhE,IAAZ;AACAV,sBAAKoE,iBAAL;;AAEA;AACApE,sBAAKqH,MAAL,CAAYN,IAAZ;AACA/G,sBAAKqH,MAAL,CAAYC,4BAAZ,CAAyCtH,IAAzC;;AAEA;AACAA,sBAAKsG,KAAL,CAAWS,IAAX;AACA/G,sBAAKsG,KAAL,CAAWgB,4BAAX,CAAwCtH,IAAxC;AACH,cA1BD;;AA6BA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACH;;AAED;;;;;;;;mCAKUuH,G,EAAKC,K,EAAO;AAClB,2HAAgBD,GAAhB,EAAqBC,KAArB;;AAEA,iBAAIxH,OAAO,IAAX;;AAEA,0BAAOyH,GAAP,CAAWF,GAAX,EAAgBC,KAAhB,EAAuBxH,KAAKD,OAA5B;;AAEAC,kBAAKmH,YAAL,CAAkBnH,KAAKD,OAAvB;AACH;;AAED;;;;;;;;oCAKW2H,O,EAASC,a,EAAe;AAC/B,iBAAI3H,OAAO,IAAX;;AAEA,iBAAI4H,SAAS,EAAb;;AAEA,iBAAI,CAAC,aAAOC,OAAP,CAAeF,aAAf,CAAL,EAAoC;;AAEhCC,wBAAOlH,IAAP,GAAc;AACVoH,4BAAOJ,OADG;AAEVK,2BAAMJ;AAFI,kBAAd;AAKH,cAPD,MAOO;;AAEHC,wBAAOlH,IAAP,GAAc;AACVoH,4BAAOJ;AADG,kBAAd;AAIH;;AAED;AACA1H,kBAAKgI,gBAAL,CAAsBJ,MAAtB,EAA8B,UAASlH,IAAT,EAAe;AACzCV,sBAAK0E,MAAL,CAAYhE,IAAZ;;AAEA;AACAV,sBAAKyE,IAAL,CAAUC,MAAV,CAAiB1E,KAAK0B,CAAtB,EAAyB1B,KAAK+B,CAA9B,EAAiC,GAAjC;;AAEA;AACA/B,sBAAKqH,MAAL,CAAY3C,MAAZ,CAAmBhE,IAAnB;AACAV,sBAAKqH,MAAL,CAAYC,4BAAZ,CAAyCtH,IAAzC;;AAEA;AACAA,sBAAKsG,KAAL,CAAW5B,MAAX,CAAkBhE,IAAlB;AACH,cAZD;AAcH;AACD;;;;6BAzjBgB;AACZ,oBAAO,KAAKuH,UAAZ;AACH,U;;AAaD;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;2BAEcC,G,EAAK;AACf,iBAAIA,GAAJ,EAAS;AACL,sBAAKD,UAAL,GAAkBC,GAAlB;AACH;AACJ;;;6BA1BY;AACT,oBAAO,KAAKC,OAAZ;AACH,U;2BA0BUD,G,EAAK;AACZ,iBAAIA,GAAJ,EAAS;AACL,sBAAKC,OAAL,GAAeD,GAAf;AACH;AACJ;;;6BA5BgB;AACb,oBAAO,KAAKpH,WAAZ;AACH,U;2BA4BcoH,G,EAAK;AAChB,iBAAIA,GAAJ,EAAS;AACL,sBAAKpH,WAAL,GAAmBoH,GAAnB;AACH;AACJ;;;6BA9Ba;AACV,oBAAO,KAAKhH,QAAZ;AACH,U;2BA8BWgH,G,EAAK;AACb,iBAAIA,GAAJ,EAAS;AACL,sBAAKhH,QAAL,GAAgBgH,GAAhB;AACH;AACJ;;;;;;mBA1EgB3I,Q;;;;;;;;;;;;;;;;ACXrB;;;;;;;;KAEqB6I,K;AACjB,oBAAYrI,OAAZ,EAAqB;AAAA;;AACjB,aAAIC,OAAU,IAAd;AACA,aAAIC,SAAU;AACV;AACAoI,iBAAI,MAFM;AAGV;AACAlH,oBAAO,GAJG;AAKVI,qBAAQ,GALE;AAMVH,qBAAQ;AACJI,sBAAK,GADD;AAEJH,uBAAM,EAFF;AAGJC,wBAAO,EAHH;AAIJG,yBAAQ;AAJJ,cANE;;AAaV;AACAgE,oBAAO;AACHC,yBAAQ,IADL;AAEH3F,0BAAS;AACLuI,+BAAU,EADL;AAELvC,kCAAa;AACTwC,iCAAQ,GADC;AAETpI,mCAAU,kBAASO,IAAT,EAAe;AACrB;AACH;AAJQ,sBAFR;AAQLuF,iCAAY;AACRuC,kCAAS,GADD;AAERrI,mCAAU,kBAASO,IAAT,EAAe;AACrB;AACH;AAJO,sBARP;AAcL+H,kCAAa;AACTtI,mCAAU,kBAASO,IAAT,EAAe;AACrB;AACH;AAHQ;AAdR;AAFN,cAdG;;AAsCVyF,oBAAO;AACHhG,2BAAU,kBAASO,IAAT,EAAe;AACrB;AACH;AAHE,cAtCG;;AA4CV;AACA0G,oBAAO;AACHb,uBAAY,IADT;AAEHmC,uBAAY,cAFT;AAGHC,2BAAY,KAHT;AAIHC,2BAAY;AAJT,cA7CG;;AAoDV;AACAvB,qBAAQ;AACJd,uBAAY,IADR;AAEJoC,2BAAY,KAFR;AAGJE,uBAAY,EAHR;AAIJD,2BAAY,MAJR;AAKJE,4BAAY,MALR;AAMJC,6BAAY,MANR;AAOJ3H,yBAAY,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAPR;AAQJ4H,wBAAY;AARR,cArDE;;AAgEV;AACA5C,sBAAS;AACLG,uBAAM,IADD;AAELoC,2BAAU,OAFL,EAEc;AACnBM,kCAAiB,oBAHZ;AAILH,4BAAW,MAJN;AAKLF,2BAAU,MALL;AAMLM,yBAAQ;AANH,cAjEC;;AA0EV;AACA5C,oBAAO;AACH6C,4BAAW,MADR;AAEH5C,uBAAM,KAFH;AAGH6C,2BAAU,CAAC,MAAD,EAAS,OAAT,CAHP;AAIHzF,wBAAO,QAJJ,EAIc;AACjB0F,yBAAQ,IALL;AAMH5D,wBAAO;AACHC,6BAAQ,IADL;AAEHvF,+BAAU;AAFP,kBANJ;AAUHgG,wBAAO;AACHT,6BAAQ,IADL;AAEHvF,+BAAU;AAFP;AAVJ,cA3EG;;AA2FV;AACAI,yBAAY,YA5FF;;AA8FV;AACAG,mBAAM;AACF;AACAoH,wBAAO,EAFL;AAGFwB,uBAAM;AACF/E,2BAAM,IADJ;AAEFgF,0BAAK;AAFH,kBAHJ;AAOFxB,uBAAM;AACFvF,2BAAM,MADJ;AAEFgF,4BAAO,OAFL;AAGFgC,2BAAM;AAHJ,kBAPJ;AAYFzI,yBAAQ,EAZN;AAaFE,yBAAQ;AAbN,cA/FI;;AA+GVwD,mBAAM;AACF/C,oBAAG;AACC+H,2BAAM;AACFC,iCAAQ,CADN;AAEFC,gCAAO,EAFL;AAGFd,+BAAM,CAHJ;AAIFe,kCAAS,CAJP;AAKFV,iCAAQnF,SALN;AAMF8F,iCAAQ,EANN;AAOF;AACAtF,+BAAM5C,GAAG6H,IAAH,CAAQM,KARZ;AASFC,mCAAU;AATR,sBADP;AAYCC,4BAAO;AACHtB,+BAAM,MADH;AAEHC,mCAAU;AAFP,sBAZR;AAgBCpC,2BAAM,IAhBP;AAiBC0D,2BAAM,KAjBP;AAkBC1F,2BAAM;AAlBP,kBADD;AAqBFxC,oBAAG;AACC0H,2BAAM;AACFC,iCAAQ,CADN;AAEFC,gCAAO,EAFL;AAGFd,+BAAM,CAHJ;AAIFe,kCAAS,CAJP;AAKFV,iCAAQnF,SALN;AAMF8F,iCAAQ;AANN,sBADP;AASCG,4BAAO;AACHtB,+BAAM,OADH;AAEHC,mCAAU;AAFP,sBATR;AAaCpC,2BAAM,IAbP;AAcC0D,2BAAM,IAdP;AAeC1F,2BAAM;AAfP;AArBD,cA/GI;;AAuJV;AACA2F,uBAAU;AACN3D,uBAAM,KADA;AAENhF,yBAAQ;AAFF;AAxJA,UAAd;;AA8JAvB,cAAKmK,QAAL,GAAkBpK,OAAlB;;AAEAC,cAAKoK,UAAL,CAAgBnK,MAAhB;AACH;;AAED;;;;;;;;AAqRA;;AAGA;;;AAGA;;;;oCAIWA,M,EAAQ;AACf,iBAAID,OAAO,IAAX;;AAEAA,kBAAKD,OAAL,GAAe,YAAOK,SAAP,CAAiBH,MAAjB,EAAyBD,KAAKD,OAA9B,CAAf;;AAEA,iBAAIA,UAAUC,KAAKD,OAAnB;;AAEAC,kBAAKqI,EAAL,GAAiBtI,QAAQsI,EAAR,IAAqBpI,OAAOoI,EAA7C;AACArI,kBAAKmB,KAAL,GAAiBpB,QAAQoB,KAAR,IAAqBlB,OAAOkB,KAA7C;AACAnB,kBAAKuB,MAAL,GAAiBxB,QAAQwB,MAAR,IAAqBtB,OAAOsB,MAA7C;AACAvB,kBAAKO,UAAL,GAAiBR,QAAQQ,UAAR,IAAqBN,OAAOM,UAA7C;;AAEAP,kBAAKoB,MAAL,GAAiB,YAAOiJ,KAAP,CAAatK,QAAQqB,MAArB,EAA6BnB,OAAOmB,MAApC,CAAjB;AACApB,kBAAKyF,KAAL,GAAiB,YAAO4E,KAAP,CAAatK,QAAQ0F,KAArB,EAA4BxF,OAAOwF,KAAnC,CAAjB;AACAzF,kBAAKmG,KAAL,GAAiB,YAAOkE,KAAP,CAAatK,QAAQoG,KAArB,EAA4BlG,OAAOkG,KAAnC,CAAjB;;AAEAnG,kBAAKM,UAAL,GAAiB,YAAOF,SAAP,CAAiBH,OAAOS,IAAxB,EAA8BX,QAAQW,IAAtC,CAAjB;;AAEAV,kBAAKD,OAAL,CAAamK,QAAb,GAAyB,YAAOG,KAAP,CAAatK,QAAQmK,QAArB,EAA+BjK,OAAOiK,QAAtC,CAAzB;AACAlK,kBAAKD,OAAL,CAAauG,KAAb,GAAyB,YAAO+D,KAAP,CAAatK,QAAQuG,KAArB,EAA4BrG,OAAOqG,KAAnC,CAAzB;AACAtG,kBAAKD,OAAL,CAAaqG,OAAb,GAAyB,YAAOiE,KAAP,CAAatK,QAAQqG,OAArB,EAA8BnG,OAAOmG,OAArC,CAAzB;AACApG,kBAAKD,OAAL,CAAasH,MAAb,GAAyB,YAAOgD,KAAP,CAAatK,QAAQsH,MAArB,EAA6BpH,OAAOoH,MAApC,CAAzB;AACArH,kBAAKD,OAAL,CAAa0E,IAAb,GAAyB,YAAOrE,SAAP,CAAiBH,OAAOwE,IAAxB,EAA8B1E,QAAQ0E,IAAtC,CAAzB;AACH;;AAED;;;;;;sCAGaxE,M,EAAQ;AACjB,iBAAID,OAAO,IAAX;;AAEAA,kBAAKD,OAAL,GAAe,YAAOK,SAAP,CAAiBH,MAAjB,EAAyBD,KAAKD,OAA9B,CAAf;;AAEA,iBAAIA,UAAUC,KAAKD,OAAnB;;AAEAC,kBAAKqI,EAAL,GAAiBtI,QAAQsI,EAAR,IAAqBpI,OAAOoI,EAA7C;AACArI,kBAAKmB,KAAL,GAAiBpB,QAAQoB,KAAR,IAAqBlB,OAAOkB,KAA7C;AACAnB,kBAAKuB,MAAL,GAAiBxB,QAAQwB,MAAR,IAAqBtB,OAAOsB,MAA7C;AACAvB,kBAAKO,UAAL,GAAiBR,QAAQQ,UAAR,IAAqBN,OAAOM,UAA7C;;AAEAP,kBAAKoB,MAAL,GAAiB,YAAOiJ,KAAP,CAAatK,QAAQqB,MAArB,EAA6BnB,OAAOmB,MAApC,CAAjB;AACApB,kBAAKyF,KAAL,GAAiB,YAAO4E,KAAP,CAAatK,QAAQ0F,KAArB,EAA4BxF,OAAOwF,KAAnC,CAAjB;AACAzF,kBAAKmG,KAAL,GAAiB,YAAOkE,KAAP,CAAatK,QAAQoG,KAArB,EAA4BlG,OAAOkG,KAAnC,CAAjB;;AAEAnG,kBAAKM,UAAL,GAAiB,YAAOF,SAAP,CAAiBH,OAAOS,IAAxB,EAA8BX,QAAQW,IAAtC,CAAjB;;AAEAV,kBAAKD,OAAL,CAAamK,QAAb,GAAyB,YAAOG,KAAP,CAAatK,QAAQmK,QAArB,EAA+BjK,OAAOiK,QAAtC,CAAzB;AACAlK,kBAAKD,OAAL,CAAauG,KAAb,GAAyB,YAAO+D,KAAP,CAAatK,QAAQuG,KAArB,EAA4BrG,OAAOqG,KAAnC,CAAzB;AACAtG,kBAAKD,OAAL,CAAaqG,OAAb,GAAyB,YAAOiE,KAAP,CAAatK,QAAQqG,OAArB,EAA8BnG,OAAOmG,OAArC,CAAzB;AACApG,kBAAKD,OAAL,CAAasH,MAAb,GAAyB,YAAOgD,KAAP,CAAatK,QAAQsH,MAArB,EAA6BpH,OAAOoH,MAApC,CAAzB;AACArH,kBAAKD,OAAL,CAAa0E,IAAb,GAAyB,YAAOrE,SAAP,CAAiBH,OAAOwE,IAAxB,EAA8B1E,QAAQ0E,IAAtC,CAAzB;AACH;;AAED;;;;;;gCAGO;AACH,iBAAIzE,OAAO,IAAX;;AAEA,iBAAIoB,SAAUpB,KAAKoB,MAAnB;AAAA,iBACIiH,KAAUrI,KAAKqI,EADnB;AAAA,iBAEIlH,QAAUnB,KAAKmB,KAAL,GAAaC,OAAOC,IAApB,GAA2BD,OAAOE,KAFhD;AAAA,iBAGIC,SAAUvB,KAAKuB,MAAL,GAAcH,OAAOI,GAArB,GAA2BJ,OAAOK,MAHhD;;AAKAzB,kBAAKmJ,SAAL,GAAiBxH,GAAGiF,MAAH,CAAUyB,EAAV,CAAjB;;AAEA;AACArI,kBAAKmJ,SAAL,CAAejG,SAAf,CAAyB,SAAzB,EAAoCxC,IAApC,CAAyC,EAAzC,EAA6CyC,IAA7C,GAAoDC,MAApD;;AAEApD,kBAAKsK,GAAL,GAAW3I,GAAGiF,MAAH,CAAUyB,EAAV,EACN1E,KADM,CACA,UADA,EACY,UADZ,EAENH,MAFM,CAEC,KAFD,EAGNC,IAHM,CAGD,OAHC,EAGQ,QAHR,EAINA,IAJM,CAID,OAJC,EAIQzD,KAAKmB,KAJb,EAKNsC,IALM,CAKD,QALC,EAKSzD,KAAKuB,MALd,EAMNoC,KANM,CAMA,UANA,EAMY,SANZ,CAAX,CAbG,CAmBgC;;;AAGnC3D,kBAAKsK,GAAL,CAAS9G,MAAT,CAAgB,MAAhB,EACKA,MADL,CACY,UADZ,EAESC,IAFT,CAEc,IAFd,EAEoB,MAFpB,EAGKD,MAHL,CAGY,MAHZ,EAISC,IAJT,CAIc,OAJd,EAIuBtC,KAJvB,EAKSsC,IALT,CAKc,QALd,EAKwBlC,MALxB;;AAOAvB,kBAAKiD,IAAL,GAAYjD,KAAKsK,GAAL,CACC9G,MADD,CACQ,GADR,EAECC,IAFD,CAEM,OAFN,EAEe,8BAFf,EAGCA,IAHD,CAGM,WAHN,EAGmB,eAAerC,OAAOC,IAAtB,GAA6B,GAA7B,GAAmCD,OAAOI,GAA1C,GAAgD,GAHnE,CAAZ;AAKH;;AAED;;;;;;;yCAIgB6B,K,EAAO;AACnB,oBAAO,YAAOkH,UAAP,CAAkB,GAAlB,EAAuBlH,KAAvB,CAAP;AACH;;AAED;;AAEA;;;AAGA;;;;;;;;4BAKG4D,S,EAAW9G,Q,EAAU,CAEvB;;AAED;;;;;;;;mCAKUoH,G,EAAKC,K,EAAO;AAClB,iBAAIxH,OAAO,IAAX;;AAEA,yBAAOyH,GAAP,CAAWF,GAAX,EAAgBC,KAAhB,EAAuBxH,KAAKD,OAA5B;;AAEA;AACA;AACAC,kBAAKmH,YAAL,CAAkBnH,KAAKD,OAAvB;AACH;;AAED;;;;;;;;oCAKWW,I,EAAM8J,U,EAAY,CAE5B;AACD;;;;6BAragB;AACZ,oBAAO,KAAKC,UAAZ;AACH,U;;AAqHD;;AAGA;;;2BAGcvC,G,EAAK;AACf,iBAAIA,GAAJ,EAAS;AACL,sBAAKuC,UAAL,GAAkBvC,GAAlB;AACH;AACJ;;;6BA7HQ;AACL,iBAAI,KAAKwC,GAAL,KAAa,MAAjB,EAAyB;AACrB,wBAAO,MAAM,KAAKA,GAAlB;AACH;AACD,oBAAO,KAAKA,GAAZ;AACH,U;2BA0HMxC,G,EAAK;AACR,iBAAIA,GAAJ,EAAS;AACL,sBAAKwC,GAAL,GAAWxC,GAAX;AACH;AACJ;;;6BA5HW;AACR,oBAAO,KAAKyC,MAAZ;AACH,U;2BA4HSzC,G,EAAK;AACX,iBAAIA,GAAJ,EAAS;AACL,sBAAKyC,MAAL,GAAczC,GAAd;AACH;AACJ;;;6BA9HY;AACT,oBAAO,KAAK0C,OAAZ;AACH,U;2BA8HU1C,G,EAAK;AACZ,iBAAIA,GAAJ,EAAS;AACL,sBAAK0C,OAAL,GAAe1C,GAAf;AACH;AACJ;;;6BAhIiB;AACd,oBAAO,KAAK2C,YAAZ;AACH,U;2BAgIe3C,G,EAAK;AACjB,iBAAIA,GAAJ,EAAS;AACL,sBAAK2C,YAAL,GAAoB3C,GAApB;AACH;AACJ;;;6BAlIkB;AACf,oBAAO,KAAK4C,aAAZ;AACH;;AAED;;;;;2BAgIiB5C,G,EAAK;AAClB,iBAAIA,GAAJ,EAAS;AACL,sBAAK4C,aAAL,GAAqB5C,GAArB;AACH;AACJ;;;6BAhIgB;AACb,iBAAI7E,QAAQ,KAAK0H,WAAjB;;AAEA,iBAAI,OAAO1H,KAAP,IAAgB,QAApB,EAA8B;AAC1B,qBAAI;AACA,4BAAO1B,GAAGC,KAAH,CAASyB,KAAT,GAAP;AACH,kBAFD,CAGA,OAAM2H,GAAN,EAAW;AACP,4BAAO,UAASpH,CAAT,EAAY;AACf,gCAAOP,KAAP;AACH,sBAFD;AAGH;AACJ,cATD,MASO,IAAI,QAAOA,KAAP,yCAAOA,KAAP,MAAgB,QAApB,EAA8B;AACjC,wBAAO1B,GAAGC,KAAH,CAASC,OAAT,GAAmBI,KAAnB,CAAyBoB,KAAzB,CAAP;AACH;AACJ,U;2BAmHc6E,G,EAAK;AAChB,iBAAIA,GAAJ,EAAS;AACL,sBAAK6C,WAAL,GAAmB7C,GAAnB;AACH;AACJ;;;6BArHY;AACT,oBAAO,KAAK+C,OAAZ;AACH,U;2BAqHU/C,G,EAAK;AACZ,iBAAIA,GAAJ,EAAS;AACL,sBAAK+C,OAAL,GAAe/C,GAAf;AACH;AACJ;;;6BAvHgB;AACb,oBAAO,KAAKgD,WAAZ;AACH,U;2BAuHchD,G,EAAK;AAChB,iBAAIA,GAAJ,EAAS;AACL,sBAAKgD,WAAL,GAAmBhD,GAAnB;AACH;AACJ;;;6BAzHS;AACN,oBAAO,KAAKiD,IAAZ;AACH,U;2BAyHOjD,G,EAAK;AACT,iBAAIA,GAAJ,EAAS;AACL,sBAAKiD,IAAL,GAAYjD,GAAZ;AACH;AACJ;;;6BA3HU;AACP,oBAAO,KAAKkD,KAAZ;AACH,U;2BA2HQlD,G,EAAK;AACV,iBAAIA,GAAJ,EAAS;AACL,sBAAKkD,KAAL,GAAalD,GAAb;AACH;AACJ;;;6BA7Ha;AACV,oBAAO,KAAKiC,QAAZ;AACH,U;2BA6HWjC,G,EAAK;AACb,iBAAIA,GAAJ,EAAS;AACL,sBAAKiC,QAAL,GAAgBjC,GAAhB;AACH;AACJ;;;6BA/HW;AACR,oBAAO,KAAKmD,MAAZ;AACH,U;2BA+HSnD,G,EAAK;AACX,iBAAIA,GAAJ,EAAS;AACL,sBAAKmD,MAAL,GAAcnD,GAAd;AACH;AACJ;;;6BAjIW;AACR,oBAAO,KAAKoD,MAAZ;AACH,U;2BAiISpD,G,EAAK;AACX,iBAAIA,GAAJ,EAAS;AACL,sBAAKoD,MAAL,GAAcpD,GAAd;AACH;AACJ;;;6BAnIgB;AACb,oBAAO,KAAKqD,WAAZ;AACH,U;2BAmIcrD,G,EAAK;AAChB,iBAAIA,GAAJ,EAAS;AACL,sBAAKqD,WAAL,GAAmBrD,GAAnB;AACH;AACJ;;;6BArIgB;AACb,oBAAO,KAAKsD,WAAZ;AACH,U;2BAqIctD,G,EAAK;AAChB,iBAAIA,GAAJ,EAAS;AACL,sBAAKsD,WAAL,GAAmBtD,GAAnB;AACH;AACJ;;;6BAvIkB;AACf,oBAAO,KAAKuD,aAAZ;AACH,U;2BAuIgBvD,G,EAAK;AAClB,iBAAIA,GAAJ,EAAS;AACL,sBAAKuD,aAAL,GAAqBvD,GAArB;AACH;AACJ;;;6BAzIO;AACJ,oBAAO,KAAKwD,EAAZ;AACH,U;2BAyIKxD,G,EAAK;AACP,iBAAIA,GAAJ,EAAS;AACL,sBAAKwD,EAAL,GAAUxD,GAAV;AACH;AACJ;;;6BA3IO;AACJ,oBAAO,KAAKyD,EAAZ;AACH,U;2BA2IKzD,G,EAAK;AACP,iBAAIA,GAAJ,EAAS;AACL,sBAAKyD,EAAL,GAAUzD,GAAV;AACH;AACJ;;;6BA7Ie;AACZ,oBAAO,KAAK0D,UAAZ;AACH,U;2BA6Ia1D,G,EAAK;AACf,iBAAIA,GAAJ,EAAS;AACL,sBAAK0D,UAAL,GAAkB1D,GAAlB;AACH;AACJ;;;6BA/IW;AACR,oBAAO,KAAK2D,MAAZ;AACH,U;2BA+IS3D,G,EAAK;AACX,iBAAIA,GAAJ,EAAS;AACL,sBAAK2D,MAAL,GAAc3D,GAAd;AACH;AACJ;;;6BAjJU;AACP,oBAAO,KAAK4D,KAAZ;AACH,U;2BAiJQ5D,G,EAAK;AACV,iBAAIA,GAAJ,EAAS;AACL,sBAAK4D,KAAL,GAAa5D,GAAb;AACH;AACJ;;;6BAnJY;AACT,oBAAO,KAAK6D,OAAZ;AACH,U;2BAmJU7D,G,EAAK;AACZ,iBAAIA,GAAJ,EAAS;AACL,sBAAK6D,OAAL,GAAe7D,GAAf;AACH;AACJ;;;6BArJW;AACR,oBAAO,KAAK8D,MAAZ;AACH,U;2BAqJS9D,G,EAAK;AACX,iBAAIA,GAAJ,EAAS;AACL,sBAAK8D,MAAL,GAAc9D,GAAd;AACH;AACJ;;;6BAvJa;AACV,oBAAO,KAAK+D,QAAZ;AACH,U;2BAuJW/D,G,EAAK;AACb,iBAAIA,GAAJ,EAAS;AACL,sBAAK+D,QAAL,GAAgB/D,GAAhB;AACH;AACJ;;;;;;mBA1bgBE,K;;;;;;;;;;;;;;ACFrB,KAAItI,SAAS;;AAEToM,WAAM,cAASC,QAAT,EAAmBhM,QAAnB,EAA6BH,IAA7B,EAAmCoM,OAAnC,EAA4C;AAC9C;AACA,aAAIxI,CAAJ,EAAOyI,GAAP;AACA,aAAIrM,KAAKsM,OAAL,CAAaH,QAAb,CAAJ,EAA4B;AACxBE,mBAAMF,SAASnL,MAAf;AACA,iBAAIoL,OAAJ,EAAa;AACT,sBAAKxI,IAAIyI,MAAM,CAAf,EAAkBzI,KAAK,CAAvB,EAA0BA,GAA1B,EAA+B;AAC3BzD,8BAAS4C,IAAT,CAAc/C,IAAd,EAAoBmM,SAASvI,CAAT,CAApB,EAAiCA,CAAjC;AACH;AACJ,cAJD,MAIO;AACH,sBAAKA,IAAI,CAAT,EAAYA,IAAIyI,GAAhB,EAAqBzI,GAArB,EAA0B;AACtBzD,8BAAS4C,IAAT,CAAc/C,IAAd,EAAoBmM,SAASvI,CAAT,CAApB,EAAiCA,CAAjC;AACH;AACJ;AACJ,UAXD,MAWO,IAAI,QAAOuI,QAAP,yCAAOA,QAAP,OAAoB,QAAxB,EAAkC;AACrC,iBAAIpE,OAAOwE,OAAOxE,IAAP,CAAYoE,QAAZ,CAAX;AACAE,mBAAMtE,KAAK/G,MAAX;AACA,kBAAK4C,IAAI,CAAT,EAAYA,IAAIyI,GAAhB,EAAqBzI,GAArB,EAA0B;AACtBzD,0BAAS4C,IAAT,CAAc/C,IAAd,EAAoBmM,SAASpE,KAAKnE,CAAL,CAAT,CAApB,EAAuCmE,KAAKnE,CAAL,CAAvC;AACH;AACJ;AACJ,MAvBQ;;AAyBT4I,eAAU,kBAAShF,KAAT,EAAgBD,GAAhB,EAAqB;AAC3B,aAAIvH,OAAO,IAAX;AACAA,cAAKuH,GAAL,IAAYC,KAAZ;AACH,MA5BQ;;AA8BTiF,gBAAW,mBAASxM,MAAT,EAAiB;AACxB,aAAIyM,cAAc,GAAlB;AACA,aAAIzM,MAAJ,EAAY;AACR,oBAAOyM,cAAczM,MAArB;AACH;AACJ,MAnCQ;;AAqCT4H,cAAS,iBAASL,KAAT,EAAgB;AACrB,gBAAOA,UAAU,IAAV,IAAkBA,UAAUzD,SAA5B,IAA0C4I,KAAKL,OAAL,CAAa9E,KAAb,KAAuBA,MAAMxG,MAAN,KAAiB,CAAlF,IAAyF2L,KAAKL,OAAL,CAAa9E,KAAb,KAAuBmF,KAAK9E,OAAL,CAAaL,MAAM,CAAN,CAAb,CAAvH;AACH,MAvCQ;;AAyCToF,eAAU,kBAASC,MAAT,EAAiB;AACvB,gBAAO,CAACF,KAAK9E,OAAL,CAAagF,MAAb,CAAD,IAAyB,QAAOA,MAAP,yCAAOA,MAAP,OAAmB,QAAnD;AACH,MA3CQ;;AA6CTP,cAAS,iBAASQ,KAAT,EAAgB;AACrB,gBAAO,CAACH,KAAK9E,OAAL,CAAaiF,KAAb,CAAD,KAAyBC,MAAMT,OAAN,CAAcQ,KAAd,KAAwBP,OAAOS,SAAP,CAAiB5H,QAAjB,CAA0BrC,IAA1B,CAA+B+J,KAA/B,MAA0C,gBAA3F,CAAP;AACH,MA/CQ;;AAiDThK,iBAAY,oBAASmK,IAAT,EAAe;AACvB,gBAAO,CAACN,KAAK9E,OAAL,CAAaoF,IAAb,CAAD,IAAuB,OAAOA,IAAP,KAAiB,UAA/C;AACH,MAnDQ;;AAqDT;AACA5C,YAAO,eAAS6C,MAAT,EAAiBC,MAAjB,EAAwB;AAC3B,aAAIC,OAAO,EAAX;AACA,cAAK,IAAIC,QAAT,IAAqBF,MAArB,EAA6B;AAAE,iBAAI,CAACR,KAAK9E,OAAL,CAAasF,OAAOE,QAAP,CAAb,CAAL,EAAqCD,KAAKC,QAAL,IAAiBF,OAAOE,QAAP,CAAjB;AAAoC;AACxG,cAAK,IAAIA,QAAT,IAAqBH,MAArB,EAA6B;AAAE,iBAAI,CAACP,KAAK9E,OAAL,CAAaqF,OAAOG,QAAP,CAAb,CAAL,EAAqCD,KAAKC,QAAL,IAAiBH,OAAOG,QAAP,CAAjB;AAAoC;AACxG,gBAAOD,IAAP;AACH,MA3DQ;;AA6DT;AACAhN,gBAAW,mBAAS8M,MAAT,EAAiBC,MAAjB,EAAyB;AAChC,gBAAO/M,WAAU8M,MAAV,EAAkBC,MAAlB,CAAP;AACH,MAhEQ;;AAkETG,UAAK,aAASC,IAAT,EAAeC,KAAf,EAAqB;AACtB,aAAIC,QAAQF,KAAKlI,KAAL,CAAW,GAAX,CAAZ;AACA,aAAIqI,WAAWF,KAAf;;AAEA,cAAK,IAAI5J,IAAI,CAAb,EAAgBA,IAAI6J,MAAMzM,MAA1B,EAAkC4C,GAAlC,EAAuC;;AAEnC,iBAAI,eAAe,OAAO8J,SAASD,MAAM7J,CAAN,CAAT,CAA1B,EAA+C;AAC3C,wBAAO,EAAP;AACH,cAFD,MAEO;AACH8J,4BAAWA,SAASD,MAAM7J,CAAN,CAAT,CAAX;AACH;AACJ;;AAED,gBAAO8J,QAAP;AACH,MAhFQ;;AAkFTjG,UAAK,aAAS8F,IAAT,EAAeI,MAAf,EAAuBC,QAAvB,EAAiC;AAClC,aAAIF,WAAWE,QAAf,CADkC,CACR;AAC1B,aAAIH,QAAQF,KAAKlI,KAAL,CAAW,GAAX,CAAZ;AACA,aAAIgH,MAAMoB,MAAMzM,MAAhB;AACA,cAAI,IAAI4C,IAAI,CAAZ,EAAeA,IAAIyI,MAAI,CAAvB,EAA0BzI,GAA1B,EAA+B;AAC3B,iBAAIiK,UAAUJ,MAAM7J,CAAN,CAAd;AACA,iBAAI,CAAC8J,SAASG,OAAT,CAAL,EAAyBH,SAASG,OAAT,IAAoB,EAApB;AACzBH,wBAAWA,SAASG,OAAT,CAAX;AACH;;AAEDH,kBAASD,MAAMpB,MAAI,CAAV,CAAT,IAAyBsB,MAAzB;AACH,MA7FQ;;AA+FTjL,UAAK,aAASoL,GAAT,EAAc;AACf,gBAAO5J,KAAKxB,GAAL,gCAAYoL,GAAZ,EAAP;AACH,MAjGQ;;AAmGTrL,UAAK,aAASqL,GAAT,EAAc;AACf,gBAAO5J,KAAKzB,GAAL,gCAAYqL,GAAZ,EAAP;AACH,MArGQ;;AAuGTC,UAAK,aAASD,GAAT,EAAc;AACf,gBAAOA,IAAIE,MAAJ,CAAW,UAASC,CAAT,EAAYC,CAAZ,EAAe;AAAE,oBAAOD,IAAIC,CAAX;AAAe,UAA3C,EAA6C,CAA7C,CAAP;AACH,MAzGQ;;AA2GTC,WAAM,gBAAW;AACb,gBAAO,sBAAsBC,OAAtB,CAA8B,OAA9B,EAAuC,UAASC,CAAT,EAAY;AACtD,iBAAIC,IAAIpK,KAAKqK,MAAL,KAAc,EAAd,GAAiB,CAAzB;AAAA,iBACIC,IAAIH,KAAK,GAAL,GAAWC,CAAX,GAAgBA,IAAE,GAAF,GAAM,GAD9B;AAEA,oBAAOE,EAAEpJ,QAAF,CAAW,EAAX,CAAP;AACH,UAJM,CAAP;AAKH,MAjHQ;;AAmHThD,gBAAW,mBAAS1B,IAAT,EAAe6D,IAAf,EAAqBrE,SAArB,EAAgC;AACvC,aAAIF,OAAQ,IAAZ;AACA,aAAIyO,QAAQ,IAAI1B,KAAJ,EAAZ;AACA,aAAI2B,OAAQ,CAAZ;AAAA,aACIC,OAAQ,CADZ;AAEA,aAAIpK,QAAQ,OAAZ,EAAqB;AACjB7D,kBAAKkO,OAAL,CAAa,UAAUrM,CAAV,EAAY;AACrBA,mBAAEqM,OAAF,CAAU,UAAUC,CAAV,EAAY;AAClB,yBAAIA,EAAE5K,EAAF,GAAO,CAAX,EACIwK,MAAMK,IAAN,CAAWD,EAAE7K,EAAb,EADJ,KAGIyK,MAAMK,IAAN,CAAWD,EAAE7K,EAAF,GAAO6K,EAAE5K,EAApB;AACP,kBALD;AAMH,cAPD;AAQH,UATD,MASO;AACHvD,kBAAKkO,OAAL,CAAa,UAAUrM,CAAV,EAAY;AACrBA,mBAAEqM,OAAF,CAAU,UAAUC,CAAV,EAAY;AAClBJ,2BAAMK,IAAN,CAAWD,EAAE5K,EAAb;AACH,kBAFD;AAGH,cAJD;AAKH;;AAGD,aAAI8K,UAAU/O,KAAKyC,GAAL,CAASgM,KAAT,CAAd;AACA,aAAIO,UAAUhP,KAAK0C,GAAL,CAAS+L,KAAT,CAAd;AACA,aAAIM,UAAUL,IAAV,IAAkBxO,SAAtB,EACIwO,OAAOK,OAAP;AACJ,aAAIC,UAAUL,IAAd,EACIA,OAAOK,OAAP;;AAEJ,gBAAO,EAACvM,KAAKiM,IAAN,EAAYhM,KAAKiM,IAAjB,EAAP;AACH,MAlJQ;AAmJTM,iBAAY,oBAAS/F,MAAT,EAAiB;AACzB,gBAAOvH,GAAG6H,IAAH,CAAQN,MAAR,CAAeA,MAAf,EAAuBgG,KAA9B;AACH,MArJQ;AAsJTC,oBAAe,uBAASjG,MAAT,EAAiB;AAC5B,gBAAOvH,GAAG6H,IAAH,CAAQN,MAAR,CAAeA,MAAf,CAAP;AACH,MAxJQ;AAyJT;AACA;AACAqB,iBAAY,oBAAS6E,CAAT,EAAYC,IAAZ,EAAkBC,EAAlB,EAAsB;AAC9B;AACAD,gBAAO1C,KAAK4C,iBAAL,CAAuBF,IAAvB,KAAgCA,IAAvC;;AAEA,aAAG,OAAOD,CAAP,IAAW,QAAX,IAAqBA,IAAE,CAAC,CAAxB,IAA2BA,IAAE,CAA7B,IAAgC,OAAOC,IAAP,IAAc,QAA9C,IAAyDA,KAAK,CAAL,KAAS,GAAT,IAAcA,KAAK,CAAL,KAAS,GAAhF,IAAuF,OAAOC,EAAP,IAAY,QAAZ,IAAsB,OAAOA,EAAP,IAAY,WAA5H,EAAyI,OAAO,IAAP,CAJ3G,CAIwH;AACtJ,aAAG,CAAC,KAAKE,MAAT,EACI,KAAKA,MAAL,GAAY,UAASjN,CAAT,EAAY;AACpB,iBAAIkN,IAAElN,EAAEvB,MAAR;AAAA,iBAAe0O,MAAI,IAAInD,MAAJ,EAAnB;AACA,iBAAGkD,IAAE,CAAL,EAAO;AACHlN,qBAAEA,EAAE8C,KAAF,CAAQ,GAAR,CAAF;AACA,qBAAG9C,EAAEvB,MAAF,GAAS,CAAT,IAAYuB,EAAEvB,MAAF,GAAS,CAAxB,EAA0B,OAAO,IAAP,CAFvB,CAEmC;AACtC0O,qBAAI,CAAJ,IAAO9L,EAAErB,EAAE,CAAF,EAAKoN,KAAL,CAAW,CAAX,CAAF,CAAP,EAAwBD,IAAI,CAAJ,IAAO9L,EAAErB,EAAE,CAAF,CAAF,CAA/B,EAAuCmN,IAAI,CAAJ,IAAO9L,EAAErB,EAAE,CAAF,CAAF,CAA9C,EAAsDmN,IAAI,CAAJ,IAAOnN,EAAE,CAAF,IAAKqN,WAAWrN,EAAE,CAAF,CAAX,CAAL,GAAsB,CAAC,CAApF;AACH,cAJD,MAIK;AACD,qBAAGkN,KAAG,CAAH,IAAMA,KAAG,CAAT,IAAYA,IAAE,CAAjB,EAAmB,OAAO,IAAP,CADlB,CAC+B;AAChC,qBAAGA,IAAE,CAAL,EAAOlN,IAAE,MAAIA,EAAE,CAAF,CAAJ,GAASA,EAAE,CAAF,CAAT,GAAcA,EAAE,CAAF,CAAd,GAAmBA,EAAE,CAAF,CAAnB,GAAwBA,EAAE,CAAF,CAAxB,GAA6BA,EAAE,CAAF,CAA7B,IAAmCkN,IAAE,CAAF,GAAIlN,EAAE,CAAF,IAAK,EAAL,GAAQA,EAAE,CAAF,CAAZ,GAAiB,EAApD,CAAF,CAFN,CAEiE;AAClEA,qBAAEqB,EAAErB,EAAEoN,KAAF,CAAQ,CAAR,CAAF,EAAa,EAAb,CAAF,EAAmBD,IAAI,CAAJ,IAAOnN,KAAG,EAAH,GAAM,GAAhC,EAAoCmN,IAAI,CAAJ,IAAOnN,KAAG,CAAH,GAAK,GAAhD,EAAoDmN,IAAI,CAAJ,IAAOnN,IAAE,GAA7D,EAAiEmN,IAAI,CAAJ,IAAOD,KAAG,CAAH,IAAMA,KAAG,CAAT,GAAWnB,EAAG,CAAC/L,KAAG,EAAH,GAAM,GAAP,IAAY,GAAb,GAAkB,KAApB,IAA2B,KAAtC,GAA4C,CAAC,CAArH;AACH;AACD,oBAAOmN,GAAP;AACH,UAZD;AAaJ,aAAI9L,IAAEiM,QAAN;AAAA,aAAevB,IAAEpK,KAAK4L,KAAtB;AAAA,aAA4BC,IAAEV,KAAKrO,MAAL,GAAY,CAA1C;AAAA,aAA4C+O,IAAE,OAAOT,EAAP,IAAY,QAAZ,GAAqBA,GAAGtO,MAAH,GAAU,CAAV,GAAY,IAAZ,GAAiBsO,MAAI,GAAJ,GAAQ,CAACS,CAAT,GAAW,KAAjD,GAAuDA,CAArG;AAAA,aAAuG7B,IAAEkB,IAAE,CAA3G;AAAA,aAA6GA,IAAElB,IAAEkB,IAAE,CAAC,CAAL,GAAOA,CAAtH;AAAA,aAAwHE,KAAGA,MAAIA,MAAI,GAAR,GAAYA,EAAZ,GAAepB,IAAE,SAAF,GAAY,SAAtJ;AAAA,aAAgK8B,IAAE,KAAKR,MAAL,CAAYH,IAAZ,CAAlK;AAAA,aAAoLY,IAAE,KAAKT,MAAL,CAAYF,EAAZ,CAAtL;AACA,aAAG,CAACU,CAAD,IAAI,CAACC,CAAR,EAAU,OAAO,IAAP,CApBoB,CAoBP;AACvB,aAAGF,CAAH,EAAK,OAAO,SAAOzB,EAAE,CAAC2B,EAAE,CAAF,IAAKD,EAAE,CAAF,CAAN,IAAYZ,CAAZ,GAAcY,EAAE,CAAF,CAAhB,CAAP,GAA6B,GAA7B,GAAiC1B,EAAE,CAAC2B,EAAE,CAAF,IAAKD,EAAE,CAAF,CAAN,IAAYZ,CAAZ,GAAcY,EAAE,CAAF,CAAhB,CAAjC,GAAuD,GAAvD,GAA2D1B,EAAE,CAAC2B,EAAE,CAAF,IAAKD,EAAE,CAAF,CAAN,IAAYZ,CAAZ,GAAcY,EAAE,CAAF,CAAhB,CAA3D,IAAkFA,EAAE,CAAF,IAAK,CAAL,IAAQC,EAAE,CAAF,IAAK,CAAb,GAAe,GAAf,GAAmB,OAAKD,EAAE,CAAF,IAAK,CAAC,CAAN,IAASC,EAAE,CAAF,IAAK,CAAC,CAAf,GAAiB3B,EAAE,CAAC,CAAC2B,EAAE,CAAF,IAAKD,EAAE,CAAF,CAAN,IAAYZ,CAAZ,GAAcY,EAAE,CAAF,CAAf,IAAqB,KAAvB,IAA8B,KAA/C,GAAqDC,EAAE,CAAF,IAAK,CAAL,GAAOD,EAAE,CAAF,CAAP,GAAYC,EAAE,CAAF,CAAtE,IAA4E,GAAjL,CAAP,CAAL,KACK,OAAO,MAAI,CAAC,cAAY,CAACD,EAAE,CAAF,IAAK,CAAC,CAAN,IAASC,EAAE,CAAF,IAAK,CAAC,CAAf,GAAiB3B,EAAE,CAAC,CAAC2B,EAAE,CAAF,IAAKD,EAAE,CAAF,CAAN,IAAYZ,CAAZ,GAAcY,EAAE,CAAF,CAAf,IAAqB,GAAvB,CAAjB,GAA6CC,EAAE,CAAF,IAAK,CAAC,CAAN,GAAQ3B,EAAE2B,EAAE,CAAF,IAAK,GAAP,CAAR,GAAoBD,EAAE,CAAF,IAAK,CAAC,CAAN,GAAQ1B,EAAE0B,EAAE,CAAF,IAAK,GAAP,CAAR,GAAoB,GAAtF,IAA2F,SAAvG,GAAiH1B,EAAE,CAAC2B,EAAE,CAAF,IAAKD,EAAE,CAAF,CAAN,IAAYZ,CAAZ,GAAcY,EAAE,CAAF,CAAhB,IAAsB,OAAvI,GAA+I1B,EAAE,CAAC2B,EAAE,CAAF,IAAKD,EAAE,CAAF,CAAN,IAAYZ,CAAZ,GAAcY,EAAE,CAAF,CAAhB,IAAsB,KAArK,GAA2K1B,EAAE,CAAC2B,EAAE,CAAF,IAAKD,EAAE,CAAF,CAAN,IAAYZ,CAAZ,GAAcY,EAAE,CAAF,CAAhB,CAA5K,EAAmM5K,QAAnM,CAA4M,EAA5M,EAAgNuK,KAAhN,CAAsNK,EAAE,CAAF,IAAK,CAAC,CAAN,IAASC,EAAE,CAAF,IAAK,CAAC,CAAf,GAAiB,CAAjB,GAAmB,CAAzO,CAAX;AACR,MAlLQ;AAmLT;AACAtJ,aAAQ,gBAASuJ,OAAT,EAAkBZ,EAAlB,EAAsBvK,QAAtB,EAAgC;AACpC,aAAI/E,OAAO,IAAX;AACA,aAAI+E,YAAY,CAAhB,EAAmB;AACnB,aAAIoL,aAAab,KAAKY,QAAQE,SAA9B;AACA,aAAIC,UAAUF,aAAapL,QAAb,GAAwB,EAAtC;;AAEAuL,oBAAW,YAAW;AAClBJ,qBAAQE,SAAR,GAAoBF,QAAQE,SAAR,GAAoBC,OAAxC;AACA,iBAAIH,QAAQE,SAAR,KAAsBd,EAA1B,EAA8B;AAC9BtP,kBAAK2G,MAAL,CAAYuJ,OAAZ,EAAqBZ,EAArB,EAAyBvK,WAAW,EAApC;AACH,UAJD,EAIG,EAJH;AAKH;AA/LQ,EAAb;;AAkMA,KAAI4H,OAAO;AACP9E,cAAS,iBAASL,KAAT,EAAgB;AACrB,gBAAOA,UAAU,IAAV,IAAkBA,UAAUzD,SAAnC;AACH,MAHM;;AAKPuI,cAAS,iBAASQ,KAAT,EAAgB;AACrB,gBAAOC,MAAMT,OAAN,CAAcQ,KAAd,KAAwBP,OAAOS,SAAP,CAAiB5H,QAAjB,CAA0BrC,IAA1B,CAA+B+J,KAA/B,MAA0C,gBAAzE;AACH,MAPM;;AASPF,eAAU,kBAASC,MAAT,EAAiB;AACvB,gBAAQA,UAAU,QAAOA,MAAP,yCAAOA,MAAP,OAAkB,QAA5B,IAAwC,CAACE,MAAMT,OAAN,CAAcO,MAAd,CAAjD;AACH,MAXM;;AAaP0C,wBAAmB,2BAASgB,MAAT,EAAiB;AAChC,aAAIC,UAAU;AACV,0BAAY,SADF,EACY,gBAAe,SAD3B,EACqC,QAAO,SAD5C,EACsD,cAAa,SADnE,EAC6E,SAAQ,SADrF;AAEV,sBAAQ,SAFE,EAEQ,UAAS,SAFjB,EAE2B,SAAQ,SAFnC,EAE6C,kBAAiB,SAF9D,EAEwE,QAAO,SAF/E,EAEyF,cAAa,SAFtG,EAEgH,SAAQ,SAFxH,EAEkI,aAAY,SAF9I;AAGV,0BAAY,SAHF,EAGY,cAAa,SAHzB,EAGmC,aAAY,SAH/C,EAGyD,SAAQ,SAHjE,EAG2E,kBAAiB,SAH5F,EAGsG,YAAW,SAHjH,EAG2H,WAAU,SAHrI,EAG+I,QAAO,SAHtJ;AAIV,yBAAW,SAJD,EAIW,YAAW,SAJtB,EAIgC,iBAAgB,SAJhD,EAI0D,YAAW,SAJrE,EAI+E,aAAY,SAJ3F,EAIqG,aAAY,SAJjH,EAI2H,eAAc,SAJzI,EAImJ,kBAAiB,SAJpK;AAKV,2BAAa,SALH,EAKa,cAAa,SAL1B,EAKoC,WAAU,SAL9C,EAKwD,cAAa,SALrE,EAK+E,gBAAe,SAL9F,EAKwG,iBAAgB,SALxH,EAKkI,iBAAgB,SALlJ,EAK4J,iBAAgB,SAL5K;AAMV,2BAAa,SANH,EAMa,YAAW,SANxB,EAMkC,eAAc,SANhD,EAM0D,WAAU,SANpE,EAM8E,cAAa,SAN3F;AAOV,0BAAY,SAPF,EAOY,eAAc,SAP1B,EAOoC,eAAc,SAPlD,EAO4D,WAAU,SAPtE;AAQV,0BAAY,SARF,EAQY,cAAa,SARzB,EAQmC,QAAO,SAR1C,EAQoD,aAAY,SARhE,EAQ0E,QAAO,SARjF,EAQ2F,SAAQ,SARnG,EAQ6G,eAAc,SAR3H;AASV,yBAAW,SATD,EASW,WAAU,SATrB;AAUV,2BAAa,SAVH,EAUa,UAAS,SAVtB,EAUgC,SAAQ,SAVxC,EAUkD,SAAQ,SAV1D;AAWV,yBAAW,SAXD,EAWW,iBAAgB,SAX3B,EAWqC,aAAY,SAXjD,EAW2D,gBAAe,SAX1E,EAWoF,aAAY,SAXhG,EAW0G,cAAa,SAXvH,EAWiI,aAAY,SAX7I,EAWuJ,wBAAuB,SAX9K;AAYV,0BAAY,SAZF,EAYY,cAAa,SAZzB,EAYmC,aAAY,SAZ/C,EAYyD,eAAc,SAZvE,EAYiF,iBAAgB,SAZjG,EAY2G,gBAAe,SAZ1H,EAYoI,kBAAiB,SAZrJ,EAY+J,kBAAiB,SAZhL;AAaV,4BAAc,SAbJ,EAac,QAAO,SAbrB,EAa+B,aAAY,SAb3C,EAaqD,SAAQ,SAb7D;AAcV,wBAAU,SAdA,EAcU,UAAS,SAdnB,EAc6B,oBAAmB,SAdhD,EAc0D,cAAa,SAdvE,EAciF,gBAAe,SAdhG,EAc0G,gBAAe,SAdzH,EAcmI,kBAAiB,SAdpJ,EAc8J,mBAAkB,SAdhL;AAeV,kCAAoB,SAfV,EAeoB,mBAAkB,SAftC,EAegD,mBAAkB,SAflE,EAe4E,gBAAe,SAf3F,EAeqG,aAAY,SAfjH,EAe2H,aAAY,SAfvI,EAeiJ,YAAW,SAf5J;AAgBV,4BAAc,SAhBJ,EAgBc,QAAO,SAhBrB;AAiBV,wBAAU,SAjBA,EAiBU,SAAQ,SAjBlB,EAiB4B,aAAY,SAjBxC,EAiBkD,UAAS,SAjB3D,EAiBqE,aAAY,SAjBjF,EAiB2F,UAAS,SAjBpG;AAkBV,8BAAgB,SAlBN,EAkBgB,aAAY,SAlB5B,EAkBsC,iBAAgB,SAlBtD,EAkBgE,iBAAgB,SAlBhF,EAkB0F,cAAa,SAlBvG,EAkBiH,aAAY,SAlB7H,EAkBuI,QAAO,SAlB9I,EAkBwJ,QAAO,SAlB/J,EAkByK,QAAO,SAlBhL,EAkB0L,cAAa,SAlBvM,EAkBiN,UAAS,SAlB1N;AAmBV,oBAAM,SAnBI,EAmBM,aAAY,SAnBlB,EAmB4B,aAAY,SAnBxC;AAoBV,4BAAc,SApBJ,EAoBc,UAAS,SApBvB,EAoBiC,cAAa,SApB9C,EAoBwD,YAAW,SApBnE,EAoB6E,YAAW,SApBxF,EAoBkG,UAAS,SApB3G,EAoBqH,UAAS,SApB9H,EAoBwI,WAAU,SApBlJ,EAoB4J,aAAY,SApBxK,EAoBkL,aAAY,SApB9L,EAoBwM,QAAO,SApB/M,EAoByN,eAAc,SApBvO,EAoBiP,aAAY,SApB7P;AAqBV,oBAAM,SArBI,EAqBM,QAAO,SArBb,EAqBuB,WAAU,SArBjC,EAqB2C,UAAS,SArBpD,EAqB8D,aAAY,SArB1E;AAsBV,uBAAS,SAtBC;AAuBV,sBAAQ,SAvBE,EAuBQ,SAAQ,SAvBhB,EAuB0B,cAAa,SAvBvC;AAwBV,uBAAS,SAxBC,EAwBS,eAAc;AAxBvB,UAAd;;AA2BA,aAAI,OAAOA,QAAQD,OAAOE,WAAP,EAAR,CAAP,IAAwC,WAA5C,EACI,OAAOD,QAAQD,OAAOE,WAAP,EAAR,CAAP;;AAEJ,gBAAO,KAAP;AACH;AA7CM,EAAX;;AAgDA,UAASrQ,UAAT,CAAmB8M,MAAnB,EAA2BC,MAA3B,EAAmC;AAC/B,SAAIR,KAAKC,QAAL,CAAcM,MAAd,KAAyBP,KAAKC,QAAL,CAAcO,MAAd,CAA7B,EAAoD;AAChD,cAAK,IAAM5F,GAAX,IAAkB4F,MAAlB,EAA0B;AACtB,iBAAIR,KAAKC,QAAL,CAAcO,OAAO5F,GAAP,CAAd,CAAJ,EAAgC;AAC5B,qBAAIzH,OAAO+H,OAAP,CAAeqF,OAAO3F,GAAP,CAAf,CAAJ,EAAiC;AAC7BgF,4BAAOmE,MAAP,CAAcxD,MAAd,sBACK3F,GADL,EACW,EADX;AAGH;AACDnH,4BAAU8M,OAAO3F,GAAP,CAAV,EAAuB4F,OAAO5F,GAAP,CAAvB;AACH,cAPD,MAOO;AACHgF,wBAAOmE,MAAP,CAAcxD,MAAd,sBACK3F,GADL,EACW4F,OAAO5F,GAAP,CADX;AAGH;AACJ;AACJ;AACD,YAAO2F,MAAP;AACH;;AAKD7N,QAAOC,OAAP,GAAiBQ,MAAjB,C;;;;;;;;;;;;;;ACzQA;;;;;;;;KAEqB6Q,I;AACjB,mBAAY5Q,OAAZ,EAAqB6Q,KAArB,EAA4BzP,KAA5B,EAAmCI,MAAnC,EAA2C;AAAA;;AACvC,aAAIvB,OAAO,IAAX;;AAEA,aAAIC,SAAS;AACLyB,gBAAG;AACC+H,uBAAM;AACFC,6BAAQ,CADN;AAEFC,4BAAO,EAFL,EAES;AACXd,2BAAM,CAHJ,EAGO;AACTe,8BAAS,CAJP;AAKFV,6BAAQnF,SALN;AAMF8F,6BAAQ,EANN;AAOF;AACAL,2BAAMzF,SARJ;AASFgG,+BAAU;AATR,kBADP;AAYCC,wBAAO;AACHtB,2BAAM,MADH;AAEHC,+BAAU;AAFP,kBAZR;AAgBCpC,uBAAM,IAhBP;AAiBC0D,uBAAM,KAjBP;AAkBC1F,uBAAM;AAlBP,cADE;AAqBLxC,gBAAG;AACC0H,uBAAM;AACFC,6BAAQ,CADN;AAEFC,4BAAO,EAFL;AAGFd,2BAAM,CAHJ;AAIFe,8BAAS,CAJP;AAKFV,6BAAQnF,SALN;AAMF8F,6BAAQ;AANN,kBADP;AASCG,wBAAO;AACHtB,2BAAM,OADH;AAEHC,+BAAU;AAFP,kBATR;AAaCpC,uBAAM,IAbP;AAcC0D,uBAAM,IAdP;AAeC1F,uBAAM;AAfP;AArBE,UAAb;;AAwCAvE,cAAKmK,QAAL,GAAkBpK,OAAlB;AACAC,cAAK6Q,MAAL,GAAkBD,KAAlB;AACA5Q,cAAK2K,MAAL,GAAkBxJ,KAAlB;AACAnB,cAAK4K,OAAL,GAAkBrJ,MAAlB;;AAEAvB,cAAKmH,YAAL,CAAkBlH,MAAlB;AAEH;;AAED;;;;;;;;AAoGA;;AAEA;;;sCAGaA,M,EAAQ;AACjB,iBAAID,OAAO,IAAX;;AAEAA,kBAAKD,OAAL,GAAe,YAAOK,SAAP,CAAiBH,MAAjB,EAAyBD,KAAKD,OAA9B,CAAf;;AAEAC,kBAAK0B,CAAL,GAAS1B,KAAK4Q,KAAL,CAAWlP,CAApB;AACA1B,kBAAK+B,CAAL,GAAS/B,KAAK4Q,KAAL,CAAW7O,CAApB;;AAEA/B,kBAAKU,IAAL,GAAkBV,KAAK4Q,KAAL,CAAWjQ,UAA7B;AACAX,kBAAK8Q,gBAAL,GAAwB9Q,KAAK4Q,KAAL,CAAW7Q,OAAX,CAAmBG,SAA3C;;AAEA,iBAAIF,KAAK4Q,KAAL,CAAWvQ,SAAX,IAAwB,UAA5B,EAAwC;AACpC,qBAAI0Q,SAASpP,GAAG6H,IAAH,CAAQ5H,KAAR,GACRS,MADQ,CACD,CAACrC,KAAK4Q,KAAL,CAAW7Q,OAAX,CAAmBiR,QAApB,EAA8BhR,KAAK4Q,KAAL,CAAW7Q,OAAX,CAAmBkR,MAAjD,CADC,EAERhP,KAFQ,CAEF,CAAC,CAAD,EAAIjC,KAAKmB,KAAT,CAFE,CAAb;;AAIAnB,sBAAKkR,KAAL,GAAavP,GAAG2I,GAAH,CAAO7F,IAAP,GACR7C,KADQ,CACFmP,MADE,EAERI,MAFQ,CAED,QAFC,EAGRC,UAHQ,CAGGpR,KAAKD,OAAL,CAAa2B,CAAb,CAAe+H,IAAf,CAAoBP,MAApB,KAA+BnF,SAA/B,GAA2CpC,GAAG6H,IAAH,CAAQN,MAAR,CAAe,OAAf,CAA3C,GAAqElJ,KAAKD,OAAL,CAAa2B,CAAb,CAAe+H,IAAf,CAAoBP,MAH5F;AAIT;AAJS,kBAKRmI,KALQ,CAKFrR,KAAKD,OAAL,CAAa2B,CAAb,CAAe+H,IAAf,CAAoBD,IAApB,IAA4BxJ,KAAKD,OAAL,CAAa2B,CAAb,CAAe+H,IAAf,CAAoBE,KAL9C,EAKqD3J,KAAKD,OAAL,CAAa2B,CAAb,CAAe+H,IAAf,CAAoBM,QALzE,CAAb;AAMA;AACA;AACH,cAbD,MAaO;AACH/J,sBAAKkR,KAAL,GAAavP,GAAG2I,GAAH,CAAO7F,IAAP,GACR7C,KADQ,CACF5B,KAAK0B,CADH,EAERyP,MAFQ,CAED,QAFC,EAGRG,WAHQ,CAGItR,KAAKD,OAAL,CAAa2B,CAAb,CAAe+H,IAAf,CAAoBG,OAHxB,EAIRyH,KAJQ,CAIFrR,KAAKD,OAAL,CAAa2B,CAAb,CAAe+H,IAAf,CAAoBE,KAJlB,EAKR4H,UALQ,CAKGvR,KAAKD,OAAL,CAAa2B,CAAb,CAAe+H,IAAf,CAAoBI,MAApB,CAA2B7I,MAA3B,GAAoC,CAApC,GAAwChB,KAAKD,OAAL,CAAa2B,CAAb,CAAe+H,IAAf,CAAoBI,MAA5D,GAAqE9F,SALxE,EAMRqN,UANQ,CAMGpR,KAAKD,OAAL,CAAa2B,CAAb,CAAe6C,IAAf,IAAuB,YAAvB,GAAsCvE,KAAKD,OAAL,CAAa2B,CAAb,CAAe+H,IAAf,CAAoBP,MAApB,IAA8BvH,GAAG6H,IAAH,CAAQN,MAAR,CAAe,UAAf,CAApE,GAAiGlJ,KAAKD,OAAL,CAAa2B,CAAb,CAAe+H,IAAf,CAAoBP,MAApB,GAA6BlJ,KAAKD,OAAL,CAAa2B,CAAb,CAAe+H,IAAf,CAAoBP,MAAjD,GAA0DnF,SAN9J,CAAb;;AAQA;AACA;AACA;AACA,qBAAI/D,KAAK8Q,gBAAT,EAA2B;AACvB9Q,0BAAKwR,KAAL,GAAa7P,GAAG2I,GAAH,CAAO7F,IAAP,GACR7C,KADQ,CACF5B,KAAK+B,CADH,EAERoP,MAFQ,CAED,MAFC,EAGRE,KAHQ,CAGFrR,KAAKD,OAAL,CAAagC,CAAb,CAAe0H,IAAf,CAAoBE,KAHlB,EAGyB3J,KAAKD,OAAL,CAAagC,CAAb,CAAewC,IAAf,IAAuB,YAAvB,GAAsCvE,KAAKD,OAAL,CAAagC,CAAb,CAAe0H,IAAf,CAAoBP,MAApB,IAA8BvH,GAAG6H,IAAH,CAAQN,MAAR,CAAe,UAAf,CAApE,GAAiGlJ,KAAKD,OAAL,CAAagC,CAAb,CAAe0H,IAAf,CAAoBP,MAApB,GAA6BlJ,KAAKD,OAAL,CAAagC,CAAb,CAAe0H,IAAf,CAAoBP,MAAjD,GAA0DnF,SAHpL,EAIRuN,WAJQ,CAIItR,KAAKD,OAAL,CAAagC,CAAb,CAAe0H,IAAf,CAAoBG,OAJxB,EAKR2H,UALQ,CAKGvR,KAAKD,OAAL,CAAagC,CAAb,CAAe0H,IAAf,CAAoBI,MAApB,CAA2B7I,MAA3B,GAAoC,CAApC,GAAwChB,KAAKD,OAAL,CAAagC,CAAb,CAAe0H,IAAf,CAAoBI,MAA5D,GAAqE9F,SALxE,CAAb;AAMH,kBAPD,MAOO;AACH/D,0BAAKwR,KAAL,GAAa7P,GAAG2I,GAAH,CAAO7F,IAAP,GACR7C,KADQ,CACF5B,KAAK+B,CADH,EAERoP,MAFQ,CAED,MAFC,EAGRE,KAHQ,CAGFrR,KAAKD,OAAL,CAAagC,CAAb,CAAe0H,IAAf,CAAoBE,KAHlB,EAIR2H,WAJQ,CAIItR,KAAKD,OAAL,CAAagC,CAAb,CAAe0H,IAAf,CAAoBG,OAJxB,EAKR2H,UALQ,CAKGvR,KAAKD,OAAL,CAAagC,CAAb,CAAe0H,IAAf,CAAoBI,MAApB,CAA2B7I,MAA3B,GAAoC,CAApC,GAAwChB,KAAKD,OAAL,CAAagC,CAAb,CAAe0H,IAAf,CAAoBI,MAA5D,GAAqE9F,SALxE,EAMRqN,UANQ,CAMGpR,KAAKD,OAAL,CAAagC,CAAb,CAAewC,IAAf,IAAuB,YAAvB,GAAsCvE,KAAKD,OAAL,CAAagC,CAAb,CAAe0H,IAAf,CAAoBP,MAApB,IAA8BvH,GAAG6H,IAAH,CAAQN,MAAR,CAAe,UAAf,CAApE,GAAiGlJ,KAAKD,OAAL,CAAagC,CAAb,CAAe0H,IAAf,CAAoBP,MAApB,GAA6BlJ,KAAKD,OAAL,CAAagC,CAAb,CAAe0H,IAAf,CAAoBP,MAAjD,GAA0DnF,SAN9J,CAAb;AAOH;AACJ;;AAED,iBAAI/D,KAAK4Q,KAAL,CAAWvQ,SAAX,IAAwB,UAA5B,EAAwC;AACpC;AACA,qBAAIL,KAAKD,OAAL,CAAa2B,CAAb,CAAeuI,IAAnB,EAAyB;AACrBjK,0BAAKkR,KAAL,CAAWO,aAAX,CAAyB,CAACzR,KAAKuB,MAA/B,EACKmQ,aADL,CACmB,CADnB;AAEH;;AAED,qBAAI1R,KAAKD,OAAL,CAAagC,CAAb,CAAekI,IAAnB,EAAyB;AACrBjK,0BAAKwR,KAAL,CAAWC,aAAX,CAAyB,CAACzR,KAAKmB,KAA/B,EACKuQ,aADL,CACmB,CADnB;AAEH;AACJ;;AAED,iBAAIC,aAAa,SAAbA,UAAa,CAASC,KAAT,EAAgB;AAC7B,qBAAIC,MAAM3N,KAAK2N,GAAL,CAASD,QAAQ1N,KAAK4N,EAAb,GAAkB,GAA3B,EAAgCvM,OAAhC,CAAwC,EAAxC,CAAV;AACA,wBAAOsM,OAAO,CAAP,GAAW,QAAX,GAAuBA,MAAM,CAAN,GAAU,OAAV,GAAoB,KAAlD;AACH,cAHD;;AAKA,iBAAIE,SAAS,SAATA,MAAS,CAASH,KAAT,EAAgB;AACzB,qBAAIC,MAAM3N,KAAK2N,GAAL,CAASD,QAAQ1N,KAAK4N,EAAb,GAAkB,GAA3B,EAAgCvM,OAAhC,CAAwC,EAAxC,CAAV;AACA,wBAAO,IAAIsM,GAAX;AACH,cAHD;;AAKA,iBAAIG,QAAQ,SAARA,KAAQ,CAASJ,KAAT,EAAgB;AACxB,wBAAO,OAAO,OAAOA,QAAQ,EAAf,KAAsBA,QAAQ,CAAR,GAAY,CAAZ,GAAgB,CAAC,CAAvC,CAAd;AACH,cAFD;;AAIA;AACA5R,kBAAK4Q,KAAL,CAAW3N,IAAX,CAAgBO,MAAhB,CAAuB,GAAvB,EACKC,IADL,CACU,OADV,EACmB,mBADnB,EAEKA,IAFL,CAEU,WAFV,EAEuB,iBAAkBzD,KAAKuB,MAAvB,GAAiC,GAFxD,EAGKwB,IAHL,CAGU/C,KAAKkR,KAHf;AAIA;AACAvP,gBAAGiF,MAAH,CAAU,oBAAV,EAAgC1D,SAAhC,CAA0C,MAA1C,EACKS,KADL,CACW,aADX,EAC0BgO,WAAW3R,KAAKD,OAAL,CAAa2B,CAAb,CAAe+H,IAAf,CAAoBC,MAA/B,CAD1B,EAEKjG,IAFL,CAEU,GAFV,EAEeuO,MAAMhS,KAAKD,OAAL,CAAa2B,CAAb,CAAe+H,IAAf,CAAoBC,MAA1B,CAFf,EAGKjG,IAHL,CAGU,GAHV,EAGe,CAHf,EAIKA,IAJL,CAIU,IAJV,EAIgB,OAJhB,EAKKA,IALL,CAKU,IALV,EAKgBsO,OAAO/R,KAAKD,OAAL,CAAa2B,CAAb,CAAe+H,IAAf,CAAoBC,MAA3B,CALhB,EAMKjG,IANL,CAMU,WANV,EAMuB,YAAYzD,KAAKD,OAAL,CAAa2B,CAAb,CAAe+H,IAAf,CAAoBC,MAAhC,GAAyC,GANhE;AAOA;AACA/H,gBAAGiF,MAAH,CAAU,oBAAV,EACKpD,MADL,CACY,MADZ,EAEKC,IAFL,CAEU,OAFV,EAEmB,wBAFnB,EAGKA,IAHL,CAGU,IAHV,EAGgB,OAHhB,EAIKA,IAJL,CAIU,IAJV,EAIgB,QAJhB,EAKKA,IALL,CAKU,GALV,EAKezD,KAAKmB,KAAL,GAAa,EAL5B,EAMKsC,IANL,CAMU,GANV,EAMe,EANf,EAOKE,KAPL,CAOW,aAPX,EAO0B,OAP1B,EAQK+E,IARL,CAQU1I,KAAKD,OAAL,CAAa2B,CAAb,CAAesI,KAAf,CAAqBtB,IAR/B;;AAUA;AACA,iBAAI,CAAC1I,KAAKD,OAAL,CAAa2B,CAAb,CAAe6E,IAApB,EAA0B;AACtB5E,oBAAGiF,MAAH,CAAU,4BAAV,EAAwCjD,KAAxC,CAA8C,SAA9C,EAAyD,MAAzD;AACA,qBAAI,CAAC3D,KAAKD,OAAL,CAAa2B,CAAb,CAAeuI,IAApB,EAA0BtI,GAAGuB,SAAH,CAAa,gCAAb,EAA+CS,KAA/C,CAAqD,SAArD,EAAgE,MAAhE;AAC7B;;AAED,iBAAI3D,KAAK4Q,KAAL,CAAWvQ,SAAX,IAAwB,UAA5B,EAAwC;AACpCL,sBAAK4Q,KAAL,CAAW3N,IAAX,CAAgBO,MAAhB,CAAuB,GAAvB,EACKC,IADL,CACU,OADV,EACmB,mBADnB,EAEKV,IAFL,CAEU/C,KAAKwR,KAFf;;AAIA7P,oBAAGiF,MAAH,CAAU,oBAAV,EACKpD,MADL,CACY,MADZ,EAEKC,IAFL,CAEU,OAFV,EAEmB,wBAFnB,EAGKA,IAHL,CAGU,GAHV,EAGe,CAAC,EAHhB,EAIKA,IAJL,CAIU,IAJV,EAIgB,KAJhB,EAKKE,KALL,CAKW,aALX,EAK0B,KAL1B,EAMK+E,IANL,CAMU1I,KAAKD,OAAL,CAAagC,CAAb,CAAeiI,KAAf,CAAqBtB,IAN/B;;AAQA,qBAAI,CAAC1I,KAAKD,OAAL,CAAagC,CAAb,CAAewE,IAApB,EAA0B;AACtB5E,wBAAGiF,MAAH,CAAU,4BAAV,EAAwCjD,KAAxC,CAA8C,SAA9C,EAAyD,MAAzD;AACA,yBAAI,CAAC3D,KAAKD,OAAL,CAAagC,CAAb,CAAekI,IAApB,EAA0BtI,GAAGuB,SAAH,CAAa,gCAAb,EAA+CS,KAA/C,CAAqD,SAArD,EAAgE,MAAhE;AAC7B;AACJ;AACJ;;;gCAEMjC,C,EAAGK,C,EAAGgD,Q,EAAU;AACnB,iBAAI/E,OAAO,IAAX;;AAEA,iBAAI,CAAC,YAAO6H,OAAP,CAAenG,CAAf,CAAL,EAAwB;AACpB1B,sBAAK0B,CAAL,GAASA,CAAT;;AAEA,qBAAI1B,KAAK4Q,KAAL,CAAWvQ,SAAX,IAAwB,UAA5B,EAAwC;AACpC,yBAAI0Q,SAASpP,GAAG6H,IAAH,CAAQ5H,KAAR,GACRS,MADQ,CACD,CAACrC,KAAK4Q,KAAL,CAAW7Q,OAAX,CAAmBiR,QAApB,EAA8BhR,KAAK4Q,KAAL,CAAW7Q,OAAX,CAAmBkR,MAAjD,CADC,EAERhP,KAFQ,CAEF,CAAC,CAAD,EAAIjC,KAAKmB,KAAT,CAFE,CAAb;;AAIAnB,0BAAKkR,KAAL,CAAWtP,KAAX,CAAiBmP,MAAjB;AACH,kBAND,MAMO;AACH/Q,0BAAKkR,KAAL,CAAWtP,KAAX,CAAiB5B,KAAK0B,CAAtB;AACH;;AAED1B,sBAAK4Q,KAAL,CAAW3N,IAAX,CAAgB2D,MAAhB,CAAuB,oBAAvB,EAA6C9B,UAA7C,GAA0DC,QAA1D,CAAmEA,QAAnE,EAA6EhC,IAA7E,CAAkF/C,KAAKkR,KAAvF;AACH;AACD,iBAAI,CAAC,YAAOrJ,OAAP,CAAe9F,CAAf,CAAL,EAAwB;AACpB/B,sBAAK+B,CAAL,GAASA,CAAT;;AAEA,qBAAI/B,KAAK4Q,KAAL,CAAWvQ,SAAX,IAAwB,UAA5B,EAAwC;AACpC;AACH,kBAFD,MAEO;AACHL,0BAAKwR,KAAL,CAAW5P,KAAX,CAAiB5B,KAAK+B,CAAtB;AACH;;AAED/B,sBAAK4Q,KAAL,CAAW3N,IAAX,CAAgB2D,MAAhB,CAAuB,oBAAvB,EAA6C9B,UAA7C,GAA0DC,QAA1D,CAAmEA,QAAnE,EAA6EhC,IAA7E,CAAkF/C,KAAKwR,KAAvF;AACH;AACJ;;;gCAEM;AACH,iBAAIxR,OAAO,IAAX;;AAEAA,kBAAK0E,MAAL,CAAY1E,KAAK0B,CAAjB,EAAoB1B,KAAK+B,CAAzB,EAA4B,GAA5B;AACH;AACD;;;;6BA5QQ;AACJ,oBAAO,KAAK2J,EAAZ;AACH,U;;;AAkCD;;AAEA;;;;2BAIMxD,G,EAAK;AACP,iBAAIA,GAAJ,EAAS;AACL,sBAAKwD,EAAL,GAAUxD,GAAV;AACH;AACJ;;;6BA1CO;AACJ,oBAAO,KAAKyD,EAAZ;AACH,U;2BA0CKzD,G,EAAK;AACP,iBAAIA,GAAJ,EAAS;AACL,sBAAKyD,EAAL,GAAUzD,GAAV;AACH;AACJ;;;6BA5CW;AACR,oBAAO,KAAK+J,MAAZ;AACH,U;2BA4CS/J,G,EAAK;AACX,iBAAIA,GAAJ,EAAS;AACL,sBAAK+J,MAAL,GAAc/J,GAAd;AACH;AACJ;;;6BA9CW;AACR,oBAAO,KAAKgK,MAAZ;AACH,U;2BA8CShK,G,EAAK;AACX,iBAAIA,GAAJ,EAAS;AACL,sBAAKgK,MAAL,GAAchK,GAAd;AACH;AACJ;;;6BAhDW;AACR,oBAAO,KAAK2I,MAAZ;AACH,U;2BAgDS3I,G,EAAK;AACX,iBAAIA,GAAJ,EAAS;AACL,sBAAK2I,MAAL,GAAc3I,GAAd;AACH;AACJ;;;6BAlDa;AACV,oBAAO,KAAKiC,QAAZ;AACH,U;2BAkDWjC,G,EAAK;AACb,iBAAIA,GAAJ,EAAS;AACL,sBAAKiC,QAAL,GAAgBjC,GAAhB;AACH;AACJ;;;6BApDW;AACR,oBAAO,KAAKyC,MAAZ;AACH,U;2BAoDSzC,G,EAAK;AACX,iBAAIA,GAAJ,EAAS;AACL,sBAAKyC,MAAL,GAAczC,GAAd;AACH;AACJ;;;6BAtDY;AACT,oBAAO,KAAK0C,OAAZ;AACH,U;2BAsDU1C,G,EAAK;AACZ,iBAAIA,GAAJ,EAAS;AACL,sBAAK0C,OAAL,GAAe1C,GAAf;AACH;AACJ;;;6BAxDU;AACP,oBAAO,KAAKsF,KAAZ;AACH,U;2BAwDQtF,G,EAAK;AACV,iBAAIA,GAAJ,EAAS;AACL,sBAAKsF,KAAL,GAAatF,GAAb;AACH;AACJ;;;;;;mBAvJgByI,I;;;;;;;;;;;;;;ACFrB;;;;;;;;KAEqBwB,K;AACjB,oBAAYpS,OAAZ,EAAqB6Q,KAArB,EAA4B;AAAA;;AACxB,aAAI5Q,OAAO,IAAX;;AAEA,aAAIC,SAAS;AACTsG,mBAAY,IADH;AAETmC,mBAAY,cAFH;AAGTC,uBAAY,KAHH;AAITC,uBAAY;AAJH,UAAb;;AAOA5I,cAAKmK,QAAL,GAAiBpK,OAAjB;AACAC,cAAK6Q,MAAL,GAAiBD,KAAjB;;AAEA5Q,cAAKmH,YAAL,CAAkBlH,MAAlB;AAEH;;AAED;;;;;;;;AA0BA;;AAEA;;;sCAGaA,M,EAAQ;AACjB,iBAAID,OAAO,IAAX;;AAEAA,kBAAKD,OAAL,GAAe,YAAOK,SAAP,CAAiBH,MAAjB,EAAyBD,KAAKD,OAA9B,CAAf;AACH;;;gCAEM;AACH,iBAAIC,OAAO,IAAX;;AAEA,iBAAIA,KAAKD,OAAL,CAAawG,IAAjB,EAAuB;AACnB,qBAAImC,OAAO1I,KAAK4Q,KAAL,CAAWtG,GAAX,CACM9G,MADN,CACa,GADb,EAEUC,IAFV,CAEe,OAFf,EAEwB,2CAFxB,EAGMD,MAHN,CAGa,MAHb,EAIUC,IAJV,CAIe,OAJf,EAIwB,sCAJxB,CAAX;;AAMA;AACA;AACAiF,sBAAKjF,IAAL,CAAU,GAAV,EAAiB,CAACzD,KAAK4Q,KAAL,CAAWzP,KAAX,GAAmB,GAApB,IAA2B,CAA5C,EACKsC,IADL,CACU,GADV,EACezD,KAAKoS,YAAL,CAAkBpS,KAAK4Q,KAAL,CAAWrP,MAA7B,EAAqCvB,KAAK4Q,KAAL,CAAWxP,MAAhD,CADf,EAEKqC,IAFL,CAEU,aAFV,EAEyB,QAFzB,EAGKE,KAHL,CAGW,WAHX,EAGwB3D,KAAKD,OAAL,CAAa6I,QAHrC,EAIKF,IAJL,CAIU1I,KAAKD,OAAL,CAAa2I,IAJvB;AAKH;AACJ;;;sCAEYnH,M,EAAQH,M,EAAQ;AACzB,iBAAIpB,OAAO,IAAX;;AAEA,iBAAIA,KAAKD,OAAL,CAAa4I,QAAb,KAA0B,KAA9B,EAAqC;AACjC,wBAAQvH,OAAOI,GAAP,GAAa,CAArB;AACH,cAFD,MAEO,IAAIxB,KAAKD,OAAL,CAAa4I,QAAb,KAA0B,QAA9B,EAAwC;AAC3C,wBAAQpH,SAASH,OAAOK,MAAP,GAAgB,CAAjC;AACH;AACJ;AACD;;;;6BA/DY;AACR,oBAAO,KAAKoP,MAAZ;AACH,U;;AAKD;;AAEA;;;2BAGU3I,G,EAAK;AACX,iBAAIA,GAAJ,EAAS;AACL,sBAAK2I,MAAL,GAAc3I,GAAd;AACH;AACJ;;;6BAZa;AACV,oBAAO,KAAKiC,QAAZ;AACH,U;2BAYWjC,G,EAAK;AACb,iBAAIA,GAAJ,EAAS;AACL,sBAAKiC,QAAL,GAAgBjC,GAAhB;AACH;AACJ;;;;;;mBA3CgBiK,K;;;;;;;;;;;;;;ACFrB;;;;;;;;KAEqBE,M;AACjB,qBAAYtS,OAAZ,EAAqB6Q,KAArB,EAA4B;AAAA;;AACxB,aAAI5Q,OAAO,IAAX;;AAEA,aAAIC,SAAS;AACTsG,mBAAY,IADH;AAEToC,uBAAY,KAFH;AAGTE,mBAAY,EAHH;AAITD,uBAAY,MAJH;AAKTE,wBAAY,MALH;AAMTC,yBAAY,MANH;AAOT3H,qBAAY,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAPH;AAQT4H,oBAAY,EARH;AASTsJ,kBAAY;AATH,UAAb;;AAcAtS,cAAKmK,QAAL,GAAkBpK,OAAlB;AACAC,cAAK6Q,MAAL,GAAkBD,KAAlB;;AAEA5Q,cAAKmH,YAAL,CAAkBlH,MAAlB;AACH;;AAED;;;;;;;;AA4EA;;AAEA;;;sCAGaA,M,EAAQ;AACjB,iBAAID,OAAO,IAAX;;AAEAA,kBAAKD,OAAL,GAAe,YAAOK,SAAP,CAAiBH,MAAjB,EAAyBD,KAAKD,OAA9B,CAAf;;AAEAC,kBAAKuS,QAAL,GAAkBvS,KAAK4Q,KAAL,CAAWzP,KAA7B;AACAnB,kBAAKwS,SAAL,GAAkBxS,KAAK4Q,KAAL,CAAWrP,MAA7B;AACAvB,kBAAKU,IAAL,GAAkBV,KAAK4Q,KAAL,CAAWjQ,UAA7B;AACH;;;gCAEMD,I,EAAM;AACT,iBAAIV,OAAO,IAAX;;AAEAA,kBAAKU,IAAL,GAAYA,IAAZ;;AAEA,iBAAIV,KAAKD,OAAL,CAAawG,IAAjB,EAAuB;AACnB;AACAvG,sBAAK4Q,KAAL,CAAWtG,GAAX,CAAepH,SAAf,CAAyB,8CAAzB,EAAyEE,MAAzE;;AAEA;AACA,qBAAIf,SAAS,EAAb;;AAEA,qBAAIrC,KAAK4Q,KAAL,CAAWvQ,SAAX,IAAwB,KAA5B,EAAmC;AAC/BL,0BAAKU,IAAL,GAAYV,KAAKU,IAAL,CAAUV,KAAKU,IAAL,CAAUsN,MAAV,CAAiB,UAACoB,CAAD,EAAIf,CAAJ,EAAOzK,CAAP,EAAUqK,CAAV;AAAA,gCAAgBA,EAAEmB,CAAF,EAAKpO,MAAL,GAAcqN,EAAErN,MAAhB,GAAyBoO,CAAzB,GAA6BxL,CAA7C;AAAA,sBAAjB,EAAiE,CAAjE,CAAV,CAAZ;AACH;;AAED;AACA;AACA,qBAAIuF,YAAYnJ,KAAK4Q,KAAL,CAAWtG,GAAX,CACX9G,MADW,CACJ,GADI,EAEXC,IAFW,CAEN,OAFM,EAEG,6CAFH,CAAhB;;AAIA;;AAEAzD,sBAAKyS,IAAL,GAAYtJ,UAAUjG,SAAV,CAAoB,0CAApB,EACPxC,IADO,CACFV,KAAKU,IADH,EAEP6C,KAFO,GAECC,MAFD,CAEQ,GAFR,EAGPC,IAHO,CAGF,OAHE,EAGO,wCAHP,EAIPA,IAJO,CAIF,UAJE,EAIU,UAASlB,CAAT,EAAY;AAAE,4BAAOA,EAAE,UAAF,CAAP;AAAuB,kBAJ/C,EAKPkB,IALO,CAKF,aALE,EAKa,UAASlB,CAAT,EAAY;AAAE,4BAAOA,EAAE,QAAF,CAAP;AAAqB,kBALhD,CAAZ;;AAQAvC,sBAAKyS,IAAL,CAAUjP,MAAV,CAAiB,MAAjB,EACKC,IADL,CACU,OADV,EACmB,wCADnB,EAEKA,IAFL,CAEU,OAFV,EAEmBzD,KAAKD,OAAL,CAAa8I,IAFhC,EAGKpF,IAHL,CAGU,QAHV,EAGoBzD,KAAKD,OAAL,CAAa8I,IAHjC,EAIKpF,IAJL,CAIU,GAJV,EAIezD,KAAKD,OAAL,CAAa8I,IAJ5B,EAKKpF,IALL,CAKU,MALV,EAKkB,UAASlB,CAAT,EAAW;AAAE,4BAAOA,EAAEc,KAAF,IAAWd,EAAE,CAAF,EAAKc,KAAvB;AAA+B,kBAL9D;AAMI;AANJ,kBAOKM,KAPL,CAOW,QAPX,EAOqB,SAPrB;;AASA3D,sBAAKyS,IAAL,CAAUjP,MAAV,CAAiB,MAAjB,EACKC,IADL,CACU,OADV,EACmB,CADnB,EAEKA,IAFL,CAEU,QAFV,EAEoBzD,KAAKD,OAAL,CAAa8I,IAFjC,EAGKpF,IAHL,CAGU,GAHV,EAGezD,KAAKD,OAAL,CAAa8I,IAH5B,EAIKpF,IAJL,CAIU,GAJV,EAIe,CAJf,EAKKA,IALL,CAKU,SALV,EAKqB,CALrB,EAMKE,KANL,CAMW,QANX,EAMqB,SANrB;;AAQA3D,sBAAKyS,IAAL,CAAUjP,MAAV,CAAiB,MAAjB,EACKC,IADL,CACU,OADV,EACmB,wCADnB,EAEKA,IAFL,CAEU,GAFV,EAEezD,KAAKD,OAAL,CAAa8I,IAAb,GAAoB,CAFnC,EAGKpF,IAHL,CAGU,GAHV,EAGezD,KAAKD,OAAL,CAAa8I,IAH5B,EAIKlF,KAJL,CAIW,WAJX,EAIwB3D,KAAKD,OAAL,CAAa6I,QAJrC,EAKKjF,KALL,CAKW,aALX,EAK0B3D,KAAKD,OAAL,CAAagJ,UALvC,EAMKpF,KANL,CAMW,MANX,EAMmB3D,KAAKD,OAAL,CAAa+I,SANhC,EAOKnF,KAPL,CAOW,QAPX,EAOqB,SAPrB;AAQI;AARJ,kBASK+E,IATL,CASU,UAASnG,CAAT,EAAY;AAAE,4BAAOvC,KAAK4Q,KAAL,CAAWvQ,SAAX,IAAwB,KAAxB,GAAgCkC,EAAEuB,KAAlC,GAA0CvB,EAAEC,IAAnD;AAA0D,kBATlF;;AAWA;AACA,qBAAIkQ,UAAU,SAAVA,OAAU,CAASD,IAAT,EAAe;AACzB,4BAAOA,KAAKE,qBAAL,EAAP;AACH,kBAFD;AAGA,qBAAIC,QAAQ,SAARA,KAAQ,CAASH,IAAT,EAAe;AACvB,yBAAII,KAAKlR,GAAGiF,MAAH,CAAU6L,IAAV,EAAgBhP,IAAhB,CAAqB,WAArB,EAAkC4B,KAAlC,CAAwC,GAAxC,CAAT;AACA,4BAAO;AACH3D,4BAAGkO,WAAWiD,GAAG,CAAH,EAAMzE,OAAN,CAAc,YAAd,EAA4B,EAA5B,CAAX,CADA;AAEHrM,4BAAG6N,WAAWiD,GAAG,CAAH,EAAMzE,OAAN,CAAc,GAAd,EAAmB,EAAnB,CAAX;AAFA,sBAAP;AAIH,kBAND;;AAQA,qBAAIE,IAAI,CAAR,CAnEmB,CAmER;AACX,qBAAIwE,QAAQnR,GAAGuB,SAAH,CAAa,wBAAb,EAAuC,CAAvC,CAAZ;AACA,qBAAI6P,aAAaL,QAAQI,MAAM,CAAN,CAAR,EAAkBvR,MAAnC;AACA,qBAAIyR,cAAc9O,KAAKiB,KAAL,CAAW,CAACnF,KAAKwS,SAAL,GAAiBxS,KAAKD,OAAL,CAAaqB,MAAb,CAAoB,CAApB,CAAjB,GAA0CpB,KAAKD,OAAL,CAAaqB,MAAb,CAAoB,CAApB,CAA3C,KAAsE2R,aAAa/S,KAAKD,OAAL,CAAaiJ,KAAhG,CAAX,CAAlB;;AAEA,qBAAIhJ,KAAKD,OAAL,CAAaiJ,KAAb,GAAqB+J,UAAzB,EAAqCC;;AAErC,qBAAIC,cAAc,IAAIlG,KAAJ,CAAU7I,KAAKiB,KAAL,CAAW2N,MAAM9R,MAAN,GAAegS,WAA1B,CAAV,CAAlB;;AAEAF,uBAAMlE,OAAN,CAAc,UAAUhL,CAAV,EAAasP,CAAb,EAAgB;AAC1B,yBAAIC,MAAMjP,KAAKiB,KAAL,CAAW+N,IAAIF,WAAf,CAAV;AACA,yBAAI7R,QAAQuR,QAAQ9O,CAAR,EAAWzC,KAAvB;AACA,yBAAI8R,YAAYE,GAAZ,KAAoBpP,SAApB,IAAiC5C,QAAQ8R,YAAYE,GAAZ,CAA7C,EAA+DF,YAAYE,GAAZ,IAAmBhS,KAAnB;AAClE,kBAJD;;AAMA,qBAAKnB,KAAKD,OAAL,CAAa4I,QAAb,IAAyB,QAA9B,EAAuC;AACnC3I,0BAAKyS,IAAL,CAAUhP,IAAV,CAAe,WAAf,EAA4B,UAASlB,CAAT,EAAYqB,CAAZ,EAAe;AACvC,6BAAIA,IAAI,CAAR,EAAW;AACP,iCAAI6O,OAAQK,MAAMlP,CAAN,CAAZ;AACA,iCAAIwP,UAAWN,MAAMlP,IAAI,CAAV,CAAf;AACA,iCAAIyP,OAAOnP,KAAKiB,KAAL,CAAW,CAACyN,MAAMQ,OAAN,EAAe1R,CAAf,GAAmBgR,QAAQU,OAAR,EAAiBjS,KAApC,GAA4CnB,KAAKD,OAAL,CAAaiJ,KAAzD,GAAiE0J,QAAQD,IAAR,EAActR,KAA/E,GAAuFnB,KAAKD,OAAL,CAAaqB,MAAb,CAAoB,CAApB,CAAxF,IAAkHpB,KAAKuS,QAAlI,CAAX;AACA,iCAAIc,OAAO,CAAX,EAAc/E;AACd,oCAAO,gBAAgB+E,OAAO,CAAP,GAAWrT,KAAKD,OAAL,CAAaqB,MAAb,CAAoB,CAApB,CAAX,GAAoCwR,MAAMQ,OAAN,EAAe1R,CAAf,GAAmBgR,QAAQU,OAAR,EAAiBjS,KAApC,GAA4CnB,KAAKD,OAAL,CAAaiJ,KAA7G,IAAsH,GAAtH,IAA6HhJ,KAAKwS,SAAL,GAAiBxS,KAAKD,OAAL,CAAaqB,MAAb,CAAoB,CAApB,CAAjB,GAA0C2R,UAA1C,GAAuDzE,KAAKyE,aAAa/S,KAAKD,OAAL,CAAaiJ,KAA/B,CAApL,IAA6N,GAApO;AACH,0BAND,MAMO;AACH,oCAAO,eAAehJ,KAAKD,OAAL,CAAaqB,MAAb,CAAoB,CAApB,CAAf,GAAwC,GAAxC,IAA+CpB,KAAKwS,SAAL,GAAiBxS,KAAKD,OAAL,CAAaqB,MAAb,CAAoB,CAApB,CAAjB,GAA0C2R,UAAzF,IAAuG,GAA9G;AACH;AACJ,sBAVD;AAWH,kBAZD,MAYO,IAAI/S,KAAKD,OAAL,CAAa4I,QAAb,IAAyB,MAA7B,EAAqC;AACxC3I,0BAAKyS,IAAL,CAAUhP,IAAV,CAAe,WAAf,EAA4B,UAASlB,CAAT,EAAYqB,CAAZ,EAAe;AACvC,6BAAIuP,MAAMjP,KAAKiB,KAAL,CAAWvB,IAAIoP,WAAf,CAAV;;AAEA,6BAAIpP,IAAI,CAAR,EAAW;AACP,iCAAI0P,SAASpP,KAAKiB,KAAL,CAAW,CAACvB,IAAI,CAAL,IAAUoP,WAArB,CAAb;AACA,iCAAIP,OAAQK,MAAMlP,CAAN,CAAZ;AACA,iCAAIwP,UAAWN,MAAMlP,IAAI,CAAV,CAAf;AACA,oCAAO,gBAAgBuP,MAAMG,MAAN,GAAgBL,YAAYE,GAAZ,IAAmBnT,KAAKD,OAAL,CAAaiJ,KAAhC,GAAwC4J,MAAMQ,OAAN,EAAe1R,CAAvE,GAA4EkR,MAAMQ,OAAN,EAAe1R,CAA3G,IAAgH,GAAhH,IAAuHyR,MAAMG,MAAN,GAAetT,KAAKD,OAAL,CAAaqB,MAAb,CAAoB,CAApB,CAAf,GAAwCwR,MAAMQ,OAAN,EAAerR,CAAf,GAAmB2Q,QAAQU,OAAR,EAAiB7R,MAApC,GAA6CvB,KAAKD,OAAL,CAAaiJ,KAAzN,IAAkO,GAAzO;AACH,0BALD,MAOI,OAAO,eAAehJ,KAAKD,OAAL,CAAaqB,MAAb,CAAoB,CAApB,CAAf,GAAwC,GAAxC,GAA8CpB,KAAKD,OAAL,CAAaqB,MAAb,CAAoB,CAApB,CAA9C,GAAuE,GAA9E;AACP,sBAXD;AAYH,kBAbM,MAaA,IAAIpB,KAAKD,OAAL,CAAa4I,QAAb,IAAyB,OAA7B,EAAsC;AACzC3I,0BAAKyS,IAAL,CAAUhP,IAAV,CAAe,WAAf,EAA4B,UAASlB,CAAT,EAAYqB,CAAZ,EAAe;AACvC,6BAAIuP,MAAMjP,KAAKiB,KAAL,CAAWvB,IAAIoP,WAAf,CAAV;AACA,6BAAIpP,IAAI,CAAR,EAAW;AACP,iCAAI0P,SAASpP,KAAKiB,KAAL,CAAW,CAACvB,IAAI,CAAL,IAAUoP,WAArB,CAAb;AACA,iCAAIP,OAAQK,MAAMlP,CAAN,CAAZ;AACA,iCAAIwP,UAAWN,MAAMlP,IAAI,CAAV,CAAf;AACA,oCAAO,gBAAgBuP,MAAMG,MAAN,GAAgBV,MAAMQ,OAAN,EAAe1R,CAAf,GAAmB1B,KAAKD,OAAL,CAAaiJ,KAAhC,GAAwCiK,YAAYE,GAAZ,CAAxD,GAA4EP,MAAMQ,OAAN,EAAe1R,CAA3G,IAAgH,GAAhH,IAAuHyR,MAAMG,MAAN,GAAetT,KAAKD,OAAL,CAAaqB,MAAb,CAAoB,CAApB,CAAf,GAAwCwR,MAAMQ,OAAN,EAAerR,CAAf,GAAmB2Q,QAAQU,OAAR,EAAiB7R,MAApC,GAA6CvB,KAAKD,OAAL,CAAaiJ,KAAzN,IAAkO,GAAzO;AACH,0BALD,MAOI,OAAO,gBAAgBhJ,KAAKuS,QAAL,GAAgBvS,KAAKD,OAAL,CAAaqB,MAAb,CAAoB,CAApB,CAAhB,GAAyC6R,YAAYE,GAAZ,CAAzD,IAA6E,GAA7E,GAAmFnT,KAAKD,OAAL,CAAaqB,MAAb,CAAoB,CAApB,CAAnF,GAA4G,GAAnH;AACP,sBAVD;AAWH,kBAZM,MAYA;AACHpB,0BAAKyS,IAAL,CAAUhP,IAAV,CAAe,WAAf,EAA4B,UAASlB,CAAT,EAAYqB,CAAZ,EAAe;AACvC,6BAAIA,IAAI,CAAR,EAAW;AACP,iCAAI6O,OAAQK,MAAMlP,CAAN,CAAZ;AACA,iCAAIwP,UAAWN,MAAMlP,IAAI,CAAV,CAAf;AACA,iCAAIyP,OAAOnP,KAAKiB,KAAL,CAAW,CAACyN,MAAMQ,OAAN,EAAe1R,CAAf,GAAmBgR,QAAQU,OAAR,EAAiBjS,KAApC,GAA4CnB,KAAKD,OAAL,CAAaiJ,KAAzD,GAAiE0J,QAAQD,IAAR,EAActR,KAA/E,GAAuFnB,KAAKD,OAAL,CAAaqB,MAAb,CAAoB,CAApB,CAAxF,IAAkHpB,KAAKuS,QAAlI,CAAX;AACA,iCAAIc,OAAO,CAAX,EAAc/E;AACd,oCAAO,gBAAgB+E,OAAO,CAAP,GAAWrT,KAAKD,OAAL,CAAaqB,MAAb,CAAoB,CAApB,CAAX,GAAoCwR,MAAMQ,OAAN,EAAe1R,CAAf,GAAmBgR,QAAQU,OAAR,EAAiBjS,KAApC,GAA4CnB,KAAKD,OAAL,CAAaiJ,KAA7G,IAAsH,GAAtH,IAA6HhJ,KAAKD,OAAL,CAAaqB,MAAb,CAAoB,CAApB,IAAyBkN,KAAKyE,aAAa/S,KAAKD,OAAL,CAAaiJ,KAA/B,CAAtJ,IAA+L,GAAtM;AACH,0BAND,MAQI,OAAO,eAAehJ,KAAKD,OAAL,CAAaqB,MAAb,CAAoB,CAApB,CAAf,GAAwC,GAAxC,GAA8CpB,KAAKD,OAAL,CAAaqB,MAAb,CAAoB,CAApB,CAA9C,GAAuE,GAA9E;AACP,sBAVD;AAWH;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AACJ;;;gCAEM;AACH,iBAAIpB,OAAO,IAAX;;AAEAA,kBAAK0E,MAAL,CAAY1E,KAAK4Q,KAAL,CAAWjQ,UAAvB;AACH;;AAED;;;;;;;uDAI8BiQ,K,EAAO;;AAEjC,iBAAI5Q,OAAO,IAAX;;AAEA,iBAAI2F,eAAsBiL,MAAMnL,KAAN,CAAY1F,OAAtC;AAAA,iBACIyF,cAAsBoL,MAAMnL,KAAN,CAAYC,MADtC;AAAA,iBAEII,sBAAsBH,aAAaI,WAAb,CAAyB5F,QAFnD;AAAA,iBAGI6F,qBAAsBL,aAAaM,UAAb,CAAwB9F,QAHlD;AAAA,iBAII+F,kBAAsB0K,MAAMzK,KAAN,CAAYhG,QAJtC;;AAMAH,kBAAKuT,gBAAL,GAAwB;;AAEpB,0BAAS,eAASd,IAAT,EAAe;AACpB,yBAAI,YAAO3P,UAAP,CAAkBoD,eAAlB,CAAJ,EAAwC;AACpCA,yCAAgBnD,IAAhB,CAAqB,IAArB,EAA2B0P,IAA3B;AACH;;AAED,yBAAI7M,WAAWjE,GAAGiF,MAAH,CAAU,IAAV,CAAf;AACA,yBAAIlB,SAAS,IAAb;AAAA,yBACI8N,UAAUxT,KAAKU,IADnB;AAEA,yBAAI+S,cAAc9R,GAAGoM,GAAH,CAAOyF,QAAQlR,GAAR,CAAY,UAASC,CAAT,EAAY;AAC7C,gCAAQA,EAAEmD,MAAH,GAAa,CAAb,GAAiB,CAAxB;AACH,sBAFwB,CAAP,CAAlB;;AAIA;AACA;;AAEA;AACA;AACA,yBAAIE,SAASnC,IAAT,CAAc,aAAd,KAAgC,OAApC,EAA6C;AACzCmC,kCAASnC,IAAT,CAAc,aAAd,EAA6B,IAA7B;AACAmC,kCAASjC,KAAT,CAAe,SAAf,EAA0B,GAA1B;AACH,sBAHD,MAGO;AACH,6BAAI8P,cAAc,CAAlB,EAAqB;AACrB7N,kCAASnC,IAAT,CAAc,aAAd,EAA6B,KAA7B;AACAmC,kCAASjC,KAAT,CAAe,SAAf,EAA0B,KAA1B;AACA+B,kCAAS,KAAT;AACH;;AAED;AACA,yBAAIgC,UAAU,EAAd;AACAkJ,2BAAMjQ,UAAN,CAAiBiO,OAAjB,CAAyB,UAASpB,KAAT,EAAgB;AACrC,6BAAIA,MAAM,UAAN,KAAqBiF,KAAK,UAAL,CAAzB,EAA2CjF,MAAM9H,MAAN,GAAeA,MAAf;AAC3C,6BAAI8H,MAAM9H,MAAV,EAAkBgC,QAAQoH,IAAR,CAAatB,KAAb;AACrB,sBAHD;;AAKAoD,2BAAM8C,YAAN,CAAmBhM,OAAnB;AACAkJ,2BAAMnM,IAAN,CAAWC,MAAX,CAAkBkM,MAAMlP,CAAxB,EAA2BkP,MAAM7O,CAAjC,EAAoC,GAApC;AACA6O,2BAAMlM,MAAN,CAAagD,OAAb;;AAEA;AACA,yBAAIkJ,MAAM7Q,OAAN,CAAcmK,QAAd,CAAuB3D,IAA3B,EAAiC;AAC7BqK,+BAAM+C,SAAN,CAAgBtR,MAAhB,CAAuBuO,MAAMlP,CAAN,CAAQW,MAAR,EAAvB;AACAuO,+BAAMgD,SAAN,CAAgBvR,MAAhB,CAAuBuO,MAAM7O,CAAN,CAAQM,MAAR,EAAvB;AACAuO,+BAAMtG,GAAN,CAAU1D,MAAV,CAAiB,uCAAjB,EAA0D9B,UAA1D,GAAuEC,QAAvE,CAAgF,GAAhF,EAAqFhC,IAArF,CAA0F6N,MAAMiD,aAAhG;AACAjD,+BAAMkD,cAAN,CAAqBpM,OAArB;AACH;AACJ,kBA/CmB;;AAiDpB,8BAAa,mBAAS+K,IAAT,EAAe;AACxB,yBAAI,YAAO3P,UAAP,CAAkBgD,mBAAlB,CAAJ,EAA4C;AACxCA,6CAAoB/C,IAApB,CAAyB,IAAzB,EAA+B0P,IAA/B;AACH;;AAED,yBAAIsB,iBAAiBpS,GAAGiF,MAAH,CAAU,IAAV,CAArB;;AAEA;AACA;AACA5G,0BAAKgU,iBAAL,CAAuBD,cAAvB;AACH,kBA3DmB;;AA6DpB,6BAAY,kBAAStB,IAAT,EAAe;AACvB,yBAAI,YAAO3P,UAAP,CAAkBkD,kBAAlB,CAAJ,EAA2C;AACvCA,4CAAmBjD,IAAnB,CAAwB,IAAxB,EAA8B0P,IAA9B;AACH;;AAED,yBAAIsB,iBAAiBpS,GAAGiF,MAAH,CAAU,IAAV,CAArB;;AAEA;AACA;AACA5G,0BAAKiU,mBAAL,CAAyBF,cAAzB;AACH;;AAvEmB,cAAxB;;AA2EA,iBAAI/T,KAAKD,OAAL,CAAawG,IAAjB,EAAuB;AACnBvG,sBAAKyS,IAAL,CAAUzL,EAAV,CAAahH,KAAKuT,gBAAlB;AACH;AACJ;;AAED;;;;;;;2DAIkC3C,K,EAAOsD,I,EAAMC,G,EAAKC,W,EAAaC,G,EAAK;;AAElE,iBAAIrU,OAAO,IAAX;;AAEA,iBAAI2F,eAAsBiL,MAAMnL,KAAN,CAAY1F,OAAtC;AAAA,iBACIyF,cAAsBoL,MAAMnL,KAAN,CAAYC,MADtC;AAAA,iBAEII,sBAAsBH,aAAaI,WAAb,CAAyB5F,QAFnD;AAAA,iBAGI6F,qBAAsBL,aAAaM,UAAb,CAAwB9F,QAHlD;AAAA,iBAII+F,kBAAsB0K,MAAMzK,KAAN,CAAYhG,QAJtC;;AAMA,iBAAIE,YAAYuQ,MAAMvQ,SAAtB;;AAEA,iBAAIiU,mBAAsBjU,aAAa,KAAb,GAAsB,CAAtB,GAA0BuQ,MAAM7Q,OAAN,CAAcwU,WAAlE;AAAA,iBACIC,mBAAsBnU,aAAa,KAAb,GAAsBuQ,MAAM7Q,OAAN,CAAc0U,MAApC,GAA6C7D,MAAM7Q,OAAN,CAAc2U,WADrF;AAAA,iBAEIC,kBAAsBtU,aAAa,KAAb,GAAsB,CAAtB,GAA0BuQ,MAAM7Q,OAAN,CAAcwU,WAFlE;AAAA,iBAGIK,kBAAsBvU,aAAa,KAAb,GAAsBuQ,MAAM7Q,OAAN,CAAc0U,MAAd,GAAuB,GAA7C,GAAmD7D,MAAM7Q,OAAN,CAAc2U,WAAd,GAA4B,GAHzG;;AAKA1U,kBAAKuT,gBAAL,GAAwB;;AAEpB,0BAAS,eAASd,IAAT,EAAe;AACpB,yBAAI,YAAO3P,UAAP,CAAkBoD,eAAlB,CAAJ,EAAwC;AACpCA,yCAAgBnD,IAAhB,CAAqB,IAArB,EAA2B0P,IAA3B;AACH;;AAED,yBAAI7M,WAAWjE,GAAGiF,MAAH,CAAU,IAAV,CAAf;AACA,yBAAIlB,SAAS,IAAb;AAAA,yBACI8N,UAAUxT,KAAKU,IADnB;AAEA,yBAAI+S,cAAc9R,GAAGoM,GAAH,CAAOyF,QAAQlR,GAAR,CAAY,UAASC,CAAT,EAAY;AAC7C,gCAAQA,EAAEmD,MAAH,GAAa,CAAb,GAAiB,CAAxB;AACH,sBAFwB,CAAP,CAAlB;;AAIA;AACA;;AAEA;AACA;AACA,yBAAIE,SAASnC,IAAT,CAAc,aAAd,KAAgC,OAApC,EAA6C;AACzCmC,kCAASnC,IAAT,CAAc,aAAd,EAA6B,IAA7B;AACAmC,kCAASnC,IAAT,CAAc,SAAd,EAAyB,KAAzB;AACH,sBAHD,MAGO;AACH,6BAAIgQ,cAAc,CAAlB,EAAqB;AACrB7N,kCAASnC,IAAT,CAAc,aAAd,EAA6B,KAA7B;AACAmC,kCAASnC,IAAT,CAAc,SAAd,EAAyB,KAAzB;AACAiC,kCAAS,KAAT;AACH;;AAED;;AAEA1F,0BAAKyS,IAAL,CAAUvG,IAAV,CAAe,YAAW;AACtB,6BAAIvK,GAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,UAArB,MAAqCgP,KAAK,UAAL,CAArC,IAAyD9Q,GAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,aAArB,KAAuC,MAApG,EAA4G;AACxG9B,gCAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,SAArB,EAAgC,KAAhC;AACH;AACJ,sBAJD;;AAMAmN,2BAAMiE,aAAN,GAAsB3I,IAAtB,CAA2B,YAAU;AACjC,6BAAIvK,GAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,UAArB,MAAqCgP,KAAK,UAAL,CAAzC,EAA2D;AACvD9Q,gCAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,SAArB,EAAgC,KAAhC;AACH;AACJ,sBAJD;AAKA;;AAGAmN,2BAAMuD,GAAN,CAAU3M,KAAV,CAAgB,UAASjF,CAAT,EAAY;AACxB,6BAAIA,EAAE,UAAF,KAAiBkQ,KAAK,UAAL,CAArB,EAAuClQ,EAAEmD,MAAF,GAAWA,MAAX;AACvC,gCAAQnD,EAAEmD,MAAH,GAAanD,EAAEiF,KAAf,GAAuB,CAA9B;AACH,sBAHD;;AAKA0M,4BAAOA,KAAKxT,IAAL,CAAUkQ,MAAMuD,GAAN,CAAUX,OAAV,CAAV,CAAP;;AAEAU,0BAAKpP,UAAL,GACKC,QADL,CACc,GADd,EAEK+P,SAFL,CAEe,GAFf,EAEoB,UAASvS,CAAT,EAAY;AACxB,6BAAIwS,cAAcpT,GAAGoT,WAAH,CAAenE,MAAMwD,WAArB,EAAkC7R,CAAlC,CAAlB;AACA;AACA;AACAqO,+BAAMwD,WAAN,GAAoBW,YAAY,CAAZ,CAApB;AACA,gCAAO,UAAS9E,CAAT,EAAY;AACf,oCAAOoE,IAAIU,YAAY9E,CAAZ,CAAJ,CAAP;AACH,0BAFD;AAGH,sBAVL;AAWI;AAXJ,sBAYKxM,IAZL,CAYU,QAZV,EAYoB,MAZpB,EAY4B;AAE/B,kBAlEmB;;AAoEpB,8BAAa,mBAASgP,IAAT,EAAe;AACxB,yBAAI,YAAO3P,UAAP,CAAkBgD,mBAAlB,CAAJ,EAA4C;AACxCA,6CAAoB/C,IAApB,CAAyB,IAAzB,EAA+B0P,IAA/B;AACH;;AAED,yBAAIsB,iBAAiBpS,GAAGiF,MAAH,CAAU,IAAV,CAArB;AACA;AACA;AACA5G,0BAAKgU,iBAAL,CAAuBD,cAAvB;;AAEA,yBAAIA,eAAetQ,IAAf,CAAoB,aAApB,CAAJ,EAAwC;AACpC;AACAzD,8BAAKyS,IAAL,CAAUvG,IAAV,CAAe,YAAW;AACtB,iCAAIvK,GAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,UAArB,MAAqCgP,KAAK,UAAL,CAArC,IAAyD9Q,GAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,aAArB,CAA7D,EAAkG;AAC9F9B,oCAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,SAArB,EAAgC,KAAhC;AACH;AACJ,0BAJD;;AAMA;AACAmN,+BAAMiE,aAAN,GAAsB3I,IAAtB,CAA2B,YAAU;AACjC,iCAAIvK,GAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,UAArB,MAAqCgP,KAAK,UAAL,CAAzC,EAA2D;AACvD9Q,oCAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,SAArB,EAAgC,KAAhC;AACH;AACJ,0BAJD;;AAMA,6BAAImC,WAAWjE,GAAGiF,MAAH,CAAU,oBAAoB6L,KAAK,UAAL,CAApB,GAAuC,IAAjD,CAAf;;AAEA7M,kCACKd,UADL,GAESC,QAFT,CAEkB,GAFlB,EAGSiQ,IAHT,CAGc,QAHd,EAISvR,IAJT,CAIc,GAJd,EAImB9B,GAAG2I,GAAH,CAAO+J,GAAP,GACNE,WADM,CACMI,eADN,EAEND,WAFM,CAEME,eAFN,CAJnB;AAQH;AAIJ,kBA3GmB;;AA6GpB,6BAAY,kBAASnC,IAAT,EAAe;AACvB,yBAAI,YAAO3P,UAAP,CAAkBkD,kBAAlB,CAAJ,EAA2C;AACvCA,4CAAmBjD,IAAnB,CAAwB,IAAxB,EAA8B0P,IAA9B;AACH;;AAED,yBAAIsB,iBAAiBpS,GAAGiF,MAAH,CAAU,IAAV,CAArB;AACA;AACA;AACA5G,0BAAKiU,mBAAL,CAAyBF,cAAzB;;AAEA;AACI;AACA/T,0BAAKyS,IAAL,CAAUvG,IAAV,CAAe,YAAW;AACtB,6BAAIvK,GAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,UAArB,MAAqCgP,KAAK,UAAL,CAArC,IAAyD9Q,GAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,aAArB,CAA7D,EAAkG;AAC9F9B,gCAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,SAArB,EAAgC,KAAhC;AACH;AACJ,sBAJD;;AAMA;AACAmN,2BAAMiE,aAAN,GAAsB3I,IAAtB,CAA2B,YAAU;AACjC,6BAAIvK,GAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,UAArB,MAAqCgP,KAAK,UAAL,CAAzC,EAA2D;AACvD9Q,gCAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,SAArB,EAAgC,KAAhC;AACH;AACJ,sBAJD;;AAMA,yBAAImC,WAAWjE,GAAGiF,MAAH,CAAU,oBAAoB6L,KAAK,UAAL,CAApB,GAAuC,IAAjD,CAAf;;AAEA7M,8BACKd,UADL,GAESC,QAFT,CAEkB,GAFlB,EAGSiQ,IAHT,CAGc,QAHd,EAISvR,IAJT,CAIc,GAJd,EAImB9B,GAAG2I,GAAH,CAAO+J,GAAP,GACNE,WADM,CACMD,gBADN,EAENI,WAFM,CAEMF,gBAFN,CAJnB;AAQJ;AAEH;;AAlJmB,cAAxB;;AAsJA,iBAAIxU,KAAKD,OAAL,CAAawG,IAAjB,EACIvG,KAAKyS,IAAL,CAAUzL,EAAV,CAAahH,KAAKuT,gBAAlB;AACP;;AAED;;;;;;;;sDAK6B3C,K,EAAO;;AAEhC,iBAAI5Q,OAAO,IAAX;;AAEA,iBAAI2F,eAAsBiL,MAAMnL,KAAN,CAAY1F,OAAtC;AAAA,iBACIyF,cAAsBoL,MAAMnL,KAAN,CAAYC,MADtC;AAAA,iBAEII,sBAAsBH,aAAaI,WAAb,CAAyB5F,QAFnD;AAAA,iBAGI6F,qBAAsBL,aAAaM,UAAb,CAAwB9F,QAHlD;AAAA,iBAII+F,kBAAsB0K,MAAMzK,KAAN,CAAYhG,QAJtC;;AAMAH,kBAAKuT,gBAAL,GAAwB;;AAEpB,0BAAS,eAASd,IAAT,EAAe;AACpB,yBAAI,YAAO3P,UAAP,CAAkBoD,eAAlB,CAAJ,EAAwC;AACpCA,yCAAgBnD,IAAhB,CAAqB,IAArB,EAA2B0P,IAA3B;AACH;;AAED,yBAAI7M,WAAWjE,GAAGiF,MAAH,CAAU,IAAV,CAAf;AACA,yBAAIlB,SAAS,IAAb;AAAA,yBACIuP,aAAarE,MAAMjQ,UADvB;AAAA,yBAEI6S,UAAUxT,KAAKU,IAFnB;AAGA,yBAAI+S,cAAc9R,GAAGoM,GAAH,CAAOyF,QAAQlR,GAAR,CAAY,UAASC,CAAT,EAAY;AAC7C,gCAAQA,EAAEmD,MAAH,GAAa,CAAb,GAAiB,CAAxB;AACH,sBAFwB,CAAP,CAAlB;;AAIA,yBAAIwP,YAAY,EAAhB;AACA,yBAAIC,eAAe,EAAnB;AACA,yBAAIzU,OAAO,EAAX;AACA;AACA;;AAEA;AACA;AACA,yBAAIkF,SAASnC,IAAT,CAAc,aAAd,KAAgC,OAApC,EAA6C;AACzCmC,kCAASnC,IAAT,CAAc,aAAd,EAA6B,MAA7B;AACAmC,kCAASjC,KAAT,CAAe,SAAf,EAA0B,KAA1B;AACH,sBAHD,MAGO;AACH,6BAAI8P,cAAc,CAAlB,EAAqB;AACrB7N,kCAASnC,IAAT,CAAc,aAAd,EAA6B,OAA7B;AACAmC,kCAASjC,KAAT,CAAe,SAAf,EAA0B,KAA1B;AACA+B,kCAAS,KAAT;AACH;;AAED;AACA1F,0BAAKU,IAAL,CAAUkO,OAAV,CAAkB,UAASrM,CAAT,EAAYqB,CAAZ,EAAe;AAC7B,6BAAIrB,EAAEmD,MAAN,EACIyP,aAAarG,IAAb,CAAkBvM,EAAEuB,KAApB;AACJ,6BAAIvB,EAAEuB,KAAF,IAAW2O,KAAK3O,KAApB,EACIvB,EAAEmD,MAAF,GAAWA,MAAX;AACJ,6BAAInD,EAAEmD,MAAN,EACIwP,UAAUpG,IAAV,CAAevM,EAAEuB,KAAjB;AACP,sBAPD;;AASAmR,gCAAWrG,OAAX,CAAmB,UAAUrM,CAAV,EAAY;AAC3B,6BAAI6S,aAAa,EAAjB;AACA,6BAAIC,aAAa,EAAjB;AACA9S,2BAAEqM,OAAF,CAAU,UAAUC,CAAV,EAAY;AAClBqG,uCAAUtG,OAAV,CAAkB,UAAU0G,CAAV,EAAa1R,CAAb,EAAgB;AAC9B,qCAAI0R,KAAKzG,EAAE/K,KAAX,EAAkB;AACd,yCAAI+K,EAAE5K,EAAF,GAAO,CAAX,EAAcmR,WAAWtG,IAAX,CAAgB,EAACwG,GAAGzG,CAAJ,EAAOA,GAAGjL,CAAV,EAAhB,EAAd,KACKyR,WAAWvG,IAAX,CAAgB,EAACwG,GAAGzG,CAAJ,EAAOA,GAAGjL,CAAV,EAAhB;AACR;AACJ,8BALD;AAMH,0BAPD;AAQA,6BAAI,CAACgN,MAAM/M,OAAX,EAAoB;AAChB,iCAAIuR,WAAWpU,MAAX,GAAoB,CAAxB,EAA2B;AACvB,qCAAIoU,WAAW,CAAX,EAAcE,CAAd,CAAgBtR,EAAhB,GAAqB,CAAzB,EAA4BoR,WAAW,CAAX,EAAcE,CAAd,CAAgBtR,EAAhB,GAAqB,CAArB;AAC5B,sCAAK,IAAIJ,IAAI,CAAb,EAAgBA,IAAIwR,WAAWpU,MAA/B,EAAuC4C,GAAvC,EAA4C;AACxCwR,gDAAWxR,CAAX,EAAc0R,CAAd,CAAgBtR,EAAhB,GAAqBoR,WAAWxR,IAAE,CAAb,EAAgB0R,CAAhB,CAAkBtR,EAAlB,GAAuBoR,WAAWxR,IAAE,CAAb,EAAgB0R,CAAhB,CAAkBrR,EAA9D;AACH;AACJ;AACD,iCAAIoR,WAAWrU,MAAX,GAAoB,CAAxB,EAA2B;AACvB,qCAAIqU,WAAW,CAAX,EAAcC,CAAd,CAAgBtR,EAAhB,GAAqBqR,WAAW,CAAX,EAAcC,CAAd,CAAgBrR,EAArC,IAA2C,CAA/C,EAAkDoR,WAAW,CAAX,EAAcC,CAAd,CAAgBtR,EAAhB,GAAqBqR,WAAW,CAAX,EAAcC,CAAd,CAAgBrR,EAArC;AAClD,sCAAK,IAAIL,IAAI,CAAb,EAAgBA,IAAIyR,WAAWrU,MAA/B,EAAuC4C,GAAvC,EAA4C;AACxCyR,gDAAWzR,CAAX,EAAc0R,CAAd,CAAgBtR,EAAhB,GAAqBqR,WAAWzR,IAAE,CAAb,EAAgB0R,CAAhB,CAAkBtR,EAAlB,GAAuBqR,WAAWzR,CAAX,EAAc0R,CAAd,CAAgBrR,EAA5D;AACH;AACJ;AACJ;AACD,6BAAIiM,UAAU,IAAInD,KAAJ,CAAUqI,WAAWpU,MAAX,GAAoBqU,WAAWrU,MAAzC,CAAd;AACA,8BAAK,IAAI4C,IAAI,CAAb,EAAgBA,IAAIwR,WAAWpU,MAA/B,EAAuC4C,GAAvC,EAA4C;AACxCsM,qCAAQkF,WAAWxR,CAAX,EAAciL,CAAtB,IAA2BuG,WAAWxR,CAAX,EAAc0R,CAAzC;AACH;AACD,8BAAK,IAAI1R,IAAI,CAAb,EAAgBA,IAAIyR,WAAWrU,MAA/B,EAAuC4C,GAAvC,EAA4C;AACxCsM,qCAAQmF,WAAWzR,CAAX,EAAciL,CAAtB,IAA2BwG,WAAWzR,CAAX,EAAc0R,CAAzC;AACH;AACD5U,8BAAKoO,IAAL,CAAUoB,OAAV;AACH,sBAjCD;;AAmCAU,2BAAM2E,uBAAN,CAA8B7U,IAA9B,EAAoCwU,SAApC,EAA+CC,YAA/C,EAA6D1C,KAAK3O,KAAlE;AAEH,kBAhFmB;;AAkFpB,8BAAa,mBAAS2O,IAAT,EAAe;AACxB,yBAAI7M,WAAWjE,GAAGiF,MAAH,CAAU,IAAV,CAAf;AACA;AACA5G,0BAAKgU,iBAAL,CAAuBpO,QAAvB;;AAEA,yBAAIA,SAASnC,IAAT,CAAc,aAAd,KAAgC,MAApC,EACI9B,GAAGuB,SAAH,CAAa,gCAAb,EACKuD,MADL,CACY,UAAUlE,CAAV,EAAY;AAAE,gCAAOA,EAAE,WAAF,KAAkBkQ,KAAK,WAAL,CAAzB;AAA6C,sBADvE,EAEKhP,IAFL,CAEU,SAFV,EAEqB,GAFrB;AAGP,kBA3FmB;;AA6FpB,6BAAY,kBAASgP,IAAT,EAAe;AACvB,yBAAI7M,WAAWjE,GAAGiF,MAAH,CAAU,IAAV,CAAf;AACA;AACA5G,0BAAKiU,mBAAL,CAAyBrO,QAAzB;;AAEAjE,wBAAGuB,SAAH,CAAa,gCAAb,EACKuD,MADL,CACY,UAAUlE,CAAV,EAAY;AAAE,gCAAOA,EAAE,WAAF,KAAkBkQ,KAAK,WAAL,CAAzB;AAA6C,sBADvE,EAEKhP,IAFL,CAEU,SAFV,EAEqB,CAFrB;AAGH;;AArGmB,cAAxB;AAwGA,iBAAIzD,KAAKD,OAAL,CAAawG,IAAjB,EACIvG,KAAKyS,IAAL,CAAUzL,EAAV,CAAahH,KAAKuT,gBAAlB;AACP;;;2CAEiBd,I,EAAM;AACpB,iBAAIzS,OAAO,IAAX;;AAEAyS,kBAAK7L,MAAL,CAAY,wBAAZ,EAAsCnD,IAAtC,CAA2C,MAA3C,EAAmD,UAASlB,CAAT,EAAW;AAAE,wBAAO,YAAOgI,UAAP,CAAkB,GAAlB,EAAuBhI,EAAEc,KAAF,IAAWd,EAAE,CAAF,EAAKc,KAAvC,CAAP;AAAuD,cAAvH;AACAoP,kBAAK7L,MAAL,CAAY,wBAAZ,EAAsCjD,KAAtC,CAA4C,MAA5C,EAAoD,UAASpB,CAAT,EAAW;AAAE,wBAAO,YAAOgI,UAAP,CAAkB,CAAC,GAAnB,EAAwBvK,KAAKD,OAAL,CAAa+I,SAArC,CAAP;AAAyD,cAA1H;AACH;;;6CAEmB2J,I,EAAM;AACtB,iBAAIzS,OAAO,IAAX;;AAEAyS,kBAAK7L,MAAL,CAAY,wBAAZ,EAAsCnD,IAAtC,CAA2C,MAA3C,EAAmD,UAASlB,CAAT,EAAW;AAAE,wBAAOA,EAAEc,KAAF,IAAWd,EAAE,CAAF,EAAKc,KAAvB;AAA+B,cAA/F;AACAoP,kBAAK7L,MAAL,CAAY,wBAAZ,EAAsCjD,KAAtC,CAA4C,MAA5C,EAAoD,UAASpB,CAAT,EAAW;AAAE,wBAAOvC,KAAKD,OAAL,CAAa+I,SAApB;AAAgC,cAAjG;AACH;AACD;;;;6BA1oBc;AACV,oBAAO,KAAKqB,QAAZ;AACH,U;;AAyBD;;AAEA;;;2BAGYjC,G,EAAK;AACb,iBAAIA,GAAJ,EAAS;AACL,sBAAKiC,QAAL,GAAgBjC,GAAhB;AACH;AACJ;;;6BAhCU;AACP,oBAAO,KAAKsF,KAAZ;AACH,U;2BAgCQtF,G,EAAK;AACV,iBAAIA,GAAJ,EAAS;AACL,sBAAKsF,KAAL,GAAatF,GAAb;AACH;AACJ;;;6BAlCW;AACR,oBAAO,KAAK2I,MAAZ;AACH,U;2BAkCS3I,G,EAAK;AACX,iBAAIA,GAAJ,EAAS;AACL,sBAAK2I,MAAL,GAAc3I,GAAd;AACH;AACJ;;;6BApCU;AACP,oBAAO,KAAKsN,KAAZ;AACH,U;2BAoCQtN,G,EAAK;AACV,iBAAIA,GAAJ,EAAS;AACL,sBAAKsN,KAAL,GAAatN,GAAb;AACH;AACJ;;;6BAtCsB;AACnB,oBAAO,KAAKuN,iBAAZ;AACH,U;2BAsCoBvN,G,EAAK;AACtB,iBAAIA,GAAJ,EAAS;AACL,sBAAKuN,iBAAL,GAAyBvN,GAAzB;AACH;AACJ;;;6BAxCc;AACX,oBAAO,KAAKwN,SAAZ;AACH,U;2BAwCYxN,G,EAAK;AACd,iBAAIA,GAAJ,EAAS;AACL,sBAAKwN,SAAL,GAAiBxN,GAAjB;AACH;AACJ;;;6BA1Ce;AACZ,oBAAO,KAAKyN,UAAZ;AACH,U;2BA0CazN,G,EAAK;AACf,iBAAIA,GAAJ,EAAS;AACL,sBAAKyN,UAAL,GAAkBzN,GAAlB;AACH;AACJ;;;;;;mBAnGgBmK,M;;;;;;;;;;;;;;ACFrB;;;;;;;;KAEqBuD,K;AACjB,oBAAY7V,OAAZ,EAAqB6Q,KAArB,EAA4B;AAAA;;AACxB,aAAI5Q,OAAO,IAAX;;AAEA,aAAIC,SAAS;AACTkJ,wBAAW,MADF;AAET5C,mBAAM,KAFG;AAGT6C,uBAAU,CAAC,MAAD,EAAS,OAAT,CAHD;AAITzF,oBAAO,SAJE,EAIS;AAClB0F,qBAAQ,IALC;AAMT5D,oBAAO;AACHC,yBAAQ,IADL;AAEHvF,2BAAU;AAFP,cANE;AAUTgG,oBAAO;AACHT,yBAAQ,IADL;AAEHvF,2BAAU;AAFP;AAVE,UAAb;;AAiBAH,cAAKmK,QAAL,GAAkBpK,OAAlB;AACAC,cAAK6Q,MAAL,GAAkBD,KAAlB;;AAEA5Q,cAAKmH,YAAL,CAAkBlH,MAAlB;AACH;;AAED;;;;;;;;AAoCA;;AAEA;;;sCAGaA,M,EAAQ;AACjB,iBAAID,OAAO,IAAX;;AAEAA,kBAAKD,OAAL,GAAe,YAAOK,SAAP,CAAiBH,MAAjB,EAAyBD,KAAKD,OAA9B,CAAf;AACH;;;gCAEMW,I,EAAM;AACT,iBAAIV,OAAO,IAAX;;AAEA,iBAAIA,KAAK4Q,KAAL,CAAWvQ,SAAX,IAAwB,KAAxB,IAAiCL,KAAK4Q,KAAL,CAAWvQ,SAAX,IAAwB,MAA7D,EAAqE;AACjE;AACA,qBAAIL,KAAKD,OAAL,CAAaqJ,QAAb,CAAsBpI,MAAtB,GAA+B,CAA/B,IAAoC,CAACN,KAAK,CAAL,EAAQ8G,KAA7C,IAAsD9G,KAAK,CAAL,EAAQ,CAAR,EAAW,WAAX,KAA2BqD,SAArF,EACI/D,KAAKD,OAAL,CAAaqJ,QAAb,CAAsB0F,IAAtB,CAA2B,OAA3B;;AAEJ;AACA9O,sBAAKU,IAAL,GAAY,EAAZ;AACAA,sBAAKkO,OAAL,CAAa,UAASrM,CAAT,EAAY;AACrB,sBAAC,YAAO+J,OAAP,CAAe/J,CAAf,IAAoBA,CAApB,GAAwBA,EAAEiF,KAA3B,EAAkCoH,OAAlC,CAA0C,UAASV,CAAT,EAAY;AAClDlO,8BAAKU,IAAL,CAAUoO,IAAV,CAAeZ,CAAf;AACH,sBAFD;AAGH,kBAJD;AAKH,cAZD,MAYO;AACHlO,sBAAKU,IAAL,GAAYA,IAAZ;AACH;;AAED,iBAAIV,KAAKD,OAAL,CAAawG,IAAjB,EAAuB;AACnB5E,oBAAGuB,SAAH,CAAa,WAAb,EAA0BE,MAA1B;AACAzB,oBAAGuB,SAAH,CAAa,qBAAb,EAAoCE,MAApC;;AAEA,qBAAIyS,UAAUlU,GAAGiF,MAAH,CAAU5G,KAAKD,OAAL,CAAaoJ,SAAb,KAA2B,MAA3B,GAAoC,MAAMnJ,KAAKD,OAAL,CAAaoJ,SAAvD,GAAmE,MAA7E,EACG3F,MADH,CACU,OADV,EAEOC,IAFP,CAEY,OAFZ,EAEqB,0BAFrB,CAAd;AAAA,qBAGIqS,QAAQD,QAAQrS,MAAR,CAAe,OAAf,CAHZ;AAAA,qBAIIuS,UAAUpU,GAAGiF,MAAH,CAAU5G,KAAKD,OAAL,CAAaoJ,SAAb,KAA2B,MAA3B,GAAoC,MAAMnJ,KAAKD,OAAL,CAAaoJ,SAAvD,GAAmE,MAA7E,EACO3F,MADP,CACc,KADd,EAEOC,IAFP,CAEY,OAFZ,EAEqB,oBAFrB,EAGWD,MAHX,CAGkB,OAHlB,EAIWC,IAJX,CAIgB,OAJhB,EAIyB,YAAW;AACtB,4BAAOzD,KAAKgW,aAAL,EAAP;AACH,kBANX,CAJd;AAAA,qBAWIC,QAAQF,QAAQvS,MAAR,CAAe,OAAf,CAXZ;;AAaA;AACA;AACA;AACA,qBAAI0S,QAAQJ,MAAMtS,MAAN,CAAa,IAAb,CAAZ;;AAEA,qBAAIxD,KAAKD,OAAL,CAAasJ,MAAjB,EAAyB;AACrB6M,2BAAM1S,MAAN,CAAa,IAAb,EACKkF,IADL,CACU,GADV;AAEH;;AAEDwN,uBAAMhT,SAAN,CAAgB,OAAhB,EACKxC,IADL,CACUV,KAAKD,OAAL,CAAaqJ,QADvB,EAEK7F,KAFL,GAGKC,MAHL,CAGY,IAHZ,EAISkF,IAJT,CAIc,UAASnG,CAAT,EAAY;AACd,4BAAOA,CAAP;AACH,kBANT;;AAQA;AACA;AACA,qBAAI4T,QAAQF,MACP/S,SADO,CACG,IADH,EAEPxC,IAFO,CAEFV,KAAKU,IAFH,EAGH6C,KAHG,GAICC,MAJD,CAIQ,IAJR,EAKCC,IALD,CAKM,UALN,EAKkB,UAAUlB,CAAV,EAAY;AAAE,4BAAOA,EAAE,UAAF,CAAP;AAAsB,kBALtD,CAAZ;;AAOA,qBAAIvC,KAAKD,OAAL,CAAasJ,MAAjB,EAAyB;AACrB8M,2BAAM3S,MAAN,CAAa,IAAb,EACKkF,IADL,CACU,UAASnG,CAAT,EAAYqB,CAAZ,EAAe;AACjB,gCAAOA,IAAI,CAAX;AACH,sBAHL;AAIH;;AAED;AACAuS,uBAAM3S,MAAN,CAAa,IAAb,EACSkF,IADT,CACc,UAASnG,CAAT,EAAY;AACd,4BAAOA,EAAEC,IAAT;AACH,kBAHT;;AAKA;AACA2T,uBAAM3S,MAAN,CAAa,IAAb,EACSkF,IADT,CACc,UAASnG,CAAT,EAAY;AACd,4BAAOA,EAAEiF,KAAF,IAAWjF,EAAE0B,EAAb,IAAmB1B,EAAE6T,MAA5B;AACH,kBAHT;;AAKA;AACA,qBAAIpW,KAAK4Q,KAAL,CAAWvQ,SAAX,IAAwB,KAAxB,IAAiCL,KAAKD,OAAL,CAAaqJ,QAAb,CAAsBpI,MAAtB,GAA+B,CAAhE,IAAqE,CAACN,KAAK,CAAL,EAAQ8G,KAA9E,IAAuF9G,KAAK,CAAL,EAAQ,CAAR,EAAW,WAAX,KAA2BqD,SAAtH,EACIoS,MAAM3S,MAAN,CAAa,IAAb,EACSkF,IADT,CACc,UAASnG,CAAT,EAAY;AACd,4BAAOA,EAAEuB,KAAT;AACH,kBAHT;AAIP;AACJ;;;gCAEM;AACH,iBAAI9D,OAAO,IAAX;;AAEAA,kBAAK0E,MAAL,CAAY1E,KAAK4Q,KAAL,CAAWjQ,UAAvB;AACH;;;sDAE4BiQ,K,EAAO;;AAEhC,iBAAI5Q,OAAO,IAAX;;AAEA,iBAAI2F,eAAsBiL,MAAMnL,KAAN,CAAY1F,OAAtC;AAAA,iBACIyF,cAAsBoL,MAAMnL,KAAN,CAAYC,MADtC;AAAA,iBAEII,sBAAsBH,aAAaxF,QAFvC;AAAA,iBAGI6F,qBAAsBL,aAAaM,UAAb,CAAwB9F,QAHlD;AAAA,iBAII+F,kBAAsB0K,MAAMzK,KAAN,CAAYhG,QAJtC;;AAMAH,kBAAKuT,gBAAL,GAAwB;;AAEpB,0BAAS,eAASd,IAAT,EAAe;AACpB,yBAAI,YAAO3P,UAAP,CAAkBoD,eAAlB,CAAJ,EAAwC;AACpCA,yCAAgBnD,IAAhB,CAAqB,IAArB,EAA2B0P,IAA3B;AACH;AAEJ,kBAPmB;;AASpB,8BAAa,mBAASA,IAAT,EAAe;AACxB,yBAAI,CAACA,IAAL,EAAW;;AAEX,yBAAI7M,WAAWjE,GAAGiF,MAAH,CAAU,IAAV,CAAf;AACAhB,8BAASjC,KAAT,CAAe,QAAf,EAAyB,SAAzB;AACA;AACIhC,wBAAGuB,SAAH,CAAa,gCAAb,EACKuD,MADL,CACY,UAAUlE,CAAV,EAAY;AAAE,gCAAOA,EAAE,UAAF,KAAiBkQ,KAAK,UAAL,CAAxB;AAA2C,sBADrE,EAEKhP,IAFL,CAEU,SAFV,EAEqB,GAFrB;AAGP,kBAlBmB;;AAoBpB,6BAAY,kBAASgP,IAAT,EAAe;AACvB,yBAAI,CAACA,IAAL,EAAW;AACX9Q,wBAAGiF,MAAH,CAAU,IAAV,EAAgBjD,KAAhB,CAAsB,QAAtB,EAAgC,SAAhC;AACAhC,wBAAGuB,SAAH,CAAa,gCAAb,EACKuD,MADL,CACY,UAAUlE,CAAV,EAAY;AAAE,gCAAOA,EAAE,UAAF,KAAiBkQ,KAAK,UAAL,CAAxB;AAA2C,sBADrE,EAEKhP,IAFL,CAEU,SAFV,EAEqB,CAFrB;AAGH;;AA1BmB,cAAxB;AA6BA,iBAAIzD,KAAKD,OAAL,CAAawG,IAAjB,EACIvG,KAAKqW,YAAL,GAAoBrP,EAApB,CAAuBhH,KAAKuT,gBAA5B;AACP;;;2DAEiC3C,K,EAAO;;AAErC,iBAAI5Q,OAAO,IAAX;;AAEA,iBAAI2F,eAAsBiL,MAAMnL,KAAN,CAAY1F,OAAtC;AAAA,iBACIyF,cAAsBoL,MAAMnL,KAAN,CAAYC,MADtC;AAAA,iBAEII,sBAAsBH,aAAaxF,QAFvC;AAAA,iBAGI6F,qBAAsBL,aAAaM,UAAb,CAAwB9F,QAHlD;AAAA,iBAII+F,kBAAsB0K,MAAMzK,KAAN,CAAYhG,QAJtC;;AAMA,iBAAIE,YAAYuQ,MAAMvQ,SAAtB;;AAEA,iBAAIiU,mBAAsBjU,aAAa,KAAb,GAAsB,CAAtB,GAA0BuQ,MAAM7Q,OAAN,CAAcwU,WAAlE;AAAA,iBACIC,mBAAsBnU,aAAa,KAAb,GAAsBuQ,MAAM7Q,OAAN,CAAc0U,MAApC,GAA6C7D,MAAM7Q,OAAN,CAAc2U,WADrF;AAAA,iBAEIC,kBAAsBtU,aAAa,KAAb,GAAsB,CAAtB,GAA0BuQ,MAAM7Q,OAAN,CAAcwU,WAFlE;AAAA,iBAGIK,kBAAsBvU,aAAa,KAAb,GAAsBuQ,MAAM7Q,OAAN,CAAc0U,MAAd,GAAuB,GAA7C,GAAmD7D,MAAM7Q,OAAN,CAAc2U,WAAd,GAA4B,GAHzG;AAIA1U,kBAAKuT,gBAAL,GAAwB;;AAEpB,0BAAS,eAASd,IAAT,EAAe;AACpB,yBAAI,YAAO3P,UAAP,CAAkBoD,eAAlB,CAAJ,EAAwC;AACpCA,yCAAgBnD,IAAhB,CAAqB,IAArB,EAA2B0P,IAA3B;AACH;AAEJ,kBAPmB;;AASpB,8BAAa,mBAASA,IAAT,EAAe;AACxB,yBAAI,CAACA,IAAL,EACI;;AAEJ,yBAAI,YAAO3P,UAAP,CAAkBgD,mBAAlB,CAAJ,EAA4C;AACxCA,6CAAoB/C,IAApB,CAAyB,IAAzB,EAA+B0P,IAA/B;AACH;;AAED,yBAAIsB,iBAAiBpS,GAAGiF,MAAH,CAAU,IAAV,CAArB;AACA;AACAmN,oCAAepQ,KAAf,CAAqB,QAArB,EAA+B,SAA/B;AACA;;AAEI;AACAiN,2BAAMiE,aAAN,GAAsB3I,IAAtB,CAA2B,YAAU;AACjC,6BAAIvK,GAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,UAArB,MAAqCgP,KAAK,UAAL,CAAzC,EAA2D;AACvD9Q,gCAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,SAArB,EAAgC,KAAhC;AACH;AACJ,sBAJD;;AAMA,yBAAImC,WAAWjE,GAAGiF,MAAH,CAAU,oBAAoB6L,KAAK,UAAL,CAApB,GAAuC,IAAjD,CAAf;;AAEA7M,8BACKd,UADL,GAESC,QAFT,CAEkB,GAFlB,EAGSiQ,IAHT,CAGc,QAHd,EAISvR,IAJT,CAIc,GAJd,EAImB9B,GAAG2I,GAAH,CAAO+J,GAAP,GACNE,WADM,CACMI,eADN,EAEND,WAFM,CAEME,eAFN,CAJnB;AAQJ;AAEH,kBAzCmB;;AA2CpB,6BAAY,kBAASnC,IAAT,EAAe;AACvB,yBAAI,CAACA,IAAL,EACI;;AAEJ,yBAAI,YAAO3P,UAAP,CAAkBkD,kBAAlB,CAAJ,EAA2C;AACvCA,4CAAmBjD,IAAnB,CAAwB,IAAxB,EAA8B0P,IAA9B;AACH;;AAED,yBAAIsB,iBAAiBpS,GAAGiF,MAAH,CAAU,IAAV,CAArB;AACA;AACAmN,oCAAepQ,KAAf,CAAqB,QAArB,EAA+B,SAA/B;;AAEAiN,2BAAMiE,aAAN,GAAsB3I,IAAtB,CAA2B,YAAU;AACjC,6BAAIvK,GAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,UAArB,MAAqCgP,KAAK,UAAL,CAAzC,EAA2D;AACvD9Q,gCAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,SAArB,EAAgC,KAAhC;AACH;AACJ,sBAJD;;AAMA,yBAAImC,WAAWjE,GAAGiF,MAAH,CAAU,oBAAoB6L,KAAK,UAAL,CAApB,GAAuC,IAAjD,CAAf;;AAEA7M,8BACKd,UADL,GAESC,QAFT,CAEkB,GAFlB,EAGSiQ,IAHT,CAGc,QAHd,EAISvR,IAJT,CAIc,GAJd,EAImB9B,GAAG2I,GAAH,CAAO+J,GAAP,GACNE,WADM,CACMD,gBADN,EAENI,WAFM,CAEMF,gBAFN,CAJnB;AAQH;;AAvEmB,cAAxB;;AA2EA,iBAAIxU,KAAKD,OAAL,CAAawG,IAAjB,EACIvG,KAAKqW,YAAL,GAAoBrP,EAApB,CAAuBhH,KAAKuT,gBAA5B;AACP;;;wCAEa;AACV,oBAAO5R,GAAGuB,SAAH,CAAa,cAAb,CAAP;AACH;;;yCAEe;AACZ,iBAAIlD,OAAO,IAAX;;AAEA,iBAAIA,KAAKD,OAAL,CAAa4D,KAAb,KAAuB,SAA3B,EAAsC;AAClC,wBAAO,wBAAP;AACH,cAFD,MAEO,IAAI3D,KAAKD,OAAL,CAAa4D,KAAb,KAAuB,QAA3B,EAAqC;AACxC,wBAAO,kCAAP;AACH;AACJ;AACD;;;;6BApSW;AACP,oBAAO,KAAK6J,KAAZ;AACH,U;;AASD;;AAEA;;;2BAGStF,G,EAAK;AACV,iBAAIA,GAAJ,EAAS;AACL,sBAAKsF,KAAL,GAAatF,GAAb;AACH;AACJ;;;6BAhBW;AACR,oBAAO,KAAK2I,MAAZ;AACH,U;2BAgBS3I,G,EAAK;AACX,iBAAIA,GAAJ,EAAS;AACL,sBAAK2I,MAAL,GAAc3I,GAAd;AACH;AACJ;;;6BAlBa;AACV,oBAAO,KAAKiC,QAAZ;AACH,U;2BAkBWjC,G,EAAK;AACb,iBAAIA,GAAJ,EAAS;AACL,sBAAKiC,QAAL,GAAgBjC,GAAhB;AACH;AACJ;;;;;;mBA9DgB0N,K;;;;;;;;;;;;;;;;ACFrB;;;;;;;;KAEqBU,O;AACjB,sBAAYvW,OAAZ,EAAqB;AAAA;;AACjB,aAAIC,OAAO,IAAX;;AAEA,aAAIC,SAAS;AACTsG,mBAAM,IADG;AAEToC,uBAAU,OAFD,EAEU;AACnBM,8BAAiB,oBAHR;AAITH,wBAAW,MAJF;AAKTF,uBAAU,MALD;AAMTM,qBAAQ;AANC,UAAb;;AASAlJ,cAAKmK,QAAL,GAA0BpK,OAA1B;;AAEAC,cAAKmH,YAAL,CAAkBlH,MAAlB;AACH;;AAED;;;;;;;;AAoCA;;AAEA;;;sCAGaA,M,EAAQ;AACjB,iBAAID,OAAO,IAAX;;AAEAA,kBAAKD,OAAL,GAAe,YAAOK,SAAP,CAAiBH,MAAjB,EAAyBD,KAAKD,OAA9B,CAAf;AACH;;AAED;;;;;;8BAGKW,I,EAAMkQ,K,EAAO3J,S,EAAW;AACzB,iBAAIjH,OAAO,IAAX;;AAEA,iBAAIkJ,SAASlJ,KAAKkJ,MAAlB;;AAEA;AACAvH,gBAAGiF,MAAH,CAAUgK,MAAMvI,EAAhB,EAAoBnF,SAApB,CAA8B,8BAA9B,EAA8DE,MAA9D;;AAEA,iBAAIwC,WAAWjE,GAAGiF,MAAH,CAAUgK,MAAMvI,EAAhB,CAAf;;AAEA;AACA;AACA,iBAAIkO,aAAa3Q,SAASpC,MAAT,CAAgB,KAAhB,EACIC,IADJ,CACS,OADT,EACkB,YAAW;AACtB,wBAAO,iCAAiCzD,KAAKwW,gBAAL,EAAxC;AACH,cAHJ;AAIG;AAJH,cAKI7S,KALJ,CAKU,SALV,EAKqB,MALrB,EAMIA,KANJ,CAMU,UANV,EAMsB,UANtB,EAOIA,KAPJ,CAOU,gBAPV,EAO4B,KAP5B,EAQIA,KARJ,CAQU,kBARV,EAQ8B3D,KAAKD,OAAL,CAAakJ,eAR3C,EASItF,KATJ,CASU,OATV,EASmB3D,KAAKD,OAAL,CAAa+I,SAThC,EAUInF,KAVJ,CAUU,WAVV,EAUuB3D,KAAKD,OAAL,CAAa6I,QAVpC,CAAjB;AAWoB;AACA;AACA;AACA;AACA;;AAEpB5I,kBAAKqG,YAAL,GAAoB;;AAEhB,8BAAa,mBAASmH,KAAT,EAAgB;AACzB+I,gCACKE,IADL,CACU,YAAW;AACb,gCAAOzW,KAAK0W,oBAAL,CAA0B9F,KAA1B,EAAiCpD,KAAjC,CAAP;AACH,sBAHL,EAIK1I,UAJL;AAKI;AALJ,sBAMKnB,KANL,CAMW,MANX,EAMmB,YAAW;AACtB,gCAAO3D,KAAK2W,aAAL,CAAmB/F,KAAnB,EAA0B,MAA1B,CAAP;AACH,sBARL;AASI;AATJ,sBAUKjN,KAVL,CAUW,KAVX,EAUkB,YAAW;AACrB,gCAAO3D,KAAK2W,aAAL,CAAmB/F,KAAnB,EAA0B,KAA1B,CAAP;AACH,sBAZL,EAaK7L,QAbL,CAac,GAbd,EAcKpB,KAdL,CAcW,SAdX,EAcsB,OAdtB,EAeKA,KAfL,CAeW,gBAfX,EAe6B,MAf7B;AAgBH,kBAnBe;;AAqBhB,8BAAa,mBAAS6J,KAAT,EAAgB;AACzB+I,gCACKE,IADL,CACU,YAAW;AACb,gCAAOzW,KAAK0W,oBAAL,CAA0B9F,KAA1B,EAAiCpD,KAAjC,CAAP;AACH,sBAHL,EAIK1I,UAJL;AAKI;AALJ,sBAMKnB,KANL,CAMW,MANX,EAMmB,YAAW;AACtB,gCAAO3D,KAAK2W,aAAL,CAAmB/F,KAAnB,EAA0B,MAA1B,CAAP;AACH,sBARL;AASI;AATJ,sBAUKjN,KAVL,CAUW,KAVX,EAUkB,YAAW;AACrB,gCAAO3D,KAAK2W,aAAL,CAAmB/F,KAAnB,EAA0B,KAA1B,CAAP;AACH,sBAZL,EAaK7L,QAbL,CAac,GAbd,EAcKpB,KAdL,CAcW,SAdX,EAcsB,OAdtB,EAeKA,KAfL,CAeW,gBAfX,EAe6B,MAf7B;AAgBH,kBAtCe;;AAwChB,6BAAY,kBAAS6J,KAAT,EAAgB;AACxB+I,gCACKzR,UADL,GAEKC,QAFL,CAEc,GAFd,EAGKpB,KAHL,CAGW,SAHX,EAGsB,MAHtB;AAKH;;AA9Ce,cAApB;;AAkDA,iBAAI3D,KAAKD,OAAL,CAAawG,IAAjB,EAAuB;;AAEnB,yBAAOU,SAAP;AACI,0BAAK,WAAL;AACIjH,8BAAKqG,YAAL,CAAkBuQ,SAAlB,CAA4BlW,IAA5B;AACA;AACJ,0BAAK,UAAL;AACIV,8BAAKqG,YAAL,CAAkBwQ,QAAlB,CAA2BnW,IAA3B;AACA;AACJ,0BAAK,WAAL;AACIV,8BAAKqG,YAAL,CAAkByQ,SAAlB,CAA4BpW,IAA5B;AACA;AATR;AAYH;AACJ;;;4CAEkB;AACf,iBAAIV,OAAO,IAAX;AACA,iBAAIsO,UAAJ;;AAEA,qBAAOtO,KAAKD,OAAL,CAAa4I,QAApB;AACI,sBAAK,KAAL;AACI2F,yBAAI,gBAAJ;AACA;AACJ,sBAAK,OAAL;AACIA,yBAAI,kBAAJ;AACA;AACJ,sBAAK,QAAL;AACIA,yBAAI,mBAAJ;AACA;AACJ,sBAAK,MAAL;AACIA,yBAAI,iBAAJ;AACA;AAZR;AAcA,oBAAOA,CAAP;AACH;;;qDAE2BsC,K,EAAOlQ,I,EAAM;AACrC;AACA,iBAAIV,OAAO,IAAX;;AAEA,iBAAIK,YAAYuQ,MAAMvQ,SAAtB;AAAA,iBAAiC6I,eAAjC;;AAEA,qBAAO7I,SAAP;AACI,sBAAK,KAAL;AACI6I,8BAAS,gBAASxI,IAAT,EAAe;AACpB,gCAAO,aAAaA,KAAK8B,IAAlB,GAAyB,WAAzB,GAAuC,YAAvC,GAAsD9B,KAAK8G,KAA3D,GAAmE,SAA1E;AACH,sBAFD;AAGA;AACJ,sBAAK,KAAL;AACI0B,8BAAS,gBAASxI,IAAT,EAAe;AACpB,gCAAO,aAAaA,KAAKA,IAAL,CAAU8B,IAAvB,GAA8B,WAA9B,GAA4C,YAA5C,GAA2D9B,KAAKA,IAAL,CAAU8G,KAArE,GAA6E,SAApF;AACH,sBAFD;AAGA;AACJ,sBAAK,OAAL;AACI0B,8BAAS,gBAASxI,IAAT,EAAe;AACpB,gCAAO,aAAaA,KAAKA,IAAL,CAAU8B,IAAvB,GAA8B,WAA9B,GAA4C,YAA5C,GAA2D9B,KAAKA,IAAL,CAAU8G,KAArE,GAA6E,SAApF;AACH,sBAFD;AAGA;AACJ,sBAAK,MAAL;AACI0B,8BAAS,gBAASxI,IAAT,EAAe;AACpB,6BAAIqW,UAAU,EAAd;AACArW,8BAAKkO,OAAL,CAAa,UAASrM,CAAT,EAAYqB,CAAZ,EAAc;AACvBmT,wCAAW,aAAaxU,EAAEC,IAAf,GAAsB,WAAtB,GAAoC,sBAApC,GAA6DD,EAAEyU,MAA/D,GAAwE,SAAxE,GAAoF,sBAApF,GAA6GzU,EAAE6T,MAA/G,GAAwH,aAAnI;AACH,0BAFD;AAGA,gCAAOW,OAAP;AACH,sBAND;AAOA;AACJ,sBAAK,UAAL;AACI7N,8BAAS,gBAASxI,IAAT,EAAe;AACpB,gCAAO,aAAaA,KAAK8B,IAAlB,GAAyB,WAAzB,GAAuC,uBAAvC,GAAiE9B,KAAKuW,KAAtE,GAA8E,4BAA9E,GAA6GvW,KAAKwW,GAAlH,GAAwH,SAA/H;AACH,sBAFD;AAGA;AA7BR;;AAgCA;AACAlX,kBAAKkJ,MAAL,GAAkBlJ,KAAKD,OAAL,CAAamJ,MAAb,IAAuBA,MAAzC;AACA;AACH;;;uCAEa0H,K,EAAO;AACjB,iBAAI5Q,OAAO,IAAX;AACA,iBAAIsO,UAAJ;;AAEA,iBAAI6I,SAASnX,KAAKoX,SAAL,CAAezV,GAAGiF,MAAH,CAAUgK,MAAMvI,EAAhB,EAAoB,CAApB,EAAuB,CAAvB,CAAf,CAAb;;AAEA,qBAAOrI,KAAKD,OAAL,CAAa4I,QAApB;AACI,sBAAK,KAAL;AACI2F,yBAAI;AACA,iCAAS3M,GAAG0V,KAAH,CAASC,KAAT,GAAiBH,OAAO9V,IAAxB,GAA+B,EAAhC,GAAsC,IAD9C;AAEA,gCAAQM,GAAG0V,KAAH,CAASE,KAAT,GAAiBJ,OAAO3V,GAAxB,GAA8B,EAA/B,GAAqC;AAF5C,sBAAJ;AAIA;AACJ,sBAAK,OAAL;AACI8M,yBAAI;AACA;AACA,iCAAS3M,GAAG0V,KAAH,CAASC,KAAT,GAAiBH,OAAO9V,IAAzB,GAAiC,IAFzC;AAGA;AACA,gCAAQM,GAAG0V,KAAH,CAASE,KAAT,GAAiBJ,OAAO3V,GAAxB,GAA8B,EAA/B,GAAqC;AAJ5C,sBAAJ;AAMA;AACJ,sBAAK,QAAL;AACI8M,yBAAI;AACA,iCAAS3M,GAAG0V,KAAH,CAASC,KAAT,GAAiBH,OAAO9V,IAAxB,GAA+B,EAAhC,GAAsC,IAD9C;AAEA,gCAAQM,GAAG0V,KAAH,CAASE,KAAT,GAAiBJ,OAAO3V,GAAxB,GAA8B,EAA/B,GAAqC;AAF5C,sBAAJ;AAIA;AACJ,sBAAK,MAAL;AACI8M,yBAAI;AACA;AACA,iCAAS3M,GAAG0V,KAAH,CAASC,KAAT,GAAiBH,OAAO9V,IAAxB,GAA+B,EAAhC,GAAsC,IAF9C;AAGA;AACA,gCAAQM,GAAG0V,KAAH,CAASE,KAAT,GAAiBJ,OAAO3V,GAAxB,GAA8B,EAA/B,GAAqC;AAJ5C,sBAAJ;AAMA;AA5BR;AA8BA,oBAAO8M,CAAP;AACH;;;mCAESkJ,I,EAAM;AACZ,iBAAIlF,MAAM,EAAE9Q,KAAK,CAAP,EAAUH,MAAM,CAAhB,EAAV;;AAEA;AACA,iBAAK,QAAOmW,KAAK7E,qBAAZ,MAAsC5O,SAA3C,EAAuD;AACrDuO,uBAAMkF,KAAK7E,qBAAL,EAAN;AACD;;AAED,oBAAO;AACLnR,sBAAK8Q,IAAI9Q,GAAJ,IAAaiW,OAAOC,WAAP,IAAsBF,KAAKpH,SAAxC,KAAyDoH,KAAKG,SAAL,IAAmB,CAA5E,CADA;AAELtW,uBAAMiR,IAAIjR,IAAJ,IAAaoW,OAAOG,WAAP,IAAsBJ,KAAKK,UAAxC,KAAyDL,KAAKM,UAAL,IAAmB,CAA5E;AAFD,cAAP;AAIH;;;8CAEoBlH,K,EAAOlQ,I,EAAM;AAC9B,iBAAIV,OAAO,IAAX;;AAEAA,kBAAK+X,2BAAL,CAAiCnH,KAAjC,EAAwClQ,IAAxC;;AAEA,iBAAI4N,IAAItO,KAAKkJ,MAAL,CAAYxI,IAAZ,CAAR;;AAEA,oBAAO4N,CAAP;AACH;AACD;;;;6BA7Qa;AACT,oBAAO,KAAKyI,OAAZ;AACH,U;;AASD;;AAEA;;;2BAGW7O,G,EAAK;AACZ,iBAAIA,GAAJ,EAAS;AACL,sBAAK6O,OAAL,GAAe7O,GAAf;AACH;AACJ;;;6BAhBkB;AACf,oBAAO,KAAKuD,aAAZ;AACH,U;2BAgBgBvD,G,EAAK;AAClB,iBAAIA,GAAJ,EAAS;AACL,sBAAKuD,aAAL,GAAqBvD,GAArB;AACH;AACJ;;;6BAlBa;AACV,oBAAO,KAAKiC,QAAZ;AACH,U;2BAkBWjC,G,EAAK;AACb,iBAAIA,GAAJ,EAAS;AACL,sBAAKiC,QAAL,GAAgBjC,GAAhB;AACH;AACJ;;;;;;mBArDgBoO,O;;;;;;;;;;;;;;;;ACFrB;;;;;;;;KAEqBzW,W;AAEjB,0BAAYE,OAAZ,EAAqBM,SAArB,EAAgCF,QAAhC,EAA0C;AAAA;;AAEtC,aAAIH,OAAO,IAAX;;AAEA,aAAIC,SAAS;AACT;AACA8H,mBAAM;AACFvF,uBAAM,MADJ;AAEFgF,wBAAO,OAFL;AAGF9F,oBAAG,SAHD;AAIFK,oBAAG,OAJD;AAKFiW,uBAAM;AALJ,cAFG;AASTjX,qBAAQ,EATC;AAUTE,qBAAQ,EAVC;AAWTgX,yBAAY,KAXH;;AAaT;AACA;AACA1X,yBAAY;AAfH,UAAb;;AAkBAP,cAAKyN,KAAL,GAAkB,YAAOpD,KAAP,CAAatK,QAAQgI,IAArB,EAA2B9H,OAAO8H,IAAlC,CAAlB;AACA/H,cAAKkY,OAAL,GAAkBnY,QAAQgB,MAAR,IAAqBd,OAAOc,MAA9C;AACAf,cAAKmY,OAAL,GAAkBpY,QAAQkB,MAAR,IAAqBhB,OAAOgB,MAA9C;AACAjB,cAAKoY,WAAL,GAAsBrY,QAAQkY,UAAR,IAAyBhY,OAAOgY,UAAtD;AACAjY,cAAK+K,WAAL,GAAkBhL,QAAQQ,UAAR,IAAqBN,OAAOM,UAA9C;;AAEAP,cAAKwL,WAAL,GAAmB,EAAnB;AACAxL,cAAKuL,WAAL,GAAmB,EAAnB,CA7BsC,CA6Bf;AACvBvL,cAAKqY,SAAL,GAAiB,EAAjB;;AAEArY,cAAKmK,QAAL,GAAgBpK,OAAhB;AACAC,cAAK4L,UAAL,GAAkBvL,SAAlB;AACAL,cAAKsY,SAAL,GAAiBnY,QAAjB;;AAEAH,cAAKmH,YAAL,CAAkBlH,MAAlB;AACH;;AAED;;;;;;;;AAwGA;;AAEA;;;sCAGaA,M,EAAQ;AACjB,iBAAID,OAAO,IAAX;;AAEAA,kBAAKD,OAAL,GAAe,YAAOK,SAAP,CAAiBH,MAAjB,EAAyBD,KAAKD,OAA9B,CAAf;;AAEA;AACH;;AAED;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;wCAEe;AACX,iBAAIC,OAAO,IAAX;;AAEA;AACA,oBAAO,CAAC,YAAO6H,OAAP,CAAe7H,KAAKD,OAAL,CAAa+H,KAA5B,CAAR,CAJW,CAIiC;AAC/C;;;mCAES;AACN,iBAAI9H,OAAO,IAAX;;AAEA,oBAAO,YAAO4M,QAAP,CAAgB5M,KAAKD,OAAL,CAAauJ,IAA7B,KACA,CAAC,YAAOzB,OAAP,CAAe7H,KAAKD,OAAL,CAAauJ,IAAb,CAAkBC,GAAjC,CADD,IAEA,CAAC,YAAO1B,OAAP,CAAe7H,KAAKD,OAAL,CAAauJ,IAAb,CAAkB/E,IAAjC,CAFR;AAGH;;;0CAEgBpE,Q,EAAU;AACvB,iBAAIH,OAAO,IAAX;;AAEAA,kBAAKuY,UAAL,GAAkBvY,KAAKD,OAAL,CAAa+H,KAA/B;;AAEA3H,sBAAS4C,IAAT,CAAc/C,IAAd,EAAoBA,KAAKuY,UAAzB;AACH;;;qCAEWpY,Q,EAAU;AAClB,iBAAIH,OAAO,IAAX;;AAEAA,kBAAKsJ,IAAL,GAAatJ,KAAKD,OAAL,CAAauJ,IAA1B;;AAEA,iBAAI,CAAC,YAAOzB,OAAP,CAAe7H,KAAKsJ,IAApB,CAAL,EAAgC;;AAE5B,yBAAOtJ,KAAKsJ,IAAL,CAAU/E,IAAjB;AACI,0BAAK,KAAL;AACIvE,8BAAKwY,MAAL,CAAYrY,QAAZ;AACA;AACJ,0BAAK,KAAL;AACIH,8BAAKyY,MAAL,CAAYtY,QAAZ;AACA;AACJ,0BAAK,MAAL;AACIH,8BAAK0Y,OAAL,CAAavY,QAAb;AACA;AACJ,0BAAK,MAAL;AACIH,8BAAK2Y,OAAL,CAAaxY,QAAb;AACA;AACJ,0BAAK,KAAL;AACIH,8BAAK4Y,MAAL,CAAYzY,QAAZ;AACA;AACJ,0BAAK,KAAL;AACIH,8BAAK2Y,OAAL,CAAaxY,QAAb;AACA;AACJ;AACIH,8BAAK2Y,OAAL,CAAaxY,QAAb;AACA;AArBR;AAuBH;AACJ;;;kDAEwB;AACrB,iBAAIH,OAAO,IAAX;;AAEA,iBAAI,CAAC,YAAO6H,OAAP,CAAe7H,KAAKe,MAApB,CAAD,IAAgC,YAAOuL,OAAP,CAAetM,KAAKe,MAApB,CAAhC,IAA+Df,KAAKe,MAAL,CAAYC,MAAZ,KAAuB,CAA1F,EAA6F;AACzF,wBAAO,OAAP;AACH,cAFD,MAEO,IAAI,CAAC,YAAO6G,OAAP,CAAe7H,KAAKiB,MAApB,CAAD,IAAgC,YAAOqL,OAAP,CAAetM,KAAKiB,MAApB,CAApC,EAAiE;AACpE,wBAAO,OAAP;AACH;;AAED;AACA,kBAAK,IAAI2C,IAAI5D,KAAKuY,UAAL,CAAgBvX,MAAhB,GAAyB,CAAtC,EAAyC4C,KAAK,CAA9C,EAAiDA,GAAjD,EAAsD;AAClD,qBAAI,YAAO0I,OAAP,CAAe,YAAOgB,GAAP,CAAWtN,KAAK+H,IAAL,CAAUP,KAArB,EAA4BxH,KAAKuY,UAAL,CAAgB3U,CAAhB,CAA5B,CAAf,CAAJ,EACI,OAAO,OAAP;AACP;;AAED,oBAAO,QAAP;AACH;;;uCAEaW,I,EAAMpE,Q,EAAU;AAC1B,iBAAIH,OAAO,IAAX;;AAEA;AACA,iBAAIA,KAAK6Y,OAAL,EAAJ,EAAoB;AAChB7Y,sBAAK8Y,WAAL,CAAiB,UAASpY,IAAT,EAAe;AAC5BV,0BAAKuY,UAAL,GAAkB7X,IAAlB;AACAV,0BAAK+Y,kBAAL,CAAwBxU,IAAxB;AACApE,8BAAS4C,IAAT,CAAc/C,IAAd,EAAoBA,KAAKW,UAAzB;AACH,kBAJD;AAMH,cAPD,MAOO,IAAIX,KAAKgZ,YAAL,EAAJ,EAAyB;AAC5BhZ,sBAAKiZ,gBAAL,CAAsB,UAASvY,IAAT,EAAe;AACjCV,0BAAKuY,UAAL,GAAkB7X,IAAlB;AACAV,0BAAK+Y,kBAAL,CAAwBxU,IAAxB;AACApE,8BAAS4C,IAAT,CAAc/C,IAAd,EAAoBA,KAAKW,UAAzB;AACH,kBAJD;AAKH;AACJ;;;4CAEkB4D,I,EAAM;AACrB,iBAAIvE,OAAO,IAAX;;AAEA,qBAAOuE,IAAP;AACI,sBAAK,KAAL;AACIvE,0BAAKkZ,wBAAL;AACA;;AAEJ,sBAAK,MAAL;AACGlZ,0BAAKmZ,yBAAL;AACC;;AAEJ,sBAAK,KAAL;AACGnZ,0BAAKoZ,wBAAL;AACC;;AAEJ,sBAAK,OAAL;AACGpZ,0BAAKqZ,0BAAL;AACC;;AAEJ,sBAAK,UAAL;AACGrZ,0BAAKsZ,6BAAL;AACC;;AAEJ,sBAAK,KAAL;AACGtZ,0BAAKuZ,mBAAL;AACC;;AAEJ;AACGvZ,0BAAKuY,UAAL;AACC;AA3BR;AA6BH;;;iCAEO/J,C,EAAG;AACP,oBAAOA,EAAEhM,IAAT;AACH;;;kCAEQgM,C,EAAG;AACR,iBAAIxO,OAAO,IAAX;;AAEA,oBAAO,YAAOsN,GAAP,CAAWtN,KAAK+H,IAAhB,EAAsByG,CAAtB,CAAP;AACH;;AAED;;AAEA;;;;;;oDAG2B;AACvB,iBAAIxO,OAAO,IAAX;;AADuB,iBA0BXe,MA1BW;AAAA,iBA2BXyY,SA3BW;AAAA,iBA4FXvY,MA5FW;AAAA,iBA6FXuY,SA7FW;;AAAA;AAGvB,yBAAOxZ,KAAKa,sBAAL,EAAP;AACI,0BAAK,QAAL;AACI,6BAAIwC,QAAQrD,KAAKO,UAAjB;AACA,6BAAIQ,SAASf,KAAKe,MAAlB;;AAEAf,8BAAKuY,UAAL,CAAgB3J,OAAhB,CAAwB,UAASlO,IAAT,EAAe+Y,KAAf,EAAsB;AAC1C,iCAAIjM,QAAQ,CAAC;AACT,yCAAS,YAAOF,GAAP,CAAWtN,KAAK+H,IAAL,CAAUvF,IAArB,EAA2B9B,IAA3B,CADA;AAET,0CAAS,YAAO4M,GAAP,CAAWtN,KAAK+H,IAAL,CAAUP,KAArB,EAA4B9G,IAA5B,CAFA;AAGT,uCAAO,YAAO4M,GAAP,CAAWtN,KAAK+H,IAAL,CAAUP,KAArB,EAA4B9G,IAA5B,CAHE;AAIT,uCAAO,YAAO4M,GAAP,CAAWtN,KAAK+H,IAAL,CAAUP,KAArB,EAA4B9G,IAA5B,CAJE;AAKT,0CAASK,OAAO,CAAP,KAAa,SAAU,CALvB;AAMT,6CAAY,YAAOoN,IAAP,EANH;AAOT,2CAAW,IAPF;AAQT,0CAAS9K,MAAM,CAAN;AARA,8BAAD,CAAZ;AAUArD,kCAAKW,UAAL,CAAgBmO,IAAhB,CAAqBtB,KAArB;AACH,0BAZD;;AAcA;AACA;;AAEJ,0BAAK,OAAL;AACQzM,kCAASf,KAAKe,MADtB;AAEQyY,qCAAY,EAFpB;AAGI;;AACAxZ,8BAAKuY,UAAL,CAAgB3J,OAAhB,CAAwB,UAASlO,IAAT,EAAe+Y,KAAf,EAAsB;AAC1C,iCAAIC,WAAc,YAAOpM,GAAP,CAAWtN,KAAK+H,IAAL,CAAUP,KAArB,EAA4B9G,IAA5B,CAAlB;;AAEA,iCAAIiZ,SAAc,EAAlB;AAAA,iCACIC,aAAa;AACT,0CAAS,SADA;AAET,uCAAM,CAFG;AAGT,uCAAM,CAHG;AAIT,0CAAS,EAJA;AAKT,yCAAQ,EALC;AAMT,6CAAY,EANH;AAOT,8CAAa,EAPJ;AAQT,2CAAc;AARL,8BADjB;AAAA,iCAWIvW,QAAQrD,KAAKO,UAXjB;;AAaA;AACA,iCAAI,YAAO+L,OAAP,CAAeoN,QAAf,CAAJ,EAA8B;AAC1BA,0CAAS9K,OAAT,CAAiB,UAASrM,CAAT,EAAYqB,CAAZ,EAAe;AAC5B,yCAAI4V,UAAUxY,MAAV,GAAmB,CAAnB,GAAuB4C,CAA3B,EACI4V,UAAU1K,IAAV,CAAe,YAAOX,IAAP,EAAf;AACJ,yCAAI,YAAOtG,OAAP,CAAe9G,OAAO6C,CAAP,CAAf,CAAJ,EACI7C,OAAO+N,IAAP,CAAY,UAAUlL,IAAE,CAAZ,CAAZ;AACJgW,kDAAa;AACT,kDAASvW,MAAMO,CAAN,CADA;AAET,+CAAMrB,CAFG;AAGT,+CAAMA,IAAI,CAAJ,GAAQA,CAAR,GAAY,CAHT;AAIT,kDAASxB,OAAO6C,CAAP,CAJA;AAKT,iDAAQ,YAAO0J,GAAP,CAAWtN,KAAK+H,IAAL,CAAUvF,IAArB,EAA2B9B,IAA3B,CALC;AAMT,kDAAS6B,CANA;AAOT,qDAAY,YAAO4L,IAAP,EAPH;AAQT,sDAAaqL,UAAU5V,CAAV,CARJ;AAST,mDAAc;AATL,sCAAb;AAWA+V,4CAAO7K,IAAP,CAAY8K,UAAZ;AACH,kCAjBD;AAkBH,8BAnBD,MAmBO;AACH,qCAAIJ,UAAUxY,MAAV,IAAoB,CAAxB,EACIwY,UAAU1K,IAAV,CAAe,YAAOX,IAAP,EAAf;AACJ,qCAAI,YAAOtG,OAAP,CAAe9G,OAAO,CAAP,CAAf,CAAJ,EACIA,OAAO+N,IAAP,CAAY,OAAZ;AACJ8K,8CAAa;AACT,8CAASvW,MAAM,CAAN,CADA;AAET,2CAAMqW,QAFG;AAGT,2CAAMA,WAAW,CAAX,GAAeA,QAAf,GAA0B,CAHvB;AAIT,8CAAS3Y,OAAO,CAAP,CAJA;AAKT,6CAAQ,YAAOuM,GAAP,CAAWtN,KAAK+H,IAAL,CAAUvF,IAArB,EAA2B9B,IAA3B,CALC;AAMT,8CAASgZ,QANA;AAOT,iDAAY,YAAOvL,IAAP,EAPH;AAQT,kDAAaqL,UAAU,CAAV,CARJ;AAST,+CAAc;AATL,kCAAb;AAWAG,wCAAO7K,IAAP,CAAY8K,UAAZ;AACH;;AAED5Z,kCAAKW,UAAL,CAAgBmO,IAAhB,CAAqB6K,MAArB;AACH,0BAxDD;;AA0DA3Z,8BAAKe,MAAL,GAAcA,MAAd;AACA;AAAA,gCAAOf,KAAKW;AAAZ;AACA;;AAEJ,0BAAK,OAAL;AACQM,kCAASjB,KAAKiB,MADtB;AAEQuY,qCAAY,EAFpB;AAGI;;AACAxZ,8BAAKuY,UAAL,CAAgB3J,OAAhB,CAAwB,UAASlO,IAAT,EAAe+Y,KAAf,EAAsB;AAC1C,iCAAIC,WAAc,YAAOpM,GAAP,CAAWtN,KAAK+H,IAAL,CAAUP,KAArB,EAA4B9G,IAA5B,CAAlB;;AAEA,iCAAIiZ,SAAc,EAAlB;AAAA,iCACIC,aAAa;AACT,0CAAS,SADA;AAET,uCAAM,CAFG;AAGT,uCAAM,CAHG;AAIT,0CAAS,EAJA;AAKT,yCAAQ,EALC;AAMT,6CAAY,EANH;AAOT,2CAAc;AAPL,8BADjB;AAAA,iCAUIvW,QAAQrD,KAAKO,UAVjB;;AAYA;AACA,iCAAI,YAAO+L,OAAP,CAAeoN,QAAf,CAAJ,EAA8B;AAAA;AAC1B,yCAAIG,WAAW,CAAf;AACA,yCAAIC,WAAW,CAAf;AACAJ,8CAAS9K,OAAT,CAAiB,UAASrM,CAAT,EAAYqB,CAAZ,EAAe;AAC5B,6CAAI4V,UAAUxY,MAAV,GAAmB,CAAnB,GAAuB4C,CAA3B,EACI4V,UAAU1K,IAAV,CAAe,YAAOX,IAAP,EAAf;AACJ,6CAAI,YAAOtG,OAAP,CAAe5G,OAAO2C,CAAP,CAAf,CAAJ,EACI3C,OAAO6N,IAAP,CAAY,UAAUlL,IAAE,CAAZ,CAAZ;AACJgW,sDAAa;AACT,sDAASvW,MAAMO,CAAN,CADA;AAET,mDAAMrB,CAFG;AAGT,mDAAMA,IAAI,CAAJ,GAAQA,IAAIuX,QAAZ,GAAuBD,QAHpB;AAIT,sDAAS5Y,OAAO2C,CAAP,CAJA;AAKT,qDAAQ,YAAO0J,GAAP,CAAWtN,KAAK+H,IAAL,CAAUvF,IAArB,EAA2B9B,IAA3B,CALC;AAMT,sDAAS6B,CANA;AAOT,yDAAY,YAAO4L,IAAP,EAPH;AAQT,0DAAaqL,UAAU5V,CAAV,CARJ;AAST,uDAAc;AATL,0CAAb;AAWA+V,gDAAO7K,IAAP,CAAY8K,UAAZ;AACA,6CAAIrX,IAAI,CAAR,EAAWuX,YAAYvX,CAAZ,CAAX,KACKsX,YAAYtX,CAAZ;AACR,sCAnBD;AAH0B;AAuB7B,8BAvBD,MAuBO;AACH,qCAAIiX,UAAUxY,MAAV,IAAoB,CAAxB,EACIwY,UAAU1K,IAAV,CAAe,YAAOX,IAAP,EAAf;AACJ,qCAAI,YAAOtG,OAAP,CAAe5G,OAAO,CAAP,CAAf,CAAJ,EACIA,OAAO6N,IAAP,CAAY,OAAZ;AACJ8K,8CAAa;AACT,8CAASvW,MAAM,CAAN,CADA;AAET,2CAAMqW,QAFG;AAGT,2CAAMA,WAAW,CAAX,GAAeA,QAAf,GAA0B,CAHvB;AAIT,8CAASzY,OAAO,CAAP,CAJA;AAKT,6CAAQ,YAAOqM,GAAP,CAAWtN,KAAK+H,IAAL,CAAUvF,IAArB,EAA2B9B,IAA3B,CALC;AAMT,8CAASgZ,QANA;AAOT,iDAAY,YAAOvL,IAAP,EAPH;AAQT,kDAAaqL,UAAU,CAAV,CARJ;AAST,+CAAc;AATL,kCAAb;AAWAG,wCAAO7K,IAAP,CAAY8K,UAAZ;AACH;;AAED5Z,kCAAKW,UAAL,CAAgBmO,IAAhB,CAAqB6K,MAArB;AACH,0BA3DD;;AA6DA3Z,8BAAKiB,MAAL,GAAcA,MAAd;AACA;AAAA,gCAAOjB,KAAKW;AAAZ;AACA;;AAEJ;AACI;AAAA,gCAAOX,KAAKuY;AAAZ;AACA;AA/JR;AAHuB;;AAAA;AAqK1B;;;oDAE0B;AACvB,iBAAIvY,OAAO,IAAX;;AAEA,iBAAIqD,QAAQrD,KAAKO,UAAjB;AACAP,kBAAKuY,UAAL,CAAgB3J,OAAhB,CAAwB,UAASlO,IAAT,EAAe+Y,KAAf,EAAsB;AAC1C,qBAAIjM,QAAQ;AACR,8BAAcnK,MAAMoW,KAAN,CADN;AAER,6BAAc,YAAOnM,GAAP,CAAWtN,KAAK+H,IAAL,CAAUvF,IAArB,EAA2B9B,IAA3B,CAFN;AAGR,8BAAc,YAAO4M,GAAP,CAAWtN,KAAK+H,IAAL,CAAUP,KAArB,EAA4B9G,IAA5B,CAHN;AAIR,iCAAc,YAAOyN,IAAP,EAJN;AAKR,+BAAc;AALN,kBAAZ;AAOAnO,sBAAKW,UAAL,CAAgBmO,IAAhB,CAAqBtB,KAArB;AACH,cATD;;AAWA,oBAAOxN,KAAKW,UAAZ;AAEH;;;sDAE4B;AACzB,iBAAIX,OAAO,IAAX;;AAEA,iBAAIqD,QAAQrD,KAAKO,UAAjB;AACAP,kBAAKuY,UAAL,CAAgB3J,OAAhB,CAAwB,UAASlO,IAAT,EAAe+Y,KAAf,EAAsB;AAC1C,qBAAIjM,QAAQ;AACR,8BAAcnK,MAAMoW,KAAN,CADN;AAER,iCAAc,YAAOtL,IAAP,EAFN;AAGR,+BAAc,IAHN;AAIR,6BAAc,YAAOb,GAAP,CAAWtN,KAAK+H,IAAL,CAAUvF,IAArB,EAA2B9B,IAA3B,CAJN;AAKR,8BAAc,YAAO4M,GAAP,CAAWtN,KAAK+H,IAAL,CAAUP,KAArB,EAA4B9G,IAA5B;AALN,kBAAZ;;AAQAV,sBAAKW,UAAL,CAAgBmO,IAAhB,CAAqBtB,KAArB;AACH,cAVD;;AAYA,oBAAOxN,KAAKW,UAAZ;AAEH;;;yDAE+B;AAC5B,iBAAIX,OAAO,IAAX;;AAEA,iBAAIqD,QAAQrD,KAAKO,UAAjB;;AAEAP,kBAAKuY,UAAL,CAAgB3J,OAAhB,CAAwB,UAASlO,IAAT,EAAe+Y,KAAf,EAAsB;;AAE1C,qBAAIjM,QAAQ;AACR;AACA,6BAAc9M,KAAKqZ,IAFX;AAGR,6BAAc,YAAOzM,GAAP,CAAWtN,KAAK+H,IAAL,CAAUvF,IAArB,EAA2B9B,IAA3B,CAHN;AAIR,8BAAc,EAJN;AAKR,iCAAc,YAAOyN,IAAP,EALN;AAMR,+BAAc;AANN,kBAAZ;;AASA,qBAAIuL,WAAc,YAAOpM,GAAP,CAAWtN,KAAK+H,IAAL,CAAUP,KAArB,EAA4B9G,IAA5B,CAAlB;AAAA,qBACIsZ,cAAc,EADlB;AAAA,qBAEIC,aAAc;AACV,6BAAQ,YAAO3M,GAAP,CAAWtN,KAAK+H,IAAL,CAAUvF,IAArB,EAA2B9B,IAA3B,CADE;AAEV,8BAAS,IAFC;AAGV,4BAAO,IAHG;AAIV,8BAAS,MAJC;AAKV,iCAAY,IALF;AAMV,+BAAU;AANA,kBAFlB;;AAWA,qBAAI,YAAO4L,OAAP,CAAeoN,QAAf,CAAJ,EAA8B;AAC1BA,8BAAS9K,OAAT,CAAiB,UAASrM,CAAT,EAAYqB,CAAZ,EAAe;AAC5BqW,sCAAa;AACT,qCAAQ,YAAO3M,GAAP,CAAWtN,KAAK+H,IAAL,CAAUvF,IAArB,EAA2B9B,IAA3B,CADC;AAET,sCAAS,IAAIwZ,IAAJ,CAAS3X,EAAE0U,KAAX,CAFA;AAGT,oCAAO,IAAIiD,IAAJ,CAAS3X,EAAE2U,GAAX,CAHE;AAIT,sCAAS7T,MAAMoW,KAAN,CAJA;AAKT,yCAAY,YAAOtL,IAAP,EALH;AAMT,uCAAU;AAND,0BAAb;AAQA6L,qCAAYlL,IAAZ,CAAiBmL,UAAjB;AACH,sBAVD;AAWH,kBAZD,MAYO;AACHA,kCAAa;AACT,iCAAQ,YAAO3M,GAAP,CAAWtN,KAAK+H,IAAL,CAAUvF,IAArB,EAA2B9B,IAA3B,CADC;AAET,kCAAS,IAAIwZ,IAAJ,CAASR,SAASzC,KAAlB,CAFA;AAGT,gCAAO,IAAIiD,IAAJ,CAASR,SAASxC,GAAlB,CAHE;AAIT,kCAAS7T,MAAMoW,KAAN,CAJA;AAKT,qCAAY,YAAOtL,IAAP,EALH;AAMT,mCAAU;AAND,sBAAb;AAQA6L,iCAAYlL,IAAZ,CAAiBmL,UAAjB;AACH;AACDzM,uBAAMhG,KAAN,GAAcwS,WAAd;;AAEAha,sBAAKW,UAAL,CAAgBmO,IAAhB,CAAqBtB,KAArB;AACH,cAhDD;AAiDA,oBAAOxN,KAAKW,UAAZ;AAEH;;;qDAE2B;AACxB,iBAAIX,OAAO,IAAX;;AAEA,iBAAIqD,QAAQrD,KAAKO,UAAjB;AACAP,kBAAKuY,UAAL,CAAgB3J,OAAhB,CAAwB,UAASlO,IAAT,EAAe+Y,KAAf,EAAsB;AAC1C,qBAAIjM,QAAQ;AACR,8BAAcnK,MAAMoW,KAAN,CADN;AAER,6BAAc,YAAOnM,GAAP,CAAWtN,KAAK+H,IAAL,CAAUvF,IAArB,EAA2B9B,IAA3B,CAFN;AAGR,8BAAa,EAHL;AAIR,iCAAc,YAAOyN,IAAP,EAJN;AAKR,+BAAc;AALN,kBAAZ;;AAQA,qBAAIgM,eAAe,YAAO7M,GAAP,CAAWtN,KAAK+H,IAAL,CAAUrG,CAArB,EAAwBhB,IAAxB,CAAnB;AAAA,qBACI0Z,eAAe,YAAO9M,GAAP,CAAWtN,KAAK+H,IAAL,CAAUhG,CAArB,EAAwBrB,IAAxB,CADnB;AAAA,qBAEIsZ,cAAc,EAFlB;AAAA,qBAGIC,aAAc;AACV,6BAAU,YAAO3M,GAAP,CAAWtN,KAAK+H,IAAL,CAAUvF,IAArB,EAA2B9B,IAA3B,CADA;AAEV,+BAAU,IAFA;AAGV,+BAAU,IAHA;AAIV,iCAAY,YAAOyN,IAAP,EAJF;AAKV,+BAAU;AALA,kBAHlB;;AAWA,qBAAI,YAAO7B,OAAP,CAAe8N,YAAf,CAAJ,EAAkC;AAC9B;;;;;;AAMA,yBAAI,CAAC,YAAO9N,OAAP,CAAe6N,YAAf,CAAL,EAAmC;AAC/BC,sCAAaxL,OAAb,CAAqB,UAASrM,CAAT,EAAYqB,CAAZ,EAAe;AAChCqW,0CAAa;AACT,yCAAU,YAAO3M,GAAP,CAAWtN,KAAK+H,IAAL,CAAUvF,IAArB,EAA2B9B,IAA3B,CADD;AAET,2CAAUkD,CAFD;AAGT,2CAAUrB,CAHD;AAIT,6CAAY,YAAO4L,IAAP,EAJH;AAKT,2CAAU;AALD,8BAAb;AAOA6L,yCAAYlL,IAAZ,CAAiBmL,UAAjB;AACH,0BATD;AAUH,sBAXD;;AAaA;;;;;;AAMA,6BAAI,YAAO3N,OAAP,CAAe6N,YAAf,KAAgC,CAACna,KAAKiY,UAA1C,EAAsD;AAClDmC,0CAAaxL,OAAb,CAAqB,UAASrM,CAAT,EAAYqB,CAAZ,EAAe;AAChCqW,8CAAa;AACT,6CAAU,YAAO3M,GAAP,CAAWtN,KAAK+H,IAAL,CAAUvF,IAArB,EAA2B9B,IAA3B,CADD;AAET,+CAAU,CAAC,YAAOmH,OAAP,CAAesS,aAAavW,CAAb,CAAf,CAAD,GAAmCuW,aAAavW,CAAb,CAAnC,GAAqDA,CAFtD;AAGT,+CAAUrB,CAHD;AAIT,iDAAY,YAAO4L,IAAP,EAJH;AAKT,+CAAU;AALD,kCAAb;AAOA6L,6CAAYlL,IAAZ,CAAiBmL,UAAjB;AACH,8BATD;AAUH,0BAXD;;AAaA;;;;;;AAMA,iCAAI,YAAO3N,OAAP,CAAe6N,YAAf,KAAgCna,KAAKiY,UAAzC,EAAqD;AAAA;AACjD,yCAAIoC,UAAU,YAAOpL,UAAP,CAAkBjP,KAAKiY,UAAvB,CAAd;;AAEAmC,kDAAaxL,OAAb,CAAqB,UAASrM,CAAT,EAAYqB,CAAZ,EAAe;AAChCqW,sDAAa;AACT,qDAAU,YAAO3M,GAAP,CAAWtN,KAAK+H,IAAL,CAAUvF,IAArB,EAA2B9B,IAA3B,CADD;AAET,uDAAU,CAAC,YAAOmH,OAAP,CAAesS,aAAavW,CAAb,CAAf,CAAD,GAAmCyW,QAAQF,aAAavW,CAAb,CAAR,CAAnC,GAA8DA,CAF/D;AAGT,uDAAUrB,CAHD;AAIT,yDAAY,YAAO4L,IAAP,EAJH;AAKT,uDAAU;AALD,0CAAb;AAOA6L,qDAAYlL,IAAZ,CAAiBmL,UAAjB;AACH,sCATD;AAHiD;AAapD;AACJ;;AAEDzM,uBAAMhG,KAAN,GAAcwS,WAAd;;AAEAha,sBAAKW,UAAL,CAAgBmO,IAAhB,CAAqBtB,KAArB;AACH,cApFD;;AAsFA,oBAAOxN,KAAKW,UAAZ;AAEH;AACD;;AAEA;;;;;;+CAIsB;AAClB,iBAAIX,OAAO,IAAX;;AAEA,iBAAIsa,eAAe,SAAfA,YAAe,CAAS/S,GAAT,EAAc7G,IAAd,EAAoB4L,OAApB,EAA4B;AAC3C,qBAAImB,QAAQlG,IAAIlC,KAAJ,CAAU,GAAV,CAAZ;AACA,qBAAIsI,SAAS,YAAOL,GAAP,CAAW/F,GAAX,EAAgB7G,IAAhB,CAAb;AACA,qBAAI6Z,WAAJ;AACA,qBAAI9M,MAAMzM,MAAN,IAAgB,CAAhB,IAAqB+G,KAAK,CAAL,KAAW,OAAhC,IAA2C,CAACuE,OAAhD,EAAyD;AACrDiO,0BAAK5M,MAAL;AACH,kBAFD,MAEO;AACH4M,0BAAK,IAAIhO,MAAJ,EAAL;AACAgO,wBAAG9M,MAAMA,MAAMzM,MAAN,GAAe,CAArB,CAAH,IAA8B2M,MAA9B;AACH;AACD,wBAAO4M,EAAP;AACH,cAXD;;AAaA,iBAAIC,UAAU,SAAVA,OAAU,CAAS9Z,IAAT,EAAe;AACzB,qBAAI8M,QAAQ;AACR,6BAAQ,YAAOF,GAAP,CAAWtN,KAAK+H,IAAL,CAAUvF,IAArB,EAA2B9B,IAA3B,CADA;AAER,6BAAQ,YAAO4M,GAAP,CAAWtN,KAAK+H,IAAL,CAAUiQ,IAArB,EAA2BtX,IAA3B,CAFA;AAGR,8BAAS;AAHD,kBAAZ;AAKA,qBAAI,YAAO4L,OAAP,CAAetM,KAAK+H,IAAL,CAAUP,KAAzB,CAAJ,EAAqC;AACjCxH,0BAAK+H,IAAL,CAAUP,KAAV,CAAgBoH,OAAhB,CAAwB,UAAS6L,CAAT,EAAY;AAChC,6BAAIF,KAAKD,aAAaG,CAAb,EAAgB/Z,IAAhB,EAAsB,IAAtB,CAAT;AACA8M,+BAAMhG,KAAN,GAAc,YAAO6C,KAAP,CAAamD,MAAMhG,KAAnB,EAA0B+S,EAA1B,CAAd;AACH,sBAHD;AAIH,kBALD,MAMK;AACD/M,2BAAMhG,KAAN,GAAc8S,aAAata,KAAK+H,IAAL,CAAUP,KAAvB,EAA8B9G,IAA9B,EAAoC,KAApC,CAAd;AACH;;AAED,wBAAO8M,KAAP;AACH,cAjBD;;AAmBA,iBAAI,CAAC,YAAOlB,OAAP,CAAetM,KAAKuY,UAApB,CAAL,EACIvY,KAAKW,UAAL,GAAkB6Z,QAAQxa,KAAKuY,UAAb,CAAlB,CADJ,KAGIvY,KAAKuY,UAAL,CAAgB3J,OAAhB,CAAwB,UAASlO,IAAT,EAAe;AACnCV,sBAAKW,UAAL,CAAgBmO,IAAhB,CAAqB0L,QAAQ9Z,IAAR,CAArB;AACH,cAFD;;AAIJ,oBAAOV,KAAKW,UAAZ;AACH;;AAED;;AAGA;;;;;;gCAIOR,Q,EAAU;;AAEb,iBAAIH,OAAO,IAAX;;AAEA2B,gBAAG+Y,GAAH,CAAO1a,KAAKsJ,IAAL,CAAUC,GAAjB,EAAsB,UAASyB,GAAT,EAActK,IAAd,EAAoB;AACtC,qBAAIsK,GAAJ,EAAS,MAAMA,GAAN;;AAET,qBAAI,CAAC,YAAOnD,OAAP,CAAe1H,QAAf,CAAD,IAA6B,YAAO2C,UAAP,CAAkB3C,QAAlB,CAAjC,EACIA,SAAS4C,IAAT,CAAc/C,IAAd,EAAoBU,IAApB;AACP,cALD;AAMH;;;gCAEMP,Q,EAAU;;AAEb,iBAAIH,OAAO,IAAX;;AAEA2B,gBAAGgZ,GAAH,CAAO3a,KAAKsJ,IAAL,CAAUC,GAAjB,EAAsB,UAASyB,GAAT,EAActK,IAAd,EAAoB;AACtC,qBAAIsK,GAAJ,EAAS,MAAMA,GAAN;;AAET,qBAAI,CAAC,YAAOnD,OAAP,CAAe1H,QAAf,CAAD,IAA6B,YAAO2C,UAAP,CAAkB3C,QAAlB,CAAjC,EACIA,SAAS4C,IAAT,CAAc/C,IAAd,EAAoBU,IAApB;AACP,cALD;AAOH;;;iCAEOP,Q,EAAU;;AAEd,iBAAIH,OAAO,IAAX;;AAEA2B,gBAAG+G,IAAH,CAAQ1I,KAAKsJ,IAAL,CAAUC,GAAlB,EAAuB,UAASyB,GAAT,EAActK,IAAd,EAAoB;AACvC,qBAAIsK,GAAJ,EAAS,MAAMA,GAAN;;AAET,qBAAI,CAAC,YAAOnD,OAAP,CAAe1H,QAAf,CAAD,IAA6B,YAAO2C,UAAP,CAAkB3C,QAAlB,CAAjC,EACIA,SAAS4C,IAAT,CAAc/C,IAAd,EAAoBU,IAApB;AACP,cALD;AAOH;;;iCAEOP,Q,EAAU;;AAEd,iBAAIH,OAAO,IAAX;;AAEA2B,gBAAGiZ,IAAH,CAAQ5a,KAAKsJ,IAAL,CAAUC,GAAlB,EAAuB,UAASyB,GAAT,EAActK,IAAd,EAAoB;AACvC,qBAAIsK,GAAJ,EAAS,MAAMA,GAAN;;AAET,qBAAI,CAAC,YAAOnD,OAAP,CAAe1H,QAAf,CAAD,IAA6B,YAAO2C,UAAP,CAAkB3C,QAAlB,CAAjC,EACIA,SAAS4C,IAAT,CAAc/C,IAAd,EAAoBU,IAApB;AACP,cALD;AAMH;;;gCAEMP,Q,EAAU;;AAEb,iBAAIH,OAAO,IAAX;;AAEA2B,gBAAGkZ,GAAH,CAAO7a,KAAKsJ,IAAL,CAAUC,GAAjB,EAAsB,UAASyB,GAAT,EAActK,IAAd,EAAoB;AACtC,qBAAIsK,GAAJ,EAAS,MAAMA,GAAN;;AAET;AACA;AACA;AACAtK,wBAAO,GAAG4B,GAAH,CAAOS,IAAP,CAAYrC,KAAKoa,gBAAL,CAAsB,MAAtB,CAAZ,EAA2C,UAASvY,CAAT,EAAY;AAC1D,4BAAO;AACHC,+BAAMD,EAAEwY,aAAF,CAAgB,MAAhB,EAAwBC,WAD3B;AAEHxT,gCAAOjF,EAAEwY,aAAF,CAAgB,OAAhB,EAAyBC;AAF7B,sBAAP;AAIH,kBALM,CAAP;;AAOA,qBAAI,CAAC,YAAOnT,OAAP,CAAe1H,QAAf,CAAD,IAA6B,YAAO2C,UAAP,CAAkB3C,QAAlB,CAAjC,EACIA,SAAS4C,IAAT,CAAc/C,IAAd,EAAoBU,IAApB;AACP,cAfD;AAgBH;;AAED;;;;6BApvBc;AACV,oBAAO,KAAKyJ,QAAZ;AACH,U;;AAyCD;;AAEA;;;2BAGYjC,G,EAAK;AACb,iBAAIA,GAAJ,EAAS;AACL,sBAAKiC,QAAL,GAAgBjC,GAAhB;AACH;AACJ;;;6BAhDc;AACX,oBAAO,KAAKoQ,SAAZ;AACH;;;6BAEe;AACZ,oBAAO,KAAK1M,UAAZ;AACH;;;6BAEU;AACP,oBAAO,KAAKqP,KAAZ;AACH,U;2BAwCQ/S,G,EAAK;AACV,iBAAIA,GAAJ,EAAS;AACL,sBAAK+S,KAAL,GAAa/S,GAAb;AACH;AACJ;;;6BA1CU;AACP,oBAAO,KAAKuF,KAAZ;AACH,U;2BA0CQvF,G,EAAK;AACV,iBAAIA,GAAJ,EAAS;AACL,sBAAKuF,KAAL,GAAavF,GAAb;AACH;AACJ;;;6BA5CgB;AACb,oBAAO,KAAKsD,WAAZ;AACH,U;2BA4CctD,G,EAAK;AAChB,iBAAIA,GAAJ,EAAS;AACL,sBAAKsD,WAAL,GAAmBtD,GAAnB;AACH;AACJ;;;6BA9CgB;AACb,oBAAO,KAAKqD,WAAZ;AACH,U;2BA8CcrD,G,EAAK;AAChB,iBAAIA,GAAJ,EAAS;AACL,sBAAKqD,WAAL,GAAmBrD,GAAnB;AACH;AACJ;;;6BAhDY;AACT,oBAAO,KAAKgQ,OAAZ;AACH,U;2BAgDUhQ,G,EAAK;AACZ,iBAAIA,GAAJ,EAAS;AACL,sBAAKgQ,OAAL,GAAehQ,GAAf;AACH;AACJ;;;6BAlDY;AACT,oBAAO,KAAKiQ,OAAZ;AACH,U;2BAkDUjQ,G,EAAK;AACZ,iBAAIA,GAAJ,EAAS;AACL,sBAAKiQ,OAAL,GAAejQ,GAAf;AACH;AACJ;;;6BApDgB;AACb,oBAAO,KAAK6C,WAAZ;AACH,U;2BAoDc7C,G,EAAK;AAChB,iBAAIA,GAAJ,EAAS;AACL,sBAAK6C,WAAL,GAAmB7C,GAAnB;AACH;AACJ;;;6BAtDgB;AACb,oBAAO,KAAKkQ,WAAZ;AACH,U;2BAsDclQ,G,EAAK;AAChB,iBAAIA,GAAJ,EAAS;AACL,sBAAKkQ,WAAL,GAAmBlQ,GAAnB;AACH;AACJ;;;;;;mBAhJgBrI,W;;;;;;;;;;;;;;;;ACFrB;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;;;;;;;;;KAEqBL,U;;;AACjB,yBAAYO,OAAZ,EAAqB;AAAA;;AAAA,6HACXA,OADW;;AAGjB,aAAIC,YAAJ;;AAEA,aAAIkb,IAAIhX,KAAKzB,GAAL,CAASzC,KAAKmB,KAAL,GAAanB,KAAKoB,MAAL,CAAYC,IAAzB,GAAgCrB,KAAKoB,MAAL,CAAYE,KAArD,EAA4DtB,KAAKuB,MAAL,GAAcvB,KAAKoB,MAAL,CAAYI,GAA1B,GAAgCxB,KAAKoB,MAAL,CAAYK,MAAxG,IAAkH,CAA1H;AACAzB,cAAKC,MAAL,GAAc;AACVyU,0BAAawG,CADH;AAEV3G,0BAAa2G,IAAI,EAAJ,GAASA,IAAI,EAAb,GAAkBA,IAAI;AAFzB,UAAd;;AAMA;AAZiB;AAapB;;AAED;;;;;;;;AAoCA;;AAEA;;;AAGA;;;sCAGajb,M,EAAQE,Q,EAAU;AAC3B,kIAAmBF,MAAnB;;AAEA,iBAAID,OAAO,IAAX;;AAEAA,kBAAKD,OAAL,GAAe,aAAOK,SAAP,CAAiBH,MAAjB,EAAyBD,KAAKD,OAA9B,CAAf;;AAEAC,kBAAKK,SAAL,GAAsB,OAAtB;;AAEA,iBAAIC,aAAsBN,KAAKM,UAA/B;AACAA,wBAAWC,UAAX,GAA0BP,KAAKO,UAA/B;;AAEA,iBAAIC,KAAK,iBAAgBF,UAAhB,EAA4BN,KAAKK,SAAjC,EAA4C,IAA5C,CAAT;AACAG,gBAAGC,aAAH,CAAiBT,KAAKK,SAAtB,EAAiC,UAASK,IAAT,EAAe;AAC5CV,sBAAKW,UAAL,GAAkBD,IAAlB;;AAEA,qBAAI,aAAOoC,UAAP,CAAkB3C,QAAlB,CAAJ,EAAiC;AAC7BA,8BAAS4C,IAAT,CAAc/C,IAAd,EAAoBA,KAAKW,UAAzB;AACH;AACJ,cAND;AAOH;;AAED;;;;;;0CAGiBqC,O,EAAS7C,Q,EAAU;AAChC,iBAAIH,OAAO,IAAX;;AAEAA,kBAAKD,OAAL,GAAe,aAAOK,SAAP,CAAiBJ,KAAKD,OAAtB,EAA+BiD,OAA/B,CAAf;;AAEAhD,kBAAKK,SAAL,GAAsB,OAAtB;;AAEA,iBAAIC,aAAsBN,KAAKM,UAA/B;AACAA,wBAAWC,UAAX,GAA0BP,KAAKO,UAA/B;;AAEA,iBAAIC,KAAK,iBAAgBF,UAAhB,EAA4BN,KAAKK,SAAjC,EAA4C,IAA5C,CAAT;AACAG,gBAAGC,aAAH,CAAiBT,KAAKK,SAAtB,EAAiC,UAASK,IAAT,EAAe;AAC5CV,sBAAKW,UAAL,GAAkBD,IAAlB;;AAEA,qBAAI,aAAOoC,UAAP,CAAkB3C,QAAlB,CAAJ,EAAiC;AAC7BA,8BAAS4C,IAAT,CAAc/C,IAAd,EAAoBA,KAAKW,UAAzB;AACH;AACJ,cAND;AAOH;;AAED;;;;;;;gCAIOD,I,EAAM;AACT,iBAAIV,OAAO,IAAX;;AAEA,iBAAImB,QAAUnB,KAAKmB,KAAL,GAAanB,KAAKoB,MAAL,CAAYC,IAAzB,GAAgCrB,KAAKoB,MAAL,CAAYE,KAA1D;AAAA,iBACIC,SAAUvB,KAAKuB,MAAL,GAAcvB,KAAKoB,MAAL,CAAYI,GAA1B,GAAgCxB,KAAKoB,MAAL,CAAYK,MAD1D;AAAA,iBAEI4B,QAAUrD,KAAKO,UAFnB;;AAIAP,kBAAKqU,GAAL,GAAW1S,GAAG2I,GAAH,CAAO+J,GAAP,GACEK,WADF,CACc1U,KAAKD,OAAL,CAAa2U,WAD3B,EAEEH,WAFF,CAEcvU,KAAKD,OAAL,CAAawU,WAF3B,CAAX;;AAIA;AACAvU,kBAAKmU,GAAL,GAAWxS,GAAGwZ,MAAH,CAAUhH,GAAV,GACEiH,IADF,CACO,IADP,EAEE5T,KAFF,CAEQ,UAASjF,CAAT,EAAY;AAAE,wBAAOA,EAAEiF,KAAT;AAAiB,cAFvC,CAAX;;AAIAxH,kBAAKiD,IAAL,CAAUC,SAAV,CAAoB,yCAApB,EAA+DxC,IAA/D,CAAoE,EAApE,EAAwEyC,IAAxE,GAA+EC,MAA/E;;AAEA;AACA,iBAAIiY,OAAOrb,KAAKiD,IAAL,CACEO,MADF,CACS,GADT,EAEMC,IAFN,CAEW,OAFX,EAEoB,wCAFpB,EAGMA,IAHN,CAGW,WAHX,EAGwB,eAAgBtC,QAAQ,CAAxB,GAA6B,GAA7B,GAAoCI,SAAS,CAA7C,GAAkD,GAH1E,EAIM2B,SAJN,CAIgB,+BAJhB,EAKMxC,IALN,CAKWV,KAAKmU,GAAL,CAASzT,IAAT,CALX,EAK2B6C,KAL3B,GAMMC,MANN,CAMa,GANb,EAOUC,IAPV,CAOe,OAPf,EAOwB,8BAPxB,CAAX;;AASA;AACA;AACA4X,kBAAK7X,MAAL,CAAY,MAAZ,EACSC,IADT,CACc,OADd,EACuB,+BADvB,EAESA,IAFT,CAEc,UAFd,EAE0B,UAASlB,CAAT,EAAY;AAAE,wBAAOA,EAAE7B,IAAF,CAAO,UAAP,CAAP;AAA4B,cAFpE,EAGS+C,IAHT,CAGc,GAHd,EAGmBzD,KAAKqU,GAHxB,EAIS5Q,IAJT,CAIc,MAJd,EAIsB,UAASlB,CAAT,EAAYqB,CAAZ,EAAe;AAAE,wBAAOP,MAAMO,CAAN,CAAP;AAAkB,cAJzD,EAKSH,IALT,CAKc,QALd,EAKwB,SALxB,EAMSyI,IANT,CAMc,UAAS3J,CAAT,EAAY;AAAEvC,sBAAKoU,WAAL,GAAmB7R,CAAnB;AAAuB,cANnD;AAOQ;AACA;;;AAGR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAvC,kBAAKoE,iBAAL;AACH;;AAED;;;;;;yCAGgB;AACZ,iBAAIpE,OAAO,IAAX;;AAEA,oBAAOA,KAAKiD;AACJ;AADD,cAEMC,SAFN,CAEgB,oCAFhB,CAAP;AAGH;;AAED;;;;;;;6CAIoB;AAChB,iBAAIlD,OAAU,IAAd;AAAA,iBACI4F,WAAU5F,KAAK6U,aAAL,EADd;AAAA,iBAEI1T,QAAUnB,KAAKmB,KAAL,GAAanB,KAAKoB,MAAL,CAAYC,IAAzB,GAAgCrB,KAAKoB,MAAL,CAAYE,KAF1D;AAAA,iBAGIC,SAAUvB,KAAKuB,MAAL,GAAcvB,KAAKoB,MAAL,CAAYI,GAA1B,GAAgCxB,KAAKoB,MAAL,CAAYK,MAH1D;AAAA,iBAII4B,QAAUrD,KAAKO,UAJnB;AAAA,iBAKI+T,mBAAmBtU,KAAKD,OAAL,CAAawU,WALpC;AAAA,iBAMIC,mBAAmBxU,KAAKD,OAAL,CAAa2U,WANpC;AAAA,iBAOIC,kBAAkB3U,KAAKD,OAAL,CAAawU,WAPnC;AAAA,iBAQIK,kBAAkB5U,KAAKD,OAAL,CAAa2U,WAAb,GAA2B,GARjD;;AAUA,iBAAI/O,eAAsB3F,KAAKyF,KAAL,CAAW1F,OAArC;AAAA,iBACIyF,cAAsBxF,KAAKyF,KAAL,CAAWC,MADrC;AAAA,iBAEII,sBAAsBH,aAAaI,WAAb,CAAyB5F,QAFnD;AAAA,iBAGI6F,qBAAsBL,aAAaM,UAAb,CAAwB9F,QAHlD;AAAA,iBAII+F,kBAAmBlG,KAAKmG,KAAL,CAAWhG,QAJlC;;AAMA,iBAAIiG,UAAU,iBAAYpG,KAAKD,OAAL,CAAaqG,OAAzB,CAAd;;AAEA;AACApG,kBAAKyL,aAAL,GAAqB;AACjB,0BAAS,eAASlJ,CAAT,EAAYqB,CAAZ,EAAe;AACpB,yBAAI,aAAOd,UAAP,CAAkBoD,eAAlB,CAAJ,EAAwC;AACpCA,yCAAgBnD,IAAhB,CAAqB,IAArB,EAA2BR,CAA3B;AACH;AACJ,kBALgB;;AAOjB,8BAAa,mBAASA,CAAT,EAAYqB,CAAZ,EAAe;AACxB,yBAAI,CAAC4B,WAAL,EAAkB;;AAElB,yBAAI,aAAO1C,UAAP,CAAkBgD,mBAAlB,CAAJ,EAA4C;AACxCA,6CAAoB/C,IAApB,CAAyB,IAAzB,EAA+BR,CAA/B;AACH;;AAED,yBAAIqD,WAAWjE,GAAGiF,MAAH,CAAU,IAAV,CAAf;AACAhB,8BAASd,UAAT,GACSrB,IADT,CACc,GADd,EACmB9B,GAAG2I,GAAH,CAAO+J,GAAP,GACNE,WADM,CACMI,eADN,EAEND,WAFM,CAEME,eAFN,CADnB;;AAMA;AACA,yBAAI5U,KAAKD,OAAL,CAAasH,MAAb,CAAoBd,IAAxB,EACIvG,KAAKqH,MAAL,CAAYoL,IAAZ,CAAiBvG,IAAjB,CAAsB,YAAW;AAC7B,6BAAIvK,GAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,UAArB,MAAqClB,EAAE7B,IAAF,CAAO,UAAP,CAArC,IAA2DiB,GAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,aAArB,KAAuC,MAAtG,EAA8G;AAC1G9B,gCAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,SAArB,EAAgC,KAAhC;AACH;AACJ,sBAJD;;AAMJ;AACA,yBAAIzD,KAAKD,OAAL,CAAauG,KAAb,CAAmBC,IAAvB,EAA6B;AACzB,6BAAIC,KAAK7E,GAAGuB,SAAH,CAAa,uCAAb,CAAT;AACAsD,4BAAGC,MAAH,CAAU,UAAS7C,CAAT,EAAY;AAAE,oCAAOA,EAAE,UAAF,KAAiBrB,EAAE7B,IAAF,CAAO,UAAP,CAAxB;AAA4C,0BAApE,EAAsEwC,SAAtE,CAAgF,IAAhF,EAAsFS,KAAtF,CAA4F,SAA5F,EAAuG,KAAvG;AACA,6BAAI+C,eAAeF,GAAGC,MAAH,CAAU,UAAS7C,CAAT,EAAY;AAAE,oCAAOA,EAAE,UAAF,KAAiBrB,EAAE7B,IAAF,CAAO,UAAP,CAAxB;AAA4C,0BAApE,CAAnB;AACA;AACAgG,sCAAaxD,SAAb,CAAuB,IAAvB,EAA6BS,KAA7B,CAAmC,SAAnC,EAA8C,GAA9C;AACA,sCAAOgD,MAAP,CAAchF,GAAGiF,MAAH,CAAU,qBAAV,EAAiC,CAAjC,EAAoC,CAApC,CAAd,EAAsDF,aAAa,CAAb,EAAgB,CAAhB,EAAmBG,SAAzE,EAAoF,GAApF;AACH;;AAED;AACA7G,0BAAK6U,aAAL,GAAqB3I,IAArB,CAA0B,YAAU;AAChC,6BAAIvK,GAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,UAArB,MAAqClB,EAAE7B,IAAF,CAAO,UAAP,CAAzC,EAA6D;AACzDiB,gCAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,SAArB,EAAgC,KAAhC;AACH;AACJ,sBAJD;;AAMA;AACA2C,6BAAQW,IAAR,CAAaxE,CAAb,EAAgBvC,IAAhB,EAAsB,WAAtB;AACH,kBAhDgB;;AAkDjB,6BAAY,kBAASuC,CAAT,EAAYqB,CAAZ,EAAe;AACvB,yBAAI,CAAC4B,WAAL,EAAkB;;AAElB,yBAAI,aAAO1C,UAAP,CAAkBkD,kBAAlB,CAAJ,EAA2C;AACvCA,4CAAmBjD,IAAnB,CAAwB,IAAxB,EAA8BR,CAA9B;AACH;;AAED,yBAAIqD,WAAWjE,GAAGiF,MAAH,CAAU,IAAV,CAAf;AACAhB,8BAASd,UAAT,GACSC,QADT,CACkB,GADlB,EAESiQ,IAFT,CAEc,QAFd,EAGSvR,IAHT,CAGc,GAHd,EAGmB9B,GAAG2I,GAAH,CAAO+J,GAAP,GACNE,WADM,CACMD,gBADN,EAENI,WAFM,CAEMF,gBAFN,CAHnB;;AAQA;AACA,yBAAIxU,KAAKD,OAAL,CAAasH,MAAb,CAAoBd,IAAxB,EACAvG,KAAKqH,MAAL,CAAYoL,IAAZ,CAAiBvG,IAAjB,CAAsB,YAAW;AAC7B,6BAAIvK,GAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,UAArB,MAAqClB,EAAE7B,IAAF,CAAO,UAAP,CAArC,IAA2DiB,GAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,aAArB,KAAuC,MAAtG,EAA8G;AAC1G9B,gCAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,SAArB,EAAgC,KAAhC;AACH;AACJ,sBAJD;;AAMA;AACA,yBAAIzD,KAAKD,OAAL,CAAauG,KAAb,CAAmBC,IAAvB,EACI5E,GAAGuB,SAAH,CAAa,uCAAb,EAAsDA,SAAtD,CAAgE,IAAhE,EAAsES,KAAtE,CAA4E,SAA5E,EAAuF,EAAvF;;AAEJ;AACA3D,0BAAK6U,aAAL,GAAqB3I,IAArB,CAA0B,YAAU;AAChC,6BAAIvK,GAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,UAArB,MAAqClB,EAAE7B,IAAF,CAAO,UAAP,CAAzC,EAA6D;AACzDiB,gCAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,SAArB,EAAgC,KAAhC;AACH;AACJ,sBAJD;;AAMA;AACA2C,6BAAQW,IAAR,CAAaxE,CAAb,EAAgBvC,IAAhB,EAAsB,UAAtB;AACH;;AAvFgB,cAArB;;AA2FA4F,sBAASoB,EAAT,CAAYhH,KAAKyL,aAAjB;AACH;;AAED;;AAEA;;;AAGA;;;;;;;;;4BAMGxE,S,EAAW9G,Q,EAAU;AACpB,wHAAS8G,SAAT,EAAoB9G,QAApB;;AAEA,iBAAIH,OAAO,IAAX;AACA,iBAAI4F,WAAc5F,KAAK6U,aAAL,EAAlB;;AAEA;AACA,iBAAIxO,eAAe;AACf,gCAAe,oBAAS9D,CAAT,EAAY;AACvB,yBAAI,aAAOO,UAAP,CAAkB3C,QAAlB,CAAJ,EAAiC;AAC7BA,kCAAS4C,IAAT,CAAc,IAAd,EAAoBR,CAApB;AACH;AACJ,kBALc;AAMf,oCAAmB,wBAASA,CAAT,EAAY;AAC3B,yBAAI,aAAOO,UAAP,CAAkB3C,QAAlB,CAAJ,EAAiC;AAC7BA,kCAAS4C,IAAT,CAAc,IAAd,EAAoBR,CAApB;AACH;AACJ,kBAVc;AAWf,mCAAkB,uBAASA,CAAT,EAAY;AAC1B,yBAAI,aAAOO,UAAP,CAAkB3C,QAAlB,CAAJ,EAAiC;AAC7BA,kCAAS4C,IAAT,CAAc,IAAd,EAAoBR,CAApB;AACH;AACJ;AAfc,cAAnB;;AAkBA,iBAAI2E,YAAYD,YAAY,QAA5B;;AAEArB,sBAASoB,EAAT,CAAYE,SAAZ,EAAuBb,aAAaa,SAAb,CAAvB;AACH;;AAED;;;;;;gCAGO;AACH;;AAEA,iBAAIlH,OAAO,IAAX;;AAEAA,kBAAKmH,YAAL,CAAkBnH,KAAKC,MAAvB,EAA+B,UAASS,IAAT,EAAe;AAC1C,qBAAI0G,QAAU,gBAAUpH,KAAKD,OAAL,CAAaqH,KAAvB,EAA8BpH,IAA9B,CAAd;AACA,qBAAIqH,SAAU,gBAAWrH,KAAKD,OAAL,CAAasH,MAAxB,EAAgCrH,IAAhC,EAAsCA,KAAKW,UAA3C,CAAd;AACA,qBAAI2F,QAAU,iBAAUtG,KAAKD,OAAL,CAAauG,KAAvB,EAA8BtG,IAA9B,EAAoCA,KAAKW,UAAzC,CAAd;;AAEAX,sBAAKoH,KAAL,GAAaA,KAAb;AACApH,sBAAKqH,MAAL,GAAcA,MAAd;AACArH,sBAAKsG,KAAL,GAAaA,KAAb;;AAEA;AACAtG,sBAAKoH,KAAL,CAAWL,IAAX;;AAEA;AACA/G,sBAAK0E,MAAL,CAAY1E,KAAKW,UAAjB;AACAX,sBAAKoE,iBAAL;;AAEApE,sBAAKqH,MAAL,GAAcA,MAAd;AACArH,sBAAKsG,KAAL,GAAaA,KAAb;;AAEA;AACAtG,sBAAKqH,MAAL,CAAYN,IAAZ;AACA/G,sBAAKqH,MAAL,CAAYiU,iCAAZ,CAA8Ctb,IAA9C,EAAoDA,KAAK6U,aAAL,EAApD,EAA0E7U,KAAKmU,GAA/E,EAAoFnU,KAAKoU,WAAzF,EAAsGpU,KAAKqU,GAA3G;;AAEA;AACArU,sBAAKsG,KAAL,CAAWS,IAAX;AACA/G,sBAAKsG,KAAL,CAAWgV,iCAAX,CAA6Ctb,IAA7C;AACH,cA1BD;AA2BH;;AAED;;;;;;;;mCAKUuH,G,EAAKC,K,EAAO;AAClB,+HAAgBD,GAAhB,EAAqBC,KAArB;;AAEA,iBAAIxH,OAAO,IAAX;;AAEA,0BAAOyH,GAAP,CAAWF,GAAX,EAAgBC,KAAhB,EAAuBxH,KAAKD,OAA5B;;AAEAC,kBAAKmH,YAAL,CAAkBnH,KAAKD,OAAvB;AACH;;AAED;;;;;;;;oCAKW2H,O,EAASC,a,EAAe;AAC/B,iBAAI3H,OAAO,IAAX;;AAEA,iBAAI4H,SAAS,EAAb;;AAEA,iBAAI,CAAC,aAAOC,OAAP,CAAeF,aAAf,CAAL,EAAoC;;AAEhCC,wBAAOlH,IAAP,GAAc;AACVoH,4BAAOJ,OADG;AAEVK,2BAAMJ;AAFI,kBAAd;AAKH,cAPD,MAOO;;AAEHC,wBAAOlH,IAAP,GAAc;AACVoH,4BAAOJ;AADG,kBAAd;AAIH;;AAED1H,kBAAKgI,gBAAL,CAAsBJ,MAAtB,EAA8B,UAASlH,IAAT,EAAe;AACzC;AACAV,sBAAK0E,MAAL,CAAYhE,IAAZ;;AAEA;AACAV,sBAAKqH,MAAL,CAAY3C,MAAZ,CAAmBhE,IAAnB;AACAV,sBAAKqH,MAAL,CAAYiU,iCAAZ,CAA8Ctb,IAA9C,EAAoDA,KAAK6U,aAAL,EAApD,EAA0E7U,KAAKmU,GAA/E,EAAoFnU,KAAKoU,WAAzF,EAAsGpU,KAAKqU,GAA3G;;AAEA;AACArU,sBAAKsG,KAAL,CAAW5B,MAAX,CAAkBhE,IAAlB;AACAV,sBAAKsG,KAAL,CAAWgV,iCAAX,CAA6Ctb,IAA7C;AACH,cAXD;AAYH;;AAGD;;;;6BAtZU;AACN,oBAAO,KAAKub,IAAZ;AACH,U;;AASD;;AAEA;;;2BAGQrT,G,EAAK;AACT,iBAAIA,GAAJ,EAAS;AACL,sBAAKqT,IAAL,GAAYrT,GAAZ;AACH;AACJ;;;6BAhBS;AACN,oBAAO,KAAKsT,IAAZ;AACH,U;2BAgBOtT,G,EAAK;AACT,iBAAIA,GAAJ,EAAS;AACL,sBAAKsT,IAAL,GAAYtT,GAAZ;AACH;AACJ;;;6BAlBiB;AACd,oBAAO,KAAKuT,YAAZ;AACH,U;2BAkBevT,G,EAAK;AACjB,iBAAIA,GAAJ,EAAS;AACL,sBAAKuT,YAAL,GAAoBvT,GAApB;AACH;AACJ;;;;;;mBAnDgB1I,U;;;;;;;;;;;;;;;;ACXrB;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;;;;;;;;;KAEqBC,S;;;AACjB,wBAAYM,OAAZ,EAAqB;AAAA;;AAAA,2HACXA,OADW;;AAGjB,aAAIC,YAAJ;;AAEAA,cAAKC,MAAL,GAAe;AACXyb,oBAAO;AACHnV,uBAAM,IADH;AAEHoV,uBAAM,WAFH;AAGHC,yBAAQ,WAHL;AAIH,iCAAgB,CAJb;AAKHC,0BAAS,GALN;AAMHpH,yBAAQ;AANL,cADI;AASXqH,mBAAM;AACFvV,uBAAM;AADJ,cATK;AAYXwV,mBAAM;AACFpY,wBAAO,OADL,EACc;AAChBxC,wBAAO;AAFL,cAZK;AAgBX4T,0BAAa,QAhBF,EAAf;;AAmBA;AAxBiB;AAyBpB;;AAED;;;;;;;;AAwIA;;AAEA;;;;AAIA;;;sCAGa9U,M,EAAQE,Q,EAAU;AAC3B,gIAAmBF,MAAnB;;AAEA,iBAAID,OAAO,IAAX;;AAEAA,kBAAKD,OAAL,GAAe,aAAOK,SAAP,CAAiBH,MAAjB,EAAyBD,KAAKD,OAA9B,CAAf;;AAEAC,kBAAKK,SAAL,GAAiB,MAAjB;AACAL,kBAAKgc,UAAL,GAAkBra,GAAGsa,QAAH,CAAY,UAAS1Z,CAAT,EAAY;AAAE,wBAAOA,EAAEyU,MAAT;AAAkB,cAA5C,EAA8C3V,IAAhE;;AAEA,iBAAIf,aAAsBN,KAAKM,UAA/B;AACAA,wBAAWC,UAAX,GAA0BP,KAAKO,UAA/B;;AAEA,iBAAIC,KAAK,iBAAgBF,UAAhB,EAA4BN,KAAKK,SAAjC,EAA4C,IAA5C,CAAT;AACAG,gBAAGC,aAAH,CAAiBT,KAAKK,SAAtB,EAAiC,UAASK,IAAT,EAAe;AAC5CV,sBAAKW,UAAL,GAAkBD,IAAlB;AACAV,sBAAKkc,YAAL,GAAsB1b,GAAGyX,UAAzB;;AAEA,qBAAI9W,QAAUnB,KAAKmB,KAAL,GAAanB,KAAKoB,MAAL,CAAYC,IAAzB,GAAgCrB,KAAKoB,MAAL,CAAYE,KAA1D;AAAA,qBACIC,SAAUvB,KAAKuB,MAAL,GAAcvB,KAAKoB,MAAL,CAAYI,GAA1B,GAAgCxB,KAAKoB,MAAL,CAAYK,MAD1D;;AAGAzB,sBAAK0B,CAAL,GAAU1B,KAAKkc,YAAN,GAAsBva,GAAG6H,IAAH,CAAQ5H,KAAR,GAAgBK,KAAhB,CAAsB,CAAC,CAAD,EAAId,KAAJ,CAAtB,CAAtB,GAA0DQ,GAAGC,KAAH,CAASM,MAAT,GAAkBD,KAAlB,CAAwB,CAAC,CAAD,EAAId,KAAJ,CAAxB,CAAnE,EACAnB,KAAK+B,CAAL,GAASJ,GAAGC,KAAH,CAASM,MAAT,GAAkBD,KAAlB,CAAwB,CAACV,MAAD,EAAS,CAAT,CAAxB,CADT;;AAGAvB,sBAAK0T,YAAL,CAAkB1T,KAAKW,UAAvB;;AAEAwb,yBAAQna,GAAR,CAAYhC,KAAK0B,CAAL,CAAOW,MAAP,EAAZ;;AAEArC,sBAAKoc,OAAL,GAAeza,GAAG2I,GAAH,CAAOyR,IAAP,GACEra,CADF,CACI,UAASa,CAAT,EAAY;AAAE,4BAAOvC,KAAK0B,CAAL,CAAOa,EAAEyU,MAAT,CAAP;AAA0B,kBAD5C,EAEEjV,CAFF,CAEI,UAASQ,CAAT,EAAY;AAAE,4BAAOvC,KAAK+B,CAAL,CAAOQ,EAAE6T,MAAT,CAAP;AAA0B,kBAF5C,EAGErB,WAHF,CAGc/U,KAAKD,OAAL,CAAagV,WAH3B,CAAf;;AAKA/U,sBAAKqc,OAAL,GAAe1a,GAAG2I,GAAH,CAAOwR,IAAP,GACEpa,CADF,CACI,UAASa,CAAT,EAAY;AAAE,4BAAOvC,KAAK0B,CAAL,CAAOa,EAAEyU,MAAT,CAAP;AAA0B,kBAD5C,EAEE/S,EAFF,CAEK,UAAS1B,CAAT,EAAY;AAAE,4BAAOvC,KAAK+B,CAAL,CAAOQ,EAAE6T,MAAT,CAAP;AAA0B,kBAF7C,EAGEpS,EAHF,CAGKzC,MAHL,EAIEwT,WAJF,CAIc/U,KAAKD,OAAL,CAAagV,WAJ3B,CAAf;;AAMA,qBAAI,aAAOjS,UAAP,CAAkB3C,QAAlB,CAAJ,EAAiC;AAC7BA,8BAAS4C,IAAT,CAAc/C,IAAd,EAAoBA,KAAKW,UAAzB;AACH;AACJ,cA5BD;AA6BH;;AAED;;;;;;0CAGiBqC,O,EAAS7C,Q,EAAU;AAChC,iBAAIH,OAAO,IAAX;;AAEAA,kBAAKD,OAAL,GAAe,aAAOK,SAAP,CAAiBJ,KAAKD,OAAtB,EAA+BiD,OAA/B,CAAf;;AAEAhD,kBAAKK,SAAL,GAAiB,MAAjB;AACAL,kBAAKgc,UAAL,GAAkBra,GAAGsa,QAAH,CAAY,UAAS1Z,CAAT,EAAY;AAAE,wBAAOA,EAAEyU,MAAT;AAAkB,cAA5C,EAA8C3V,IAAhE;;AAEA,iBAAIf,aAAsBN,KAAKM,UAA/B;AACAA,wBAAWC,UAAX,GAA0BP,KAAKO,UAA/B;;AAEA,iBAAIC,KAAK,iBAAgBF,UAAhB,EAA4BN,KAAKK,SAAjC,EAA4C,IAA5C,CAAT;AACAG,gBAAGC,aAAH,CAAiBT,KAAKK,SAAtB,EAAiC,UAASK,IAAT,EAAe;AAC5CV,sBAAKW,UAAL,GAAkBD,IAAlB;AACAV,sBAAKkc,YAAL,GAAsB1b,GAAGyX,UAAzB;;AAEA,qBAAI9W,QAAUnB,KAAKmB,KAAL,GAAanB,KAAKoB,MAAL,CAAYC,IAAzB,GAAgCrB,KAAKoB,MAAL,CAAYE,KAA1D;AAAA,qBACIC,SAAUvB,KAAKuB,MAAL,GAAcvB,KAAKoB,MAAL,CAAYI,GAA1B,GAAgCxB,KAAKoB,MAAL,CAAYK,MAD1D;;AAGAzB,sBAAK0B,CAAL,GAAU1B,KAAKkc,YAAN,GAAsBva,GAAG6H,IAAH,CAAQ5H,KAAR,GAAgBK,KAAhB,CAAsB,CAAC,CAAD,EAAId,KAAJ,CAAtB,CAAtB,GAA0DQ,GAAGC,KAAH,CAASM,MAAT,GAAkBD,KAAlB,CAAwB,CAAC,CAAD,EAAId,KAAJ,CAAxB,CAAnE,EACAnB,KAAK+B,CAAL,GAASJ,GAAGC,KAAH,CAASM,MAAT,GAAkBD,KAAlB,CAAwB,CAACV,MAAD,EAAS,CAAT,CAAxB,CADT;;AAGAvB,sBAAK0T,YAAL,CAAkB1T,KAAKW,UAAvB;;AAEAX,sBAAKoc,OAAL,GAAeza,GAAG2I,GAAH,CAAOyR,IAAP,GACEra,CADF,CACI,UAASa,CAAT,EAAY;AAAE,4BAAOvC,KAAK0B,CAAL,CAAOa,EAAEyU,MAAT,CAAP;AAA0B,kBAD5C,EAEEjV,CAFF,CAEI,UAASQ,CAAT,EAAY;AAAE,4BAAOvC,KAAK+B,CAAL,CAAOQ,EAAE6T,MAAT,CAAP;AAA0B,kBAF5C,EAGErB,WAHF,CAGc/U,KAAKD,OAAL,CAAagV,WAH3B,CAAf;;AAKA/U,sBAAKqc,OAAL,GAAe1a,GAAG2I,GAAH,CAAOwR,IAAP,GACEpa,CADF,CACI,UAASa,CAAT,EAAY;AAAE,4BAAOvC,KAAK0B,CAAL,CAAOa,EAAEyU,MAAT,CAAP;AAA0B,kBAD5C,EAEE/S,EAFF,CAEK,UAAS1B,CAAT,EAAY;AAAE,4BAAOvC,KAAK+B,CAAL,CAAOQ,EAAE6T,MAAT,CAAP;AAA0B,kBAF7C,EAGEpS,EAHF,CAGKzC,MAHL,EAIEwT,WAJF,CAIc/U,KAAKD,OAAL,CAAagV,WAJ3B,CAAf;;AAMA,qBAAI,aAAOjS,UAAP,CAAkB3C,QAAlB,CAAJ,EAAiC;AAC7BA,8BAAS4C,IAAT,CAAc/C,IAAd,EAAoBA,KAAKW,UAAzB;AACH;AACJ,cA1BD;AA2BH;;;yCAEe;AACZ,iBAAIX,OAAO,IAAX;;AAEA,iBAAImB,QAAUnB,KAAKmB,KAAL,GAAanB,KAAKoB,MAAL,CAAYC,IAAzB,GAAgCrB,KAAKoB,MAAL,CAAYE,KAA1D;AAAA,iBACIC,SAAUvB,KAAKuB,MAAL,GAAcvB,KAAKoB,MAAL,CAAYI,GAA1B,GAAgCxB,KAAKoB,MAAL,CAAYK,MAD1D;;AAGA;AACA,iBAAI6a,WAAW,CAACtc,KAAK0B,CAAL,CAAOW,MAAP,GAAgB,CAAhB,IAAqBrC,KAAK0B,CAAL,CAAOW,MAAP,GAAgB,CAAhB,CAAtB,IAA4C,IAA3D;AAAA,iBACIka,WAAW,CAACvc,KAAK+B,CAAL,CAAOM,MAAP,GAAgB,CAAhB,IAAqBrC,KAAK+B,CAAL,CAAOM,MAAP,GAAgB,CAAhB,CAAtB,IAA4C,IAD3D;;AAGArC,kBAAKiD,IAAL,CACKO,MADL,CACY,MADZ,EAEKC,IAFL,CAEU,OAFV,EAEmB,+BAFnB;AAGI;AACA;AAJJ,cAKKA,IALL,CAKU,OALV,EAKmBtC,QAAQnB,KAAK0B,CAAL,CAAO4a,QAAP,CAL3B,EAMK7Y,IANL,CAMU,QANV,EAMoBlC,MANpB,EAOKkC,IAPL,CAOU,GAPV,EAOezD,KAAK0B,CAAL,CAAO4a,QAAP,IAAmB,CAPlC,EAQK3Y,KARL,CAQW,MARX,EAQmB,MARnB,EASKA,KATL,CASW,gBATX,EAS6B,KAT7B;AAUH;;;2CAEiB;AACd,iBAAI3D,OAAO,IAAX;;AAEA;AACAA,kBAAKwc,SAAL,GAAiBxc,KAAKiD,IAAL,CACRO,MADQ,CACD,GADC,EAERC,IAFQ,CAEH,OAFG,EAEM,kCAFN,EAGRD,MAHQ,CAGD,MAHC,EAIRG,KAJQ,CAIF,QAJE,EAIQ,MAJR,EAKRA,KALQ,CAKF,gBALE,EAKgB,CALhB,CAAjB;;AAOA3D,kBAAKyc,WAAL,GAAmBzc,KAAKwc,SAAL,CACVhZ,MADU,CACH,QADG,EAEVC,IAFU,CAEL,OAFK,EAEI,kCAFJ,EAGVA,IAHU,CAGL,GAHK,EAGAzD,KAAKD,OAAL,CAAa2b,KAAb,CAAmBjH,MAHnB,CAAnB;AAIH;;AAED;;;;;;;sCAIa/T,I,EAAM;AACf,iBAAIV,OAAO,IAAX;;AAEA,iBAAI0c,cAAc/a,GAAG0I,KAAH,CAAS3J,KAAK4B,GAAL,CAAS,UAASkL,KAAT,EAAgB;AAChD,wBAAOA,MAAMhG,KAAN,CAAYlF,GAAZ,CAAgB,UAASC,CAAT,EAAY;AAC/B,4BAAOA,EAAEyU,MAAT;AACH,kBAFM,CAAP;AAGH,cAJ0B,CAAT,CAAlB;;AAMA,iBAAI2F,cAAchb,GAAG0I,KAAH,CAAS3J,KAAK4B,GAAL,CAAS,UAASkL,KAAT,EAAgB;AAChD,wBAAOA,MAAMhG,KAAN,CAAYlF,GAAZ,CAAgB,UAASC,CAAT,EAAY;AAC/B,4BAAOA,EAAE6T,MAAT;AACH,kBAFM,CAAP;AAGH,cAJ0B,CAAT,CAAlB;;AAMApW,kBAAK0B,CAAL,CAAOW,MAAP,CAAcV,GAAGib,MAAH,CAAUF,WAAV,CAAd;;AAEA1c,kBAAK+B,CAAL,CAAOM,MAAP,CAAcV,GAAGib,MAAH,CAAUD,WAAV,CAAd;;AAEA;AACA,iBAAI3c,KAAK+B,CAAL,CAAOM,MAAP,GAAgB,CAAhB,IAAqB,CAArB,IAA0BrC,KAAK+B,CAAL,CAAOM,MAAP,GAAgB,CAAhB,IAAqB,CAAnD,EAAsD;AAClDrC,sBAAK+B,CAAL,CAAOM,MAAP,CAAc,CAAC,CAAD,EAAIrC,KAAK+B,CAAL,CAAOM,MAAP,GAAgB,CAAhB,CAAJ,CAAd;AACH,cAFD,MAEO,IAAIrC,KAAK+B,CAAL,CAAOM,MAAP,GAAgB,CAAhB,IAAqB,CAArB,IAA0BrC,KAAK+B,CAAL,CAAOM,MAAP,GAAgB,CAAhB,IAAqB,CAAnD,EAAsD;AACzDrC,sBAAK+B,CAAL,CAAOM,MAAP,CAAc,CAACrC,KAAK+B,CAAL,CAAOM,MAAP,GAAgB,CAAhB,CAAD,EAAqB,CAArB,CAAd;AACH;;AAED;AACA,iBAAI,CAACrC,KAAKkc,YAAV,EAAwB;AACpB,qBAAIW,UAAU7c,KAAK0B,CAAL,CAAOW,MAAP,EAAd;AAAA,qBAA+Bia,WAAW,CAACtc,KAAK0B,CAAL,CAAOW,MAAP,GAAgB,CAAhB,IAAqBrC,KAAK0B,CAAL,CAAOW,MAAP,GAAgB,CAAhB,CAAtB,IAA4C,IAAtF;AACA,qBAAIya,UAAU9c,KAAK+B,CAAL,CAAOM,MAAP,EAAd;AAAA,qBAA+Bka,WAAW,CAACvc,KAAK+B,CAAL,CAAOM,MAAP,GAAgB,CAAhB,IAAqBrC,KAAK+B,CAAL,CAAOM,MAAP,GAAgB,CAAhB,CAAtB,IAA4C,IAAtF;;AAEArC,sBAAK0B,CAAL,CAAOW,MAAP,CAAc,CAACwa,QAAQ,CAAR,IAAaP,QAAd,EAAwBO,QAAQ,CAAR,IAAaP,QAArC,CAAd;AACAtc,sBAAK+B,CAAL,CAAOM,MAAP,CAAc,CAACya,QAAQ,CAAR,CAAD,EAAaA,QAAQ,CAAR,IAAaP,QAA1B,CAAd;AACH;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACH;;AAED;;;;;;gCAGO7b,I,EAAM;AACT,iBAAIV,OAAO,IAAX;;AAEA,iBAAImB,QAAUnB,KAAKmB,KAAL,GAAanB,KAAKoB,MAAL,CAAYC,IAAzB,GAAgCrB,KAAKoB,MAAL,CAAYE,KAA1D;AAAA,iBACIC,SAAUvB,KAAKuB,MAAL,GAAcvB,KAAKoB,MAAL,CAAYI,GAA1B,GAAgCxB,KAAKoB,MAAL,CAAYK,MAD1D;;AAGAzB,kBAAK0T,YAAL,CAAkBhT,IAAlB;;AAEAV,kBAAKiD,IAAL,CAAUC,SAAV,CAAoB,kCAApB,EAAwDxC,IAAxD,CAA6D,EAA7D,EAAiEyC,IAAjE,GAAwEC,MAAxE;AACApD,kBAAKiD,IAAL,CAAUC,SAAV,CAAoB,kCAApB,EAAwDxC,IAAxD,CAA6D,EAA7D,EAAiEyC,IAAjE,GAAwEC,MAAxE;AACApD,kBAAKiD,IAAL,CAAUC,SAAV,CAAoB,mCAApB,EAAyDxC,IAAzD,CAA8D,EAA9D,EAAkEyC,IAAlE,GAAyEC,MAAzE;;AAEA,iBAAIpD,KAAKD,OAAL,CAAa+b,IAAb,CAAkBvV,IAAtB,EAA4B;AACxB,qBAAIwW,gBAAgB/c,KAAKiD,IAAL,CAAUO,MAAV,CAAiB,GAAjB,EACCC,IADD,CACM,OADN,EACe,iCADf,EAECA,IAFD,CAEM,WAFN,EAEmB,YAFnB,CAApB;;AAIAsZ,+BAAc7Z,SAAd,CAAwB,oCAAxB;AACA;AADA,kBAEKxC,IAFL,CAEUA,IAFV,EAGK6C,KAHL,GAIKC,MAJL,CAIY,MAJZ,EAKKiD,MALL,CAKY,UAASlE,CAAT,EAAY;AAChB,4BAAOA,EAAEmD,MAAT;AACH,kBAPL;AAQI;AARJ,kBASKjC,IATL,CASU,OATV,EASmB,mCATnB,EAUKA,IAVL,CAUU,GAVV,EAUe,UAASlB,CAAT,EAAY;AACnB,4BAAOvC,KAAKqc,OAAL,CAAa9Z,EAAEiF,KAAf,CAAP;AACH,kBAZL,EAaK/D,IAbL,CAaU,UAbV,EAasB,UAASlB,CAAT,EAAY;AAC1B,4BAAO,QAAQA,EAAE,UAAF,CAAf;AACH,kBAfL,EAgBKoB,KAhBL,CAgBW,MAhBX,EAgBmB,UAASpB,CAAT,EAAY;AACvB,4BAAOA,EAAEc,KAAT;AACH,kBAlBL,EAmBKM,KAnBL,CAmBW,QAnBX,EAmBqB,MAnBrB,EAoBKA,KApBL,CAoBW,SApBX,EAoBsB,KApBtB;AAqBH;;AAED,iBAAIqZ,gBAAgBhd,KAAKiD,IAAL,CAAUO,MAAV,CAAiB,GAAjB,EACCC,IADD,CACM,OADN,EACe,iCADf,EAECA,IAFD,CAEM,WAFN,EAEmB,YAFnB,CAApB;;AAIAuZ,2BAAc9Z,SAAd,CAAwB,oCAAxB;AACA;AADA,cAEKxC,IAFL,CAEUA,IAFV,EAGK6C,KAHL,GAIKC,MAJL,CAIY,MAJZ,EAKKiD,MALL,CAKY,UAASlE,CAAT,EAAY;AAChB,wBAAOA,EAAEmD,MAAT;AACH,cAPL,EAQKjC,IARL,CAQU,OARV,EAQmB,mCARnB,EASKA,IATL,CASU,GATV,EASe,UAASlB,CAAT,EAAY;AACnB,wBAAOvC,KAAKoc,OAAL,CAAa7Z,EAAEiF,KAAf,CAAP;AACH,cAXL,EAYK/D,IAZL,CAYU,UAZV,EAYsB,UAASlB,CAAT,EAAY;AAC1B,wBAAO,QAAQA,EAAE,UAAF,CAAf;AACH,cAdL,EAeKoB,KAfL,CAeW,QAfX,EAeqB,UAASpB,CAAT,EAAY;AACzB,wBAAOA,EAAEc,KAAT;AACH,cAjBL,EAkBKM,KAlBL,CAkBW,kBAlBX,EAkB+B,YAAW;AAClC,wBAAO3D,KAAKid,YAAL,EAAP;AACH,cApBL,EAqBKtZ,KArBL,CAqBW,cArBX,EAqB2B3D,KAAKD,OAAL,CAAagc,IAAb,CAAkB5a,KArB7C,EAsBKwC,KAtBL,CAsBW,MAtBX,EAsBmB,MAtBnB;;AAwBA,iBAAI3D,KAAKD,OAAL,CAAa2b,KAAb,CAAmBnV,IAAvB,EAA6B;AACzB,qBAAI2W,iBAAiBld,KAAKiD,IAAL,CAAUO,MAAV,CAAiB,GAAjB,EACIC,IADJ,CACS,OADT,EACkB,kCADlB,EAEIA,IAFJ,CAES,WAFT,EAEsB,YAFtB,CAArB;;AAIA/C,sBAAKkO,OAAL,CAAa,UAASrM,CAAT,EAAY;AACrB,yBAAI,CAACA,EAAEmD,MAAP,EAAe;AACfwX,oCAAeha,SAAf,CAAyB,mCAAzB;AACA;AADA,sBAEKxC,IAFL,CAEU6B,EAAEiF,KAFZ,EAGKjE,KAHL,GAIKC,MAJL,CAIY,QAJZ;AAKI;AALJ,sBAMKC,IANL,CAMU,OANV,EAMmB,gCANnB,EAOKA,IAPL,CAOU,GAPV,EAOezD,KAAKD,OAAL,CAAa2b,KAAb,CAAmBjH,MAPlC,EAQKhR,IARL,CAQU,IARV,EAQgB,UAAS0Z,EAAT,EAAa;AACrB,gCAAOnd,KAAK0B,CAAL,CAAOyb,GAAGnG,MAAV,CAAP;AACH,sBAVL,EAWKvT,IAXL,CAWU,IAXV,EAWgB,UAAS0Z,EAAT,EAAa;AACrB,gCAAOnd,KAAK+B,CAAL,CAAOob,GAAG/G,MAAV,CAAP;AACH,sBAbL,EAcK3S,IAdL,CAcU,UAdV,EAcsB,UAAS/C,IAAT,EAAe;AAC7B,gCAAOA,KAAK,UAAL,CAAP;AACH,sBAhBL,EAiBKiD,KAjBL,CAiBW,MAjBX,EAiBmB3D,KAAKD,OAAL,CAAa2b,KAAb,CAAmBC,IAjBtC,EAkBKhY,KAlBL,CAkBW,QAlBX,EAkBqB3D,KAAKD,OAAL,CAAa2b,KAAb,CAAmBE,MAlBxC,EAmBKjY,KAnBL,CAmBW,cAnBX,EAmB2B3D,KAAKD,OAAL,CAAa2b,KAAb,CAAmB,cAAnB,CAnB3B,EAoBK/X,KApBL,CAoBW,SApBX,EAoBsB3D,KAAKD,OAAL,CAAa2b,KAAb,CAAmBG,OApBzC;AAqBH,kBAvBD;AAwBH;;AAED;AACA,iBAAIuB,WAAWpd,KAAKiD,IAAL,CAAUoa,IAAV,GAAiBC,OAAjB,EAAf;AACAtd,kBAAKud,WAAL,GAAmBH,SAASjc,KAAT,GAAiB,IAAInB,KAAKD,OAAL,CAAa2b,KAAb,CAAmBjH,MAA3D;AACAzU,kBAAKwd,YAAL,GAAoBJ,SAAS7b,MAA7B;AACA;;AAEAvB,kBAAKoE,iBAAL;AACH;;AAED;;;;;;wCAGe1D,I,EAAM;AACjB,iBAAIV,OAAO,IAAX;;AAEA,iBAAIA,KAAKD,OAAL,CAAamK,QAAb,CAAsB3D,IAA1B,EAAgC;AAC5B,qBAAIpF,QAAUnB,KAAKmB,KAAL,GAAanB,KAAKoB,MAAL,CAAYC,IAAzB,GAAgCrB,KAAKoB,MAAL,CAAYE,KAA1D;AAAA,qBACIC,SAAUvB,KAAKuB,MAAL,GAAcvB,KAAKoB,MAAL,CAAYI,GAA1B,GAAgCxB,KAAKoB,MAAL,CAAYK,MAD1D;;AAGA;AACAzB,sBAAKyd,aAAL,GAAqBtc,KAArB,EACAnB,KAAK0d,cAAL,GAAsB1d,KAAKD,OAAL,CAAamK,QAAb,CAAsB3I,MAD5C;AAEA,qBAAI,aAAOsG,OAAP,CAAe7H,KAAK2d,cAApB,CAAJ,EAAyC;AACrC3d,0BAAK2d,cAAL,GAAsB;AAClB,gCAAO3d,KAAKwd,YAAL,GAAoB,GADT;AAElB,iCAAQxd,KAAKoB,MAAL,CAAYC;AAFF,sBAAtB;AAIH;;AAEDrB,sBAAK2T,SAAL,GAAkB3T,KAAK4d,aAAN,GAAuBjc,GAAG6H,IAAH,CAAQ5H,KAAR,GAAgBK,KAAhB,CAAsB,CAAC,CAAD,EAAIjC,KAAKyd,aAAT,CAAtB,CAAvB,GAAwE9b,GAAGC,KAAH,CAASM,MAAT,GAAkBD,KAAlB,CAAwB,CAAC,CAAD,EAAIjC,KAAKyd,aAAT,CAAxB,CAAzF,EACAzd,KAAK4T,SAAL,GAAiBjS,GAAGC,KAAH,CAASM,MAAT,GAAkBD,KAAlB,CAAwB,CAACjC,KAAK0d,cAAN,EAAsB,CAAtB,CAAxB,CADjB;;AAGA1d,sBAAK2T,SAAL,CAAetR,MAAf,CAAsBrC,KAAK0B,CAAL,CAAOW,MAAP,EAAtB;AACArC,sBAAK4T,SAAL,CAAevR,MAAf,CAAsBrC,KAAK+B,CAAL,CAAOM,MAAP,EAAtB;;AAEArC,sBAAK6T,aAAL,GAAqBlS,GAAG2I,GAAH,CAAO7F,IAAP,GACJ7C,KADI,CACE5B,KAAK2T,SADP,EAEJxC,MAFI,CAEG,QAFH,CAArB;;AAIAnR,sBAAK6d,KAAL,GAAalc,GAAG2I,GAAH,CAAOuT,KAAP,GACInc,CADJ,CACM1B,KAAK2T,SADX,EAEI3M,EAFJ,CAEO,OAFP,EAEgB,YAAW;AACpB;AACAhH,0BAAK0B,CAAL,CAAOW,MAAP,CAAcrC,KAAK6d,KAAL,CAAWC,KAAX,KAAqB9d,KAAK2T,SAAL,CAAetR,MAAf,EAArB,GAA8CrC,KAAK6d,KAAL,CAAWjB,MAAX,EAA5D;AACA5c,0BAAKyE,IAAL,CAAUC,MAAV,CAAiB1E,KAAK0B,CAAtB,EAAyB1B,KAAK+B,CAA9B,EAAiC,GAAjC;;AAEA;AACA,yBAAI/B,KAAKD,OAAL,CAAa+b,IAAb,CAAkBvV,IAAtB,EAA4B;AACxBvG,8BAAKiD,IAAL,CAAUC,SAAV,CAAoB,wCAApB,EACKO,IADL,CACU,GADV,EACgB,UAASlB,CAAT,EAAY;AAAE,oCAAOvC,KAAKqc,OAAL,CAAa9Z,EAAEiF,KAAf,CAAP;AAA8B,0BAD5D;AAEH;AACDxH,0BAAKiD,IAAL,CAAUC,SAAV,CAAoB,wCAApB,EACSO,IADT,CACc,GADd,EACoB,UAASlB,CAAT,EAAY;AAAE,gCAAOvC,KAAKoc,OAAL,CAAa7Z,EAAEiF,KAAf,CAAP;AAA8B,sBADhE;;AAGA,yBAAIxH,KAAKD,OAAL,CAAa2b,KAAb,CAAmBnV,IAAvB,EAA6B;AACzBvG,8BAAKiD,IAAL,CAAUC,SAAV,CAAoB,uCAApB,EACSO,IADT,CACc,IADd,EACoB,UAASlB,CAAT,EAAY;AAAE,oCAAOvC,KAAK0B,CAAL,CAAOa,EAAEyU,MAAT,CAAP;AAA0B,0BAD5D,EAESvT,IAFT,CAEc,IAFd,EAEoB,UAASlB,CAAT,EAAY;AAAE,oCAAOvC,KAAK+B,CAAL,CAAOQ,EAAE6T,MAAT,CAAP;AAA0B,0BAF5D;AAGH;AACJ,kBApBJ,CAAb;;AAsBApW,sBAAK+d,eAAL,GAAuBpc,GAAG2I,GAAH,CAAOwR,IAAP,GACNpa,CADM,CACJ,UAASa,CAAT,EAAY;AAAE,4BAAOvC,KAAK2T,SAAL,CAAepR,EAAEyU,MAAjB,CAAP;AAAiC,kBAD3C,EAEN/S,EAFM,CAEH,UAAS1B,CAAT,EAAY;AAAE,4BAAOvC,KAAK4T,SAAL,CAAerR,EAAE6T,MAAjB,CAAP;AAAiC,kBAF5C,EAGNpS,EAHM,CAGHhE,KAAK0d,cAHF,EAIN3I,WAJM,CAIM/U,KAAKD,OAAL,CAAagV,WAJnB,CAAvB;;AAMA/U,sBAAKsK,GAAL,CAAS7G,IAAT,CAAc,QAAd,EAAwBzD,KAAKuB,MAAL,GAAcvB,KAAK0d,cAA3C;;AAEA1d,sBAAKsK,GAAL,CAASpH,SAAT,CAAmB,qBAAnB,EAA0CE,MAA1C;AACApD,sBAAKsK,GAAL,CAASpH,SAAT,CAAmB,uCAAnB,EAA4DE,MAA5D;;AAEA,qBAAI4a,WAAWhe,KAAKsK,GAAL,CAAS9G,MAAT,CAAgB,GAAhB,EACEC,IADF,CACO,OADP,EACgB,oBADhB,EAEEA,IAFF,CAEO,WAFP,EAEoB,eAAezD,KAAK2d,cAAL,CAAoBtc,IAAnC,GAA0C,GAA1C,GAAgDrB,KAAK2d,cAAL,CAAoBnc,GAApE,GAA0E,GAF9F,CAAf;;AAIA,qBAAIyc,wBAAwBD,SAASxa,MAAT,CAAgB,GAAhB,EACHC,IADG,CACE,OADF,EACW,+CADX,EAEHA,IAFG,CAEE,WAFF,EAEe,YAFf,CAA5B;;AAIA/C,sBAAKkO,OAAL,CAAa,UAASrM,CAAT,EAAWqB,CAAX,EAAc;AACvB,yBAAI,CAACrB,EAAEmD,MAAP,EAAe;;AAEfuY,2CAAsBza,MAAtB,CAA6B,MAA7B;AACI;AADJ,sBAEKC,IAFL,CAEU,OAFV,EAEmB,kBAFnB,EAGKA,IAHL,CAGU,GAHV,EAGe,YAAW;AAAE,gCAAOzD,KAAK+d,eAAL,CAAqBxb,EAAEiF,KAAvB,CAAP;AAAsC,sBAHlE,EAIK/D,IAJL,CAIU,UAJV,EAIsB,QAAMlB,EAAE,UAAF,CAJ5B,EAKKoB,KALL,CAKW,MALX,EAKmBpB,EAAEc,KALrB,EAMKM,KANL,CAMW,QANX,EAMqB,MANrB,EAOKA,KAPL,CAOW,SAPX,EAOsB,KAPtB;AAQH,kBAXD;;AAcAqa,0BAASxa,MAAT,CAAgB,GAAhB,EACKC,IADL,CACU,OADV,EACmB,kBADnB,EAEKA,IAFL,CAEU,WAFV,EAEuB,iBAAiBzD,KAAK0d,cAAtB,GAAuC,GAF9D,EAGK3a,IAHL,CAGU/C,KAAK6T,aAHf;;AAKA;AACAmK,0BAASxa,MAAT,CAAgB,GAAhB,EACKC,IADL,CACU,OADV,EACmB,mBADnB,EAEKV,IAFL,CAEU/C,KAAK6d,KAFf,EAGK3a,SAHL,CAGe,MAHf,EAIKO,IAJL,CAIU,QAJV,EAIoBzD,KAAK0d,cAJzB;AAMH;AACJ;;AAED;;;;;;2CAGkB;AACd,iBAAI1d,OAAO,IAAX;;AAEA,oBAAOA,KAAKiD,IAAL,CACEC,SADF,CACY,uCADZ,CAAP;AAEH;;AAED;;;;;;2CAGkB;AACd,iBAAIlD,OAAO,IAAX;;AAEA,oBAAO2B,GACEuB,SADF,CACY,wCADZ,CAAP;AAEH;;AAED;;;;;;6CAGoB;AAChB,iBAAIlD,OAAO,IAAX;AAAA,iBACI4F,WAAkB5F,KAAKke,eAAL,EADtB;AAAA,iBAEI1Y,cAAkBxF,KAAKyF,KAAL,CAAWC,MAFjC;AAAA,iBAGIC,eAAkB3F,KAAKyF,KAAL,CAAW1F,OAHjC;AAAA,iBAII+F,sBAAsBH,aAAaI,WAAb,CAAyB5F,QAJnD;AAAA,iBAKI6F,qBAAsBL,aAAaM,UAAb,CAAwB9F,QALlD;AAAA,iBAMIge,sBAAuBxY,aAAa8C,WAAb,CAAyBtI,QANpD;AAAA,iBAOI+F,kBAAmBlG,KAAKmG,KAAL,CAAWhG,QAPlC;;AASA,iBAAIiG,UAAU,iBAAYpG,KAAKD,OAAL,CAAaqG,OAAzB,CAAd;;AAEA;AACApG,kBAAKqG,YAAL,GAAoB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,6BAAY,kBAAS9D,CAAT,EAAY;AACpB,yBAAI,CAACiD,WAAL,EAAkB;;AAElB;AACA;AACA;;AAEAxF,0BAAKwc,SAAL,CAAe7Y,KAAf,CAAqB,gBAArB,EAAuC,CAAvC;;AAEA;AACA3D,0BAAKoe,eAAL,GAAuB,CAAvB,EAA0BxP,OAA1B,CAAkC,UAASyP,MAAT,EAAiB;AAC/C1c,4BAAGiF,MAAH,CAAUyX,MAAV,EACK1a,KADL,CACW,MADX,EACmB3D,KAAKD,OAAL,CAAa2b,KAAb,CAAmBC,IADtC,EAEKhY,KAFL,CAEW,cAFX,EAE2B3D,KAAKD,OAAL,CAAa2b,KAAb,CAAmBG,OAF9C;AAGH,sBAJD;;AAMAzV,6BAAQW,IAAR,CAAaxE,CAAb,EAAgBvC,IAAhB,EAAsB,UAAtB;AACH,kBAhCe;AAiChB,8BAAa,mBAASuC,CAAT,EAAY;AACrB,yBAAI,CAACiD,WAAL,EAAkB;;AAGlB,yBAAI8Y,QAAU3c,GAAG2c,KAAH,CAAS,IAAT,CAAd;AAAA,yBACIC,SAAUD,MAAM,CAAN,CADd;AAAA,yBAEIE,SAAUF,MAAM,CAAN,CAFd;AAAA,yBAIIG,YAAcze,KAAK0B,CAAL,CAAOgd,MAAP,CAAcH,MAAd,CAJlB;;AAMA,yBAAII,cAAc,EAAlB;AAAA,yBACIC,mBAAmB,EADvB;;AAGA5e,0BAAKW,UAAL,CAAgBiO,OAAhB,CAAwB,UAASrM,CAAT,EAAYqB,CAAZ,EAAe;AACnC+a,qCAAY/a,CAAZ,IAAiBrB,EAAEiF,KAAnB;AACAmX,qCAAY/a,CAAZ,EAAewX,IAAf,CAAoB,UAASnN,CAAT,EAAYC,CAAZ,EAAe;AAAE,oCAAOD,EAAE+I,MAAF,GAAW9I,EAAE8I,MAApB;AAA6B,0BAAlE;AACA,6BAAI6H,MAAM7e,KAAK4d,aAAL,GAAqB5d,KAAKgc,UAAL,CAAgB2C,YAAY/a,CAAZ,CAAhB,EAAgC,IAAIsW,IAAJ,CAASuE,SAAT,CAAhC,CAArB,GAA4Eze,KAAKgc,UAAL,CAAgB2C,YAAY/a,CAAZ,CAAhB,EAAgC6a,SAAhC,CAAtF;;AAEA,6BAAIK,EAAJ,EAAQ5Z,EAAR;;AAEA4Z,8BAAMD,QAAQ,CAAT,GAAcF,YAAY/a,CAAZ,EAAeib,GAAf,CAAd,GAAoCF,YAAY/a,CAAZ,EAAeib,MAAM,CAArB,CAAzC;AACA3Z,8BAAK,CAAC,aAAO2C,OAAP,CAAe8W,YAAY/a,CAAZ,EAAeib,GAAf,CAAf,CAAD,GAAuCF,YAAY/a,CAAZ,EAAeib,GAAf,CAAvC,GAA6DF,YAAY/a,CAAZ,EAAeib,MAAI,CAAnB,CAAlE;;AAEA;AACA;AACAC,8BAAK9e,KAAK+e,aAAL,CAAmBD,GAAG9H,MAAtB,MAAkC,CAAC,CAAnC,GAAuC9R,EAAvC,GAA4C4Z,EAAjD;AACA5Z,8BAAKlF,KAAK+e,aAAL,CAAmB7Z,GAAG8R,MAAtB,MAAkC,CAAlC,GAAsC8H,EAAtC,GAA2C5Z,EAAhD;;AAEA;AACA0Z,0CAAiBhb,CAAjB,IAAuB6a,YAAYK,GAAG9H,MAAf,GAAwB9R,GAAG8R,MAAH,GAAYyH,SAArC,GAAkDvZ,EAAlD,GAAuD4Z,EAA7E;AACH,sBAjBD;;AAmBA,yBAAI,aAAOhc,UAAP,CAAkBqb,mBAAlB,CAAJ,EAA4C;AACxCA,6CAAoBpb,IAApB,CAAyB,IAAzB,EAA+B6b,gBAA/B;AACH;;AAED,yBAAIld,IAAI1B,KAAK0B,CAAL,CAAO,CAAC,aAAOmG,OAAP,CAAe+W,iBAAiB,CAAjB,EAAoB5H,MAAnC,CAAD,GAA8C4H,iBAAiB,CAAjB,EAAoB5H,MAAlE,GAA2E4H,iBAAiB,CAAjB,EAAoB5H,MAAtG,CAAR;AACA,yBAAIjV,IAAI/B,KAAK+B,CAAL,CAAO,CAAC,aAAO8F,OAAP,CAAe+W,iBAAiB,CAAjB,EAAoBxI,MAAnC,CAAD,GAA8CwI,iBAAiB,CAAjB,EAAoBxI,MAAlE,GAA2EwI,iBAAiB,CAAjB,EAAoBxI,MAAtG,CAAR;;AAEA;;AAEA;AACApW,0BAAKoe,eAAL,GAAuB,CAAvB,EAA0BxP,OAA1B,CAAkC,UAASyP,MAAT,EAAiB;AAC/C1c,4BAAGiF,MAAH,CAAUyX,MAAV,EACK1a,KADL,CACW,MADX,EACmB3D,KAAKD,OAAL,CAAa2b,KAAb,CAAmBC,IADtC,EAEKhY,KAFL,CAEW,cAFX,EAE2B3D,KAAKD,OAAL,CAAa2b,KAAb,CAAmBG,OAF9C;AAGH,sBAJD;;AAMA;AACA,0BAAK,IAAIjY,IAAE,CAAX,EAAcA,IAAIgb,iBAAiB5d,MAAnC,EAA2C4C,GAA3C,EAAgD;AAC5C,6BAAIya,SAAS1c,GAAGiF,MAAH,CAAU,sBAAsBgY,iBAAiBhb,CAAjB,EAAoB,UAApB,CAAtB,GAAwD,IAAlE,CAAb;AACAya,gCACC1a,KADD,CACO,MADP,EACe3D,KAAK8G,eAAL,CAAqB9G,KAAKD,OAAL,CAAa2b,KAAb,CAAmBC,IAAxC,CADf,EAEChY,KAFD,CAEO,cAFP,EAEuB,CAFvB;AAGH;;AAED;AACA;AACA;AACA3D,0BAAKwc,SAAL,CACK/Y,IADL,CACU,IADV,EACgB/B,CADhB,EACmB+B,IADnB,CACwB,IADxB,EAC8BzD,KAAK+B,CAAL,CAAO/B,KAAK+B,CAAL,CAAOM,MAAP,GAAgB,CAAhB,CAAP,CAD9B,EAEKoB,IAFL,CAEU,IAFV,EAEgB/B,CAFhB,EAEmB+B,IAFnB,CAEwB,IAFxB,EAE8BzD,KAAK+B,CAAL,CAAO/B,KAAK+B,CAAL,CAAOM,MAAP,GAAgB,CAAhB,CAAP,CAF9B,EAGKsB,KAHL,CAGW,gBAHX,EAG6B,CAH7B;AAIA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEAyC,6BAAQW,IAAR,CAAa6X,gBAAb,EAA+B5e,IAA/B,EAAqC,WAArC;AACH;AA5Ge,cAApB;;AA+GA4F,sBAASoB,EAAT,CAAYhH,KAAKqG,YAAjB;AACH;;;wCAEc;AACX,iBAAIrG,OAAO,IAAX;;AAEA,iBAAIsO,UAAJ;;AAEA,qBAAOtO,KAAKD,OAAL,CAAagc,IAAb,CAAkBpY,KAAzB;AACI,sBAAK,KAAL;AACI2K,yBAAI,MAAJ;AACA;AACJ,sBAAK,OAAL;AACIA,yBAAI,MAAJ;AACA;AACJ,sBAAK,MAAL;AACIA,yBAAI,MAAJ;AACA;AACJ;AACIA,yBAAI,MAAJ;AACA;AAZR;;AAeA,oBAAOA,CAAP;AACH;;;uCAEa9G,K,EAAO;AACjB,iBAAIxH,OAAO,IAAX;;AAEA,iBAAIgf,QAAQhf,KAAKmB,KAAL,GAAanB,KAAKoB,MAAL,CAAYC,IAAzB,GAAgCrB,KAAKoB,MAAL,CAAYE,KAAxD;AAAA,iBACI2d,aAAajf,KAAK0B,CAAL,CAAO8F,KAAP,CADjB;;AAGA,oBAAOyX,aAAa,CAAb,GAAiB,CAAC,CAAlB,GAAuBA,aAAaD,KAAd,GAAuB,CAAvB,GAA2B,CAAxD;AACH;;AAED;;AAEA;;;AAGA;;;;;;;;4BAKG/X,S,EAAW9G,Q,EAAU;AACpB,sHAAS8G,SAAT,EAAoB9G,QAApB;;AAEA,iBAAIH,OAAO,IAAX;AACA,iBAAI4F,WAAc5F,KAAKke,eAAL,EAAlB;;AAEA;AACA,iBAAI7X,eAAe;AACf,oCAAmB,wBAAS9D,CAAT,EAAY;;AAE3B,yBAAI+b,QAAU3c,GAAG2c,KAAH,CAAS,IAAT,CAAd;AAAA,yBACIC,SAAUD,MAAM,CAAN,CADd;AAAA,yBAEIE,SAAUF,MAAM,CAAN,CAFd;AAAA,yBAIIG,YAAcze,KAAK0B,CAAL,CAAOgd,MAAP,CAAcH,MAAd,CAJlB;;AAMA,yBAAII,cAAc,EAAlB;AAAA,yBACIC,mBAAmB,EADvB;;AAGA5e,0BAAKW,UAAL,CAAgBiO,OAAhB,CAAwB,UAASrM,CAAT,EAAYqB,CAAZ,EAAe;AACnC+a,qCAAY/a,CAAZ,IAAiBrB,EAAEiF,KAAnB;AACAmX,qCAAY/a,CAAZ,EAAewX,IAAf,CAAoB,UAASnN,CAAT,EAAYC,CAAZ,EAAe;AAAE,oCAAOD,EAAE+I,MAAF,GAAW9I,EAAE8I,MAApB;AAA6B,0BAAlE;AACA,6BAAI6H,MAAM7e,KAAK4d,aAAL,GAAqB5d,KAAKgc,UAAL,CAAgB2C,YAAY/a,CAAZ,CAAhB,EAAgC,IAAIsW,IAAJ,CAASuE,SAAT,CAAhC,CAArB,GAA4Eze,KAAKgc,UAAL,CAAgB2C,YAAY/a,CAAZ,CAAhB,EAAgC6a,SAAhC,CAAtF;;AAEA,6BAAIK,EAAJ,EAAQ5Z,EAAR;;AAEA4Z,8BAAMD,QAAQ,CAAT,GAAcF,YAAY/a,CAAZ,EAAeib,GAAf,CAAd,GAAoCF,YAAY/a,CAAZ,EAAeib,MAAM,CAArB,CAAzC;AACA3Z,8BAAKyZ,YAAY/a,CAAZ,EAAeib,GAAf,CAAL;;AAEA;AACAD,0CAAiBhb,CAAjB,IAAuB6a,YAAYK,GAAG9H,MAAf,GAAwB9R,GAAG8R,MAAH,GAAYyH,SAArC,GAAkDvZ,EAAlD,GAAuD4Z,EAA7E;AACH,sBAZD;;AAcA,yBAAI,aAAOhc,UAAP,CAAkB3C,QAAlB,CAAJ,EAAiC;AAC7BA,kCAAS4C,IAAT,CAAc,IAAd,EAAoB6b,gBAApB;AACH;AACJ;AA7Bc,cAAnB;;AAgCA,iBAAI1X,YAAYD,YAAY,QAA5B;;AAEArB,sBAASoB,EAAT,CAAYE,SAAZ,EAAuBb,aAAaa,SAAb,CAAvB;AACH;;AAED;;;;;;gCAGO;AACH;;AAEA,iBAAIlH,OAAO,IAAX;;AAEAA,kBAAKmH,YAAL,CAAkBnH,KAAKC,MAAvB,EAA+B,UAASS,IAAT,EAAe;AAC1C,qBAAI+D,OAAU,gBAASzE,KAAKD,OAAL,CAAa0E,IAAtB,EAA4BzE,IAA5B,EAAkCA,KAAKmB,KAAL,GAAanB,KAAKoB,MAAL,CAAYC,IAAzB,GAAgCrB,KAAKoB,MAAL,CAAYE,KAA9E,EAAqFtB,KAAKuB,MAAL,GAAcvB,KAAKoB,MAAL,CAAYI,GAA1B,GAAgCxB,KAAKoB,MAAL,CAAYK,MAAjI,CAAd;AACA,qBAAI2F,QAAU,gBAAUpH,KAAKD,OAAL,CAAaqH,KAAvB,EAA8BpH,IAA9B,CAAd;AACA,qBAAIqH,SAAU,gBAAWrH,KAAKD,OAAL,CAAasH,MAAxB,EAAgCrH,IAAhC,CAAd;AACA,qBAAIsG,QAAS,iBAAUtG,KAAKD,OAAL,CAAauG,KAAvB,EAA8BtG,IAA9B,EAAoCU,IAApC,CAAb;;AAEAV,sBAAKyE,IAAL,GAAYA,IAAZ;AACAzE,sBAAKoH,KAAL,GAAaA,KAAb;AACApH,sBAAKqH,MAAL,GAAcA,MAAd;AACArH,sBAAKsG,KAAL,GAAaA,KAAb;;AAEA;AACAtG,sBAAKoH,KAAL,CAAWL,IAAX;;AAEA;AACA/G,sBAAKyE,IAAL,CAAUsC,IAAV;;AAEA/G,sBAAK0E,MAAL,CAAYhE,IAAZ;AACAV,sBAAK8T,cAAL,CAAoBpT,IAApB;AACAV,sBAAKkf,aAAL;AACAlf,sBAAKmf,eAAL;AACAnf,sBAAKoE,iBAAL;;AAEA;AACApE,sBAAKqH,MAAL,CAAYN,IAAZ;AACA/G,sBAAKqH,MAAL,CAAY+X,6BAAZ,CAA0Cpf,IAA1C;;AAEA;AACAA,sBAAKsG,KAAL,CAAWS,IAAX;AACH,cA7BD;AA8BH;;AAED;;;;;;;;mCAKUQ,G,EAAKC,K,EAAO;AAClB,6HAAgBD,GAAhB,EAAqBC,KAArB;;AAEA,iBAAIxH,OAAO,IAAX;;AAEA,0BAAOyH,GAAP,CAAWF,GAAX,EAAgBC,KAAhB,EAAuBxH,KAAKD,OAA5B;;AAEAC,kBAAKmH,YAAL,CAAkBnH,KAAKD,OAAvB;AACH;;AAED;;;;;;;;oCAKW2H,O,EAASC,a,EAAe;AAC/B,iBAAI3H,OAAO,IAAX;;AAEA,iBAAI4H,SAAS,EAAb;;AAEA,iBAAI,CAAC,aAAOC,OAAP,CAAeF,aAAf,CAAL,EAAoC;;AAEhCC,wBAAOlH,IAAP,GAAc;AACVoH,4BAAOJ,OADG;AAEVK,2BAAMJ;AAFI,kBAAd;AAKH,cAPD,MAOO;;AAEHC,wBAAOlH,IAAP,GAAc;AACVoH,4BAAOJ;AADG,kBAAd;AAIH;;AAED1H,kBAAKgI,gBAAL,CAAsBJ,MAAtB,EAA8B,UAASlH,IAAT,EAAe;AACzC;AACAV,sBAAK0E,MAAL,CAAYhE,IAAZ;AACAV,sBAAK8T,cAAL,CAAoBpT,IAApB;;AAEA;AACAV,sBAAKyE,IAAL,CAAUC,MAAV,CAAiB1E,KAAK0B,CAAtB,EAAyB1B,KAAK+B,CAA9B,EAAiC,GAAjC;;AAEA;AACA/B,sBAAKqH,MAAL,CAAY3C,MAAZ,CAAmBhE,IAAnB;AACAV,sBAAKqH,MAAL,CAAY+X,6BAAZ,CAA0Cpf,IAA1C;;AAEA;AACAA,sBAAKsG,KAAL,CAAW5B,MAAX,CAAkBhE,IAAlB;AACH,cAdD;AAeH;AACD;;;;6BA51BmB;AACf,oBAAO,KAAKkd,aAAZ;AACH,U;;AAiDD;;AAEA;;;2BAGiB1V,G,EAAK;AAClB,iBAAIA,GAAJ,EAAS;AACL,sBAAK0V,aAAL,GAAqB1V,GAArB;AACH;AACJ;;;6BAxDgB;AACb,oBAAO,KAAKmX,WAAZ;AACH,U;2BAwDcnX,G,EAAK;AAChB,iBAAIA,GAAJ,EAAS;AACL,sBAAKmX,WAAL,GAAmBnX,GAAnB;AACH;AACJ;;;6BA1De;AACZ,oBAAO,KAAKoX,UAAZ;AACH,U;2BA0DapX,G,EAAK;AACf,iBAAIA,GAAJ,EAAS;AACL,sBAAKoX,UAAL,GAAkBpX,GAAlB;AACH;AACJ;;;6BA5De;AACZ,oBAAO,KAAKqX,UAAZ;AACH,U;2BA4DarX,G,EAAK;AACf,iBAAIA,GAAJ,EAAS;AACL,sBAAKqX,UAAL,GAAkBrX,GAAlB;AACH;AACJ;;;6BA9De;AACZ,oBAAO,KAAKsX,UAAZ;AACH,U;2BA8DatX,G,EAAK;AACf,iBAAIA,GAAJ,EAAS;AACL,sBAAKsX,UAAL,GAAkBtX,GAAlB;AACH;AACJ;;;6BAhEmB;AAChB,oBAAO,KAAKuX,cAAZ;AACH,U;2BAgEiBvX,G,EAAK;AACnB,iBAAIA,GAAJ,EAAS;AACL,sBAAKuX,cAAL,GAAsBvX,GAAtB;AACH;AACJ;;;6BAlEoB;AACjB,oBAAO,KAAKwX,eAAZ;AACH,U;2BAkEkBxX,G,EAAK;AACpB,iBAAIA,GAAJ,EAAS;AACL,sBAAKwX,eAAL,GAAuBxX,GAAvB;AACH;AACJ;;;6BApEoB;AACjB,oBAAO,KAAKyX,eAAZ;AACH,U;2BAoEkBzX,G,EAAK;AACpB,iBAAIA,GAAJ,EAAS;AACL,sBAAKyX,eAAL,GAAuBzX,GAAvB;AACH;AACJ;;;6BAtEmB;AAChB,oBAAO,KAAK0X,cAAZ;AACH,U;2BAsEiB1X,G,EAAK;AACnB,iBAAIA,GAAJ,EAAS;AACL,sBAAK0X,cAAL,GAAsB1X,GAAtB;AACH;AACJ;;;6BAxEW;AACR,oBAAO,KAAK2X,MAAZ;AACH,U;2BAwES3X,G,EAAK;AACX,iBAAIA,GAAJ,EAAS;AACL,sBAAK2X,MAAL,GAAc3X,GAAd;AACH;AACJ;;;6BA1EqB;AAClB,oBAAO,KAAK4X,gBAAZ;AACH,U;2BA0EmB5X,G,EAAK;AACrB,iBAAIA,GAAJ,EAAS;AACL,sBAAK4X,gBAAL,GAAwB5X,GAAxB;AACH;AACJ;;;6BA5Ea;AACV,oBAAO,KAAK6X,QAAZ;AACH,U;2BA4EW7X,G,EAAK;AACb,iBAAIA,GAAJ,EAAS;AACL,sBAAK6X,QAAL,GAAgB7X,GAAhB;AACH;AACJ;;;6BA9Ea;AACV,oBAAO,KAAK8X,QAAZ;AACH,U;2BA8EW9X,G,EAAK;AACb,iBAAIA,GAAJ,EAAS;AACL,sBAAK8X,QAAL,GAAgB9X,GAAhB;AACH;AACJ;;;;;;mBAnKgBzI,S;;;;;;;;;;;;;;;;ACXrB;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;;;;;;;;;KAEqBC,Q;;;AACjB,uBAAYK,OAAZ,EAAqB;AAAA;;AAAA,yHACXA,OADW;;AAGjB,aAAIC,YAAJ;;AAEAA,cAAKC,MAAL,GAAc;AACVwU,qBAAQvQ,KAAKzB,GAAL,CAASzC,KAAKmB,KAAL,GAAanB,KAAKoB,MAAL,CAAYC,IAAzB,GAAgCrB,KAAKoB,MAAL,CAAYE,KAArD,EAA4DtB,KAAKuB,MAAL,GAAcvB,KAAKoB,MAAL,CAAYI,GAA1B,GAAgCxB,KAAKoB,MAAL,CAAYK,MAAxG,IAAkH;AADhH,UAAd;;AAKA;AAViB;AAWpB;;AAED;;;;;;;;AAoCA;;AAEA;;;AAGA;;;sCAGaxB,M,EAAQE,Q,EAAU;AAC3B,8HAAmBF,MAAnB;;AAEA,iBAAID,OAAO,IAAX;;AAEAA,kBAAKD,OAAL,GAAe,aAAOK,SAAP,CAAiBH,MAAjB,EAAyBD,KAAKD,OAA9B,CAAf;;AAEAC,kBAAKK,SAAL,GAAkB,KAAlB;;AAEA,iBAAIC,aAAsBN,KAAKM,UAA/B;AACAA,wBAAWC,UAAX,GAA0BP,KAAKO,UAA/B;;AAEA,iBAAIC,KAAK,iBAAgBF,UAAhB,EAA4BN,KAAKK,SAAjC,EAA4C,IAA5C,CAAT;AACAG,gBAAGC,aAAH,CAAiBT,KAAKK,SAAtB,EAAiC,UAASK,IAAT,EAAe;AAC5CV,sBAAKW,UAAL,GAAkBD,IAAlB;;AAEA,qBAAI,aAAOoC,UAAP,CAAkB3C,QAAlB,CAAJ,EAAiC;AAC7BA,8BAAS4C,IAAT,CAAc/C,IAAd,EAAoBA,KAAKW,UAAzB;AACH;AACJ,cAND;AAOH;;AAED;;;;;;0CAGiBqC,O,EAAS7C,Q,EAAU;AAChC,iBAAIH,OAAO,IAAX;;AAEAA,kBAAKD,OAAL,GAAe,aAAOK,SAAP,CAAiBJ,KAAKD,OAAtB,EAA+BiD,OAA/B,CAAf;;AAEAhD,kBAAKK,SAAL,GAAkB,KAAlB;;AAEA,iBAAIC,aAAsBN,KAAKM,UAA/B;AACAA,wBAAWC,UAAX,GAA0BP,KAAKO,UAA/B;;AAEA,iBAAIC,KAAK,iBAAgBF,UAAhB,EAA4BN,KAAKK,SAAjC,EAA4C,IAA5C,CAAT;AACAG,gBAAGC,aAAH,CAAiBT,KAAKK,SAAtB,EAAiC,UAASK,IAAT,EAAe;AAC5CV,sBAAKW,UAAL,GAAkBD,IAAlB;;AAEA,qBAAI,aAAOoC,UAAP,CAAkB3C,QAAlB,CAAJ,EAAiC;AAC7BA,8BAAS4C,IAAT,CAAc/C,IAAd,EAAoBA,KAAKW,UAAzB;AACH;AACJ,cAND;AAOH;;AAED;;;;;;;gCAIOD,I,EAAM;AACT,iBAAIV,OAAO,IAAX;;AAEA,iBAAImB,QAAUnB,KAAKmB,KAAL,GAAanB,KAAKoB,MAAL,CAAYC,IAAzB,GAAgCrB,KAAKoB,MAAL,CAAYE,KAA1D;AAAA,iBACIC,SAAUvB,KAAKuB,MAAL,GAAcvB,KAAKoB,MAAL,CAAYI,GAA1B,GAAgCxB,KAAKoB,MAAL,CAAYK,MAD1D;AAAA,iBAEI4B,QAAUrD,KAAKO,UAFnB;;AAIAP,kBAAKqU,GAAL,GAAW1S,GAAG2I,GAAH,CAAO+J,GAAP,GACEE,WADF,CACc,CADd,EAEEG,WAFF,CAEc1U,KAAKD,OAAL,CAAa0U,MAF3B,CAAX;;AAIA;AACAzU,kBAAKmU,GAAL,GAAWxS,GAAGwZ,MAAH,CAAUhH,GAAV,GACEiH,IADF,CACO,IADP,EAEE5T,KAFF,CAEQ,UAASjF,CAAT,EAAY;AAAE,wBAAOA,EAAEiF,KAAT;AAAiB,cAFvC,CAAX;;AAIAxH,kBAAKiD,IAAL,CAAUC,SAAV,CAAoB,uCAApB,EAA6DxC,IAA7D,CAAkE,EAAlE,EAAsEyC,IAAtE,GAA6EC,MAA7E;;AAEA;AACA,iBAAIiY,OAAOrb,KAAKiD,IAAL,CACEO,MADF,CACS,GADT,EAEMC,IAFN,CAEW,OAFX,EAEoB,sCAFpB,EAGMA,IAHN,CAGW,WAHX,EAGwB,eAAgBtC,QAAQ,CAAxB,GAA6B,GAA7B,GAAoCI,SAAS,CAA7C,GAAkD,GAH1E,EAIM2B,SAJN,CAIgB,6BAJhB,EAKMxC,IALN,CAKWV,KAAKmU,GAAL,CAASzT,IAAT,CALX,EAK2B6C,KAL3B,GAMMC,MANN,CAMa,GANb,EAOUC,IAPV,CAOe,OAPf,EAOwB,4BAPxB,CAAX;;AASA;AACA4X,kBAAK7X,MAAL,CAAY,MAAZ,EACSC,IADT,CACc,OADd,EACuB,6BADvB,EAESA,IAFT,CAEc,UAFd,EAE0B,UAASlB,CAAT,EAAY;AAAE,wBAAOA,EAAE7B,IAAF,CAAO,UAAP,CAAP;AAA4B,cAFpE,EAGS+C,IAHT,CAGc,GAHd,EAGmBzD,KAAKqU,GAHxB,EAIS5Q,IAJT,CAIc,MAJd,EAIsB,UAASlB,CAAT,EAAYqB,CAAZ,EAAe;AAAE,wBAAOP,MAAMO,CAAN,CAAP;AAAkB,cAJzD,EAKSH,IALT,CAKc,QALd,EAKwB,SALxB,EAMSyI,IANT,CAMc,UAAS3J,CAAT,EAAY;AAAEvC,sBAAKoU,WAAL,GAAmB7R,CAAnB;AAAuB,cANnD;AAOQ;AACA;;;AAGR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAvC,kBAAKoE,iBAAL;AACH;;AAED;;;;;;yCAGgB;AACZ,iBAAIpE,OAAO,IAAX;;AAEA,oBAAOA,KAAKiD,IAAL,CACMC,SADN,CACgB,kCADhB,CAAP;AAEH;;AAED;;;;;;;6CAIoB;AAChB,iBAAIlD,OAAU,IAAd;AAAA,iBACI4F,WAAU5F,KAAK6U,aAAL,EADd;AAAA,iBAEIxR,QAAUrD,KAAKO,UAFnB;AAAA,iBAGI+T,mBAAmB,CAHvB;AAAA,iBAIIE,mBAAmBxU,KAAKD,OAAL,CAAa0U,MAJpC;AAAA,iBAKIE,kBAAkB,CALtB;AAAA,iBAMIC,kBAAkB5U,KAAKD,OAAL,CAAa0U,MAAb,GAAsB,GAN5C;AAAA,iBAOI9O,eAAsB3F,KAAKyF,KAAL,CAAW1F,OAPrC;AAAA,iBAQIyF,cAAsBxF,KAAKyF,KAAL,CAAWC,MARrC;AAAA,iBASII,sBAAsBH,aAAaI,WAAb,CAAyB5F,QATnD;AAAA,iBAUI6F,qBAAsBL,aAAaM,UAAb,CAAwB9F,QAVlD;AAAA,iBAWI+F,kBAAsBlG,KAAKmG,KAAL,CAAWhG,QAXrC;;AAaA,iBAAIiG,UAAU,iBAAYpG,KAAKD,OAAL,CAAaqG,OAAzB,CAAd;;AAEA;AACApG,kBAAKqG,YAAL,GAAoB;AAChB,0BAAS,eAAS9D,CAAT,EAAYqB,CAAZ,EAAe;AACpB,yBAAI,aAAOd,UAAP,CAAkBoD,eAAlB,CAAJ,EAAwC;AACpCA,yCAAgBnD,IAAhB,CAAqB,IAArB,EAA2BR,CAA3B;AACH;AACJ,kBALe;;AAOhB,8BAAa,mBAASA,CAAT,EAAYqB,CAAZ,EAAe;AACxB,yBAAI,CAAC4B,WAAL,EAAkB;;AAElB,yBAAI,aAAO1C,UAAP,CAAkBgD,mBAAlB,CAAJ,EAA4C;AACxCA,6CAAoB/C,IAApB,CAAyB,IAAzB,EAA+BR,CAA/B;AACH;;AAED,yBAAIqD,WAAWjE,GAAGiF,MAAH,CAAU,IAAV,CAAf;AACAhB,8BAASd,UAAT,GACSrB,IADT,CACc,GADd,EACmB9B,GAAG2I,GAAH,CAAO+J,GAAP,GACNE,WADM,CACMI,eADN,EAEND,WAFM,CAEME,eAFN,CADnB;;AAMA;AACA,yBAAI5U,KAAKD,OAAL,CAAasH,MAAb,CAAoBd,IAAxB,EAA8B;AAC1BvG,8BAAKqH,MAAL,CAAYoL,IAAZ,CAAiBvG,IAAjB,CAAsB,YAAW;AAC7B,iCAAIvK,GAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,UAArB,MAAqClB,EAAE7B,IAAF,CAAO,UAAP,CAArC,IAA2DiB,GAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,aAArB,CAA/D,EAAoG;AAChG9B,oCAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,SAArB,EAAgC,KAAhC;AACH;AACJ,0BAJD;AAKH;;AAED;AACA,yBAAIzD,KAAKD,OAAL,CAAauG,KAAb,CAAmBC,IAAvB,EAA6B;AACzB,6BAAIC,KAAK7E,GAAGuB,SAAH,CAAa,uCAAb,CAAT;AACAsD,4BAAGC,MAAH,CAAU,UAAS7C,CAAT,EAAY;AAAE,oCAAOA,EAAE,UAAF,KAAiBrB,EAAE7B,IAAF,CAAO,UAAP,CAAxB;AAA4C,0BAApE,EAAsEwC,SAAtE,CAAgF,IAAhF,EAAsFS,KAAtF,CAA4F,SAA5F,EAAuG,KAAvG;AACA,6BAAI+C,eAAeF,GAAGC,MAAH,CAAU,UAAS7C,CAAT,EAAY;AAAE,oCAAOA,EAAE,UAAF,KAAiBrB,EAAE7B,IAAF,CAAO,UAAP,CAAxB;AAA4C,0BAApE,CAAnB;AACA;AACAgG,sCAAaxD,SAAb,CAAuB,IAAvB,EAA6BS,KAA7B,CAAmC,SAAnC,EAA8C,GAA9C;AACA,sCAAOgD,MAAP,CAAchF,GAAGiF,MAAH,CAAU,qBAAV,EAAiC,CAAjC,EAAoC,CAApC,CAAd,EAAsDF,aAAa,CAAb,EAAgB,CAAhB,EAAmBG,SAAzE,EAAoF,GAApF;AACH;;AAED;AACA7G,0BAAK6U,aAAL,GAAqB3I,IAArB,CAA0B,YAAU;AAChC,6BAAIvK,GAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,UAArB,MAAqClB,EAAE7B,IAAF,CAAO,UAAP,CAAzC,EAA6D;AACzDiB,gCAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,SAArB,EAAgC,KAAhC;AACH;AACJ,sBAJD;;AAMA;AACA2C,6BAAQW,IAAR,CAAaxE,CAAb,EAAgBvC,IAAhB,EAAsB,WAAtB;AACH,kBAjDe;;AAmDhB,6BAAY,kBAASuC,CAAT,EAAYqB,CAAZ,EAAe;AACvB,yBAAI,CAAC4B,WAAL,EAAkB;;AAElB,yBAAI,aAAO1C,UAAP,CAAkBkD,kBAAlB,CAAJ,EAA2C;AACvCA,4CAAmBjD,IAAnB,CAAwB,IAAxB,EAA8BR,CAA9B;AACH;;AAED,yBAAIqD,WAAWjE,GAAGiF,MAAH,CAAU,IAAV,CAAf;AACAhB,8BAASd,UAAT,GACSC,QADT,CACkB,GADlB,EAESiQ,IAFT,CAEc,QAFd,EAGSvR,IAHT,CAGc,GAHd,EAGmB9B,GAAG2I,GAAH,CAAO+J,GAAP,GACNE,WADM,CACMD,gBADN,EAENI,WAFM,CAEMF,gBAFN,CAHnB;;AAQA;AACA,yBAAIxU,KAAKD,OAAL,CAAasH,MAAb,CAAoBd,IAAxB,EACIvG,KAAKqH,MAAL,CAAYoL,IAAZ,CAAiBvG,IAAjB,CAAsB,YAAW;AAC7B,6BAAIvK,GAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,UAArB,MAAqClB,EAAE7B,IAAF,CAAO,UAAP,CAArC,IAA2DiB,GAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,aAArB,CAA/D,EAAoG;AAChG9B,gCAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,SAArB,EAAgC,KAAhC;AACH;AACJ,sBAJD;;AAMJ;AACA,yBAAIzD,KAAKD,OAAL,CAAauG,KAAb,CAAmBC,IAAvB,EAA6B;AACzB5E,4BAAGuB,SAAH,CAAa,uCAAb,EAAsDA,SAAtD,CAAgE,IAAhE,EAAsES,KAAtE,CAA4E,SAA5E,EAAuF,EAAvF;AACH;;AAGD;AACA3D,0BAAK6U,aAAL,GAAqB3I,IAArB,CAA0B,YAAU;AAChC,6BAAIvK,GAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,UAArB,MAAqClB,EAAE7B,IAAF,CAAO,UAAP,CAAzC,EAA6D;AACzDiB,gCAAGiF,MAAH,CAAU,IAAV,EAAgBnD,IAAhB,CAAqB,SAArB,EAAgC,KAAhC;AACH;AACJ,sBAJD;;AAMA;AACA2C,6BAAQW,IAAR,CAAaxE,CAAb,EAAgBvC,IAAhB,EAAsB,UAAtB;AACH;AA1Fe,cAApB;;AA6FA4F,sBAASoB,EAAT,CAAYhH,KAAKqG,YAAjB;AACH;;AAED;;AAEA;;;AAGA;;;;;;;;;4BAMGY,S,EAAW9G,Q,EAAU;AACpB,oHAAS8G,SAAT,EAAoB9G,QAApB;;AAEA,iBAAIH,OAAO,IAAX;AACA,iBAAI4F,WAAc5F,KAAK6U,aAAL,EAAlB;;AAEA;AACA,iBAAIxO,eAAe;AACf,gCAAe,oBAAS9D,CAAT,EAAY;AACvB,yBAAI,aAAOO,UAAP,CAAkB3C,QAAlB,CAAJ,EAAiC;AAC7BA,kCAAS4C,IAAT,CAAc,IAAd,EAAoBR,CAApB;AACH;AACJ,kBALc;AAMf,oCAAmB,wBAASA,CAAT,EAAY;AAC3B,yBAAI,aAAOO,UAAP,CAAkB3C,QAAlB,CAAJ,EAAiC;AAC7BA,kCAAS4C,IAAT,CAAc,IAAd,EAAoBR,CAApB;AACH;AACJ,kBAVc;AAWf,mCAAkB,uBAASA,CAAT,EAAY;AAC1B,yBAAI,aAAOO,UAAP,CAAkB3C,QAAlB,CAAJ,EAAiC;AAC7BA,kCAAS4C,IAAT,CAAc,IAAd,EAAoBR,CAApB;AACH;AACJ;AAfc,cAAnB;;AAkBA,iBAAI2E,YAAYD,YAAY,QAA5B;;AAEArB,sBAASoB,EAAT,CAAYE,SAAZ,EAAuBb,aAAaa,SAAb,CAAvB;AACH;;AAED;;;;;;gCAGO;AACH;;AAEA,iBAAIlH,OAAO,IAAX;;AAEAA,kBAAKmH,YAAL,CAAkBnH,KAAKC,MAAvB,EAA+B,UAASS,IAAT,EAAe;AAC1C,qBAAI0G,QAAU,gBAAUpH,KAAKD,OAAL,CAAaqH,KAAvB,EAA8BpH,IAA9B,CAAd;AACA,qBAAIqH,SAAU,gBAAWrH,KAAKD,OAAL,CAAasH,MAAxB,EAAgCrH,IAAhC,EAAsCA,KAAKW,UAA3C,CAAd;AACA,qBAAI2F,QAAU,iBAAUtG,KAAKD,OAAL,CAAauG,KAAvB,EAA8BtG,IAA9B,EAAoCA,KAAKW,UAAzC,CAAd;;AAEAX,sBAAKoH,KAAL,GAAaA,KAAb;AACApH,sBAAKqH,MAAL,GAAcA,MAAd;AACArH,sBAAKsG,KAAL,GAAaA,KAAb;;AAEA;AACAtG,sBAAKoH,KAAL,CAAWL,IAAX;;AAEA;AACA/G,sBAAK0E,MAAL,CAAYhE,IAAZ;AACAV,sBAAKoE,iBAAL;;AAEA;AACApE,sBAAKqH,MAAL,CAAYN,IAAZ;AACA/G,sBAAKqH,MAAL,CAAYiU,iCAAZ,CAA8Ctb,IAA9C,EAAoDA,KAAK6U,aAAL,EAApD,EAA0E7U,KAAKmU,GAA/E,EAAoFnU,KAAKoU,WAAzF,EAAsGpU,KAAKqU,GAA3G;;AAEA;AACArU,sBAAKsG,KAAL,CAAWS,IAAX;AACA/G,sBAAKsG,KAAL,CAAWgV,iCAAX,CAA6Ctb,IAA7C;AACH,cAvBD;AAwBH;;AAED;;;;;;;;mCAKUuH,G,EAAKC,K,EAAO;AAClB,2HAAgBD,GAAhB,EAAqBC,KAArB;;AAEA,iBAAIxH,OAAO,IAAX;;AAEA,0BAAOyH,GAAP,CAAWF,GAAX,EAAgBC,KAAhB,EAAuBxH,KAAKD,OAA5B;;AAEAC,kBAAKmH,YAAL,CAAkBnH,KAAKD,OAAvB;AACH;;AAED;;;;;;;;oCAKW2H,O,EAASC,a,EAAe;AAC/B,iBAAI3H,OAAO,IAAX;;AAEA,iBAAI4H,SAAS,EAAb;;AAEA,iBAAI,CAAC,aAAOC,OAAP,CAAeF,aAAf,CAAL,EAAoC;;AAEhCC,wBAAOlH,IAAP,GAAc;AACVoH,4BAAOJ,OADG;AAEVK,2BAAMJ;AAFI,kBAAd;AAKH,cAPD,MAOO;;AAEHC,wBAAOlH,IAAP,GAAc;AACVoH,4BAAOJ;AADG,kBAAd;AAIH;;AAED1H,kBAAKgI,gBAAL,CAAsBJ,MAAtB,EAA8B,UAASlH,IAAT,EAAe;AACzC;AACAV,sBAAK0E,MAAL,CAAY1E,KAAKW,UAAjB;;AAEA;AACAX,sBAAKqH,MAAL,CAAY3C,MAAZ,CAAmB1E,KAAKW,UAAxB;AACAX,sBAAKqH,MAAL,CAAYiU,iCAAZ,CAA8Ctb,IAA9C,EAAoDA,KAAK6U,aAAL,EAApD,EAA0E7U,KAAKmU,GAA/E,EAAoFnU,KAAKoU,WAAzF,EAAsGpU,KAAKqU,GAA3G;;AAEA;AACArU,sBAAKsG,KAAL,CAAW5B,MAAX,CAAkB1E,KAAKW,UAAvB;AACAX,sBAAKsG,KAAL,CAAWgV,iCAAX,CAA6Ctb,IAA7C;AACH,cAXD;AAaH;AACD;;;;6BA/YU;AACN,oBAAO,KAAKub,IAAZ;AACH,U;;AASD;;AAEA;;;2BAGQrT,G,EAAK;AACT,iBAAIA,GAAJ,EAAS;AACL,sBAAKqT,IAAL,GAAYrT,GAAZ;AACH;AACJ;;;6BAhBS;AACN,oBAAO,KAAKsT,IAAZ;AACH,U;2BAgBOtT,G,EAAK;AACT,iBAAIA,GAAJ,EAAS;AACL,sBAAKsT,IAAL,GAAYtT,GAAZ;AACH;AACJ;;;6BAlBiB;AACd,oBAAO,KAAKuT,YAAZ;AACH,U;2BAkBevT,G,EAAK;AACjB,iBAAIA,GAAJ,EAAS;AACL,sBAAKuT,YAAL,GAAoBvT,GAApB;AACH;AACJ;;;;;;mBAjDgBxI,Q;;;;;;;;;;;;;;;;ACXrB;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;;;;;;;;;KAEqBC,Q;;;AACjB,uBAAYI,OAAZ,EAAqB;AAAA;;AAAA,yHACXA,OADW;;AAGjB,aAAIC,YAAJ;;AAEAA,cAAKC,MAAL,GAAc;AACVggB,6BAAgB,oBADN;AAEVhX,8BAAiB,IAFP;AAGV+H,uBAAU,CAHA;AAIVC,qBAAQ,CAJE;AAKViP,oBAAO,IALG;AAMVnN,yBAAY,EANF;AAOVoN,yBAAY,EAPF;AAQVC,0BAAa,EARH;AASVC,sBAAS;AATC,UAAd;;AAYA;AAjBiB;AAkBpB;;AAED;;;;;;;;AAsFA;;AAEA;;;;sCAIapgB,M,EAAQE,Q,EAAU;AAC3B,8HAAmBF,MAAnB;;AAEA,iBAAID,OAAO,IAAX;;AAEAA,kBAAKD,OAAL,GAAe,aAAOK,SAAP,CAAiBH,MAAjB,EAAyBD,KAAKD,OAA9B,CAAf;;AAEAC,kBAAKK,SAAL,GAA0B,UAA1B;AACAL,kBAAKsgB,QAAL,GAA0B,CAA1B;AACAtgB,kBAAKugB,SAAL,GAA0B,EAA1B;;AAEA,iBAAIjgB,aAAsBN,KAAKM,UAA/B;AACAA,wBAAWC,UAAX,GAA0BP,KAAKO,UAA/B;;AAEA,iBAAIC,KAAK,iBAAgBF,UAAhB,EAA4BN,KAAKK,SAAjC,EAA4C,IAA5C,CAAT;AACAG,gBAAGC,aAAH,CAAiBT,KAAKK,SAAtB,EAAiC,UAASK,IAAT,EAAe;AAC5CV,sBAAKW,UAAL,GAAkBD,IAAlB;;AAEA,qBAAI4f,WAAW,CAAf;AAAA,qBACIE,UAAU,CADd;AAAA,qBAEIC,UAAU,CAFd;AAAA,qBAGItf,QAAQnB,KAAKmB,KAAL,GAAanB,KAAKoB,MAAL,CAAYC,IAAzB,GAAgCrB,KAAKoB,MAAL,CAAYE,KAHxD;AAAA,qBAIIC,SAASvB,KAAKuB,MAAL,GAAcvB,KAAKoB,MAAL,CAAYI,GAA1B,GAAgCxB,KAAKoB,MAAL,CAAYK,MAJzD;;AAMA;AACA,qBAAIzB,KAAKD,OAAL,CAAamgB,KAAb,IAAsBlgB,KAAKD,OAAL,CAAakR,MAAb,KAAwB,CAA9C,IAAmDjR,KAAKD,OAAL,CAAaiR,QAAb,KAA0B,CAAjF,EAAoF;;AAEhFhR,0BAAKW,UAAL,CAAgBiO,OAAhB,CAAwB,UAAU8R,KAAV,EAAiBjH,KAAjB,EAAwB;;AAE5C,6BAAIzZ,KAAKD,OAAL,CAAamgB,KAAb,IAAsB3T,OAAOxE,IAAP,CAAY/H,KAAKugB,SAAjB,EAA4B1b,OAA5B,CAAoC4U,KAApC,KAA8C,CAAC,CAAzE,EAA4E;AACxEzZ,kCAAKugB,SAAL,CAAe9G,KAAf,IAAwB6G,QAAxB;AACAA;AACH;;AAEDI,+BAAMlZ,KAAN,CAAYoH,OAAZ,CAAoB,UAAUpF,IAAV,EAAgB5F,CAAhB,EAAmB;AACnC,iCAAG5D,KAAKD,OAAL,CAAaiR,QAAb,KAA0B,CAA7B,EACI,IAAIxH,KAAKyN,KAAL,GAAauJ,OAAb,IAAwBA,YAAY,CAAxC,EACIA,UAAUhX,KAAKyN,KAAf;AACR,iCAAGjX,KAAKD,OAAL,CAAakR,MAAb,KAAwB,CAA3B,EAA8B;AAC1B,qCAAIzH,KAAKyN,KAAL,GAAawJ,OAAjB,EACIA,UAAUjX,KAAKyN,KAAf;AACJ,qCAAIzN,KAAK0N,GAAL,GAAWuJ,OAAf,EACIA,UAAUjX,KAAK0N,GAAf;AACP;AACJ,0BAVD;AAWH,sBAlBD;;AAoBA,yBAAIlX,KAAKD,OAAL,CAAakR,MAAb,KAAwB,CAA5B,EAA+B;AAC7BjR,8BAAKD,OAAL,CAAakR,MAAb,GAAsBwP,OAAtB;AACD;AACD,yBAAIzgB,KAAKD,OAAL,CAAaiR,QAAb,KAA0B,CAA9B,EAAiC;AAC/BhR,8BAAKD,OAAL,CAAaiR,QAAb,GAAwBwP,OAAxB;AACD;AACJ;;AAEDxgB,sBAAKsgB,QAAL,GAAgBA,QAAhB;;AAEAtgB,sBAAK0B,CAAL,GAASC,GAAG6H,IAAH,CAAQ5H,KAAR,GACAS,MADA,CACO,CAACrC,KAAKD,OAAL,CAAaiR,QAAd,EAAwBhR,KAAKD,OAAL,CAAakR,MAArC,CADP,EAEAhP,KAFA,CAEM,CAAC,CAAD,EAAIjC,KAAKmB,KAAT,CAFN,CAAT;;AAIA,qBAAI,aAAO2B,UAAP,CAAkB3C,QAAlB,CAAJ,EAAiC;AAC7BA,8BAAS4C,IAAT,CAAc/C,IAAd,EAAoBA,KAAKW,UAAzB;AACH;AACJ,cAjDD;AAkDH;;;0CAEgBqC,O,EAAS7C,Q,EAAU;;AAEhC,iBAAIH,OAAO,IAAX;;AAEAA,kBAAKD,OAAL,GAAe,aAAOK,SAAP,CAAiBJ,KAAKD,OAAtB,EAA+BiD,OAA/B,CAAf;;AAEAhD,kBAAKK,SAAL,GAA0B,UAA1B;AACAL,kBAAKsgB,QAAL,GAA0B,CAA1B;AACAtgB,kBAAKugB,SAAL,GAA0B,EAA1B;;AAEA,iBAAIjgB,aAAsBN,KAAKM,UAA/B;AACAA,wBAAWC,UAAX,GAA0BP,KAAKO,UAA/B;;AAEA,iBAAIC,KAAK,iBAAgBF,UAAhB,EAA4BN,KAAKK,SAAjC,EAA4C,IAA5C,CAAT;AACAG,gBAAGC,aAAH,CAAiBT,KAAKK,SAAtB,EAAiC,UAASK,IAAT,EAAe;AAC5C,qBAAI4f,WAAW,CAAf;AAAA,qBACIE,UAAU,CADd;AAAA,qBAEIC,UAAU,CAFd;AAAA,qBAGItf,QAAQnB,KAAKmB,KAAL,GAAanB,KAAKoB,MAAL,CAAYC,IAAzB,GAAgCrB,KAAKoB,MAAL,CAAYE,KAHxD;AAAA,qBAIIC,SAASvB,KAAKuB,MAAL,GAAcvB,KAAKoB,MAAL,CAAYI,GAA1B,GAAgCxB,KAAKoB,MAAL,CAAYK,MAJzD;;AAMA;AACA,qBAAIzB,KAAKD,OAAL,CAAamgB,KAAb,IAAsBlgB,KAAKD,OAAL,CAAakR,MAAb,KAAwB,CAA9C,IAAmDjR,KAAKD,OAAL,CAAaiR,QAAb,KAA0B,CAAjF,EAAoF;;AAEhFhR,0BAAKW,UAAL,CAAgBiO,OAAhB,CAAwB,UAAU8R,KAAV,EAAiBjH,KAAjB,EAAwB;;AAE5C,6BAAIzZ,KAAKD,OAAL,CAAamgB,KAAb,IAAsB3T,OAAOxE,IAAP,CAAY/H,KAAKugB,SAAjB,EAA4B1b,OAA5B,CAAoC4U,KAApC,KAA8C,CAAC,CAAzE,EAA4E;AACxEzZ,kCAAKugB,SAAL,CAAe9G,KAAf,IAAwB6G,QAAxB;AACAA;AACH;;AAEDI,+BAAMlZ,KAAN,CAAYoH,OAAZ,CAAoB,UAAUpF,IAAV,EAAgB5F,CAAhB,EAAmB;AACnC,iCAAG5D,KAAKD,OAAL,CAAaiR,QAAb,KAA0B,CAA7B,EACI,IAAIxH,KAAKyN,KAAL,GAAauJ,OAAb,IAAwBA,YAAY,CAAxC,EACIA,UAAUhX,KAAKyN,KAAf;AACR,iCAAGjX,KAAKD,OAAL,CAAakR,MAAb,KAAwB,CAA3B,EAA8B;AAC1B,qCAAIzH,KAAKyN,KAAL,GAAawJ,OAAjB,EACIA,UAAUjX,KAAKyN,KAAf;AACJ,qCAAIzN,KAAK0N,GAAL,GAAWuJ,OAAf,EACIA,UAAUjX,KAAK0N,GAAf;AACP;AACJ,0BAVD;AAWH,sBAlBD;;AAoBA,yBAAIlX,KAAKD,OAAL,CAAakR,MAAb,KAAwB,CAA5B,EAA+B;AAC7BjR,8BAAKD,OAAL,CAAakR,MAAb,GAAsBwP,OAAtB;AACD;AACD,yBAAIzgB,KAAKD,OAAL,CAAaiR,QAAb,KAA0B,CAA9B,EAAiC;AAC/BhR,8BAAKD,OAAL,CAAaiR,QAAb,GAAwBwP,OAAxB;AACD;AACJ;;AAEDxgB,sBAAKsgB,QAAL,GAAgBA,QAAhB;;AAEAtgB,sBAAK0B,CAAL,GAASC,GAAG6H,IAAH,CAAQ5H,KAAR,GACAS,MADA,CACO,CAACrC,KAAKD,OAAL,CAAaiR,QAAd,EAAwBhR,KAAKD,OAAL,CAAakR,MAArC,CADP,EAEAhP,KAFA,CAEM,CAAC,CAAD,EAAIjC,KAAKmB,KAAT,CAFN,CAAT;;AAIA,qBAAI,aAAO2B,UAAP,CAAkB3C,QAAlB,CAAJ,EAAiC;AAC7BA,8BAAS4C,IAAT,CAAc/C,IAAd,EAAoBA,KAAKW,UAAzB;AACH;AACJ,cA/CD;AAgDH;;;gCAEMD,I,EAAM;AACT,iBAAIV,OAAO,IAAX;;AAEA,iBAAImB,QAAQnB,KAAKmB,KAAL,GAAanB,KAAKoB,MAAL,CAAYC,IAAzB,GAAgCrB,KAAKoB,MAAL,CAAYE,KAAxD;AAAA,iBACIC,SAASvB,KAAKuB,MAAL,GAAcvB,KAAKoB,MAAL,CAAYI,GAA1B,GAAgCxB,KAAKoB,MAAL,CAAYK,MADzD;;AAGA,iBAAIG,QAAQT,SAASnB,KAAKD,OAAL,CAAakR,MAAb,GAAsBjR,KAAKD,OAAL,CAAaiR,QAA5C,CAAZ;;AAEA,iBAAI3N,QAAQrD,KAAKO,UAAjB;;AAEA,iBAAIggB,YAAYvgB,KAAKugB,SAArB;;AAEAvgB,kBAAKiD,IAAL,CAAUC,SAAV,CAAoB,yBAApB,EAA+CxC,IAA/C,CAAoD,EAApD,EAAwDyC,IAAxD,GAA+DC,MAA/D;AACApD,kBAAKiD,IAAL,CAAUC,SAAV,CAAoB,4CAApB,EAAkExC,IAAlE,CAAuE,EAAvE,EAA2EyC,IAA3E,GAAkFC,MAAlF;AACApD,kBAAKiD,IAAL,CAAUC,SAAV,CAAoB,mDAApB,EAAyExC,IAAzE,CAA8E,EAA9E,EAAkFyC,IAAlF,GAAyFC,MAAzF;AACApD,kBAAKiD,IAAL,CAAUC,SAAV,CAAoB,sCAApB,EAA4DxC,IAA5D,CAAiE,EAAjE,EAAqEyC,IAArE,GAA4EC,MAA5E;AACApD,kBAAKsK,GAAL,CAASpH,SAAT,CAAmB,uCAAnB,EAA4DE,MAA5D;AACApD,kBAAKiD,IAAL,CAAUC,SAAV,CAAoB,4BAApB,EAAkDE,MAAlD;;AAEA;AACApD,kBAAKsK,GAAL,CAAS1D,MAAT,CAAgB,OAAhB,EAAyBA,MAAzB,CAAgC,MAAhC,EAAwCnD,IAAxC,CAA6C,QAA7C,EAAuD,CAACzD,KAAKD,OAAL,CAAagT,UAAb,GAA0B/S,KAAKD,OAAL,CAAaogB,UAAxC,IAAsDzf,KAAKM,MAAlH;;AAEA;AACAhB,kBAAKiD,IAAL,CAAUO,MAAV,CAAiB,MAAjB,EACKC,IADL,CACU,OADV,EACmB,wBADnB,EAEKA,IAFL,CAEU,GAFV,EAEe,CAFf,EAGKA,IAHL,CAGU,OAHV,EAGmBtC,KAHnB,EAIKsC,IAJL,CAIU,GAJV,EAIe,IAAIzD,KAAKD,OAAL,CAAaogB,UAAb,GAA0B,CAJ7C,EAKK1c,IALL,CAKU,QALV,EAKoB,CAACzD,KAAKD,OAAL,CAAagT,UAAb,GAA0B/S,KAAKD,OAAL,CAAaogB,UAAxC,KAAuDngB,KAAKD,OAAL,CAAamgB,KAAb,GAAqBlgB,KAAKsgB,QAA1B,GAAqC,CAA5F,CALpB,EAMK7c,IANL,CAMU,QANV,EAMoB,oBANpB,EAOKA,IAPL,CAOU,cAPV,EAO0B,CAP1B,EAQKA,IARL,CAQU,MARV,EAQkB,MARlB;;AAUA,iBAAIkd,iBAAiB3gB,KAAKsK,GAAL,CAAS9G,MAAT,CAAgB,GAAhB,EACIC,IADJ,CACS,OADT,EACkB,sCADlB,CAArB;;AAGA/C,kBAAKkO,OAAL,CAAc,UAAS8R,KAAT,EAAgBjH,KAAhB,EAAuB;AACjC,qBAAImH,WAAY,CAAC5gB,KAAKD,OAAL,CAAagT,UAAb,GAA0B/S,KAAKD,OAAL,CAAaogB,UAAxC,IAAsDI,UAAU9G,KAAV,CAAtE;AACA,qBAAI,CAACzZ,KAAKD,OAAL,CAAamgB,KAAlB,EAAyBU,WAAW,CAAX;;AAEzB;AACA,qBAAI,CAAE,CAAC5gB,KAAKD,OAAL,CAAamgB,KAAd,IAAuBzG,SAAS,CAAjC,IAAuCzZ,KAAKD,OAAL,CAAamgB,KAArD,KAA+DlgB,KAAKD,OAAL,CAAakJ,eAAhF,EAAiG;AAC7F,yBAAI4X,cAAc7gB,KAAKiD,IAAL,CAAUO,MAAV,CAAiB,GAAjB,EACGC,IADH,CACQ,OADR,EACiB,2CADjB,CAAlB;;AAGAod,iCAAY3d,SAAZ,CAAsB,0BAAtB,EACKxC,IADL,CACUggB,MAAMlZ,KADhB,EACuBjE,KADvB,GAEKC,MAFL,CAEY,MAFZ,EAGKC,IAHL,CAGU,OAHV,EAGmB,4BAHnB,EAIKA,IAJL,CAIU,GAJV,EAIe,CAJf,EAKKA,IALL,CAKU,OALV,EAKmBtC,KALnB,EAMKsC,IANL,CAMU,GANV,EAMemd,WAAW5gB,KAAKD,OAAL,CAAaogB,UAAb,GAA0B,CANpD,EAOK1c,IAPL,CAOU,QAPV,EAOoBzD,KAAKD,OAAL,CAAagT,UAAb,GAA0B/S,KAAKD,OAAL,CAAaogB,UAP3D,EAQK1c,IARL,CAQU,MARV,EAQkB,aAAO6I,OAAP,CAAetM,KAAKD,OAAL,CAAakJ,eAA5B,IAA+CjJ,KAAKD,OAAL,CAAakJ,eAAb,CAA6BwQ,SAASzZ,KAAKsgB,QAAL,GAAgB,CAAzB,CAA7B,CAA/C,GAA2GtgB,KAAKD,OAAL,CAAakJ,eAR1I;AASH;;AAED,qBAAI,CAAE,CAACjJ,KAAKD,OAAL,CAAamgB,KAAd,IAAuBzG,SAAS,CAAjC,IAAuCzZ,KAAKD,OAAL,CAAamgB,KAArD,KAA+DlgB,KAAKD,OAAL,CAAasgB,OAAhF,EAAyF;AACrF,yBAAIQ,cAAc7gB,KAAKiD,IAAL,CAAUO,MAAV,CAAiB,GAAjB,EACGC,IADH,CACQ,OADR,EACiB,kDADjB,CAAlB;AAEAod,iCAAY3d,SAAZ,CAAsB,iCAAtB,EACKxC,IADL,CACUggB,MAAMlZ,KADhB,EACuBjE,KADvB,GAEKud,MAFL,CAEY,MAFZ,EAGKrd,IAHL,CAGU,OAHV,EAGmB,mCAHnB,EAIKA,IAJL,CAIU,GAJV,EAIe,CAJf,EAKKA,IALL,CAKU,OALV,EAKmBtC,KALnB,EAMKsC,IANL,CAMU,GANV,EAMemd,WAAW5gB,KAAKD,OAAL,CAAaogB,UAAb,GAA0B,CANpD,EAOK1c,IAPL,CAOU,QAPV,EAOoBzD,KAAKD,OAAL,CAAagT,UAAb,GAA0B/S,KAAKD,OAAL,CAAaogB,UAP3D,EAQK1c,IARL,CAQU,MARV,EAQkBgW,QAAQ,CAAR,GAAY,oBAAZ,GAAmC,oBARrD;AASH;;AAED;AACA,qBAAIsH,gBAAgB/gB,KAAKiD,IAAL,CAAUO,MAAV,CAAiB,GAAjB,EACKC,IADL,CACU,OADV,EACmB,qCADnB,EAEKA,IAFL,CAEU,WAFV,EAEuB,YAFvB,CAApB;;AAIAsd,+BAAc7d,SAAd,CAAwB,oBAAxB,EACKxC,IADL,CACUggB,MAAMlZ,KADhB,EACuBjE,KADvB,GAEKC,MAFL,CAEY,UAAUjB,CAAV,EAAaqB,CAAb,EAAgB;AACpB,4BAAOod,SAASC,eAAT,CAAyBtf,GAAGuf,EAAH,CAAMC,MAAN,CAAa7W,GAAtC,EAA2C/H,EAAE2U,GAAF,IAAS,cAAT,GAA0B,MAA1B,GAAmC,QAA9E,CAAP;AACH,kBAJL,EAKKzT,IALL,CAKU,OALV,EAKmB,yBALnB,EAMKA,IANL,CAMU,GANV,EAMe,UAASlB,CAAT,EAAYqB,CAAZ,EAAe;AAAE,4BAAO5D,KAAKohB,OAAL,CAAa7e,CAAb,EAAeqB,CAAf,EAAiBhC,KAAjB,CAAP;AAAiC,kBANjE,EAOK6B,IAPL,CAOU,GAPV,EAOe,UAASlB,CAAT,EAAYqB,CAAZ,EAAe;AAAE,4BAAO5D,KAAKqhB,gBAAL,CAAsB9e,CAAtB,EAAyBqB,CAAzB,EAA4B6V,KAA5B,CAAP;AAA4C,kBAP5E,EAQKhW,IARL,CAQU,OARV,EAQmB,UAAUlB,CAAV,EAAaqB,CAAb,EAAgB;AAC3B,4BAAO,CAACrB,EAAE2U,GAAF,GAAQ3U,EAAE0U,KAAX,IAAoBrV,KAA3B;AACH,kBAVL,EAWK6B,IAXL,CAWU,IAXV,EAWgB,UAAUlB,CAAV,EAAaqB,CAAb,EAAgB;AACxB,4BAAO5D,KAAKqhB,gBAAL,CAAsB9e,CAAtB,EAAyBqB,CAAzB,EAA4B6V,KAA5B,IAAqCzZ,KAAKD,OAAL,CAAagT,UAAb,GAA0B,CAAtE;AACH,kBAbL,EAcKtP,IAdL,CAcU,IAdV,EAcgB,UAASlB,CAAT,EAAYqB,CAAZ,EAAe;AAAE,4BAAO5D,KAAKohB,OAAL,CAAa7e,CAAb,EAAeqB,CAAf,EAAiBhC,KAAjB,CAAP;AAAiC,kBAdlE,EAeK6B,IAfL,CAeU,GAfV,EAeezD,KAAKD,OAAL,CAAagT,UAAb,GAA0B,CAfzC,EAgBKtP,IAhBL,CAgBU,QAhBV,EAgBoBzD,KAAKD,OAAL,CAAagT,UAhBjC,EAiBKpP,KAjBL,CAiBW,MAjBX,EAiBmBN,MAAMoW,KAAN,CAjBnB;;AAmBA,qBAAIzZ,KAAKD,OAAL,CAAakgB,cAAb,IAA+BxG,QAAQzZ,KAAKsgB,QAAL,GAAgB,CAA3D,EAA8D;AAC1D,yBAAIgB,YAActhB,KAAKD,OAAL,CAAagT,UAAb,GAA0B/S,KAAKD,OAAL,CAAaogB,UAAb,GAA0B,CAApD,GAAwD,CAACngB,KAAKD,OAAL,CAAagT,UAAb,GAA0B/S,KAAKD,OAAL,CAAaogB,UAAxC,IAAsDI,UAAU9G,KAAV,CAAhI;AACAzZ,0BAAKiD,IAAL,CAAUO,MAAV,CAAiB,UAAjB,EACGC,IADH,CACQ,OADR,EACiB,2BADjB,EAEGA,IAFH,CAEQ,IAFR,EAEc,CAFd,EAGGA,IAHH,CAGQ,IAHR,EAGctC,KAHd,EAIGsC,IAJH,CAIQ,IAJR,EAIc6d,SAJd,EAKG7d,IALH,CAKQ,IALR,EAKc6d,SALd,EAMG7d,IANH,CAMQ,cANR,EAMwB,CANxB,EAOGA,IAPH,CAOQ,QAPR,EAOkB,aAAO6I,OAAP,CAAetM,KAAKD,OAAL,CAAakgB,cAA5B,IAA8CjgB,KAAKD,OAAL,CAAakgB,cAAb,CAA4BxG,SAASzZ,KAAKsgB,QAAL,GAAgB,CAAzB,CAA5B,CAA9C,GAAyGtgB,KAAKD,OAAL,CAAakgB,cAPxI;AAQH;;AAED;AACA,qBAAIjgB,KAAKD,OAAL,CAAamgB,KAAb,IAAsB,CAAC,aAAOrY,OAAP,CAAe6Y,MAAMle,IAArB,CAAvB,IAAqDke,MAAMle,IAAN,IAAc,EAAvE,EAA2E;AACvE,yBAAI+e,WAAWvhB,KAAKoB,MAAL,CAAYI,GAAZ,GAAkB,CAACxB,KAAKD,OAAL,CAAagT,UAAb,GAA0B/S,KAAKD,OAAL,CAAaogB,UAAxC,KAAuDI,UAAU9G,KAAV,MAAqB1V,SAArB,GAAiC,CAAjC,GAAqCwc,UAAU9G,KAAV,CAA5F,CAAlB,GAAkIzZ,KAAKD,OAAL,CAAagT,UAAb,GAA0B,IAA3K;;AAEA4N,oCAAend,MAAf,CAAsB,MAAtB,EACKC,IADL,CACU,OADV,EACmB,mBADnB,EAEKA,IAFL,CAEU,WAFV,EAEuB,eAAezD,KAAKD,OAAL,CAAaqgB,WAA5B,GAA0C,GAA1C,GAAgDmB,QAAhD,GAA2D,GAFlF,EAGK7Y,IAHL,CAGUgY,MAAMle,IAHhB;AAIH;AACD;AARA,sBASK,IAAIxC,KAAKD,OAAL,CAAamgB,KAAb,IAAsB,CAAC,aAAOrY,OAAP,CAAe6Y,MAAM3G,IAArB,CAAvB,IAAqD2G,MAAM3G,IAAN,IAAc,EAAvE,EAA2E;AAC5E4G,wCAAend,MAAf,CAAsB,OAAtB,EACKC,IADL,CACU,OADV,EACmB,mBADnB,EAEKA,IAFL,CAEU,WAFV,EAEuB,eAAczD,KAAKD,OAAL,CAAaqgB,WAA3B,GAAwC,GAAxC,IAA8CpgB,KAAKoB,MAAL,CAAYI,GAAZ,GAAkB,CAACxB,KAAKD,OAAL,CAAagT,UAAb,GAA0B/S,KAAKD,OAAL,CAAaogB,UAAxC,IAAsDI,UAAU9G,KAAV,CAAtH,IAAwI,GAF/J,EAGKhW,IAHL,CAGU,YAHV,EAGwBid,MAAM3G,IAH9B,EAIKtW,IAJL,CAIU,OAJV,EAImBzD,KAAKD,OAAL,CAAagT,UAJhC,EAKKtP,IALL,CAKU,QALV,EAKoBzD,KAAKD,OAAL,CAAagT,UALjC;AAMH;AACJ,cAxFD;;AA0FA/S,kBAAKoE,iBAAL;AACH;;AAED;;;;;;wCAGe1D,I,EAAM;AACjB,iBAAIV,OAAO,IAAX;;AAEA,iBAAIA,KAAKD,OAAL,CAAamK,QAAb,CAAsB3D,IAA1B,EAAgC;AAC5B,qBAAIpF,QAAQnB,KAAKmB,KAAL,GAAanB,KAAKoB,MAAL,CAAYC,IAAzB,GAAgCrB,KAAKoB,MAAL,CAAYE,KAAxD;AAAA,qBACIC,SAASvB,KAAKuB,MAAL,GAAcvB,KAAKoB,MAAL,CAAYI,GAA1B,GAAgCxB,KAAKoB,MAAL,CAAYK,MADzD;;AAGA;AACA,qBAAI2b,WAAWpd,KAAKiD,IAAL,CAAUoa,IAAV,GAAiBC,OAAjB,EAAf;AACA;AACAtd,sBAAKwd,YAAL,GAAoBJ,SAAS7b,MAA7B;;AAEA;;AAEAvB,sBAAKyd,aAAL,GAAqBtc,KAArB,EACAnB,KAAK0d,cAAL,GAAsB1d,KAAKD,OAAL,CAAamK,QAAb,CAAsB3I,MAD5C,EAEAvB,KAAK2d,cAAL,GAAsB;AAClB,4BAAO3d,KAAKwd,YAAL,GAAoB,GADT;AAElB,6BAAQxd,KAAKoB,MAAL,CAAYC;AAFF,kBAFtB;;AAOArB,sBAAK2T,SAAL,GAAiBhS,GAAG6H,IAAH,CAAQ5H,KAAR,GAAgBK,KAAhB,CAAsB,CAAC,CAAD,EAAIjC,KAAKyd,aAAT,CAAtB,CAAjB;;AAEAzd,sBAAK2T,SAAL,CAAetR,MAAf,CAAsB,CAACrC,KAAKD,OAAL,CAAaiR,QAAd,EAAwBhR,KAAKD,OAAL,CAAakR,MAArC,CAAtB;;AAEAjR,sBAAK6T,aAAL,GAAqBlS,GAAG2I,GAAH,CAAO7F,IAAP,GACJ7C,KADI,CACE5B,KAAK2T,SADP,EAEJxC,MAFI,CAEG,QAFH,CAArB;;AAIAnR,sBAAK6d,KAAL,GAAalc,GAAG2I,GAAH,CAAOuT,KAAP,GACInc,CADJ,CACM1B,KAAK2T,SADX,EAEI3M,EAFJ,CAEO,OAFP,EAEgB,YAAW;AACpB;AACAhH,0BAAK0B,CAAL,CAAOW,MAAP,CAAcrC,KAAK6d,KAAL,CAAWC,KAAX,KAAqB9d,KAAK2T,SAAL,CAAetR,MAAf,EAArB,GAA+CrC,KAAK6d,KAAL,CAAWjB,MAAX,EAA7D;AACA5c,0BAAKyE,IAAL,CAAUC,MAAV,CAAiB1E,KAAK0B,CAAtB,EAAyB1B,KAAK+B,CAA9B,EAAiC,GAAjC;AACA,yBAAIH,QAAQT,SAASnB,KAAKD,OAAL,CAAakR,MAAb,GAAsBjR,KAAKD,OAAL,CAAaiR,QAA5C,CAAZ;AACA;AACAhR,0BAAKiD,IAAL,CAAUC,SAAV,CAAoB,0BAApB,EACSO,IADT,CACc,GADd,EACmB,UAASlB,CAAT,EAAYqB,CAAZ,EAAe;AAAE,gCAAO5D,KAAK0B,CAAL,CAAOa,EAAE0U,KAAT,CAAP;AAAyB,sBAD7D;AAEQ;AACA;AACA;AACA;AACA;AACA;AACX,kBAhBJ,CAAb;;AAkBA,qBAAIrV,QAAQT,SAASnB,KAAKD,OAAL,CAAakR,MAAb,GAAsBjR,KAAKD,OAAL,CAAaiR,QAA5C,CAAZ;;AAEA,qBAAI3N,QAAQrD,KAAKO,UAAjB;;AAEAP,sBAAKsK,GAAL,CAAS7G,IAAT,CAAc,QAAd,EAAwBzD,KAAKuB,MAAL,GAAcvB,KAAK0d,cAA3C;;AAEA1d,sBAAKsK,GAAL,CAASpH,SAAT,CAAmB,qBAAnB,EAA0CE,MAA1C;AACApD,sBAAKsK,GAAL,CAASpH,SAAT,CAAmB,uCAAnB,EAA4DE,MAA5D;;AAEA,qBAAI4a,WAAWhe,KAAKsK,GAAL,CAAS9G,MAAT,CAAgB,GAAhB,EACEC,IADF,CACO,OADP,EACgB,oBADhB;AAEC;AAFD,kBAGEA,IAHF,CAGO,WAHP,EAGoB,eAAezD,KAAK2d,cAAL,CAAoBtc,IAAnC,GAA0C,GAA1C,GAAgDrB,KAAK2d,cAAL,CAAoBnc,GAApE,GAA0E,GAH9F,CAAf;;AAKA,qBAAIuf,gBAAgB/C,SAASxa,MAAT,CAAgB,GAAhB,EACKC,IADL,CACU,OADV,EACmB,mDADnB,CAApB;AAEwB;;AAExB/C,sBAAKkO,OAAL,CAAa,UAAS8R,KAAT,EAAgBjH,KAAhB,EAAuB;AAChC,yBAAI,CAACiH,MAAMhb,MAAX,EAAmB;;AAEnBqb,mCAAc7d,SAAd,CAAwB,iCAAxB,EACKxC,IADL,CACUggB,MAAMlZ,KADhB,EACuBjE,KADvB,GAEKC,MAFL,CAEY,UAAUjB,CAAV,EAAaqB,CAAb,EAAgB;AACpB,gCAAOod,SAASC,eAAT,CAAyBtf,GAAGuf,EAAH,CAAMC,MAAN,CAAa7W,GAAtC,EAA2C/H,EAAE2U,GAAF,IAAS,cAAT,GAA0B,MAA1B,GAAmC,QAA9E,CAAP;AACH,sBAJL,EAKKzT,IALL,CAKU,OALV,EAKmB,yBALnB;AAMI;AANJ,sBAOKA,IAPL,CAOU,GAPV,EAOe,UAASlB,CAAT,EAAYqB,CAAZ,EAAe;AAAE,gCAAO5D,KAAK2T,SAAL,CAAepR,EAAE0U,KAAjB,CAAP;AAAiC,sBAPjE,EAQKxT,IARL,CAQU,GARV,EAQe,UAASlB,CAAT,EAAYqB,CAAZ,EAAe;AAAE,gCAAO5D,KAAKqhB,gBAAL,CAAsB9e,CAAtB,EAAyBqB,CAAzB,EAA6B6V,KAA7B,CAAP;AAA6C,sBAR7E;AASI;AACA;AACA;AAXJ,sBAYKhW,IAZL,CAYU,OAZV,EAYmB,UAAUlB,CAAV,EAAaqB,CAAb,EAAgB;AAC3B,gCAAO5D,KAAK2T,SAAL,CAAepR,EAAE2U,GAAjB,IAAwBlX,KAAK2T,SAAL,CAAepR,EAAE0U,KAAjB,CAA/B;AACH,sBAdL,EAeKxT,IAfL,CAeU,IAfV,EAegB,UAAUlB,CAAV,EAAaqB,CAAb,EAAgB;AACxB,gCAAO5D,KAAKqhB,gBAAL,CAAsB9e,CAAtB,EAAyBqB,CAAzB,EAA4B6V,KAA5B,IAAqCzZ,KAAKD,OAAL,CAAagT,UAAb,GAA0B,CAAtE;AACH,sBAjBL;AAkBI;AAlBJ,sBAmBKtP,IAnBL,CAmBU,IAnBV,EAmBgB,UAASlB,CAAT,EAAYqB,CAAZ,EAAe;AAAE,gCAAO5D,KAAK2T,SAAL,CAAepR,EAAE0U,KAAjB,CAAP;AAAiC,sBAnBlE,EAoBKxT,IApBL,CAoBU,GApBV,EAoBezD,KAAKD,OAAL,CAAagT,UAAb,GAA0B,CApBzC,EAqBKtP,IArBL,CAqBU,QArBV,EAqBoBzD,KAAKD,OAAL,CAAagT,UAAb,GAA0B,CArB9C,EAsBKpP,KAtBL,CAsBW,MAtBX,EAsBmBN,MAAMoW,KAAN,CAtBnB;AAuBH,kBA1BD;;AA6BAsH,+BAAcvd,MAAd,CAAqB,GAArB,EACKC,IADL,CACU,OADV,EACmB,kBADnB,EAEKA,IAFL,CAEU,WAFV,EAEuB,iBAAiBzD,KAAK0d,cAAtB,GAAuC,GAF9D,EAGK3a,IAHL,CAGU/C,KAAK6T,aAHf;;AAKA;AACAkN,+BAAcvd,MAAd,CAAqB,GAArB,EACKC,IADL,CACU,OADV,EACmB,mBADnB,EAEKV,IAFL,CAEU/C,KAAK6d,KAFf,EAGK3a,SAHL,CAGe,MAHf,EAIKO,IAJL,CAIU,QAJV,EAIoBzD,KAAK0d,cAJzB;AAMH;AACJ;;AAED;;;;;;yCAGgB;AACZ,iBAAI1d,OAAO,IAAX;;AAEA,oBAAOA,KAAKiD,IAAL,CACMC,SADN,CACgB,0BADhB,CAAP;AAEH;;AAED;;;;;;;6CAIoB;AAChB,iBAAIlD,OAAU,IAAd;AAAA,iBACI4F,WAAU5F,KAAKwhB,aAAL,EADd;AAAA,iBAEI7b,eAAsB3F,KAAKyF,KAAL,CAAW1F,OAFrC;AAAA,iBAGIyF,cAAsBxF,KAAKyF,KAAL,CAAWC,MAHrC;AAAA,iBAIII,sBAAsBH,aAAaI,WAAb,CAAyB5F,QAJnD;AAAA,iBAKI6F,qBAAsBL,aAAaM,UAAb,CAAwB9F,QALlD;AAAA,iBAMI+F,kBAAsBlG,KAAKmG,KAAL,CAAWhG,QANrC;;AAQA,iBAAIiG,UAAU,iBAAYpG,KAAKD,OAAL,CAAaqG,OAAzB,CAAd;;AAEA;AACApG,kBAAKqG,YAAL,GAAoB;AAChB,0BAAS,eAAS9D,CAAT,EAAYqB,CAAZ,EAAe;AACpB,yBAAI,aAAOd,UAAP,CAAkBoD,eAAlB,CAAJ,EAAwC;AACpCA,yCAAgBnD,IAAhB,CAAqB,IAArB,EAA2BR,CAA3B;AACH;AACJ,kBALe;;AAOhB,8BAAa,mBAASA,CAAT,EAAYqB,CAAZ,EAAe;AACxB,yBAAI,CAAC4B,WAAL,EAAkB;;AAElB,yBAAI,aAAO1C,UAAP,CAAkBgD,mBAAlB,CAAJ,EAA4C;AACxCA,6CAAoB/C,IAApB,CAAyB,IAAzB,EAA+BR,CAA/B;AACH;;AAEDZ,wBAAGiF,MAAH,CAAU,IAAV,EAAgBjD,KAAhB,CAAsB,MAAtB,EAA8B,UAAUpB,CAAV,EAAaqB,CAAb,EAAgB;AAAE,gCAAO5D,KAAK8G,eAAL,CAAqBvE,EAAEc,KAAF,IAAWA,MAAMO,CAAN,CAAhC,CAAP;AAAmD,sBAAnG;;AAEAwC,6BAAQW,IAAR,CAAaxE,CAAb,EAAgBvC,IAAhB,EAAsB,WAAtB;AACH,kBAjBe;;AAmBhB,6BAAY,kBAASuC,CAAT,EAAYqB,CAAZ,EAAe;AACvB,yBAAI,CAAC4B,WAAL,EAAkB;;AAElB,yBAAI,aAAO1C,UAAP,CAAkBkD,kBAAlB,CAAJ,EAA2C;AACvCA,4CAAmBjD,IAAnB,CAAwB,IAAxB,EAA8BR,CAA9B;AACH;;AAEDZ,wBAAGiF,MAAH,CAAU,IAAV,EAAgBjD,KAAhB,CAAsB,MAAtB,EAA8B,UAAUpB,CAAV,EAAaqB,CAAb,EAAgB;AAAE,gCAAOrB,EAAEc,KAAF,IAAWA,MAAMO,CAAN,CAAlB;AAA6B,sBAA7E;;AAEAwC,6BAAQW,IAAR,CAAaxE,CAAb,EAAgBvC,IAAhB,EAAsB,UAAtB;AACH;AA7Be,cAApB;;AAgCA4F,sBAASoB,EAAT,CAAYhH,KAAKqG,YAAjB;AACH;;;iCAEO9D,C,EAAGqB,C,EAAGhC,K,EAAO;AACjB,iBAAI5B,OAAO,IAAX;AACA,oBAAO,CAACuC,EAAE0U,KAAF,GAAUjX,KAAKD,OAAL,CAAaiR,QAAxB,IAAoCpP,KAA3C;AACH;;;0CAEgBW,C,EAAGqB,C,EAAG6V,K,EAAO;AAC1B,iBAAIzZ,OAAO,IAAX;;AAEA,iBAAIugB,YAAYvgB,KAAKugB,SAArB;;AAEA,iBAAIvgB,KAAKD,OAAL,CAAamgB,KAAjB,EAAwB;AACpB,wBAAO,CAAClgB,KAAKD,OAAL,CAAagT,UAAb,GAA0B/S,KAAKD,OAAL,CAAaogB,UAAxC,IAAsDI,UAAU9G,KAAV,CAA7D;AACH;AACD,oBAAO,CAAP;AACH;;AAED;;AAEA;;;;AAIA;;;;;;;;;4BAMGxS,S,EAAW9G,Q,EAAU;AACpB,oHAAS8G,SAAT,EAAoB9G,QAApB;;AAEA,iBAAIH,OAAO,IAAX;AACA,iBAAI4F,WAAc5F,KAAKwhB,aAAL,EAAlB;;AAEA;AACA,iBAAInb,eAAe;AACf,gCAAe,oBAAS9D,CAAT,EAAY;AACvB,yBAAI,aAAOO,UAAP,CAAkB3C,QAAlB,CAAJ,EAAiC;AAC7BA,kCAAS4C,IAAT,CAAc,IAAd,EAAoBR,CAApB;AACH;AACJ,kBALc;AAMf,oCAAmB,wBAASA,CAAT,EAAY;AAC3B,yBAAI,aAAOO,UAAP,CAAkB3C,QAAlB,CAAJ,EAAiC;AAC7BA,kCAAS4C,IAAT,CAAc,IAAd,EAAoBR,CAApB;AACH;AACJ,kBAVc;AAWf,mCAAkB,uBAASA,CAAT,EAAY;AAC1B,yBAAI,aAAOO,UAAP,CAAkB3C,QAAlB,CAAJ,EAAiC;AAC7BA,kCAAS4C,IAAT,CAAc,IAAd,EAAoBR,CAApB;AACH;AACJ;AAfc,cAAnB;;AAkBA,iBAAI2E,YAAYD,YAAY,QAA5B;;AAEArB,sBAASoB,EAAT,CAAYE,SAAZ,EAAuBb,aAAaa,SAAb,CAAvB;AACH;;AAED;;;;;;gCAGO;AACH;;AAEA,iBAAIlH,OAAO,IAAX;;AAEAA,kBAAKmH,YAAL,CAAkBnH,KAAKC,MAAvB,EAA+B,UAASS,IAAT,EAAe;AAC1C,qBAAI+D,OAAU,gBAASzE,KAAKD,OAAL,CAAa0E,IAAtB,EAA4BzE,IAA5B,EAAkCA,KAAKmB,KAAL,GAAanB,KAAKoB,MAAL,CAAYC,IAAzB,GAAgCrB,KAAKoB,MAAL,CAAYE,KAA9E,EAAqF,CAACtB,KAAKD,OAAL,CAAagT,UAAb,GAA0B/S,KAAKD,OAAL,CAAaogB,UAAxC,IAAsDngB,KAAKsgB,QAAhJ,CAAd;AACA,qBAAIlZ,QAAU,gBAAUpH,KAAKD,OAAL,CAAaqH,KAAvB,EAA8BpH,IAA9B,CAAd;AACA,qBAAIqH,SAAU,gBAAWrH,KAAKD,OAAL,CAAasH,MAAxB,EAAgCrH,IAAhC,EAAsCA,KAAKO,UAA3C,EAAuDG,IAAvD,CAAd;;AAEAV,sBAAKyE,IAAL,GAAYA,IAAZ;AACAzE,sBAAKoH,KAAL,GAAaA,KAAb;AACApH,sBAAKqH,MAAL,GAAcA,MAAd;;AAEA;AACArH,sBAAKoH,KAAL,CAAWL,IAAX;;AAEA;AACA/G,sBAAKyE,IAAL,CAAUsC,IAAV;;AAEA/G,sBAAK0E,MAAL,CAAYhE,IAAZ;AACAV,sBAAK8T,cAAL,CAAoBpT,IAApB;AACAV,sBAAKoE,iBAAL;AACH,cAlBD;AAmBH;;AAED;;;;;;;;mCAKUmD,G,EAAKC,K,EAAO;AAClB,2HAAgBD,GAAhB,EAAqBC,KAArB;;AAEA,iBAAIxH,OAAO,IAAX;;AAEA,0BAAOyH,GAAP,CAAWF,GAAX,EAAgBC,KAAhB,EAAuBxH,KAAKD,OAA5B;;AAEAC,kBAAKmH,YAAL,CAAkBnH,KAAKD,OAAvB;AACH;;AAED;;;;;;;;oCAKW2H,O,EAASC,a,EAAe;AAC/B,iBAAI3H,OAAO,IAAX;;AAEA,iBAAI4H,SAAS,EAAb;;AAEA,iBAAI,CAAC,aAAOC,OAAP,CAAeF,aAAf,CAAL,EAAoC;;AAEhCC,wBAAOlH,IAAP,GAAc;AACVoH,4BAAOJ,OADG;AAEVK,2BAAMJ;AAFI,kBAAd;AAKH,cAPD,MAOO;;AAEHC,wBAAOlH,IAAP,GAAc;AACVoH,4BAAOJ;AADG,kBAAd;AAIH;;AAED;AACA1H,kBAAKgI,gBAAL,CAAsBJ,MAAtB,EAA8B,UAASlH,IAAT,EAAe;AACzCV,sBAAK0E,MAAL,CAAY1E,KAAKW,UAAjB;AACAX,sBAAK8T,cAAL,CAAoB9T,KAAKW,UAAzB;;AAEA;AACAX,sBAAKyE,IAAL,CAAUC,MAAV,CAAiB1E,KAAK0B,CAAtB,EAAyB1B,KAAK+B,CAA9B,EAAiC,GAAjC;AACH,cAND;AAOH;AACD;;;;6BAlpBe;AACX,oBAAO,KAAK0f,SAAZ;AACH,U;;AA6BD;;AAEA;;;2BAGavZ,G,EAAK;AACd,iBAAIA,GAAJ,EAAS;AACL,sBAAKuZ,SAAL,GAAiBvZ,GAAjB;AACH;AACJ;;;6BApCe;AACZ,oBAAO,KAAKqX,UAAZ;AACH,U;2BAoCarX,G,EAAK;AACf,iBAAIA,GAAJ,EAAS;AACL,sBAAKqX,UAAL,GAAkBrX,GAAlB;AACH;AACJ;;;6BAtCmB;AAChB,oBAAO,KAAK0X,cAAZ;AACH,U;2BAsCiB1X,G,EAAK;AACnB,iBAAIA,GAAJ,EAAS;AACL,sBAAK0X,cAAL,GAAsB1X,GAAtB;AACH;AACJ;;;6BAxCmB;AAChB,oBAAO,KAAKuX,cAAZ;AACH,U;2BAwCiBvX,G,EAAK;AACnB,iBAAIA,GAAJ,EAAS;AACL,sBAAKuX,cAAL,GAAsBvX,GAAtB;AACH;AACJ;;;6BA1CoB;AACjB,oBAAO,KAAKwX,eAAZ;AACH,U;2BA0CkBxX,G,EAAK;AACpB,iBAAIA,GAAJ,EAAS;AACL,sBAAKwX,eAAL,GAAuBxX,GAAvB;AACH;AACJ;;;6BA5CoB;AACjB,oBAAO,KAAKyX,eAAZ;AACH,U;2BA4CkBzX,G,EAAK;AACpB,iBAAIA,GAAJ,EAAS;AACL,sBAAKyX,eAAL,GAAuBzX,GAAvB;AACH;AACJ;;;6BA9CW;AACR,oBAAO,KAAK2X,MAAZ;AACH,U;2BA8CS3X,G,EAAK;AACX,iBAAIA,GAAJ,EAAS;AACL,sBAAK2X,MAAL,GAAc3X,GAAd;AACH;AACJ;;;6BAhDe;AACZ,oBAAO,KAAKwZ,UAAZ;AACH,U;2BAgDaxZ,G,EAAK;AACf,iBAAIA,GAAJ,EAAS;AACL,sBAAKwZ,UAAL,GAAkBxZ,GAAlB;AACH;AACJ;;;;;;mBA1GgBvI,Q;;;;;;;;;;;;;;ACXrB;;;;AACA;;;;AACA;;;;;;;;KACqBC,G;AACjB,kBAAYG,OAAZ,EAAqB;AAAA;;AACjB,aAAIC,OAAU,IAAd;AACA,aAAIC,SAAU;AACV;AACAoI,iBAAI,MAFM;AAGV;AACA;AACA;AACAsZ,qBAAQ;AACJpd,uBAAM,MADF;AAEJ4I,yBAAQ;AACJ3K,2BAAM;AADF;AAFJ,cANE;AAYVof,mBAAM;AACFC,sBAAK,CADH;AAEFC,sBAAK,CAFH;AAGFC,uBAAM;AAHJ,cAZI;AAiBVrhB,mBAAM,IAjBI;AAkBV0F,sBAAS;AACL8C,yBAAQ;AADH;AAlBC,UAAd;;AAuBAlJ,cAAKmK,QAAL,GAAgB,YAAO/J,SAAP,CAAiBH,MAAjB,EAAyBF,OAAzB,CAAhB;AACAC,cAAKwL,WAAL,GAAwBxL,KAAKmK,QAAL,CAAczJ,IAAtC;AACAV,cAAKgiB,aAAL;AACH;;AAED;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;;;AAmEA;;AAGA;;;;yCAIgB;AACZ,iBAAIhiB,OAAO,IAAX;;AAEA;AACAA,kBAAKiiB,QAAL,GAAgB,EAAhB;AACA;AACA;AACA;AACAjiB,kBAAKkiB,MAAL,GAAc,IAAIC,GAAGhV,MAAH,CAAUiV,MAAd,CAAqB,EAArB,CAAd;AACApiB,kBAAKqiB,aAAL,GAAqB,EAArB;AACA;;AAEA;AACAriB,kBAAKsiB,SAAL;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,iBAAIC,QAAQvB,SAASwB,aAAT,CAAuB,KAAvB,CAAZ;AACAD,mBAAMla,EAAN,GAAW,YAAX;AACAka,mBAAME,SAAN,GAAkB,qEAAlB;AACAzB,sBAAS/d,IAAT,CAAcyf,WAAd,CAA0BH,KAA1B;AACH;;;gCAEM;AACH,iBAAIviB,OAAO,IAAX;AACA,iBAAI4hB,OAAO5hB,KAAKD,OAAL,CAAa6hB,IAAxB;AAAA,iBACIvZ,KAAOrI,KAAKD,OAAL,CAAasI,EADxB;;AAGArI,kBAAK2iB,MAAL,GAAc,IAAIR,GAAGS,IAAP,CAAY;AACtBC,yBAAQV,GAAGW,IAAH,CAAQC,UAAR,CAAmB,CAACnB,KAAKE,GAAN,EAAWF,KAAKC,GAAhB,CAAnB,CADc;AAEtBE,uBAAMH,KAAKG,IAAL,GAAY,CAAZ,GAAgBH,KAAKG,IAArB,GAA4B,CAFZ;AAGtBiB,0BAAS;AAHa,cAAZ,CAAd;AAKAhjB,kBAAKijB,KAAL,GAAa,IAAId,GAAGviB,GAAP,CAAW;AACpBsN,yBAAQ7E,EADY;AAEpBsZ,yBAAQ3hB,KAAKiiB,QAFO;AAGpBL,uBAAM5hB,KAAK2iB,MAHS;AAIpBO,+BAAef,GAAGgB,WAAH,CAAeC,QAAf,CAAwB,EAACC,iBAAiB,KAAlB,EAAxB;AAJK,cAAX,CAAb;;AAOA;AACArjB,kBAAKsjB,WAAL,GAAmB,IAAInB,GAAGoB,KAAH,CAASnB,MAAb,CAAoB;AACnCjV,yBAAQnN,KAAKkiB,MADsB;AAEnC5f,sBAAKtC,KAAKijB;AAFyB,cAApB,CAAnB;AAIA;;AAEA;AACAjjB,kBAAKwjB,OAAL,GAAe,IAAIrB,GAAGsB,OAAP,CAAe;AAC1BC,8BAAa,eADa;AAE1BxT,0BAAS8Q,SAAS2C,cAAT,CAAwB,YAAxB;AAFiB,cAAf,CAAf;;AAKA;AACA3jB,kBAAKijB,KAAL,CAAWW,UAAX,CAAsB5jB,KAAKwjB,OAA3B;AACA;;AAEA;AACAxjB,kBAAK6jB,aAAL,GAAqB,IAAI1B,GAAGoB,KAAH,CAASnB,MAAb,CAAoB;AACrCjV,yBAAQ,IAAIgV,GAAGhV,MAAH,CAAUiV,MAAd,EAD6B;AAErC9f,sBAAKtC,KAAKijB,KAF2B;AAGrCtf,wBAAO,IAAIwe,GAAGxe,KAAH,CAASmgB,KAAb,CAAmB;AACtBlI,6BAAQ,IAAIuG,GAAGxe,KAAH,CAASogB,MAAb,CAAoB;AACxB1gB,gCAAO,kBADiB;AAExBlC,gCAAO;AAFiB,sBAApB,CADc;AAKtBwa,2BAAM,IAAIwG,GAAGxe,KAAH,CAASqgB,IAAb,CAAkB;AACpB3gB,gCAAO;AADa,sBAAlB;AALgB,kBAAnB;AAH8B,cAApB,CAArB;AAaA;AACA;AACArD,kBAAK0E,MAAL,CAAY1E,KAAKuY,UAAjB;AACA;AACAvY,kBAAKoE,iBAAL;AAEH;AACD;;AAEA;;;;;;;;qCAKYrE,O,EAAQ;AAChB,iBAAIC,OAAO,IAAX;AACA,iBAAI,YAAO6H,OAAP,CAAe9H,OAAf,CAAJ,EAA6B;;AAE7B,iBAAIwE,OAAOxE,QAAQwE,IAAR,IAAgB,MAA3B;AAAA,iBACI4I,SAASpN,QAAQoN,MAAR,IAAkB,EAAC3K,MAAM,KAAP,EAD/B;AAEI;;AAEJ,iBAAI+gB,QAAQ,IAAIpB,GAAGoB,KAAH,CAAShf,IAAT,CAAJ,EAAZ;AACAgf,mBAAMU,SAAN,CAAgBjkB,KAAKkkB,WAAL,CAAiB/W,MAAjB,CAAhB;AACA;;AAEA;AACA;AACA,iBAAIgX,iBAAiB,IAArB;AAAA,iBAA2BC,EAA3B;AACA,iBAAI;AACAA,sBAAKb,MAAMc,SAAN,EAAL;AACAD,oBAAGE,WAAH;AACH,cAHD,CAIA,OAAOtZ,GAAP,EAAY;AACR,qBAAI;AACAoZ,0BAAKb,MAAMc,SAAN,GAAkBA,SAAlB,EAAL;AACAD,wBAAGE,WAAH;AACH,kBAHD,CAIA,OAAOtZ,GAAP,EAAY;AACRmZ,sCAAiB,KAAjB;AACH;AACJ;AACD,iBAAIA,cAAJ,EAAoB;AAChB,qBAAII,aAAa,SAAbA,UAAa,CAASC,OAAT,EAAkB;AAC/B,yBAAIC,SAAS,EAAb;AACAD,6BAAQE,OAAR,GAAkB9V,OAAlB,CAA0B,UAAS6L,CAAT,EAAY;AAClCgK,gCAAOhK,CAAP,IAAY+J,QAAQG,aAAR,GAAwBlK,CAAxB,CAAZ;AACH,sBAFD;AAGAgK,4BAAO,IAAP,IAAeD,QAAQI,KAAR,EAAf;AACA,4BAAOH,MAAP;AACH,kBAPD;AAQA,qBAAI,CAAC,YAAO5c,OAAP,CAAe9H,QAAQ4D,KAAvB,CAAL,EAAoC;AAChC,yBAAI;AACA3D,8BAAK6kB,QAAL,CAAc,EAACC,KAAKvB,MAAMc,SAAN,EAAN,EAAyB1gB,OAAO5D,QAAQ4D,KAAxC,EAAd;AACH,sBAFD,CAGA,OAAOqH,GAAP,EAAY;AACR,6BAAI;AACAhL,kCAAK6kB,QAAL,CAAc,EAACC,KAAKV,EAAN,EAAUzgB,OAAO5D,QAAQ4D,KAAzB,EAAd;AACH,0BAFD,CAGA,OAAOqH,GAAP,EAAY;AACR,iCAAI;AACAhL,sCAAK6kB,QAAL,CAAc,EAACC,KAAKvB,KAAN,EAAa5f,OAAO5D,QAAQ4D,KAA5B,EAAd;AACH,8BAFD,CAGA,OAAOqH,GAAP,EAAY;AACR,uCAAM,kCAAN;AACH;AACJ;AAEJ;AACJ;AACD;AACAoZ,oBAAGW,IAAH,CAAQ,QAAR,EAAkB,UAASzP,CAAT,EAAY;AAC1B,yBAAI8O,GAAGY,QAAH,MAAiB,OAArB,EAA8B;AAC1B,6BAAIC,OAAOb,GAAGE,WAAH,EAAX;AACAtkB,8BAAKqiB,aAAL,CAAmBvT,IAAnB,CAAwByU,MAAMc,SAAN,EAAxB;AACA;;AAEAY,8BAAKrW,OAAL,CAAa,UAASsW,CAAT,EAAY;AACrBA,+BAAEzd,GAAF,CAAM,MAAN,EAAc8c,WAAWW,CAAX,CAAd;AACAA,+BAAEzd,GAAF,CAAM,MAAN,EAAc,YAAd;AACA;AACA,iCAAI,YAAO3E,UAAP,CAAkB/C,QAAQolB,SAA1B,KAAwC,CAAC,YAAOtd,OAAP,CAAe9H,QAAQW,IAAvB,CAA7C,EAA2E;AACvE,qCAAIA,OAAYX,QAAQW,IAAxB;AAAA,qCACIykB,YAAYplB,QAAQolB,SADxB;AAEA,qCAAI,YAAO7Y,OAAP,CAAe5L,IAAf,CAAJ,EAA0B;AACtB,0CAAK,IAAIkD,IAAI,CAAb,EAAgBA,IAAIlD,KAAKM,MAAzB,EAAiC4C,GAAjC,EAAsC;AAClC,6CAAIuhB,UAAUD,CAAV,EAAaxkB,KAAKkD,CAAL,CAAb,CAAJ,EAA2B;AACvB,kDAAK,IAAIwhB,CAAT,IAAc1kB,KAAKkD,CAAL,CAAd,EAAuB;AACnBshB,mDAAE5X,GAAF,CAAM,MAAN,EAAc8X,CAAd,IAAmB1kB,KAAKkD,CAAL,EAAQwhB,CAAR,CAAnB;AACH;AACD;AACH;AACJ;AACJ,kCATD,MAWI,IAAID,UAAUD,CAAV,EAAaxkB,IAAb,CAAJ,EAAwB;AACpB,0CAAK,IAAIkD,CAAT,IAAclD,IAAd,EAAoB;AAChBwkB,2CAAE5X,GAAF,CAAM,MAAN,EAAc1J,CAAd,IAAmBlD,KAAKkD,CAAL,CAAnB;AACH;AACJ;AACR;AACJ,0BAxBD;AAyBH;AACJ,kBAhCD;AAiCH;;AAED5D,kBAAKiiB,QAAL,CAAcnT,IAAd,CAAmByU,KAAnB;;AAEA,oBAAOA,KAAP;AACH;;AAED;;;;;;qCAGY;AACR,iBAAIvjB,OAAO,IAAX;AACA,iBAAI2hB,SAAS3hB,KAAKD,OAAL,CAAa4hB,MAA1B;;AAEA,iBAAIA,kBAAkB5U,KAAtB,EAA6B;AACzB4U,wBAAO/S,OAAP,CAAe,UAASa,CAAT,EAAY7L,CAAZ,EAAe;AAC1B5D,0BAAKqlB,WAAL,CAAiB,EAAC9gB,MAAMkL,EAAElL,IAAT,EAAe4I,QAAQsC,EAAEtC,MAAzB,EAAiCxJ,OAAO8L,EAAE9L,KAA1C,EAAiDwhB,WAAW1V,EAAE0V,SAA9D,EAAyEzkB,MAAM+O,EAAE/O,IAAjF,EAAjB;AACH,kBAFD;AAGH,cAJD,MAKK;AACDV,sBAAKqlB,WAAL,CAAiB,EAAC9gB,MAAMod,OAAOpd,IAAd,EAAoB4I,QAAQwU,OAAOxU,MAAnC,EAA2CxJ,OAAOge,OAAOhe,KAAzD,EAAgEwhB,WAAWxD,OAAOwD,SAAlF,EAA6FzkB,MAAMihB,OAAOjhB,IAA1G,EAAjB;AACH;AACJ;;AAED;;;;;;;;qCAKYmO,C,EAAE;AACV,iBAAI1B,SAASpJ,SAAb;AACA,qBAAQ8K,EAAErM,IAAV;AACI,sBAAK,UAAL;AACI2K,8BAAS,IAAIgV,GAAGhV,MAAH,CAAUmY,QAAd,CAAuB;AAC5B/d,8BAAKsH,EAAEtH,GADqB;AAE5Bge,qCAAY1W,EAAE0W,UAAF,IAAgB;AAFA,sBAAvB,CAAT;AAIA;AACJ,sBAAK,QAAL;AACIpY,8BAAS,IAAIgV,GAAGhV,MAAH,CAAUqY,MAAd,CAAqB;AAC1BjC,gCAAO1U,EAAE0U,KAAF,IAAW;AADQ,sBAArB,CAAT;AAGA;AACJ;AACA,sBAAK,UAAL;AACIpW,8BAAS,IAAIgV,GAAGhV,MAAH,CAAUsY,QAAd,CAAuB;AAC5Blc,8BAAKsF,EAAEtF,GADqB;AAE5Bmc,sCAAa7W,EAAE6W,WAAF,IAAiB;AAFF,sBAAvB,CAAT;AAIA;AACJ,sBAAK,gBAAL;AACIvY,8BAAS,IAAIgV,GAAGhV,MAAH,CAAUwY,cAAd,CAA6B;AAClCpc,8BAAKsF,EAAEtF;AAD2B,sBAA7B,CAAT;AAGA;AACJ,sBAAK,QAAL;AACI4D,8BAAS,IAAIgV,GAAGhV,MAAH,CAAUiV,MAAd,CAAqB;AAC1B7Y,8BAAKsF,EAAEtF,GADmB;AAE1BL,iCAAQ2F,EAAE3F,MAAF,KAAanF,SAAb,GAAyB,IAAzB,GAAgC,IAAIoe,GAAGjZ,MAAH,CAAU2F,EAAE3F,MAAZ,CAAJ,CAAwB;AAC5D0c,4CAAe/W,EAAE+W,aAAF,IAAmB;AAD0B,0BAAxB;AAFd,sBAArB,CAAT;AAMA;AACJ,sBAAK,SAAL;AACIzY,8BAAS,IAAIgV,GAAGhV,MAAH,CAAU0Y,OAAd,CAAsB;AAC3BC,mCAAUjX,EAAEiX,QAAF,IAAc,EADG;AAE3B3Y,iCAAQ,KAAK+W,WAAL,CAAiBrV,EAAE1B,MAAnB;AAFmB,sBAAtB,CAAT;AAIA;AACJ,sBAAK,aAAL;AACIA,8BAAS,IAAIgV,GAAGhV,MAAH,CAAU4Y,WAAd,CAA0B;AAC/B5Y,iCAAQ,KAAK+W,WAAL,CAAiBrV,EAAE1B,MAAnB,CADuB;AAE/B;AACAxJ,gCAAO,IAAIwe,GAAGxe,KAAH,CAASmgB,KAAb,CAAmB;AACtBnI,mCAAM,IAAIwG,GAAGxe,KAAH,CAASqgB,IAAb,CAAkB;AACpB3gB,wCAAO;AADa,8BAAlB,CADgB;AAItBuY,qCAAQ,IAAIuG,GAAGxe,KAAH,CAASogB,MAAb,CAAoB;AACxB1gB,wCAAO,SADiB;AAExBlC,wCAAO;AAFiB,8BAApB;AAJc,0BAAnB;AAHwB,sBAA1B,CAAT;AAaA;AACJ;AACIgM,8BAAS,IAAIgV,GAAGhV,MAAH,CAAU6Y,GAAd,EAAT;AACA;;AAvDR;;AA2DA,oBAAO7Y,MAAP;AACH;;AAED;;;;;;6CAGmB;AACf,iBAAInN,OAAO,IAAX;AACA,iBAAMimB,WAAW,EAAjB;AAAA,iBAAqBC,YAAY,EAAjC;AAAA,iBAAqCC,UAAU,EAA/C;AAAA,iBAAmDC,WAAW,IAA9D;AAAA,iBAAoEC,iBAAiB,GAArF;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA,iBAAIC,kBAAkB,SAAlBA,eAAkB,CAAStW,CAAT,EAAY;AAC9B,wBAAOmS,GAAGW,IAAH,CAAQyD,SAAR,CAAkBC,UAAUxW,CAAV,CAAlB,EAAgC,WAAhC,EAA6C,WAA7C,CAAP;AACH,cAFD;AAGA,iBAAIwW,YAAY,SAAZA,SAAY,CAASxW,CAAT,EAAY;AACxB,wBAAOmS,GAAGvF,MAAH,CAAU4J,SAAV,CAAoBxW,EAAEyW,WAAF,GAAgBC,SAAhB,EAApB,CAAP;AACH,cAFD;AAGA,iBAAIC,uBAAuB,SAAvBA,oBAAuB,CAAStY,CAAT,EAAY;AACnC,wBAAO8T,GAAGW,IAAH,CAAQyD,SAAR,CAAkBlY,CAAlB,EAAqB,WAArB,EAAkC,WAAlC,CAAP;AACH,cAFD;AAGA;;;;AAIA,iBAAIuY,eAAe,SAAfA,YAAe,CAASpC,OAAT,EAAiB;AAChC,qBAAIxkB,KAAK2iB,MAAL,CAAY6D,SAAZ,GAAwB,CAAxB,KAA8BA,UAAUhC,OAAV,EAAmB,CAAnB,CAA9B,IAAuDxkB,KAAK2iB,MAAL,CAAY6D,SAAZ,GAAwB,CAAxB,KAA8BA,UAAUhC,OAAV,EAAmB,CAAnB,CAAzF,EAAgH;;AAEhH,qBAAIqC,MAAM1E,GAAG2E,SAAH,CAAaD,GAAb,CAAiB;AACvB9hB,+BAAUqhB,QADa;AAEvBjZ,6BAASnN,KAAK2iB,MAAL,CAAY6D,SAAZ;AAFc,kBAAjB,CAAV;AAIAxmB,sBAAKijB,KAAL,CAAW8D,YAAX,CAAwBF,GAAxB;AACA7mB,sBAAK2iB,MAAL,CAAYqE,SAAZ,CAAsBR,UAAUhC,OAAV,CAAtB;AACH,cATD;AAUA;;;;AAIA,iBAAIyC,qBAAqB,SAArBA,kBAAqB,CAASzC,OAAT,EAAiB;AACtC,qBAAIzf,WAAW,IAAf;AACA,qBAAIkS,QAAQ,IAAIiD,IAAJ,GAAWgN,OAAX,EAAZ;AACA,qBAAIC,WAAJ;;AAEA,0BAASC,OAAT,CAAiB/P,KAAjB,EAAwB;AACpB,yBAAIgQ,gBAAgBhQ,MAAMgQ,aAA1B;AACA,yBAAIC,aAAajQ,MAAMiQ,UAAvB;AACA,yBAAIC,YAAY/C,QAAQiC,WAAR,GAAsBe,KAAtB,EAAhB;AACA,yBAAIC,UAAUH,WAAW9d,IAAX,GAAkByN,KAAhC;AACA,yBAAIyQ,eAAeD,UAAU1iB,QAA7B;AACA;AACA,yBAAI0P,SAAS0N,GAAGwF,MAAH,CAAUC,OAAV,CAAkBF,YAAlB,IAAkC,EAAlC,GAAuC,CAApD;AACA,yBAAI7L,UAAUsG,GAAGwF,MAAH,CAAUC,OAAV,CAAkB,IAAIF,YAAtB,CAAd;;AAEA,yBAAI/jB,QAAQ,IAAIwe,GAAGxe,KAAH,CAASmgB,KAAb,CAAmB;AAC3B+D,gCAAO,IAAI1F,GAAGxe,KAAH,CAASmkB,MAAb,CAAoB;AACvBrT,qCAAQA,MADe;AAEvBsT,0CAAa,KAFU;AAGvBnM,qCAAQ,IAAIuG,GAAGxe,KAAH,CAASogB,MAAb,CAAoB;AACxB1gB,wCAAO,qBAAqBwY,OAArB,GAA+B,GADd;AAExB1a,wCAAO,OAAO0a;AAFU,8BAApB;AAHe,0BAApB;AADoB,sBAAnB,CAAZ;;AAWAwL,mCAAcxC,QAAd,CAAuBlhB,KAAvB;AACA0jB,mCAAcW,YAAd,CAA2BT,SAA3B;AACA,yBAAIE,UAAU1iB,QAAd,EAAwB;AACpBod,4BAAG8F,UAAH,CAAcC,OAAd,CAAsBf,WAAtB;AACA;AACH;AACD;AACAnnB,0BAAKijB,KAAL,CAAWkF,MAAX;AACH;AACDhB,+BAAcnnB,KAAKijB,KAAL,CAAWjc,EAAX,CAAc,aAAd,EAA6BogB,OAA7B,CAAd;AACH,cApCD;AAqCA;;;;;AAKA,iBAAIgB,uBAAuB,SAAvBA,oBAAuB,CAASpY,CAAT,EAAY;AACnC,qBAAI6S,SAAS8D,qBAAqB3mB,KAAK2iB,MAAL,CAAY6D,SAAZ,EAArB,CAAb;AACA,qBAAI6B,eAAe/B,gBAAgBtW,CAAhB,CAAnB;AACA,wBAAO,CAAC9L,KAAKokB,IAAL,CAAUpkB,KAAKqkB,GAAL,CAASF,aAAa,CAAb,IAAkBxF,OAAO,CAAP,CAA3B,EAAsC,CAAtC,IAA2C3e,KAAKqkB,GAAL,CAASF,aAAa,CAAb,IAAkBxF,OAAO,CAAP,CAA3B,EAAsC,CAAtC,CAArD,CAAD,EAAkGwF,aAAa,CAAb,IAAkBxF,OAAO,CAAP,CAAnB,IAAiC,CAAlI,CAAP;AACH,cAJD;AAKA,iBAAI2F,cAAc,SAAdA,WAAc,CAAS9nB,IAAT,EAAe;AAC7B,qBAAI,YAAOmH,OAAP,CAAenH,IAAf,CAAJ,EAA0B;AAC1B,qBAAI+nB,wBAAwB,SAAxBA,qBAAwB,CAASC,MAAT,EAAiB;AAAE,4BAAOA,OAAOC,MAAP,CAAc,CAAd,EAAiBC,WAAjB,KAAiCF,OAAO/Y,KAAP,CAAa,CAAb,CAAxC;AAA0D,kBAAzG;AACA,qBAAIkZ,aAAa,SAAbA,UAAa,CAASC,MAAT,EAAiBC,IAAjB,EAAuB;AAAE,yBAAIA,QAAQ,EAAR,IAAc,YAAOlhB,OAAP,CAAekhB,IAAf,CAAd,IAAsC,YAAOnc,QAAP,CAAgBmc,IAAhB,CAA1C,EAAiE,OAAO,EAAP,CAAW,OAAO,aAAaN,sBAAsBK,MAAtB,CAAb,GAA6C,YAA7C,GAA4D,SAA5D,GAAwEC,IAAxE,GAA+E,cAAtF;AAAuG,kBAA7N;AACA,qBAAItE,SAASoE,WAAW,MAAX,EAAmBnoB,KAAK8B,IAAxB,CAAb;AAAA,qBAA4CgM,CAA5C;AACA,qBAAI,CAAC,YAAO3G,OAAP,CAAenH,KAAKsX,IAApB,CAAL,EAAgCyM,UAAWoE,WAAW,KAAX,EAAkBnoB,KAAKsX,IAAL,CAAU8J,GAAV,IAAiBphB,KAAKsX,IAAL,CAAU,CAAV,CAAnC,IAAmD6Q,WAAW,KAAX,EAAkBnoB,KAAKsX,IAAL,CAAU6J,GAAV,IAAiBnhB,KAAKsX,IAAL,CAAU,CAAV,CAAnC,CAA9D;;AAEhC,sBAAK,IAAIpU,CAAT,IAAc4K,IAAI9N,KAAK8G,KAAvB,EAA8B;AAC1Bid,+BAAUoE,WAAWjlB,CAAX,EAAc4K,EAAE5K,CAAF,CAAd,CAAV;AACH;AACD,wBAAO6gB,MAAP;AACH,cAXD;AAYA;;AAEA;AACAzkB,kBAAKijB,KAAL,CAAWjc,EAAX,CAAc,aAAd,EAA6B,UAASgiB,GAAT,EAAc;AACvC,qBAAIhZ,IAAIhQ,KAAKijB,KAAL,CAAWgG,qBAAX,CAAiCD,IAAIE,KAArC,EAA4C,UAAS1E,OAAT,EAAkBjB,KAAlB,EAAwB;AACxE,4BAAOiB,OAAP;AACH,kBAFO,CAAR;;AAIA;AACA,qBAAIxU,MAAMhQ,KAAKmpB,cAAf,EAA+B;AAC3B,yBAAInpB,KAAKmpB,cAAT,EAAyB;AACrB,6BAAInpB,KAAKmpB,cAAL,CAAoB7b,GAApB,CAAwB,MAAxB,KAAmC,YAAnC,IAAmDtN,KAAKmpB,cAAL,CAAoB7b,GAApB,CAAwB,UAAxB,CAAvD,EACItN,KAAKmpB,cAAL,CAAoBtE,QAApB,CAA6B7kB,KAAKmpB,cAAL,CAAoB7b,GAApB,CAAwB,UAAxB,CAA7B,EADJ,KAGItN,KAAK6jB,aAAL,CAAmBQ,SAAnB,GAA+B+E,aAA/B,CAA6CppB,KAAKmpB,cAAlD;AACP;AACD,yBAAInZ,CAAJ,EAAO;AACH,6BAAIqZ,SAASrZ,EAAE1C,GAAF,CAAM,UAAN,CAAb;AAAA,6BAAgCgc,cAAc,kBAA9C;AAAA,6BAAkEC,cAAc,CAAhF;AAAA,6BAAmFC,YAAY,0BAA/F;AACA,6BAAIH,MAAJ,EAAY;AACRC,2CAAcD,OAAOI,SAAP,GAAmBC,QAAnB,MAAiC,SAAjC,GAA6C,kBAA7C,GAAkE1pB,KAAK8G,eAAL,CAAqBuiB,OAAOI,SAAP,GAAmBC,QAAnB,EAArB,CAAhF;AACAH,2CAAcF,OAAOI,SAAP,GAAmBE,QAAnB,KAAgC,CAA9C;AACAH,yCAAcH,OAAOO,OAAP,GAAiBF,QAAjB,MAA+B,0BAA/B,GAA4D,0BAA5D,GAAyF1pB,KAAK8G,eAAL,CAAqBuiB,OAAOO,OAAP,GAAiBF,QAAjB,EAArB,CAAvG;AACH;AACD,6BAAIG,WAAW,IAAI1H,GAAGxe,KAAH,CAASmgB,KAAb,CAAmB;AAC9BlI,qCAAQ,IAAIuG,GAAGxe,KAAH,CAASogB,MAAb,CAAoB;AACxB1gB,wCAAOimB,WADiB;AAExBnoB,wCAAOooB;AAFiB,8BAApB,CADsB;AAK9B5N,mCAAM,IAAIwG,GAAGxe,KAAH,CAASqgB,IAAb,CAAkB;AACpB3gB,wCAAOmmB;AADa,8BAAlB;AALwB,0BAAnB,CAAf;AASA,6BAAIH,MAAJ,EACIrZ,EAAE6U,QAAF,CAAWgF,QAAX,EADJ,KAEK;AACD7pB,kCAAK6jB,aAAL,CAAmBgB,QAAnB,CAA4BgF,QAA5B;AACA7pB,kCAAK6jB,aAAL,CAAmBQ,SAAnB,GAA+ByF,UAA/B,CAA0C9Z,CAA1C;AACH;AACJ;AACDhQ,0BAAKmpB,cAAL,GAAsBnZ,CAAtB;AACH;AACD,qBAAIA,CAAJ,EAAO;AACHhQ,0BAAKijB,KAAL,CAAW8G,gBAAX,GAA8BpmB,KAA9B,CAAoCqmB,MAApC,GAA6C,SAA7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACAhqB,0BAAKwjB,OAAL,CAAayG,UAAb,GAA0BtmB,KAA1B,CAAgCumB,OAAhC,GAA0C,MAA1C;;AAEA;;AAEA,yBAAI;AACA,6BAAIlqB,KAAKD,OAAL,CAAaqG,OAAb,CAAqB8C,MAAzB,EAAiClJ,KAAKD,OAAL,CAAaqG,OAAb,CAAqB8C,MAArB,CAA4B8G,EAAE1C,GAAF,CAAM,MAAN,CAA5B;AACpC,sBAFD,CAGA,OAAMtC,GAAN,EAAW;AACP,+BAAM,yBAAN;AACA;AACH;;AAED,yBAAImf,UAAUnqB,KAAKD,OAAL,CAAaqG,OAAb,CAAqB8C,MAArB,GAA8BlJ,KAAKD,OAAL,CAAaqG,OAAb,CAAqB8C,MAArB,CAA4B8G,EAAE1C,GAAF,CAAM,MAAN,CAA5B,CAA9B,GAA2Ekb,YAAYxY,EAAE1C,GAAF,CAAM,MAAN,CAAZ,CAAzF;AACA,yBAAI,YAAOzF,OAAP,CAAesiB,OAAf,KAA2BA,QAAQ/kB,QAAR,GAAmBglB,IAAnB,MAA6B,EAA5D,EAAgE;;AAEhEpqB,0BAAKwjB,OAAL,CAAayG,UAAb,GAA0BtmB,KAA1B,CAAgCumB,OAAhC,GAA0C,OAA1C;AACAlqB,0BAAKwjB,OAAL,CAAayG,UAAb,GAA0BI,SAA1B,GAAsCF,OAAtC;AACA;AACAnqB,0BAAKwjB,OAAL,CAAa8G,WAAb,CAAyBtB,IAAIuB,UAA7B;AACA;AACA;AACA;AACH;AACD,qBAAI,CAACva,CAAL,EAAQ;AACJhQ,0BAAKijB,KAAL,CAAW8G,gBAAX,GAA8BpmB,KAA9B,CAAoCqmB,MAApC,GAA6C,EAA7C;AACAhqB,0BAAKwjB,OAAL,CAAayG,UAAb,GAA0BtmB,KAA1B,CAAgCumB,OAAhC,GAA0C,MAA1C;;AAEA;AACA;AACA;AACA;AACA;AACH;AACJ,cAxGD;;AA0GA;AACAlqB,kBAAKijB,KAAL,CAAW8B,IAAX,CAAgB,YAAhB,EAA8B,UAASiE,GAAT,EAAc;AACxC1Y,4BAAW,YAAU;AACjBtQ,0BAAKkiB,MAAL,CAAYoC,WAAZ,GAA0B1V,OAA1B,CAAkC,UAASoB,CAAT,EAAYpM,CAAZ,EAAc;AAC5C,6BAAIoM,EAAE1C,GAAF,CAAM,MAAN,KAAiB,WAArB,EACI2Z,mBAAmBjX,CAAnB;AACP,sBAHD;AAIH,kBALD,EAKGqW,cALH;AAMH,cAPD;;AASA;AACArmB,kBAAKijB,KAAL,CAAWjc,EAAX,CAAc,OAAd,EAAuB,UAASgiB,GAAT,EAAa;;AAEhC;AACA,qBAAIhZ,IAAIhQ,KAAKijB,KAAL,CAAWgG,qBAAX,CAAiCD,IAAIE,KAArC,EAA4C,UAAS1E,OAAT,EAAkBjB,KAAlB,EAAwB;AACxEvjB,0BAAKwqB,eAAL,GAAuBhG,OAAvB;AACA,4BAAOA,OAAP;AACH,kBAHO,CAAR;AAIA,qBAAIxU,CAAJ,EAAO;AACH;AACA;;AAEA4W,kCAAa5W,CAAb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACH;AACD,qBAAI,CAACA,CAAL,EACIhQ,KAAKwjB,OAAL,CAAayG,UAAb,GAA0BtmB,KAA1B,CAAgCumB,OAAhC,GAA0C,MAA1C;AACP,cAjCD;;AAmCA;AACAlJ,sBAASyJ,gBAAT,CAA0B,SAA1B,EAAqC,UAASnV,CAAT,EAAY;AAC7C,qBAAIoV,iBAAiB,SAAjBA,cAAiB,CAASjQ,CAAT,EAAY;AAC7B,yBAAIkQ,kBAAkB5mB,SAAtB;AACA,yBAAI6mB,cAAcC,QAAlB;AACA7qB,0BAAKkiB,MAAL,CAAYoC,WAAZ,GAA0B1V,OAA1B,CAAkC,UAASoB,CAAT,EAAYpM,CAAZ,EAAe;AAC7C,6BAAIoM,EAAE1C,GAAF,CAAM,MAAN,KAAiB,WAArB,EAAkC;AAC9B,iCAAIwd,eAAe1C,qBAAqBpY,CAArB,CAAnB;;AAEA,iCAAI,CAAE8a,aAAa,CAAb,KAAmBrQ,KAAKwL,QAAzB,IAAuC,CAAC6E,aAAa,CAAb,CAAD,IAAoBrQ,KAAKyL,SAAjE,KAAgF4E,aAAa,CAAb,IAAkBF,WAAlG,IAAiHE,aAAa,CAAb,KAAmB,CAAxI,EAA2I;AACvIF,+CAAcE,aAAa,CAAb,CAAd;AACAH,mDAAkB3a,CAAlB;AACH;AACJ;AACJ,sBATD;AAUA,yBAAI2a,eAAJ,EAAqB;AACjBra,oCAAW2W,mBAAmB0D,eAAnB,CAAX,EAAgDtE,cAAhD;AACAO,sCAAa+D,eAAb;AACH;AACJ,kBAjBD;AAkBA,yBAAOrV,EAAEyV,OAAT;AACI,0BAAK9E,QAAL;AACIyE,wCAAezE,QAAf;AACA;AACJ,0BAAKC,SAAL;AACIwE,wCAAexE,SAAf;AACA;AACJ,0BAAKC,OAAL;AACI;AACA;AATR;AAWH,cA9BD;AA+BH;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;mCAMUzlB,I,EAAMX,O,EAAQ;AACpB,iBAAIC,OAAO,IAAX;;AAEA;;;;;;;AAOA,iBAAIgrB,eAAe,SAAfA,YAAe,CAAStqB,IAAT,EAAesX,IAAf,EAAqBjY,OAArB,EAA6B;;AAE5C,qBAAI,CAAC,YAAOuM,OAAP,CAAe0L,IAAf,CAAD,IAAyBA,KAAKhX,MAAL,IAAe,CAA5C,EAA+C;;AAE/C,qBAAMiqB,cAAc,kDAApB;AACA,qBAAMC,gBAAgB,CAAtB;;AAEA,qBAAIrJ,MAAS7J,KAAK,CAAL,CAAb;AAAA,qBACI8J,MAAS9J,KAAK,CAAL,CADb;AAAA,qBAEImT,SAASprB,UAAWA,QAAQorB,MAAR,IAAkBF,WAA7B,GAA4CA,WAFzD;AAAA,qBAGIrpB,QAAS7B,UAAWA,QAAQ6B,KAAR,IAAkBspB,aAA7B,GAA8CA,aAH3D;;AAKA,qBAAIE,SAAS,IAAIjJ,GAAGkJ,OAAP,CAAe;AACxB,iCAAY,EADY;AAExB9mB,2BAAM,WAFkB;AAGxB7D,2BAAMA,IAHkB;AAIxB;AACA4qB,+BAAU,IAAInJ,GAAGoJ,IAAH,CAAQC,KAAZ,CAAkBrJ,GAAGW,IAAH,CAAQC,UAAR,CAAmB,CAACjB,GAAD,EAAMD,GAAN,CAAnB,CAAlB;AALc,kBAAf,CAAb;;AAQA;;;;;;AAMA,qBAAI4J,oBAAoB,SAApBA,iBAAoB,CAASN,MAAT,EAAiBvpB,KAAjB,EAAuB;AAC3C,4BAAO,IAAIugB,GAAGxe,KAAH,CAASmgB,KAAb,CAAmB;AACtB+D,gCAAO,IAAI1F,GAAGxe,KAAH,CAAS+nB,IAAb,CAAkB;AACrBC,qCAAQ,CAAC,GAAD,EAAM,CAAN,CADa,EACH;AAClBC,kCAAKT,MAFgB;AAGrBvpB,oCAAOA;AAHc,0BAAlB;AADe,sBAAnB,CAAP;AAOH,kBARD;AASA;AACAwpB,wBAAOvG,QAAP,CAAgB4G,kBAAkBN,MAAlB,EAA0BvpB,KAA1B,CAAhB;;AAEA;AACA5B,sBAAKkiB,MAAL,CAAY4H,UAAZ,CAAuBsB,MAAvB;AACH,cAxCD;;AA0CA,iBAAIS,cAAc7rB,KAAK8rB,mBAAL,CAAyBprB,KAAKsX,IAA9B,CAAlB;AACA,iBAAI6T,YAAY7T,IAAZ,IAAoB,IAAxB,EAA8B;;AAE9B;AACA,iBAAI6T,YAAYtnB,IAAZ,IAAoB,QAAxB,EAAkC;AAC9BymB,8BAAatqB,IAAb,EAAmBmrB,YAAY7T,IAA/B,EAAqCjY,OAArC;AACA;AACH;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAIwpB,cAAcxpB,UAAWA,QAAQwpB,WAAR,IAAuB,CAAlC,GAAuC,CAAzD;AAAA,iBACID,cAAcvpB,UAAWA,QAAQupB,WAAR,IAAuB,SAAlC,GAA+C,SADjE;AAAA,iBAEIE,YAAczpB,UAAWA,QAAQypB,SAAR,IAAqB,0BAAhC,GAA8D,0BAFhF;;AAIA,iBAAI1E,MAAM,IAAI3C,GAAGkJ,OAAP,CAAe;AACrB,6BAAY,EADS;AAErB9mB,uBAAM,QAAQsnB,YAAYtnB,IAFL;AAGrB7D,uBAAMA,IAHe;AAIrB4qB,2BAAUO,YAAYtnB,IAAZ,IAAoB,SAApB,GAAgC,IAAI4d,GAAGoJ,IAAH,CAAQQ,OAAZ,CAAoBF,YAAY7T,IAAhC,CAAhC,GAAwE6T,YAAYtnB,IAAZ,IAAoB,MAApB,GAA6B,IAAI4d,GAAGoJ,IAAH,CAAQS,UAAZ,CAAuBH,YAAY7T,IAAnC,CAA7B,GAAwE,IAAImK,GAAGoJ,IAAH,CAAQU,YAAZ,CAAyBJ,YAAY7T,IAArC;AAJrI,cAAf,CAAV;;AAOA8M,iBAAI2B,WAAJ,GAAkBF,SAAlB,CAA4B,WAA5B,EAAyC,WAAzC;;AAEA;;;;;;;AAOA,iBAAI2F,iBAAiB,SAAjBA,cAAiB,CAAS3C,WAAT,EAAsBD,WAAtB,EAAmCE,SAAnC,EAA6C;AAC9D,wBAAO,IAAIrH,GAAGxe,KAAH,CAASmgB,KAAb,CAAmB;AACtBlI,6BAAQ,IAAIuG,GAAGxe,KAAH,CAASogB,MAAb,CAAoB;AACxB5iB,gCAAOooB,WADiB;AAExBlmB,gCAAOimB;AAFiB,sBAApB,CADc;AAKtB3N,2BAAM,IAAIwG,GAAGxe,KAAH,CAASqgB,IAAb,CAAkB;AACpB3gB,gCAAOmmB;AADa,sBAAlB;AALgB,kBAAnB,CAAP;AASH,cAVD;;AAYA,iBAAI2C,WAAWD,eAAe3C,WAAf,EAA4BD,WAA5B,EAAyCE,SAAzC,CAAf;AACA1E,iBAAIrd,GAAJ,CAAQ,UAAR,EAAoB0kB,QAApB;AACArH,iBAAID,QAAJ,CAAasH,QAAb;;AAEA;AACAnsB,kBAAKkiB,MAAL,CAAY4H,UAAZ,CAAuBhF,GAAvB;AACH;;AAED;;;;;;;;;6CAMoB9M,I,EAAK;AACrB,iBAAIoU,WAAW,EAAf;AAAA,iBAAmB7nB,IAAnB;AAAA,iBAAyB8nB,QAAQ,EAACrU,MAAM,IAAP,EAAazT,MAAM,IAAnB,EAAjC;AACA,iBAAK,YAAOqI,QAAP,CAAgBoL,IAAhB,KAAyBA,KAAKhX,MAAL,IAAe+C,SAAzC,IAAwD,YAAOuI,OAAP,CAAe0L,IAAf,KAAwBA,KAAKhX,MAAL,IAAe,CAAvC,IAA4C,CAACsrB,MAAMtU,KAAK,CAAL,CAAN,CAA7C,IAA+D,CAACsU,MAAMtU,KAAK,CAAL,CAAN,CAA5H,EAA6I;AACzI;AACAzT,wBAAO,QAAP;AACA,qBAAIyT,KAAKhX,MAAL,IAAe+C,SAAnB,EAA8B;AAC1B,yBAAI,YAAO8D,OAAP,CAAemQ,KAAK6J,GAApB,KAA4B,YAAOha,OAAP,CAAemQ,KAAK8J,GAApB,CAAhC,EACI,OAAOuK,KAAP;AACJD,gCAAW,CAACpU,KAAK8J,GAAN,EAAW9J,KAAM6J,GAAjB,CAAX;AACH,kBAJD,MAKK;AACDuK,gCAAWpU,IAAX;AACH;AAEJ,cAZD,MAYO,IAAI,YAAO1L,OAAP,CAAe0L,IAAf,CAAJ,EAA0B;AAC7B;AACA,qBAAIuU,kBAAkB,SAAlBA,eAAkB,CAASzH,GAAT,EAAc;AAChC,yBAAIL,SAAS,EAAb;AACA,yBAAI,YAAO7X,QAAP,CAAgBkY,GAAhB,KAAwBA,IAAI9jB,MAAJ,IAAc+C,SAA1C,EAAqD;AACjD0gB,gCAAO,OAAP,IAAkB,CAAC,YAAO5c,OAAP,CAAeid,IAAIjD,GAAnB,CAAD,IAA4B,CAAC,YAAOha,OAAP,CAAeid,IAAIhD,GAAnB,CAA/C;AACA,6BAAI2C,OAAO,OAAP,CAAJ,EAAqBA,OAAO,MAAP,IAAiB,CAACK,IAAIhD,GAAL,EAAUgD,IAAIjD,GAAd,CAAjB;AACxB,sBAHD,MAIK;AACD4C,gCAAO,OAAP,IAAkB,YAAOnY,OAAP,CAAewY,GAAf,KAAuBA,IAAI9jB,MAAJ,IAAc,CAArC,IAA0C,CAACsrB,MAAMxH,IAAI,CAAJ,CAAN,CAA3C,IAA4D,CAACwH,MAAMxH,IAAI,CAAJ,CAAN,CAA/E;AACA,6BAAIL,OAAO,OAAP,CAAJ,EAAqBA,OAAO,MAAP,IAAiBK,GAAjB;AACxB;AACD,4BAAOL,MAAP;AACH,kBAXD;;AAaA;AACA,qBAAIzM,KAAKhX,MAAL,IAAe,CAAf,IAAoBurB,gBAAgBvU,KAAK,CAAL,CAAhB,EAAyBwU,KAA7C,IAAsDD,gBAAgBvU,KAAK,CAAL,CAAhB,EAAyBwU,KAAnF,EAA0F;AACtFjoB,4BAAO,MAAP;AACA6nB,8BAAStd,IAAT,CAAcyd,gBAAgBvU,KAAK,CAAL,CAAhB,EAAyBA,IAAvC;AACAoU,8BAAStd,IAAT,CAAcyd,gBAAgBvU,KAAK,CAAL,CAAhB,EAAyBA,IAAvC;AACH;AACD;AALA,sBAMK,IAAIA,KAAKhX,MAAL,IAAe,CAAnB,EAAqB;AACtBuD,gCAAO,cAAP;AACAyT,8BAAKpJ,OAAL,CAAa,UAAS6d,EAAT,EAAa7oB,CAAb,EAAgB;AACzB,iCAAI,YAAO0I,OAAP,CAAemgB,EAAf,KAAsBA,GAAGzrB,MAAH,IAAa,CAAvC,EAA0C;AACtCorB,0CAAStd,IAAT,CAAc,CAAC,EAAD,CAAd;AACA2d,oCAAG,CAAH,EAAM7d,OAAN,CAAc,UAASP,CAAT,EAAY;AACtB;AACA,yCAAIyW,MAAMyH,gBAAgBle,CAAhB,CAAV;AACA,yCAAIyW,IAAI0H,KAAR,EAAeJ,SAASxoB,CAAT,EAAY,CAAZ,EAAekL,IAAf,CAAoBgW,IAAI9M,IAAxB;AAClB,kCAJD;AAKA;AACA,qCAAIoU,SAASxoB,CAAT,EAAY,CAAZ,EAAe5C,MAAf,IAAyB,CAA7B,EAAgC,OAAOqrB,KAAP;AACnC,8BATD,MAUK,OAAOA,KAAP,CAXoB,CAWN;AACtB,0BAZD;AAaH;AACD;AAhBK,0BAiBA,IAAIrU,KAAKhX,MAAL,IAAe,CAAnB,EAAsB;AACvBuD,oCAAO,SAAP;AACA6nB,sCAAStd,IAAT,CAAc,EAAd;AACAkJ,kCAAK,CAAL,EAAQpJ,OAAR,CAAgB,UAASP,CAAT,EAAY;AACxB;AACA,qCAAIyW,MAAMyH,gBAAgBle,CAAhB,CAAV;AACA,qCAAIyW,IAAI0H,KAAR,EAAeJ,SAAS,CAAT,EAAYtd,IAAZ,CAAiBgW,IAAI9M,IAArB;AAClB,8BAJD;AAKA,iCAAIoU,SAAS,CAAT,EAAYprB,MAAZ,IAAsB,CAA1B,EAA6B,OAAOqrB,KAAP;AAChC,0BATI,MAUA,OAAOA,KAAP;AACR;AACD,oBAAO;AACHrU,uBAAMoU,QADH;AAEH7nB,uBAAMA;AAFH,cAAP;AAIH;;AAED;;;;;;;gCAIO7D,I,EAAK;AACR,iBAAI,YAAOmH,OAAP,CAAenH,IAAf,CAAJ,EAA0B;AAC1B,iBAAIV,OAAO,IAAX;;AAEA,iBAAIQ,KAAK,gBAAgBE,IAAhB,CAAT;AACAV,kBAAKU,IAAL,GAAYF,GAAGC,aAAH,CAAiB,KAAjB,CAAZ;;AAEA,iBAAI,CAAC,YAAOoH,OAAP,CAAe7H,KAAKijB,KAApB,CAAL,EAAiC;AAC7B,qBAAI,YAAO3W,OAAP,CAAetM,KAAKU,IAApB,CAAJ,EACIV,KAAKU,IAAL,CAAUkO,OAAV,CAAkB,UAASrM,CAAT,EAAW;AACzBvC,0BAAK0sB,SAAL,CAAenqB,CAAf;AACH,kBAFD,EADJ,KAKIvC,KAAK0sB,SAAL,CAAe1sB,KAAKU,IAApB;AACP;AACJ;;;mCAEQ;AACL,iBAAI2hB,gBAAgB,EAApB;AACA,kBAAKA,aAAL,CAAmBzT,OAAnB,CAA2B,UAASsW,CAAT,EAAW;AAClC7C,iCAAgBA,cAAcsK,MAAd,CAAqBzH,EAAEb,SAAF,GAAcC,WAAd,EAArB,CAAhB;AACH,cAFD;AAGA,oBAAO,KAAKpC,MAAL,CAAYoC,WAAZ,GAA0BqI,MAA1B,CAAiCtK,aAAjC,CAAP;AACH;;;qCAEW;AACR,oBAAO,KAAKJ,QAAZ;AACH;;AAED;;;;;;;;4BAKGhb,S,EAAW9G,Q,EAAU;AACpB,iBAAIH,OAAO,IAAX;AACA;AACA,iBAAI4sB,uBAAuB;AACvB,0BAAS,eAAS5D,GAAT,EAAc;AACnB,yBAAIhZ,IAAIhQ,KAAKijB,KAAL,CAAWgG,qBAAX,CAAiCjpB,KAAKijB,KAAL,CAAW4J,aAAX,CAAyB7D,GAAzB,CAAjC,EAAgE,UAASxE,OAAT,EAAkBjB,KAAlB,EAAwB;AAC5F,gCAAOiB,OAAP;AACH,sBAFO,CAAR;AAGA,yBAAI,YAAO1hB,UAAP,CAAkB3C,QAAlB,KAA+B6P,CAAnC,EAAsC;AAClC7P,kCAAS4C,IAAT,CAAc,IAAd,EAAoBiN,CAApB;AACH;AACJ,kBARsB;AASvB,gCAAe,qBAASgZ,GAAT,EAAc;AACzB,yBAAIhZ,IAAIhQ,KAAKijB,KAAL,CAAWgG,qBAAX,CAAiCD,IAAIE,KAArC,EAA4C,UAAS1E,OAAT,EAAkBjB,KAAlB,EAAwB;AACxE,gCAAOiB,OAAP;AACH,sBAFO,CAAR;AAGA,yBAAI,YAAO1hB,UAAP,CAAkB3C,QAAlB,KAA+B6P,CAAnC,EAAsC;AAClC7P,kCAAS4C,IAAT,CAAc,IAAd,EAAoBiN,CAApB;AACH;AACJ,kBAhBsB;AAiBvB,+BAAc,oBAASgZ,GAAT,EAAc;AACxB7M,6BAAQna,GAAR,CAAY7B,QAAZ;AACA,yBAAI,YAAO2C,UAAP,CAAkB3C,QAAlB,CAAJ,EAAiC;AAC7BA,kCAAS4C,IAAT,CAAc,IAAd,EAAoBimB,GAApB;AACH;AACJ;AAtBsB,cAA3B;;AAyBA,iBAAI/hB,aAAa,OAAjB,EACIjH,KAAKijB,KAAL,CAAW6J,WAAX,GAAyBrC,gBAAzB,CAA0CxjB,SAA1C,EAAqD2lB,qBAAqB3lB,SAArB,CAArD,EADJ,KAEK,IAAIA,aAAa,aAAjB,EACDjH,KAAKijB,KAAL,CAAWjc,EAAX,CAAcC,SAAd,EAAyB2lB,qBAAqB3lB,SAArB,CAAzB,EADC,KAEA,IAAIA,aAAa,YAAjB,EACDjH,KAAKijB,KAAL,CAAW8B,IAAX,CAAgB9d,SAAhB,EAA2B2lB,qBAAqB3lB,SAArB,CAA3B;AACP;;;yCAEe5D,K,EAAO;AACnB,iBAAIA,MAAM0pB,QAAN,CAAe,MAAf,CAAJ,EAA4B;AACxB,qBAAIC,QAAQ3pB,MAAMgC,KAAN,CAAY,GAAZ,EAAiBhC,MAAMgC,KAAN,CAAY,GAAZ,EAAiBrE,MAAjB,GAA0B,CAA3C,EAA8CoN,OAA9C,CAAsD,GAAtD,EAA2D,EAA3D,CAAZ;AACA,qBAAI6e,eAAe5pB,MAAM+K,OAAN,CAAc,MAAM4e,KAApB,EAA2B,EAA3B,EAA+B5e,OAA/B,CAAuC,GAAvC,EAA4C,EAA5C,CAAnB;AACA,qBAAI8e,WAAW,YAAO3iB,UAAP,CAAkB,CAAC,GAAnB,EAAwB0iB,YAAxB,CAAf;AACA,wBAAO,UAAUC,SAAS7nB,KAAT,CAAe,GAAf,EAAoB,CAApB,EAAuBA,KAAvB,CAA6B,GAA7B,EAAkC,CAAlC,CAAV,GAAiD,GAAjD,GAAuD2nB,MAAM5C,IAAN,EAAvD,GAAsE,GAA7E;AACH,cALD,MAOI,OAAO,YAAO7f,UAAP,CAAkB,CAAC,GAAnB,EAAwBlH,KAAxB,CAAP;AACP;;AAED;;;;;;;;kCAKStD,O,EAAQ;AACb,iBAAI,YAAO8H,OAAP,CAAe9H,OAAf,KAA2B,YAAO8H,OAAP,CAAe9H,QAAQ+kB,GAAvB,CAA3B,IAA0D,YAAOjd,OAAP,CAAe9H,QAAQ4D,KAAvB,CAA9D,EAA6F;AAC7F;AACA,iBAAI,YAAOb,UAAP,CAAkB/C,QAAQ4D,KAA1B,KAAoCA,iBAAiBwe,GAAGxe,KAAH,CAASmgB,KAAlE,EAAyE;AACrE/jB,yBAAQ+kB,GAAR,CAAYD,QAAZ,CAAqB9kB,QAAQ4D,KAA7B;AACH,cAFD,MAGK;AACD,qBAAMsnB,cAAc,kDAApB;AACA,qBAAMC,gBAAgB,CAAtB;;AAEA,qBAAI5B,cAAcvpB,QAAQ4D,KAAR,CAAc2lB,WAAd,GAA4BvpB,QAAQ4D,KAAR,CAAc2lB,WAA1C,GAAwD,SAA1E;AAAA,qBACIC,cAAcxpB,QAAQ4D,KAAR,CAAc4lB,WAAd,GAA4BxpB,QAAQ4D,KAAR,CAAc2lB,WAA1C,GAAwD,CAD1E;AAAA,qBAEIE,YAAczpB,QAAQ4D,KAAR,CAAc6lB,SAAd,GAA0BzpB,QAAQ4D,KAAR,CAAc6lB,SAAxC,GAAwD,0BAF1E;AAAA,qBAGI2B,SAAcprB,QAAQ4D,KAAR,CAAcY,IAAd,IAAsB,QAAtB,IAAkCxE,QAAQ4D,KAAR,CAAcY,IAAd,IAAsB,WAAxD,GAAuExE,QAAQ4D,KAAR,CAAcwnB,MAAd,IAAwBF,WAA/F,GAAgH,IAHlI;AAAA,qBAIIrpB,QAAc7B,QAAQ4D,KAAR,CAAcY,IAAd,IAAsB,QAAtB,IAAkCxE,QAAQ4D,KAAR,CAAcY,IAAd,IAAsB,WAAxD,GAAuExE,QAAQ4D,KAAR,CAAc/B,KAAd,IAAwBspB,aAA/F,GAAgH,IAJlI;;AAMA,qBAAIC,UAAU,IAAd,EACIrG,IAAID,QAAJ,CAAa,IAAI1C,GAAGxe,KAAH,CAASmgB,KAAb,CAAmB;AAC5B+D,4BAAO,IAAI1F,GAAGxe,KAAH,CAAS+nB,IAAb,CAAkB;AACrBC,iCAAQ,CAAC,GAAD,EAAM,CAAN,CADa,EACH;AAClBC,8BAAKT,MAFgB;AAGrBvpB,gCAAOA;AAHc,sBAAlB;AADqB,kBAAnB,CAAb,EADJ,KASIkjB,IAAID,QAAJ,CAAa,IAAI1C,GAAGxe,KAAH,CAASmgB,KAAb,CAAmB;AAC5BlI,6BAAQ,IAAIuG,GAAGxe,KAAH,CAASogB,MAAb,CAAoB;AACxB1gB,gCAAOimB,WADiB;AAExBnoB,gCAAOooB;AAFiB,sBAApB,CADoB;AAK5B5N,2BAAM,IAAIwG,GAAGxe,KAAH,CAASqgB,IAAb,CAAkB;AACpB3gB,gCAAOmmB;AADa,sBAAlB;AALsB,kBAAnB,CAAb;AASP;AACJ;;AAED;;AAEA;;;;;;;gDAIuBzpB,O,EAAS;AAC5B,iBAAIC,OAAO,IAAX;AACA,iBAAI,YAAO6H,OAAP,CAAe9H,OAAf,KAA2B,YAAO8H,OAAP,CAAe9H,QAAQwJ,GAAvB,CAA/B,EAA4D;;AAE5D,iBAAIga,QAAQvjB,KAAKqlB,WAAL,CAAiB;AACzB9gB,uBAAM,OADmB;AAEzB4I,yBAAQ;AACJ3K,2BAAM,aADF;AAEJ2K,6BAAQ;AACJ3K,+BAAM,QADF;AAEJ+G,8BAAKxJ,QAAQwJ,GAFT;AAGJL,iCAAQ;AAHJ;AAFJ,kBAFiB;AAUzBic,4BAAWplB,QAAQolB,SAVM;AAWzBzkB,uBAAMX,QAAQW;AAXW,cAAjB,CAAZ;;AAcA;AACAV,kBAAK6kB,QAAL,CAAc,EAACC,KAAKvB,MAAMc,SAAN,EAAN,EAAyB1gB,OAAO5D,QAAQ4D,KAAxC,EAAd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAO4f,KAAP;AACH;;;6BA9gCgB;AACb,oBAAO,KAAK/X,WAAZ;AACH,U;;AASD;;AAGA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;2BAEe9D,O,EAAS;AACpB,iBAAIA,OAAJ,EAAa;AACT,sBAAK8D,WAAL,GAAmB9D,OAAnB;AACH;AACJ;;;6BAtDU;AACP,oBAAO,KAAK8F,KAAZ;AACH,U;2BAsDQ9F,O,EAAS;AACd,iBAAIA,OAAJ,EAAa;AACT,sBAAK8F,KAAL,GAAa9F,OAAb;AACH;AACJ;;;6BAxDa;AACV,oBAAO,KAAKyC,QAAZ;AACH;;;;;;mBArEgBvK,G;;;;;;ACHrB,0C","file":"C9.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"C9\"] = factory();\n\telse\n\t\troot[\"C9\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 6d9bee1c013b660aa196\n **/","// Chart Importer\r\nimport BarChart from './charts/C9.BarChart';\r\nimport DonutChart from './charts/C9.DonutChart';\r\nimport LineChart from './charts/C9.LineChart';\r\nimport PieChart from './charts/C9.PieChart';\r\nimport TimeLine from './charts/C9.TimeLine';\r\n\r\n// Map Importer\r\nimport Map from './map/C9.Map';\r\n\r\n// Helper Importer\r\nimport Helper from './helper/C9.Helper';\r\nimport DataAdapter from './helper/C9.DataAdapter';\r\n\r\n// CSS Importer\r\nimport styles from './C9.css';\r\n\r\nmodule.exports = {\r\n\tBarChart,\r\n\tDonutChart,\r\n\tLineChart,\r\n\tPieChart,\r\n\tTimeLine,\r\n\r\n\tMap,\r\n\t\r\n\tDataAdapter,\r\n\tHelper,\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","import Chart from './C9.Chart';\r\n\r\nimport Axis from './utils/C9.Axis';\r\nimport Title from './utils/C9.Title';\r\nimport Legend from './utils/C9.Legend';\r\nimport Table from './utils/C9.Table';\r\nimport Tooltip from './utils/C9.Tooltip';\r\n\r\nimport Helper from '../helper/C9.Helper';\r\nimport DataAdapter from '../helper/C9.DataAdapter';\r\n\r\nexport default class BarChart extends Chart {\r\n    constructor(options) {\r\n        super(options);\r\n\r\n        var self = this;\r\n\r\n        // var config = {\r\n        //     // barWidth: undefined,\r\n        //     isLogaric: false,\r\n        // };\r\n\r\n        self.config = {\r\n            // barWidth: undefined,\r\n            isLogaric: false,\r\n        };\r\n\r\n        // self.updateConfig(config);\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    // get barWidth() {\r\n    //     return this._barWidth;\r\n    // }\r\n\r\n    get groupType() {\r\n        return this._groupType;\r\n    }\r\n    \r\n    get xGroup() {\r\n        return this._xGroup;\r\n    }\r\n\r\n    get groupNames() {\r\n        return this._groupNames;\r\n    }\r\n\r\n    get isGroup() {\r\n        return this._isGroup;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    // set barWidth(arg) {\r\n    //     if (arg) {\r\n    //         this._barWidth = arg;\r\n    //     }\r\n    // }\r\n\r\n    set groupType(arg) {\r\n        if (arg) {\r\n            this._groupType = arg;\r\n        }\r\n    }\r\n\r\n    set xGroup(arg) {\r\n        if (arg) {\r\n            this._xGroup = arg;\r\n        }\r\n    }\r\n\r\n    set groupNames(arg) {\r\n        if (arg) {\r\n            this._groupNames = arg;\r\n        }\r\n    }\r\n\r\n    set isGroup(arg) {\r\n        if (arg) {\r\n            this._isGroup = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n    \r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    /**\r\n     * Init Bar Chart Config\r\n     */\r\n    updateConfig(config, callback){\r\n        super.updateConfig(config);\r\n\r\n        var self  = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n\r\n        self.chartType      = \"bar\";\r\n\r\n        var dataOption          = self.dataOption;\r\n        dataOption.colorRange   = self.colorRange;\r\n\r\n        // TESTING\r\n        var da = new DataAdapter(dataOption, self.chartType, null);\r\n        da.getDataTarget(self.chartType, function(data) {\r\n            self.dataTarget = data;\r\n\r\n            var barChartType = da.getDataTypeForBarChart();\r\n            if (barChartType != \"single\") {\r\n                self._groupNames    = da.groups.length > 0 ? da.groups : da.stacks;  //define group names use for showing legend\r\n                self._isGroup       = barChartType == \"group\";\r\n            }\r\n\r\n            var width        = self.width - self.margin.left - self.margin.right,\r\n                height       = self.height - self.margin.top - self.margin.bottom;\r\n\r\n            // .1 to make outerPadding, according to: https://github.com/d3/d3/wiki/Ordinal-Scales\r\n            var x = d3.scale.ordinal().rangeRoundBands([0, width], .1),\r\n                y = self.options.isLogaric ? d3.scale.log().range([height, 0]) : d3.scale.linear().range([height, 0]);\r\n\r\n            var minMax = Helper.getMinMax(self.dataTarget, barChartType, self.options.isLogaric);\r\n\r\n            x.domain(self.dataTarget.map(function(d) {\r\n                return d[0].name;\r\n            }));\r\n\r\n            y.domain([minMax.min, minMax.max]);\r\n\r\n            /******** Handle for grouped, stacked bar chart ********/\r\n            if (self.groupNames) {\r\n                self.xGroup = d3.scale.ordinal();\r\n                self.xGroup.domain(self.groupNames).rangeRoundBands([0, x.rangeBand()]);\r\n            }\r\n            \r\n            /**********************************************/\r\n\r\n            // Make flexible width according to barWidth\r\n            // self.barWidth       = self.options.barWidth  ||  x.rangeBand();\r\n            self.x              = x;\r\n            self.y              = y;\r\n\r\n            if (Helper.isFunction(callback)) {\r\n                callback.call(self, self.dataTarget);\r\n            }\r\n        });\r\n\r\n\r\n        // var da = new DataAdapter(dataOption);\r\n        // self.dataTarget = da.getDataTarget(self.chartType);\r\n        // console.log(self.dataTarget);\r\n        // self.dataSource = da.dataSource;\r\n\r\n        // var barChartType = da.getDataTypeForBarChart();\r\n        // if (barChartType != \"single\") {\r\n        //     self._groupNames    = da.groups.length > 0 ? da.groups : da.stacks;  //define group names use for showing legend\r\n        //     self._isGroup       = barChartType == \"group\";\r\n        // }\r\n\r\n        // var width        = self.width - self.margin.left - self.margin.right,\r\n        //     height       = self.height - self.margin.top - self.margin.bottom;\r\n\r\n        // // .1 to make outerPadding, according to: https://github.com/d3/d3/wiki/Ordinal-Scales\r\n        // var x = d3.scale.ordinal().rangeRoundBands([0, width], .1),\r\n        //     y = self.options.isLogaric ? d3.scale.log().range([height, 0]) : d3.scale.linear().range([height, 0]);\r\n\r\n        // var minMax = Helper.getMinMax(self.dataTarget, barChartType, self.options.isLogaric);\r\n\r\n        // x.domain(self.dataTarget.map(function(d) {\r\n        //     return d[0].name;\r\n        // }));\r\n\r\n        // y.domain([minMax.min, minMax.max]);\r\n\r\n        // /******** Handle for grouped, stacked bar chart ********/\r\n        // if (self.groupNames) {\r\n        //     self.xGroup = d3.scale.ordinal();\r\n        //     self.xGroup.domain(self.groupNames).rangeRoundBands([0, x.rangeBand()]);\r\n        // }\r\n        \r\n        // /**********************************************/\r\n\r\n        // // Make flexible width according to barWidth\r\n        // // self.barWidth       = self.options.barWidth  ||  x.rangeBand();\r\n        // self.x              = x;\r\n        // self.y              = y;\r\n    }\r\n\r\n    /**\r\n     * Update Chart Data Config\r\n     * Notes: Merge Deep change order of Config and Option\r\n     * ---------------------------------------------------\r\n     */\r\n    updateDataConfig(dataCfg, callback){\r\n        var self  = this;\r\n\r\n        self.options = Helper.mergeDeep(self.options, dataCfg);\r\n\r\n        var dataOption          = self.dataOption;\r\n        dataOption.colorRange   = self.colorRange;\r\n\r\n        var da = new DataAdapter(dataOption, self.chartType, null);\r\n        da.getDataTarget(self.chartType, function(data) {\r\n            self.dataTarget = data;\r\n\r\n            var barChartType = da.getDataTypeForBarChart();\r\n            if (barChartType != \"single\") {\r\n                self._groupNames    = da.groups.length > 0 ? da.groups : da.stacks;  //define group names use for showing legend\r\n                self._isGroup       = barChartType == \"group\";\r\n            }\r\n\r\n            var width        = self.width - self.margin.left - self.margin.right,\r\n                height       = self.height - self.margin.top - self.margin.bottom;\r\n\r\n            // .1 to make outerPadding, according to: https://github.com/d3/d3/wiki/Ordinal-Scales\r\n            var x = d3.scale.ordinal().rangeRoundBands([0, width], .1),\r\n                y = self.options.isLogaric ? d3.scale.log().range([height, 0]) : d3.scale.linear().range([height, 0]);\r\n\r\n            var minMax = Helper.getMinMax(self.dataTarget, barChartType, self.options.isLogaric);\r\n\r\n            x.domain(self.dataTarget.map(function(d) {\r\n                return d[0].name;\r\n            }));\r\n\r\n            y.domain([minMax.min, minMax.max]);\r\n\r\n            /******** Handle for grouped, stacked bar chart ********/\r\n            if (self.groupNames) {\r\n                self.xGroup = d3.scale.ordinal();\r\n                self.xGroup.domain(self.groupNames).rangeRoundBands([0, x.rangeBand()]);\r\n            }\r\n            \r\n            /**********************************************/\r\n\r\n            // Make flexible width according to barWidth\r\n            // self.barWidth       = self.options.barWidth  ||  x.rangeBand();\r\n            self.x              = x;\r\n            self.y              = y;\r\n\r\n            if (Helper.isFunction(callback)) {\r\n                callback.call(self, self.dataTarget);\r\n            }\r\n        });\r\n        \r\n    }\r\n\r\n    /**\r\n     * Update chart based on data\r\n     * @param  {[type]} data [description]\r\n     */\r\n    update(data) {\r\n        var self = this;\r\n\r\n        self.body.selectAll(\".c9-chart-bar.c9-custom-rect\").data([]).exit().remove();\r\n        self.body.selectAll(\".c9-chart-bar.c9-custom-bar\").data([]).exit().remove();\r\n\r\n        var color = self.colorRange,\r\n            x     = self.x,\r\n            y     = self.y,\r\n            xGroup= self.xGroup;\r\n\r\n        var bar = self.body\r\n                    .selectAll(\".c9-chart-bar.c9-custom-bar\")\r\n                    .data(data)\r\n                    .enter()\r\n                        .append(\"g\")\r\n                        .attr(\"class\", \"c9-chart-bar c9-custom-bar\")\r\n                        .attr(\"transform\", function(d) { return \"translate(\" + x(d[0].name) + \",0)\"; });\r\n\r\n        var bars = bar.selectAll(\".c9-chart-bar.c9-custom-rect\")\r\n            .data(function(d) { return d; });\r\n\r\n        bars.enter()\r\n            .append(\"rect\")\r\n            .attr(\"class\", \"c9-chart-bar c9-custom-rect\")\r\n            .style(\"fill\", function (d, i) { return d.color || color(i); })\r\n            .attr(\"x\", function(d) { return self.isGroup ? xGroup(d.group) : undefined; })\r\n            .attr(\"y\", function(d) { return y(d.y1); })\r\n            .attr(\"width\", function(d) { return self.isGroup ? xGroup.rangeBand() : x.rangeBand(); })\r\n            .attr(\"height\", function(d) { return self.options.isLogaric ? y(y.domain()[0]) - y(d.y0) : y(0) - y(Math.abs(d.y0)); });\r\n            \r\n        self.updateInteraction();\r\n    }\r\n\r\n    /**\r\n     * Update Interaction with Legend\r\n     * @param  {[type]} data          [description]\r\n     * @param  {[type]} groupNames    [description]\r\n     * @param  {[type]} groupNamesOld [description]\r\n     * @param  {[type]} newLabel      [description]\r\n     */\r\n    updateLegendInteraction(data, groupNames, groupNamesOld, newLabel){\r\n        var self = this;\r\n        var type = self.groupType;\r\n\r\n        var y = self.y;\r\n        var minMax = Helper.getMinMax(data, self.isGroup == false ? \"stack\" : null, self.options.isLogaric);\r\n        y.domain([minMax.min, minMax.max]);\r\n        self.axis.update(null, y, 750);\r\n        \r\n        var xGroup = d3.scale.ordinal();\r\n        xGroup.domain(groupNames).rangeRoundBands([0, self.x.rangeBand()]);\r\n\r\n        var xGroupOld = d3.scale.ordinal();\r\n        xGroupOld.domain(groupNamesOld).rangeRoundBands([0, self.x.rangeBand()]);\r\n\r\n        var midGroup = undefined;\r\n        //check add new label in the middle\r\n        if (groupNames.length > groupNamesOld.length && 0 < groupNames.indexOf(newLabel) && groupNames.indexOf(newLabel) < groupNames.length - 1 )\r\n            midGroup = groupNamesOld[groupNames.indexOf(newLabel)];\r\n\r\n        // self.body.selectAll(\".c9-custom-rect\").transition().duration(750).attr(\"height\", 0).remove();\r\n        self.body.selectAll(\".c9-chart-bar.c9-custom-rect\").data([]).exit().remove();\r\n        self.body.selectAll(\".c9-chart-bar.c9-custom-bar\").data([]).exit().remove();\r\n\r\n        var bar = self.body\r\n                    .selectAll(\".c9-chart-bar.c9-custom-bar\")\r\n                    .data(data)\r\n                    .enter()\r\n                    .append(\"g\")\r\n                    .attr(\"class\", \"c9-chart-bar c9-custom-bar\")\r\n                    .attr(\"transform\", function (d, i) { return \"translate(\" + self.x(self.dataTarget[i][0].name) + \",0)\"; });\r\n\r\n        var bars = bar.selectAll(\".c9-custom-rect\")\r\n            .data(function(d) { return d; });\r\n\r\n        bars.enter()\r\n            .append(\"rect\")\r\n            .attr(\"class\", \"c9-chart-bar c9-custom-rect\")\r\n            .style(\"fill\", function(d) { return d.color; })\r\n            .attr(\"x\", function(d) {\r\n                // use for stack\r\n                if (!self.isGroup) return undefined;\r\n                // use for group\r\n                // group member positioning at the end of groups, so its x is the position of right edge of bar\r\n                if (groupNames.length > groupNamesOld.length && d.group == newLabel && groupNames.indexOf(newLabel) == groupNames.length - 1)\r\n                    return self.x.rangeBand();\r\n                return midGroup ? d.group == newLabel ? xGroupOld(midGroup) : xGroupOld(d.group) : xGroupOld(d.group);\r\n            })\r\n            .attr(\"y\", function(d) { return self.isGroup ? y(d.y1) : self.options.isLogaric ? y(y.domain()[1]) : y(0); })\r\n            .attr(\"width\", function(d) {\r\n                return !self.isGroup ? self.x.rangeBand() : d.group == newLabel ? 0 : xGroupOld.rangeBand();\r\n            })\r\n            .attr(\"height\", function(d) { return self.options.isLogaric ? y(y.domain()[0]) - y(d.y0) : self.isGroup ? y(0) - y(Math.abs(d.y0)) : 0; });\r\n\r\n        bars.transition().duration(750)\r\n            .attr(\"x\", function(d) { return !self.isGroup ? undefined : xGroup(d.group); })\r\n            .attr(\"width\", function(d) { return !self.isGroup ? self.x.rangeBand() : xGroup.rangeBand(); })\r\n            .attr(\"y\", function(d) { return y(d.y1); })\r\n            .attr(\"height\", function(d) { return self.options.isLogaric ? y(y.domain()[0]) - y(d.y0) : y(0) - y(Math.abs(d.y0)); });\r\n            \r\n        self.updateInteraction();\r\n    }\r\n\r\n    /**\r\n     * Retrieve value from upper and lower bounds of each stack\r\n     * @param  {String} lower Lower bound of value\r\n     * @param  {String} upper Upper bound of value\r\n     * @return {String}       Value to return\r\n     */\r\n    retrieveValue(lower, upper) {\r\n        var d1 = Math.floor(lower) === lower ? 0 : lower.toString().split(\".\")[1].length;\r\n        var d2 = Math.floor(upper) === upper ? 0 : upper.toString().split(\".\")[1].length;\r\n        return d1 > d2 ? (upper - lower).toFixed(d1) : (upper - lower).toFixed(d2);\r\n    }\r\n    \r\n    /**\r\n     * Select all bars as type RECT in Bar Chart via its CLASS\r\n     */\r\n    selectAllBar() {\r\n        var self = this;\r\n\r\n        return self.body.selectAll('.c9-custom-rect');\r\n    }\r\n\r\n    /**\r\n     * Update Interaction: Hover\r\n     */\r\n    updateInteraction() {\r\n        var self = this,\r\n            hoverEnable     = self.hover.enable,\r\n            hoverOptions    = self.hover.options,\r\n            selector        = self.selectAllBar(),\r\n            onMouseOverCallback = hoverOptions.onMouseOver.callback,\r\n            onMouseOutCallback  = hoverOptions.onMouseOut.callback,\r\n            onClickCallback  = self.click.callback;\r\n\r\n        var tooltip = new Tooltip(self.options.tooltip);\r\n\r\n        // Update Event Factory\r\n        self.eventFactory = {\r\n            'click': function(d) {\r\n                if (Helper.isFunction(onClickCallback)) {\r\n                    onClickCallback.call(this, d);\r\n                }\r\n            },\r\n            'mouseover': function(d) {\r\n                if (!hoverEnable) return;\r\n                \r\n                if (Helper.isFunction(onMouseOverCallback)) {\r\n                    onMouseOverCallback.call(this, d);\r\n                }\r\n\r\n                // For table\r\n                if (self.options.table.show) {\r\n                    var tr = d3.selectAll('.c9-table-container>.c9-table-body tr');\r\n                    tr.filter(function(i) { return i['data-ref'] != d['data-ref'] }).selectAll('td').style('opacity', '0.5');\r\n                    var selectedItem = tr.filter(function(i) { return i['data-ref'] == d['data-ref'] });\r\n                    //set its style and scroll to its pos\r\n                    selectedItem.selectAll('td').style('opacity', '1');\r\n                    Helper.scroll(d3.select('.c9-table-container')[0][0], selectedItem[0][0].offsetTop, 200);\r\n                }\r\n\r\n                d3.select(this).style(\"fill\", function (d, i) { return self.getLightenColor(d.color || color(i)); });\r\n\r\n                tooltip.draw(d, self, 'mouseover');\r\n            },\r\n            'mouseout': function(d) {\r\n                if (!hoverEnable) return;\r\n\r\n                if (Helper.isFunction(onMouseOutCallback)) {\r\n                    onMouseOutCallback.call(this, d);\r\n                }\r\n\r\n                // For Table\r\n                if (self.options.table.show)\r\n                    d3.selectAll('.c9-table-container>.c9-table-body tr').selectAll('td').style('opacity', '');\r\n\r\n                d3.select(this).style(\"fill\", function (d, i) { return d.color || color(i); });\r\n\r\n                tooltip.draw(d, self, 'mouseout');\r\n            }\r\n        }\r\n\r\n        selector.on(self.eventFactory);\r\n    }\r\n    \r\n    /*=====  End of Main Functions  ======*/\r\n    \r\n    /*========================================\r\n    =            User's Functions            =\r\n    ========================================*/\r\n    \r\n\r\n    /**\r\n     * Custom Event Listener\r\n     * @param  {[type]}   eventType [description]\r\n     * @param  {Function} callback  [description]\r\n     */\r\n    on(eventType, callback) {\r\n        super.on(eventType, callback);\r\n        \r\n        var self = this;\r\n        var selector    = self.selectAllBar();\r\n\r\n        // Update Event Factory\r\n        let eventFactory = {\r\n            'click.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            },\r\n            'mouseover.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            },\r\n            'mouseout.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            }\r\n        }\r\n\r\n        let eventName = eventType + '.event';\r\n\r\n        selector.on(eventName, eventFactory[eventName]);\r\n    }\r\n    \r\n    /**\r\n     * [Main draw function of Bar Chart]\r\n     * @return {[type]} [description]\r\n     */\r\n    draw() {\r\n        super.draw();\r\n\r\n        var self = this;\r\n\r\n        // var axis    = new Axis(self.options.axis, self, self.width - self.margin.left - self.margin.right, self.height - self.margin.top - self.margin.bottom);\r\n        // var title   = new Title(self.options.title, self);\r\n        // var legend  = new Legend(self.options.legend, self, self.dataTarget);\r\n        // var table   = new Table(self.options.table, self, self.dataTarget);\r\n\r\n        // self.axis = axis;\r\n        // self.title = title;\r\n        // self.table = table;\r\n        // self.legend = legend;\r\n\r\n        // TESTING\r\n        self.updateConfig(self.config, function(data) {\r\n            var axis    = new Axis(self.options.axis, self, self.width - self.margin.left - self.margin.right, self.height - self.margin.top - self.margin.bottom);\r\n            var title   = new Title(self.options.title, self);\r\n            var legend  = new Legend(self.options.legend, self, self.dataTarget);\r\n            var table   = new Table(self.options.table, self, self.dataTarget);\r\n            self.axis = axis;\r\n            self.title = title;\r\n            self.table = table;\r\n            self.legend = legend;\r\n\r\n            // Draw axis\r\n            // self.axis.draw();\r\n            \r\n            // Draw title\r\n            self.title.draw();\r\n            // Update Chart based on dataTarget\r\n            self.update(data);\r\n            self.updateInteraction();\r\n\r\n            // Draw legend\r\n            self.legend.draw();\r\n            self.legend.updateInteractionForBarChart(self);\r\n\r\n            // Draw table\r\n            self.table.draw();\r\n            self.table.updateInteractionForBarChart(self);\r\n        });\r\n\r\n\r\n        // // Draw axis\r\n        // self.axis.draw();\r\n        \r\n        // // Draw title\r\n        // self.title.draw();\r\n\r\n        // // Update Chart based on dataTarget\r\n        // self.update(self.dataTarget);\r\n        // self.updateInteraction();\r\n\r\n        // // Draw legend\r\n        // self.legend.draw();\r\n        // self.legend.updateInteractionForBarChart(self);\r\n\r\n        // // Draw table\r\n        // self.table.draw();\r\n        // self.table.updateInteractionForBarChart(self);\r\n    }\r\n\r\n    /**\r\n     * Set option via stand-alone function\r\n     * @param {[type]} key   [description]\r\n     * @param {[type]} value [description]\r\n     */\r\n    setOption(key, value) {\r\n        super.setOption(key, value);\r\n\r\n        var self = this;\r\n\r\n        Helper.set(key, value, self.options);\r\n\r\n        self.updateConfig(self.options);\r\n    }\r\n\r\n    /**\r\n     * Update chart based on new data with optional dataConfig\r\n     * @param  {[type]} data       [description]\r\n     * @param  {[type]} dataConfig [description]\r\n     */\r\n    updateData(newData, newDataConfig) {\r\n        var self = this;\r\n\r\n        var newCfg = {};\r\n\r\n        if (!Helper.isEmpty(newDataConfig)) {\r\n\r\n            newCfg.data = {\r\n                plain: newData,\r\n                keys: newDataConfig,\r\n            };\r\n\r\n        } else {\r\n\r\n            newCfg.data = {\r\n                plain: newData,\r\n            };\r\n\r\n        }\r\n\r\n        // Update Chart\r\n        self.updateDataConfig(newCfg, function(data) {\r\n            self.update(data);\r\n\r\n            // Update Axis\r\n            self.axis.update(self.x, self.y, 100);\r\n\r\n            // Update Legend\r\n            self.legend.update(data);\r\n            self.legend.updateInteractionForBarChart(self);\r\n\r\n            // Update Table\r\n            self.table.update(data);\r\n        });\r\n        \r\n    }\r\n    /*=====  End of User's Functions  ======*/\r\n    \r\n    \r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/C9.BarChart.js\n **/","import Helper from '../helper/C9.Helper';\r\n\r\nexport default class Chart {\r\n    constructor(options) {\r\n        var self    = this;\r\n        var config  = {\r\n            // container\r\n            id: \"body\",\r\n            // size (width, height), margin, padding\r\n            width: 750,\r\n            height: 500,\r\n            margin: {\r\n                top: 100,\r\n                left: 50,\r\n                right: 50,\r\n                bottom: 50\r\n            },\r\n\r\n            // interaction in chart\r\n            hover: {\r\n                enable: true,\r\n                options: {\r\n                    template: '',\r\n                    onMouseOver: {\r\n                        fadeIn: 200,\r\n                        callback: function(data) {\r\n                            // console.dir(data);\r\n                        },\r\n                    },\r\n                    onMouseOut: {\r\n                        fadeOut: 500,\r\n                        callback: function(data) {\r\n                            // console.dir(data);\r\n                        },\r\n                    },\r\n                    onMouseMove: {\r\n                        callback: function(data) {\r\n                            // console.dir(data);\r\n                        },\r\n                    }\r\n                }\r\n            },\r\n\r\n            click: {\r\n                callback: function(data) {\r\n                    // console.dir(data);\r\n                },\r\n            },\r\n\r\n            // title\r\n            title: {\r\n                show      : true,\r\n                text      : \"Sample Chart\",\r\n                position  : 'top',\r\n                fontSize  : \"14px\"\r\n            },\r\n\r\n            // legend\r\n            legend: {\r\n                show      : true,\r\n                position  : \"top\",\r\n                size      : 10,\r\n                fontSize  : \"12px\",\r\n                fontColor : \"#999\",\r\n                fontWeight: 'bold',\r\n                margin    : [5, 5, 5, 5],\r\n                space     : 10,\r\n            },\r\n\r\n            // tooltip\r\n            tooltip: {\r\n                show: true,\r\n                position: 'right', // [top, right, bottom, left]\r\n                backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n                fontColor: '#fff',\r\n                fontSize: '11px',\r\n                format: null\r\n            },\r\n\r\n            // table \r\n            table: {\r\n                container: \"body\",\r\n                show: false,\r\n                headings: [\"Name\", \"Value\"],\r\n                style: \"stripe\", // \"strip\", \"border\"\r\n                serial: true,\r\n                hover: {\r\n                    enable: true,\r\n                    callback: null\r\n                },\r\n                click: {\r\n                    enable: true,\r\n                    callback: null\r\n                }\r\n            },\r\n\r\n            // color range\r\n            colorRange: \"category20\",\r\n\r\n            // data\r\n            data: {\r\n                // ALL OPTIONS AVAILABLE IN DATA CONFIG\r\n                plain: [],\r\n                file: {\r\n                    type: null,\r\n                    url: null,\r\n                },\r\n                keys: {\r\n                    name: \"name\",\r\n                    value: \"value\",\r\n                    time: \"time\"\r\n                },\r\n                groups: [],\r\n                stacks: [],\r\n            },\r\n\r\n            axis: {\r\n                x: {\r\n                    tick: {\r\n                        rotate: 0,\r\n                        count: 10,\r\n                        size: 6,\r\n                        padding: 3,\r\n                        format: undefined,\r\n                        values: [],\r\n                        //the following use for timeline chart\r\n                        type: d3.time.hours,\r\n                        interval: 1\r\n                    },\r\n                    label: {\r\n                        text: \"Name\",\r\n                        position: \"default\"\r\n                    },\r\n                    show: true,\r\n                    grid: false,\r\n                    type: \"\"\r\n                },\r\n                y: {\r\n                    tick: {\r\n                        rotate: 0,\r\n                        count: 10,\r\n                        size: 6,\r\n                        padding: 3,\r\n                        format: undefined,\r\n                        values: []\r\n                    },\r\n                    label: {\r\n                        text: \"Value\",\r\n                        position: \"default\"\r\n                    },\r\n                    show: true,\r\n                    grid: true,\r\n                    type: \"\"\r\n                }\r\n            },\r\n\r\n            // sub-chart\r\n            subchart: {\r\n                show: false,\r\n                height: 100,\r\n            },\r\n        };\r\n\r\n        self._options   = options;\r\n\r\n        self.initConfig(config);\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    get container() {\r\n        return this._container;\r\n    }\r\n    \r\n    get id() {\r\n        if (this._id !== 'body') {\r\n            return '#' + this._id;\r\n        }\r\n        return this._id;\r\n    }\r\n\r\n    get width() {\r\n        return this._width;\r\n    }\r\n\r\n    get height() {\r\n        return this._height;\r\n    }\r\n\r\n    get actualWidth() {\r\n        return this._actualWidth;\r\n    }\r\n\r\n    get actualHeight() {\r\n        return this._actualHeight;\r\n    }\r\n\r\n    /**\r\n     * If colorRange is Array of color then scale range according to it\r\n     * If colorRange is a String like \"category20\", \"category20b\", etc. then scale using d3.scale.category\r\n     */\r\n    get colorRange() {\r\n        var color = this._colorRange;\r\n\r\n        if (typeof color == 'string') {\r\n            try {\r\n                return d3.scale[color]();    \r\n            }\r\n            catch(err) {\r\n                return function(i) {\r\n                    return color;\r\n                };\r\n            }\r\n        } else if (typeof color == 'object') {\r\n            return d3.scale.ordinal().range(color);\r\n        }\r\n    }\r\n\r\n    get margin() {\r\n        return this._margin;\r\n    }\r\n\r\n    get dataOption() {\r\n        return this._dataOption;\r\n    }\r\n\r\n    get svg() {\r\n        return this._svg;\r\n    }\r\n\r\n    get body() {\r\n        return this._body;\r\n    }\r\n\r\n    get options() {\r\n        return this._options;\r\n    }\r\n\r\n    get hover() {\r\n        return this._hover;\r\n    }\r\n\r\n    get click() {\r\n        return this._click;\r\n    }\r\n\r\n    get dataTarget() {\r\n        return this._dataTarget;\r\n    }\r\n\r\n    get dataSource() {\r\n        return this._dataSource;\r\n    }\r\n\r\n    get eventFactory() {\r\n        return this._eventFactory;\r\n    }\r\n\r\n    get x() {\r\n        return this._x;\r\n    }\r\n\r\n    get y() {\r\n        return this._y;\r\n    }\r\n\r\n    get chartType() {\r\n        return this._chartType;\r\n    }\r\n\r\n    get title() {\r\n        return this._title;\r\n    }\r\n\r\n    get axis() {\r\n        return this._axis;\r\n    }\r\n\r\n    get legend() {\r\n        return this._legend;\r\n    }\r\n\r\n    get table() {\r\n        return this._table;\r\n    }\r\n\r\n    get tooltip() {\r\n        return this._tooltip;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n    \r\n    \r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    set container(arg) {\r\n        if (arg) {\r\n            this._container = arg;\r\n        }\r\n    }\r\n    \r\n    set id(arg) {\r\n        if (arg) {\r\n            this._id = arg;\r\n        }\r\n    }\r\n\r\n    set width(arg) {\r\n        if (arg) {\r\n            this._width = arg;\r\n        }\r\n    }\r\n\r\n    set height(arg) {\r\n        if (arg) {\r\n            this._height = arg;\r\n        }\r\n    }\r\n\r\n    set actualWidth(arg) {\r\n        if (arg) {\r\n            this._actualWidth = arg;\r\n        }\r\n    }\r\n\r\n    set actualHeight(arg) {\r\n        if (arg) {\r\n            this._actualHeight = arg;\r\n        }\r\n    }\r\n\r\n    set colorRange(arg) {\r\n        if (arg) {\r\n            this._colorRange = arg;\r\n        }\r\n    }\r\n\r\n    set margin(arg) {\r\n        if (arg) {\r\n            this._margin = arg;\r\n        }\r\n    }\r\n\r\n    set dataOption(arg) {\r\n        if (arg) {\r\n            this._dataOption = arg;\r\n        }\r\n    }\r\n\r\n    set svg(arg) {\r\n        if (arg) {\r\n            this._svg = arg;\r\n        }\r\n    }\r\n\r\n    set body(arg) {\r\n        if (arg) {\r\n            this._body = arg;\r\n        }\r\n    }\r\n\r\n    set options(arg) {\r\n        if (arg) {\r\n            this._options = arg;\r\n        }\r\n    }\r\n\r\n    set hover(arg) {\r\n        if (arg) {\r\n            this._hover = arg;\r\n        }\r\n    }\r\n\r\n    set click(arg) {\r\n        if (arg) {\r\n            this._click = arg;\r\n        }\r\n    }\r\n\r\n    set dataTarget(arg) {\r\n        if (arg) {\r\n            this._dataTarget = arg;\r\n        }\r\n    }\r\n\r\n    set dataSource(arg) {\r\n        if (arg) {\r\n            this._dataSource = arg;\r\n        }\r\n    }\r\n\r\n    set eventFactory(arg) {\r\n        if (arg) {\r\n            this._eventFactory = arg;\r\n        }\r\n    }\r\n\r\n    set x(arg) {\r\n        if (arg) {\r\n            this._x = arg;\r\n        }\r\n    }\r\n\r\n    set y(arg) {\r\n        if (arg) {\r\n            this._y = arg;\r\n        }\r\n    }\r\n\r\n    set chartType(arg) {\r\n        if (arg) {\r\n            this._chartType = arg;\r\n        }\r\n    }\r\n\r\n    set title(arg) {\r\n        if (arg) {\r\n            this._title = arg;\r\n        }\r\n    }\r\n\r\n    set axis(arg) {\r\n        if (arg) {\r\n            this._axis = arg;\r\n        }\r\n    }\r\n\r\n    set legend(arg) {\r\n        if (arg) {\r\n            this._legend = arg;\r\n        }\r\n    }\r\n\r\n    set table(arg) {\r\n        if (arg) {\r\n            this._table = arg;\r\n        }\r\n    }\r\n\r\n    set tooltip(arg) {\r\n        if (arg) {\r\n            this._tooltip = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n    \r\n    \r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    /**\r\n     * Init parent config\r\n     * Only in BaseClass <Chart> to init config\r\n     */\r\n    initConfig(config) {\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n\r\n        var options = self.options;\r\n\r\n        self.id        = options.id        || config.id;\r\n        self.width     = options.width     || config.width;\r\n        self.height    = options.height    || config.height;\r\n        self.colorRange= options.colorRange|| config.colorRange;\r\n        \r\n        self.margin    = Helper.merge(options.margin, config.margin);\r\n        self.hover     = Helper.merge(options.hover, config.hover);\r\n        self.click     = Helper.merge(options.click, config.click);\r\n        \r\n        self.dataOption= Helper.mergeDeep(config.data, options.data);\r\n\r\n        self.options.subchart  = Helper.merge(options.subchart, config.subchart);\r\n        self.options.table     = Helper.merge(options.table, config.table);\r\n        self.options.tooltip   = Helper.merge(options.tooltip, config.tooltip);\r\n        self.options.legend    = Helper.merge(options.legend, config.legend);\r\n        self.options.axis      = Helper.mergeDeep(config.axis, options.axis);\r\n    }\r\n\r\n    /**\r\n     * Update parent config\r\n     */\r\n    updateConfig(config) {\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n\r\n        var options = self.options;\r\n\r\n        self.id        = options.id        || config.id;\r\n        self.width     = options.width     || config.width;\r\n        self.height    = options.height    || config.height;\r\n        self.colorRange= options.colorRange|| config.colorRange;\r\n        \r\n        self.margin    = Helper.merge(options.margin, config.margin);\r\n        self.hover     = Helper.merge(options.hover, config.hover);\r\n        self.click     = Helper.merge(options.click, config.click);\r\n        \r\n        self.dataOption= Helper.mergeDeep(config.data, options.data);\r\n\r\n        self.options.subchart  = Helper.merge(options.subchart, config.subchart);\r\n        self.options.table     = Helper.merge(options.table, config.table);\r\n        self.options.tooltip   = Helper.merge(options.tooltip, config.tooltip);\r\n        self.options.legend    = Helper.merge(options.legend, config.legend);\r\n        self.options.axis      = Helper.mergeDeep(config.axis, options.axis);\r\n    }\r\n\r\n    /**\r\n     * Draw or Re-draw Base Chart\r\n     */\r\n    draw() {\r\n        var self = this;\r\n\r\n        var margin  = self.margin,\r\n            id      = self.id,\r\n            width   = self.width - margin.left - margin.right,\r\n            height  = self.height - margin.top - margin.bottom;\r\n\r\n        self.container = d3.select(id);\r\n\r\n        // Remove existing chart at current container\r\n        self.container.selectAll(\".c9-svg\").data([]).exit().remove();\r\n\r\n        self.svg = d3.select(id)\r\n            .style('position', 'relative')\r\n            .append(\"svg\")\r\n            .attr('class', 'c9-svg')\r\n            .attr(\"width\", self.width)\r\n            .attr(\"height\", self.height)\r\n            .style('overflow', 'visible'); // to overwrite overflow: hidden by Boostrap as default\r\n\r\n\r\n        self.svg.append(\"defs\")\r\n            .append(\"clipPath\")\r\n                .attr(\"id\", \"clip\")\r\n            .append(\"rect\")\r\n                .attr(\"width\", width)\r\n                .attr(\"height\", height);\r\n\r\n        self.body = self.svg\r\n                    .append(\"g\")\r\n                    .attr('class', 'c9-chart c9-custom-container')\r\n                    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");  \r\n\r\n    }\r\n\r\n    /**\r\n     * Get lightening color to create effect when interacting\r\n     * @param  {[type]} color [description]\r\n     */\r\n    getLightenColor(color) {\r\n        return Helper.shadeColor(0.5, color);\r\n    }\r\n\r\n    /*=====  End of Main Functions  ======*/\r\n\r\n    /*========================================\r\n    =            User's Functions            =\r\n    ========================================*/\r\n    /**\r\n     * Custom Event Listener\r\n     * @param  {[type]}   eventType [description]\r\n     * @param  {Function} callback  [description]\r\n     */\r\n    on(eventType, callback) {\r\n\r\n    }\r\n\r\n    /**\r\n     * Set option via stand-alone function\r\n     * @param {[type]} key   [description]\r\n     * @param {[type]} value [description]\r\n     */\r\n    setOption(key, value) {\r\n        var self = this;\r\n\r\n        Helper.set(key, value, self.options);\r\n\r\n        // Self-update on Base Chart to make sure that self.options consisting\r\n        // of all new values\r\n        self.updateConfig(self.options);\r\n    }\r\n\r\n    /**\r\n     * Update chart based on new data with optional dataConfig\r\n     * @param  {[type]} data       [description]\r\n     * @param  {[type]} dataConfig [description]\r\n     */\r\n    updateData(data, dataConfig) {\r\n\r\n    }\r\n    /*=====  End of User's Functions  ======*/\r\n    \r\n\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/C9.Chart.js\n **/","var Helper = {\r\n    \r\n    each: function(loopable, callback, self, reverse) {\r\n        // Check to see if null or undefined firstly.\r\n        var i, len;\r\n        if (self.isArray(loopable)) {\r\n            len = loopable.length;\r\n            if (reverse) {\r\n                for (i = len - 1; i >= 0; i--) {\r\n                    callback.call(self, loopable[i], i);\r\n                }\r\n            } else {\r\n                for (i = 0; i < len; i++) {\r\n                    callback.call(self, loopable[i], i);\r\n                }\r\n            }\r\n        } else if (typeof loopable === 'object') {\r\n            var keys = Object.keys(loopable);\r\n            len = keys.length;\r\n            for (i = 0; i < len; i++) {\r\n                callback.call(self, loopable[keys[i]], keys[i]);\r\n            }\r\n        }\r\n    },\r\n\r\n    setValue: function(value, key) {\r\n        var self = this;\r\n        self[key] = value;\r\n    },\r\n\r\n    setPrefix: function(config) {\r\n        var constPrefix = '_';\r\n        if (config) {\r\n            return constPrefix + config;\r\n        }\r\n    },\r\n\r\n    isEmpty: function(value) {\r\n        return value === null || value === undefined || (Util.isArray(value) && value.length === 0) || (Util.isArray(value) && Util.isEmpty(value[0]));\r\n    },\r\n\r\n    isObject: function(object) {\r\n        return !Util.isEmpty(object) && typeof(object) === 'object';\r\n    },\r\n\r\n    isArray: function(array) {\r\n        return !Util.isEmpty(array) && (Array.isArray(array) || Object.prototype.toString.call(array) === '[object Array]');\r\n    },\r\n\r\n    isFunction: function(func) {\r\n        return !Util.isEmpty(func) && typeof(func) === 'function';\r\n    },\r\n\r\n    // Overlap source by target\r\n    merge: function(target, source){\r\n        var obj3 = {};\r\n        for (var attrname in source) { if (!Util.isEmpty(source[attrname])) obj3[attrname] = source[attrname]; }\r\n        for (var attrname in target) { if (!Util.isEmpty(target[attrname])) obj3[attrname] = target[attrname]; }\r\n        return obj3;\r\n    },\r\n\r\n    // Overlap target by source\r\n    mergeDeep: function(target, source) {\r\n        return mergeDeep(target, source);\r\n    },\r\n\r\n    get: function(_key, _data){\r\n        var _keys = _key.split(\".\");\r\n        var _current = _data;\r\n\r\n        for (var i = 0; i < _keys.length; i++) {\r\n\r\n            if ('undefined' == typeof(_current[_keys[i]])) {\r\n                return '';\r\n            } else {\r\n                _current = _current[_keys[i]];\r\n            }\r\n        }\r\n\r\n        return _current;\r\n    },\r\n    \r\n    set: function(_key, _value, _context) {\r\n        var _current = _context;  // a moving reference to internal objects within obj\r\n        var _keys = _key.split('.');\r\n        var len = _keys.length;\r\n        for(var i = 0; i < len-1; i++) {\r\n            var _handle = _keys[i];\r\n            if( !_current[_handle] ) _current[_handle] = {}\r\n            _current = _current[_handle];\r\n        }\r\n\r\n        _current[_keys[len-1]] = _value;\r\n    },\r\n\r\n    max: function(arr) {\r\n        return Math.max(...arr);\r\n    }, \r\n\r\n    min: function(arr) {\r\n        return Math.min(...arr);\r\n    }, \r\n\r\n    sum: function(arr) {\r\n        return arr.reduce(function(a, b) { return a + b; }, 0);\r\n    },\r\n\r\n    guid: function() {\r\n        return 'c9-xxxxxx-4xxx-yxxx'.replace(/[xy]/g, function(c) {\r\n            let r = Math.random()*16|0, \r\n                v = c == 'x' ? r : (r&0x3|0x8);\r\n            return v.toString(16);\r\n        });\r\n    },\r\n\r\n    getMinMax: function(data, type, isLogaric) {\r\n        var self  = this;\r\n        var _temp = new Array();\r\n        var _min  = 0,\r\n            _max  = 0;\r\n        if (type == \"stack\") {\r\n            data.forEach(function (d){\r\n                d.forEach(function (s){\r\n                    if (s.y0 > 0)\r\n                        _temp.push(s.y1);\r\n                    else\r\n                        _temp.push(s.y1 + s.y0);\r\n                })\r\n            })\r\n        } else {\r\n            data.forEach(function (d){\r\n                d.forEach(function (s){\r\n                    _temp.push(s.y0);\r\n                })\r\n            });\r\n        }\r\n\r\n\r\n        var _newMin = self.min(_temp);\r\n        var _newMax = self.max(_temp);\r\n        if (_newMin < _min || isLogaric)\r\n            _min = _newMin;\r\n        if (_newMax > _max)\r\n            _max = _newMax;\r\n\r\n        return {min: _min, max: _max};\r\n    },\r\n    dateParser: function(format) {\r\n        return d3.time.format(format).parse;\r\n    },\r\n    dateFormatter: function(format) {\r\n        return d3.time.format(format);\r\n    },\r\n    // Convert color 'from' to 'to' (if any) in propotion of 'p'\r\n    // Use to lighten/darken specific color\r\n    shadeColor: function(p, from, to) {\r\n        // Convert color from 'Name' to 'Hex'\r\n        from = Util.convertColorToHex(from) || from;\r\n        \r\n        if(typeof(p)!=\"number\"||p<-1||p>1||typeof(from)!=\"string\"||(from[0]!='r'&&from[0]!='#')||(typeof(to)!=\"string\"&&typeof(to)!=\"undefined\"))return null; //ErrorCheck\r\n        if(!this.sbcRip)\r\n            this.sbcRip=function(d) {\r\n                var l=d.length,RGB=new Object();\r\n                if(l>9){\r\n                    d=d.split(\",\");\r\n                    if(d.length<3||d.length>4)return null;//ErrorCheck\r\n                    RGB[0]=i(d[0].slice(4)),RGB[1]=i(d[1]),RGB[2]=i(d[2]),RGB[3]=d[3]?parseFloat(d[3]):-1;\r\n                }else{\r\n                    if(l==8||l==6||l<4)return null; //ErrorCheck\r\n                    if(l<6)d=\"#\"+d[1]+d[1]+d[2]+d[2]+d[3]+d[3]+(l>4?d[4]+\"\"+d[4]:\"\"); //3 digit\r\n                    d=i(d.slice(1),16),RGB[0]=d>>16&255,RGB[1]=d>>8&255,RGB[2]=d&255,RGB[3]=l==9||l==5?r(((d>>24&255)/255)*10000)/10000:-1;\r\n                }\r\n                return RGB;\r\n            }\r\n        var i=parseInt,r=Math.round,h=from.length>9,h=typeof(to)==\"string\"?to.length>9?true:to==\"c\"?!h:false:h,b=p<0,p=b?p*-1:p,to=to&&to!=\"c\"?to:b?\"#000000\":\"#FFFFFF\",f=this.sbcRip(from),t=this.sbcRip(to);\r\n        if(!f||!t)return null; //ErrorCheck\r\n        if(h)return \"rgb(\"+r((t[0]-f[0])*p+f[0])+\",\"+r((t[1]-f[1])*p+f[1])+\",\"+r((t[2]-f[2])*p+f[2])+(f[3]<0&&t[3]<0?\")\":\",\"+(f[3]>-1&&t[3]>-1?r(((t[3]-f[3])*p+f[3])*10000)/10000:t[3]<0?f[3]:t[3])+\")\");\r\n        else return \"#\"+(0x100000000+(f[3]>-1&&t[3]>-1?r(((t[3]-f[3])*p+f[3])*255):t[3]>-1?r(t[3]*255):f[3]>-1?r(f[3]*255):255)*0x1000000+r((t[0]-f[0])*p+f[0])*0x10000+r((t[1]-f[1])*p+f[1])*0x100+r((t[2]-f[2])*p+f[2])).toString(16).slice(f[3]>-1||t[3]>-1?1:3);\r\n    },\r\n    //smooth scroll c9 table\r\n    scroll: function(element, to, duration) {\r\n        var self = this;\r\n        if (duration <= 0) return;\r\n        var difference = to - element.scrollTop;\r\n        var perTick = difference / duration * 10;\r\n\r\n        setTimeout(function() {\r\n            element.scrollTop = element.scrollTop + perTick;\r\n            if (element.scrollTop === to) return;\r\n            self.scroll(element, to, duration - 10);\r\n        }, 10);\r\n    }   \r\n};\r\n\r\nvar Util = {\r\n    isEmpty: function(value) {\r\n        return value === null || value === undefined;\r\n    },\r\n\r\n    isArray: function(array) {\r\n        return Array.isArray(array) || Object.prototype.toString.call(array) === '[object Array]';\r\n    },\r\n\r\n    isObject: function(object) {\r\n        return (object && typeof object === 'object' && !Array.isArray(object));\r\n    },\r\n\r\n    convertColorToHex: function(colour) {\r\n        var colours = {\r\n            \"aliceblue\":\"#f0f8ff\",\"antiquewhite\":\"#faebd7\",\"aqua\":\"#00ffff\",\"aquamarine\":\"#7fffd4\",\"azure\":\"#f0ffff\",\r\n            \"beige\":\"#f5f5dc\",\"bisque\":\"#ffe4c4\",\"black\":\"#000000\",\"blanchedalmond\":\"#ffebcd\",\"blue\":\"#0000ff\",\"blueviolet\":\"#8a2be2\",\"brown\":\"#a52a2a\",\"burlywood\":\"#deb887\",\r\n            \"cadetblue\":\"#5f9ea0\",\"chartreuse\":\"#7fff00\",\"chocolate\":\"#d2691e\",\"coral\":\"#ff7f50\",\"cornflowerblue\":\"#6495ed\",\"cornsilk\":\"#fff8dc\",\"crimson\":\"#dc143c\",\"cyan\":\"#00ffff\",\r\n            \"darkblue\":\"#00008b\",\"darkcyan\":\"#008b8b\",\"darkgoldenrod\":\"#b8860b\",\"darkgray\":\"#a9a9a9\",\"darkgreen\":\"#006400\",\"darkkhaki\":\"#bdb76b\",\"darkmagenta\":\"#8b008b\",\"darkolivegreen\":\"#556b2f\",\r\n            \"darkorange\":\"#ff8c00\",\"darkorchid\":\"#9932cc\",\"darkred\":\"#8b0000\",\"darksalmon\":\"#e9967a\",\"darkseagreen\":\"#8fbc8f\",\"darkslateblue\":\"#483d8b\",\"darkslategray\":\"#2f4f4f\",\"darkturquoise\":\"#00ced1\",\r\n            \"darkviolet\":\"#9400d3\",\"deeppink\":\"#ff1493\",\"deepskyblue\":\"#00bfff\",\"dimgray\":\"#696969\",\"dodgerblue\":\"#1e90ff\",\r\n            \"firebrick\":\"#b22222\",\"floralwhite\":\"#fffaf0\",\"forestgreen\":\"#228b22\",\"fuchsia\":\"#ff00ff\",\r\n            \"gainsboro\":\"#dcdcdc\",\"ghostwhite\":\"#f8f8ff\",\"gold\":\"#ffd700\",\"goldenrod\":\"#daa520\",\"gray\":\"#808080\",\"green\":\"#008000\",\"greenyellow\":\"#adff2f\",\r\n            \"honeydew\":\"#f0fff0\",\"hotpink\":\"#ff69b4\",\r\n            \"indianred \":\"#cd5c5c\",\"indigo\":\"#4b0082\",\"ivory\":\"#fffff0\",\"khaki\":\"#f0e68c\",\r\n            \"lavender\":\"#e6e6fa\",\"lavenderblush\":\"#fff0f5\",\"lawngreen\":\"#7cfc00\",\"lemonchiffon\":\"#fffacd\",\"lightblue\":\"#add8e6\",\"lightcoral\":\"#f08080\",\"lightcyan\":\"#e0ffff\",\"lightgoldenrodyellow\":\"#fafad2\",\r\n            \"lightgrey\":\"#d3d3d3\",\"lightgreen\":\"#90ee90\",\"lightpink\":\"#ffb6c1\",\"lightsalmon\":\"#ffa07a\",\"lightseagreen\":\"#20b2aa\",\"lightskyblue\":\"#87cefa\",\"lightslategray\":\"#778899\",\"lightsteelblue\":\"#b0c4de\",\r\n            \"lightyellow\":\"#ffffe0\",\"lime\":\"#00ff00\",\"limegreen\":\"#32cd32\",\"linen\":\"#faf0e6\",\r\n            \"magenta\":\"#ff00ff\",\"maroon\":\"#800000\",\"mediumaquamarine\":\"#66cdaa\",\"mediumblue\":\"#0000cd\",\"mediumorchid\":\"#ba55d3\",\"mediumpurple\":\"#9370d8\",\"mediumseagreen\":\"#3cb371\",\"mediumslateblue\":\"#7b68ee\",\r\n            \"mediumspringgreen\":\"#00fa9a\",\"mediumturquoise\":\"#48d1cc\",\"mediumvioletred\":\"#c71585\",\"midnightblue\":\"#191970\",\"mintcream\":\"#f5fffa\",\"mistyrose\":\"#ffe4e1\",\"moccasin\":\"#ffe4b5\",\r\n            \"navajowhite\":\"#ffdead\",\"navy\":\"#000080\",\r\n            \"oldlace\":\"#fdf5e6\",\"olive\":\"#808000\",\"olivedrab\":\"#6b8e23\",\"orange\":\"#ffa500\",\"orangered\":\"#ff4500\",\"orchid\":\"#da70d6\",\r\n            \"palegoldenrod\":\"#eee8aa\",\"palegreen\":\"#98fb98\",\"paleturquoise\":\"#afeeee\",\"palevioletred\":\"#d87093\",\"papayawhip\":\"#ffefd5\",\"peachpuff\":\"#ffdab9\",\"peru\":\"#cd853f\",\"pink\":\"#ffc0cb\",\"plum\":\"#dda0dd\",\"powderblue\":\"#b0e0e6\",\"purple\":\"#800080\",\r\n            \"red\":\"#ff0000\",\"rosybrown\":\"#bc8f8f\",\"royalblue\":\"#4169e1\",\r\n            \"saddlebrown\":\"#8b4513\",\"salmon\":\"#fa8072\",\"sandybrown\":\"#f4a460\",\"seagreen\":\"#2e8b57\",\"seashell\":\"#fff5ee\",\"sienna\":\"#a0522d\",\"silver\":\"#c0c0c0\",\"skyblue\":\"#87ceeb\",\"slateblue\":\"#6a5acd\",\"slategray\":\"#708090\",\"snow\":\"#fffafa\",\"springgreen\":\"#00ff7f\",\"steelblue\":\"#4682b4\",\r\n            \"tan\":\"#d2b48c\",\"teal\":\"#008080\",\"thistle\":\"#d8bfd8\",\"tomato\":\"#ff6347\",\"turquoise\":\"#40e0d0\",\r\n            \"violet\":\"#ee82ee\",\r\n            \"wheat\":\"#f5deb3\",\"white\":\"#ffffff\",\"whitesmoke\":\"#f5f5f5\",\r\n            \"yellow\":\"#ffff00\",\"yellowgreen\":\"#9acd32\"\r\n        };\r\n\r\n        if (typeof colours[colour.toLowerCase()] != 'undefined')\r\n            return colours[colour.toLowerCase()];\r\n\r\n        return false;\r\n    }\r\n};\r\n\r\nfunction mergeDeep(target, source) {\r\n    if (Util.isObject(target) && Util.isObject(source)) {\r\n        for (const key in source) {\r\n            if (Util.isObject(source[key])) {\r\n                if (Helper.isEmpty(target[key])) {\r\n                    Object.assign(target, {\r\n                        [key]: {}\r\n                    });\r\n                }\r\n                mergeDeep(target[key], source[key]);\r\n            } else {\r\n                Object.assign(target, {\r\n                    [key]: source[key]\r\n                });\r\n            }\r\n        }\r\n    }\r\n    return target;\r\n}\r\n\r\n\r\n\r\n\r\nmodule.exports = Helper;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/helper/C9.Helper.js\n **/","import Helper from '../../helper/C9.Helper';\r\n\r\nexport default class Axis {\r\n    constructor(options, chart, width, height) {\r\n        var self = this;\r\n\r\n        var config = {\r\n                x: {\r\n                    tick: {\r\n                        rotate: 0, \r\n                        count: 10, // number of ticks to display\r\n                        size: 6, // size of tick\r\n                        padding: 3,\r\n                        format: undefined,\r\n                        values: [],\r\n                        //the following use for timeline chart\r\n                        time: undefined,\r\n                        interval: 1\r\n                    },\r\n                    label: {\r\n                        text: \"Name\",\r\n                        position: \"default\"\r\n                    },\r\n                    show: true,\r\n                    grid: false,\r\n                    type: \"\"\r\n                },\r\n                y: {\r\n                    tick: {\r\n                        rotate: 0,\r\n                        count: 10,\r\n                        size: 6,\r\n                        padding: 3,\r\n                        format: undefined,\r\n                        values: []\r\n                    },\r\n                    label: {\r\n                        text: \"Value\",\r\n                        position: \"default\"\r\n                    },\r\n                    show: true,\r\n                    grid: true,\r\n                    type: \"\"\r\n                }\r\n            };\r\n\r\n        self._options   = options;\r\n        self._chart     = chart;\r\n        self._width     = width;\r\n        self._height    = height;\r\n\r\n        self.updateConfig(config);\r\n            \r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    \r\n    get x() {\r\n        return this._x;\r\n    }\r\n\r\n    get y() {\r\n        return this._y;\r\n    }\r\n\r\n    get xAxis() {\r\n        return this._xAxis;\r\n    }\r\n\r\n    get yAxis() {\r\n        return this._yAxis;\r\n    }\r\n\r\n    get chart() {\r\n        return this._chart;\r\n    }\r\n\r\n    get options() {\r\n        return this._options;\r\n    }\r\n\r\n    get width() {\r\n        return this._width;\r\n    }\r\n\r\n    get height() {\r\n        return this._height;\r\n    }\r\n\r\n    get data() {\r\n        return this._data;\r\n    }\r\n    \r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    \r\n    set x(arg) {\r\n        if (arg) {\r\n            this._x = arg;\r\n        }\r\n    }\r\n\r\n    set y(arg) {\r\n        if (arg) {\r\n            this._y = arg;\r\n        }\r\n    }\r\n\r\n    set xAxis(arg) {\r\n        if (arg) {\r\n            this._xAxis = arg;\r\n        }\r\n    }\r\n\r\n    set yAxis(arg) {\r\n        if (arg) {\r\n            this._yAxis = arg;\r\n        }\r\n    }\r\n\r\n    set chart(arg) {\r\n        if (arg) {\r\n            this._chart = arg;\r\n        }\r\n    }\r\n\r\n    set options(arg) {\r\n        if (arg) {\r\n            this._options = arg;\r\n        }\r\n    }\r\n\r\n    set width(arg) {\r\n        if (arg) {\r\n            this._width = arg;\r\n        }\r\n    }\r\n\r\n    set height(arg) {\r\n        if (arg) {\r\n            this._height = arg;\r\n        }\r\n    }\r\n\r\n    set data(arg) {\r\n        if (arg) {\r\n            this._data = arg;\r\n        }\r\n    }\r\n    \r\n    /*=====  End of Setter  ======*/\r\n    \r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    updateConfig(config) {\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n        \r\n        self.x = self.chart.x;\r\n        self.y = self.chart.y;\r\n\r\n        self.data       = self.chart.dataTarget;\r\n        self.isLogaricVariant = self.chart.options.isLogaric;\r\n\r\n        if (self.chart.chartType == \"timeline\") {\r\n            var xScale = d3.time.scale()\r\n                .domain([self.chart.options.starting, self.chart.options.ending])\r\n                .range([0, self.width]);\r\n\r\n            self.xAxis = d3.svg.axis()\r\n                .scale(xScale)\r\n                .orient(\"bottom\")\r\n                .tickFormat(self.options.x.tick.format === undefined ? d3.time.format(\"%I %p\") : self.options.x.tick.format)\r\n                // .tickSize(options.tickFormat === undefined ? 6 : options.tickFormat.tickSize)\r\n                .ticks(self.options.x.tick.time || self.options.x.tick.count, self.options.x.tick.interval);\r\n            // delete options.starting;\r\n            // delete options.ending;\r\n        } else {\r\n            self.xAxis = d3.svg.axis()\r\n                .scale(self.x)\r\n                .orient(\"bottom\")\r\n                .tickPadding(self.options.x.tick.padding)\r\n                .ticks(self.options.x.tick.count)\r\n                .tickValues(self.options.x.tick.values.length > 0 ? self.options.x.tick.values : undefined)\r\n                .tickFormat(self.options.x.type == \"timeseries\" ? self.options.x.tick.format || d3.time.format(\"%Y-%m-%d\") : self.options.x.tick.format ? self.options.x.tick.format : undefined);\r\n\r\n            // In LOG scale, can't specify default number of ticks\r\n            // must be filter with tickFormat instead\r\n            // refer: https://github.com/d3/d3/wiki/Quantitative-Scales#log_ticks\r\n            if (self.isLogaricVariant) {\r\n                self.yAxis = d3.svg.axis()\r\n                    .scale(self.y)\r\n                    .orient(\"left\")\r\n                    .ticks(self.options.y.tick.count, self.options.y.type == \"timeseries\" ? self.options.y.tick.format || d3.time.format(\"%Y-%m-%d\") : self.options.y.tick.format ? self.options.y.tick.format : undefined)\r\n                    .tickPadding(self.options.y.tick.padding)\r\n                    .tickValues(self.options.y.tick.values.length > 0 ? self.options.y.tick.values : undefined);\r\n            } else {\r\n                self.yAxis = d3.svg.axis()\r\n                    .scale(self.y)\r\n                    .orient(\"left\")\r\n                    .ticks(self.options.y.tick.count)\r\n                    .tickPadding(self.options.y.tick.padding)\r\n                    .tickValues(self.options.y.tick.values.length > 0 ? self.options.y.tick.values : undefined)\r\n                    .tickFormat(self.options.y.type == \"timeseries\" ? self.options.y.tick.format || d3.time.format(\"%Y-%m-%d\") : self.options.y.tick.format ? self.options.y.tick.format : undefined);\r\n            }   \r\n        }\r\n\r\n        if (self.chart.chartType != \"timeline\") {\r\n            // Grid\r\n            if (self.options.x.grid) {\r\n                self.xAxis.innerTickSize(-self.height)\r\n                    .outerTickSize(0);\r\n            }\r\n\r\n            if (self.options.y.grid) {\r\n                self.yAxis.innerTickSize(-self.width)\r\n                    .outerTickSize(0);\r\n            }\r\n        }\r\n\r\n        var textAnchor = function(angle) {\r\n            var sin = Math.sin(angle * Math.PI / 180).toFixed(15);\r\n            return sin == 0 ? \"middle\" : (sin > 0 ? \"start\" : \"end\");\r\n        };\r\n\r\n        var textDx = function(angle) {\r\n            var sin = Math.sin(angle * Math.PI / 180).toFixed(15);\r\n            return 8 * sin;\r\n        };\r\n\r\n        var textY = function(angle) {\r\n            return 11.5 - 2.5 * (angle / 15) * (angle > 0 ? 1 : -1);\r\n        };\r\n\r\n        //draw x axis\r\n        self.chart.body.append(\"g\")\r\n            .attr(\"class\", \"c9-axis c9-axis-x\")\r\n            .attr(\"transform\", \"translate(0,\" + (self.height) + \")\")\r\n            .call(self.xAxis);\r\n        //draw tick\r\n        d3.select(\".c9-axis.c9-axis-x\").selectAll(\"text\")\r\n            .style(\"text-anchor\", textAnchor(self.options.x.tick.rotate))\r\n            .attr(\"y\", textY(self.options.x.tick.rotate))\r\n            .attr(\"x\", 0)\r\n            .attr(\"dy\", \".71em\")\r\n            .attr(\"dx\", textDx(self.options.x.tick.rotate))\r\n            .attr(\"transform\", \"rotate(\" + self.options.x.tick.rotate + \")\");\r\n        //draw label\r\n        d3.select(\".c9-axis.c9-axis-x\")\r\n            .append(\"text\")\r\n            .attr(\"class\", \"c9-axis c9-axis-x-text\")\r\n            .attr(\"dx\", \"-.8em\")\r\n            .attr(\"dy\", \"-.55em\")\r\n            .attr(\"x\", self.width + 20)\r\n            .attr(\"y\", 10)\r\n            .style(\"text-anchor\", \"start\")\r\n            .text(self.options.x.label.text);\r\n\r\n        //hide x axis\r\n        if (!self.options.x.show) {\r\n            d3.select(\".c9-axis.c9-axis-x>.domain\").style(\"display\", \"none\");\r\n            if (!self.options.x.grid) d3.selectAll(\".c9-axis.c9-axis-x>g.tick>line\").style(\"display\", \"none\");\r\n        }\r\n\r\n        if (self.chart.chartType != \"timeline\") {\r\n            self.chart.body.append(\"g\")\r\n                .attr(\"class\", \"c9-axis c9-axis-y\")\r\n                .call(self.yAxis);\r\n\r\n            d3.select(\".c9-axis.c9-axis-y\")\r\n                .append(\"text\")\r\n                .attr(\"class\", \"c9-axis c9-axis-y-text\")\r\n                .attr(\"y\", -10)\r\n                .attr(\"dy\", \".10\")\r\n                .style(\"text-anchor\", \"end\")\r\n                .text(self.options.y.label.text);\r\n\r\n            if (!self.options.y.show) {\r\n                d3.select(\".c9-axis.c9-axis-y>.domain\").style(\"display\", \"none\");\r\n                if (!self.options.y.grid) d3.selectAll(\".c9-axis.c9-axis-y>g.tick>line\").style(\"display\", \"none\");\r\n            }\r\n        }\r\n    }\r\n\r\n    update(x, y, duration) {\r\n        var self = this;\r\n\r\n        if (!Helper.isEmpty(x)) {\r\n            self.x = x;\r\n\r\n            if (self.chart.chartType == 'timeline') {\r\n                var xScale = d3.time.scale()\r\n                    .domain([self.chart.options.starting, self.chart.options.ending])\r\n                    .range([0, self.width]);\r\n\r\n                self.xAxis.scale(xScale);\r\n            } else {\r\n                self.xAxis.scale(self.x);\r\n            }\r\n\r\n            self.chart.body.select('.c9-axis.c9-axis-x').transition().duration(duration).call(self.xAxis);\r\n        }\r\n        if (!Helper.isEmpty(y)) {\r\n            self.y = y;\r\n\r\n            if (self.chart.chartType == 'timeline') {\r\n                return ;\r\n            } else {\r\n                self.yAxis.scale(self.y);\r\n            }\r\n\r\n            self.chart.body.select(\".c9-axis.c9-axis-y\").transition().duration(duration).call(self.yAxis);\r\n        }\r\n    }\r\n\r\n    draw() {\r\n        var self = this;\r\n\r\n        self.update(self.x, self.y, 100);\r\n    }\r\n    /*=====  End of Main Functions  ======*/  \r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/utils/C9.Axis.js\n **/","import Helper from '../../helper/C9.Helper';\r\n\r\nexport default class Title {\r\n    constructor(options, chart) {\r\n        var self = this;\r\n\r\n        var config = {\r\n            show      : true,\r\n            text      : \"Sample Chart\",\r\n            position  : 'top',\r\n            fontSize  : \"14px\"\r\n        };\r\n\r\n        self._options  = options;\r\n        self._chart    = chart;\r\n\r\n        self.updateConfig(config);\r\n            \r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    get chart() {\r\n        return this._chart;\r\n    }\r\n\r\n    get options() {\r\n        return this._options;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/ \r\n    set chart(arg) {\r\n        if (arg) {\r\n            this._chart = arg;\r\n        }\r\n    }\r\n\r\n    set options(arg) {\r\n        if (arg) {\r\n            this._options = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n    \r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    updateConfig(config) {\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n    }\r\n\r\n    draw() {\r\n        var self = this;\r\n\r\n        if (self.options.show) {\r\n            var text = self.chart.svg\r\n                            .append(\"g\")\r\n                                .attr('class', 'c9-custom-title c9-custom-title-container')\r\n                            .append(\"text\")\r\n                                .attr(\"class\", \"c9-custom-title c9-custom-title-text\");\r\n\r\n            // Get title self.chart.width: text.node().getComputedTextLength()           \r\n            // text.attr(\"x\", (((self.chart.width - text.node().getComputedTextLength()) / 2)))           \r\n            text.attr(\"x\", (((self.chart.width - 200) / 2)))           \r\n                .attr(\"y\", self.setYLocation(self.chart.height, self.chart.margin))\r\n                .attr(\"text-anchor\", \"middle\")  \r\n                .style(\"font-size\", self.options.fontSize)  \r\n                .text(self.options.text);\r\n        }\r\n    }\r\n\r\n    setYLocation(height, margin) {\r\n        var self = this;\r\n        \r\n        if (self.options.position === 'top') {\r\n            return (margin.top / 2);\r\n        } else if (self.options.position === 'bottom') {\r\n            return (height - margin.bottom / 2);\r\n        }\r\n    }\r\n    /*=====  End of Main Functions  ======*/\r\n    \r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/utils/C9.Title.js\n **/","import Helper from '../../helper/C9.Helper';\r\n\r\nexport default class Legend {\r\n    constructor(options, chart) {\r\n        var self = this;\r\n\r\n        var config = {\r\n            show      : true,\r\n            position  : \"top\",\r\n            size      : 10,\r\n            fontSize  : \"12px\",\r\n            fontColor : \"#999\",\r\n            fontWeight: 'bold',\r\n            margin    : [5, 5, 5, 5],\r\n            space     : 10,\r\n            box       : false,\r\n            // legendStyle     : \"rect\" // TODO: Allow user to choose type of legend (circle, rect, etc.)\r\n        };\r\n\r\n        \r\n        self._options   = options;\r\n        self._chart     = chart;\r\n\r\n        self.updateConfig(config);\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    get options() {\r\n        return this._options;\r\n    }\r\n\r\n    get data() {\r\n        return this._data;\r\n    }\r\n\r\n    get chart() {\r\n        return this._chart;\r\n    }\r\n\r\n    get item() {\r\n        return this._item;\r\n    }\r\n\r\n    get itemEventFactory() {\r\n        return this._itemEventFactory;\r\n    }\r\n    \r\n    get maxWidth() {\r\n        return this._maxWidth;\r\n    }\r\n\r\n    get maxHeight() {\r\n        return this._maxHeight;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    set options(arg) {\r\n        if (arg) {\r\n            this._options = arg;\r\n        }\r\n    }\r\n\r\n    set data(arg) {\r\n        if (arg) {\r\n            this._data = arg;\r\n        }\r\n    }\r\n\r\n    set chart(arg) {\r\n        if (arg) {\r\n            this._chart = arg;\r\n        }\r\n    }\r\n\r\n    set item(arg) {\r\n        if (arg) {\r\n            this._item = arg;\r\n        }\r\n    }\r\n\r\n    set itemEventFactory(arg) {\r\n        if (arg) {\r\n            this._itemEventFactory = arg;\r\n        }\r\n    }\r\n    \r\n    set maxWidth(arg) {\r\n        if (arg) {\r\n            this._maxWidth = arg;\r\n        }\r\n    }\r\n\r\n    set maxHeight(arg) {\r\n        if (arg) {\r\n            this._maxHeight = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n    \r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    updateConfig(config) {\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n\r\n        self.maxWidth   = self.chart.width;\r\n        self.maxHeight  = self.chart.height;\r\n        self.data       = self.chart.dataTarget;\r\n    }\r\n\r\n    update(data) {\r\n        var self = this;\r\n\r\n        self.data = data;\r\n\r\n        if (self.options.show) {\r\n            // Remove current legend\r\n            self.chart.svg.selectAll('.c9-custom-legend.c9-custom-legend-container').remove();\r\n\r\n            // var color = self.color;\r\n            var domain = [];\r\n\r\n            if (self.chart.chartType == \"bar\") {\r\n                self.data = self.data[self.data.reduce((p, c, i, a) => a[p].length > c.length ? p : i, 0)];\r\n            }\r\n\r\n            // Legend will be appended in main SVG container\r\n            // var container = d3.select(self._body[0][0].parentNode)\r\n            var container = self.chart.svg\r\n                .append(\"g\")\r\n                .attr(\"class\", \"c9-custom-legend c9-custom-legend-container\");\r\n            \r\n            // var legendBox = legendContainer.selectAll(\".c9-custom-legend.c9-custom-legend-box\").data([true]).enter();\r\n\r\n            self.item = container.selectAll(\"g.c9-custom-legend.c9-custom-legend-item\")\r\n                .data(self.data)\r\n                .enter().append(\"g\")\r\n                .attr(\"class\", \"c9-custom-legend c9-custom-legend-item\")\r\n                .attr('data-ref', function(d) { return d['data-ref']; })\r\n                .attr('data-enable', function(d) { return d['enable']; })\r\n                \r\n\r\n            self.item.append('rect')\r\n                .attr('class', 'c9-custom-legend c9-custom-legend-rect')\r\n                .attr('width', self.options.size)\r\n                .attr('height', self.options.size)\r\n                .attr('r', self.options.size)\r\n                .attr('fill', function(d){ return d.color || d[0].color; })\r\n                // .attr('stroke', function(d){ return d.color || d[0].color; })\r\n                .style('cursor', 'pointer');\r\n\r\n            self.item.append('rect')\r\n                .attr('width', 5)\r\n                .attr('height', self.options.size)\r\n                .attr('x', self.options.size)\r\n                .attr('y', 0)\r\n                .attr('opacity', 0)\r\n                .style('cursor', 'pointer');\r\n\r\n            self.item.append('text')\r\n                .attr('class', 'c9-custom-legend c9-custom-legend-text')\r\n                .attr('x', self.options.size + 5)\r\n                .attr('y', self.options.size)\r\n                .style('font-size', self.options.fontSize)\r\n                .style('font-weight', self.options.fontWeight)\r\n                .style('fill', self.options.fontColor)\r\n                .style('cursor', 'pointer')\r\n                // .attr('text-anchor', 'middle')\r\n                .text(function(d) { return self.chart.chartType == \"bar\" ? d.group : d.name; });\r\n\r\n            //caculate position for legend\r\n            var getSize = function(item) { \r\n                return item.getBoundingClientRect() \r\n            };\r\n            var getXY = function(item) { \r\n                var xy = d3.select(item).attr('transform').split(','); \r\n                return {\r\n                    x: parseFloat(xy[0].replace('translate(', '')), \r\n                    y: parseFloat(xy[1].replace(')', ''))\r\n                }; \r\n            };\r\n\r\n            var r = 0; // current row\r\n            var items = d3.selectAll(\".c9-custom-legend-item\")[0];\r\n            var itemHeight = getSize(items[0]).height;\r\n            var numItemsCol = Math.floor((self.maxHeight - self.options.margin[0] - self.options.margin[2]) / (itemHeight + self.options.space));\r\n            \r\n            if (self.options.space > itemHeight) numItemsCol++;\r\n            \r\n            var maxWidthCol = new Array(Math.floor(items.length / numItemsCol));\r\n\r\n            items.forEach(function (i, n) {\r\n                var pos = Math.floor(n / numItemsCol);\r\n                var width = getSize(i).width;\r\n                if (maxWidthCol[pos] == undefined || width > maxWidthCol[pos]) maxWidthCol[pos] = width;\r\n            });\r\n\r\n            if  (self.options.position == \"bottom\"){\r\n                self.item.attr(\"transform\", function(d, i) {\r\n                    if (i > 0) {\r\n                        var item  = items[i];\r\n                        var preItem  = items[i - 1];\r\n                        var newR = Math.floor((getXY(preItem).x + getSize(preItem).width + self.options.space + getSize(item).width + self.options.margin[1]) / self.maxWidth);\r\n                        if (newR > 0) r++;\r\n                        return \"translate(\" + (newR > 0 ? self.options.margin[3] : getXY(preItem).x + getSize(preItem).width + self.options.space) + \",\" + (self.maxHeight - self.options.margin[0] - itemHeight - r * (itemHeight + self.options.space)) + \")\";\r\n                    } else {\r\n                        return \"translate(\" + self.options.margin[3] + \",\" + (self.maxHeight - self.options.margin[0] - itemHeight) + \")\";\r\n                    }\r\n                });\r\n            } else if (self.options.position == \"left\") {\r\n                self.item.attr(\"transform\", function(d, i) {\r\n                    var pos = Math.floor(i / numItemsCol);\r\n\r\n                    if (i > 0) {\r\n                        var prePos = Math.floor((i - 1) / numItemsCol);\r\n                        var item  = items[i];\r\n                        var preItem  = items[i - 1];\r\n                        return \"translate(\" + (pos > prePos ? (maxWidthCol[pos] + self.options.space + getXY(preItem).x) : getXY(preItem).x) + \",\" + (pos > prePos ? self.options.margin[0] : getXY(preItem).y + getSize(preItem).height + self.options.space) + \")\";\r\n                    }\r\n                    else\r\n                        return \"translate(\" + self.options.margin[3] + \",\" + self.options.margin[0] + \")\";\r\n                });\r\n            } else if (self.options.position == \"right\") {\r\n                self.item.attr(\"transform\", function(d, i) {\r\n                    var pos = Math.floor(i / numItemsCol);\r\n                    if (i > 0) {\r\n                        var prePos = Math.floor((i - 1) / numItemsCol);\r\n                        var item  = items[i];\r\n                        var preItem  = items[i - 1];\r\n                        return \"translate(\" + (pos > prePos ? (getXY(preItem).x - self.options.space - maxWidthCol[pos]) : getXY(preItem).x) + \",\" + (pos > prePos ? self.options.margin[0] : getXY(preItem).y + getSize(preItem).height + self.options.space) + \")\";\r\n                    }\r\n                    else\r\n                        return \"translate(\" + (self.maxWidth - self.options.margin[3] - maxWidthCol[pos]) + \",\" + self.options.margin[0] + \")\";\r\n                });\r\n            } else {\r\n                self.item.attr(\"transform\", function(d, i) {\r\n                    if (i > 0) {\r\n                        var item  = items[i];\r\n                        var preItem  = items[i - 1];\r\n                        var newR = Math.floor((getXY(preItem).x + getSize(preItem).width + self.options.space + getSize(item).width + self.options.margin[1]) / self.maxWidth);\r\n                        if (newR > 0) r++;\r\n                        return \"translate(\" + (newR > 0 ? self.options.margin[3] : getXY(preItem).x + getSize(preItem).width + self.options.space) + \",\" + (self.options.margin[0] + r * (itemHeight + self.options.space)) + \")\";\r\n                    }\r\n                    else\r\n                        return \"translate(\" + self.options.margin[3] + \",\" + self.options.margin[0] + \")\";\r\n                });\r\n            }\r\n            \r\n            // if (self._legendBox && legendDomain.length > 0) {\r\n            //     var box = legendContainer[0][0].getBBox();\r\n            //     legendBox.attr(\"class\", \".c9-custom-legend.c9-custom-legend-box\")\r\n            //         .attr(\"x\", 0)\r\n            //         .attr(\"y\", 0)\r\n            //         .attr(\"width\", box.width + self._legendMargin[1] + self._legendMargin[3])\r\n            //         .attr(\"height\", box.height + self._legendMargin[2] + self._legendMargin[0])\r\n            //         .style(\"fill\", \"none\")\r\n            //         .style(\"stroke\", color);\r\n            // }\r\n        }\r\n    }\r\n\r\n    draw() {\r\n        var self = this;\r\n\r\n        self.update(self.chart.dataTarget);\r\n    }\r\n\r\n    /**\r\n     * Update interaction event dispatchers for legend\r\n     * For: Donut Chart, Pie Chart\r\n     */\r\n    updateInteractionForLineChart(chart) {\r\n\r\n        var self = this;\r\n\r\n        var hoverOptions        = chart.hover.options,\r\n            hoverEnable         = chart.hover.enable,\r\n            onMouseOverCallback = hoverOptions.onMouseOver.callback,\r\n            onMouseOutCallback  = hoverOptions.onMouseOut.callback,\r\n            onClickCallback     = chart.click.callback;\r\n\r\n        self.itemEventFactory = {\r\n\r\n            'click': function(item) {\r\n                if (Helper.isFunction(onClickCallback)) {\r\n                    onClickCallback.call(this, item);\r\n                }\r\n\r\n                var selector = d3.select(this);\r\n                var enable = true,\r\n                    dataSet = self.data;\r\n                var totalEnable = d3.sum(dataSet.map(function(d) {\r\n                    return (d.enable) ? 1 : 0;\r\n                }));\r\n\r\n                // Add pointer to cursor\r\n                // selector.style('cursor', 'pointer');\r\n\r\n                // If current selector is disabled, then turn it on back\r\n                // Else, set enable to false\r\n                if (selector.attr('data-enable') == 'false') {\r\n                    selector.attr('data-enable', true);\r\n                    selector.style('opacity', '1');\r\n                } else {\r\n                    if (totalEnable < 2) return;\r\n                    selector.attr('data-enable', false);\r\n                    selector.style('opacity', '0.1');\r\n                    enable = false;\r\n                }\r\n\r\n                // update line\r\n                var newData = [];\r\n                chart.dataTarget.forEach(function(_data) {\r\n                    if (_data['data-ref'] == item['data-ref']) _data.enable = enable;\r\n                    if (_data.enable) newData.push(_data);\r\n                });\r\n\r\n                chart.updateDomain(newData);\r\n                chart.axis.update(chart.x, chart.y, 750);\r\n                chart.update(newData);\r\n\r\n                // Update subchart\r\n                if (chart.options.subchart.show) {\r\n                    chart.subChartX.domain(chart.x.domain());\r\n                    chart.subChartY.domain(chart.y.domain());\r\n                    chart.svg.select('.c9-subchart-custom .c9-subchart-axis').transition().duration(750).call(chart.subChartXAxis);\r\n                    chart.updateSubChart(newData);\r\n                }\r\n            },\r\n\r\n            'mouseover': function(item) {\r\n                if (Helper.isFunction(onMouseOverCallback)) {\r\n                    onMouseOverCallback.call(this, item);\r\n                }\r\n\r\n                var legendSelector = d3.select(this);\r\n\r\n                // Add pointer to cursor and make it lighten\r\n                // legendSelector.style('cursor', 'pointer');\r\n                self.lightenLegendItem(legendSelector);\r\n            },\r\n\r\n            'mouseout': function(item) {\r\n                if (Helper.isFunction(onMouseOutCallback)) {\r\n                    onMouseOutCallback.call(this, item);\r\n                }\r\n\r\n                var legendSelector = d3.select(this);\r\n\r\n                // Add pointer to cursor\r\n                // legendSelector.style('cursor', 'pointer');\r\n                self.normalizeLegendItem(legendSelector);\r\n            }\r\n        \r\n        };\r\n\r\n        if (self.options.show) {\r\n            self.item.on(self.itemEventFactory);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Update interaction event dispatchers for legend\r\n     * For: Donut Chart, Pie Chart\r\n     */\r\n    updateInteractionForDonutPieChart(chart, path, pie, currentData, arc) {\r\n\r\n        var self = this;\r\n\r\n        var hoverOptions        = chart.hover.options,\r\n            hoverEnable         = chart.hover.enable,\r\n            onMouseOverCallback = hoverOptions.onMouseOver.callback,\r\n            onMouseOutCallback  = hoverOptions.onMouseOut.callback,\r\n            onClickCallback     = chart.click.callback;\r\n\r\n        var chartType = chart.chartType;\r\n\r\n        var chartInnerBefore    = chartType == 'pie' ?  0 : chart.options.innerRadius,\r\n            chartOuterBefore    = chartType == 'pie' ?  chart.options.radius : chart.options.outerRadius,\r\n            chartInnerAfter     = chartType == 'pie' ?  0 : chart.options.innerRadius,\r\n            chartOuterAfter     = chartType == 'pie' ?  chart.options.radius * 1.2 : chart.options.outerRadius * 1.2;\r\n\r\n        self.itemEventFactory = {\r\n\r\n            'click': function(item) {\r\n                if (Helper.isFunction(onClickCallback)) {\r\n                    onClickCallback.call(this, item);\r\n                }\r\n\r\n                var selector = d3.select(this);\r\n                var enable = true,\r\n                    dataSet = self.data;\r\n                var totalEnable = d3.sum(dataSet.map(function(d) {\r\n                    return (d.enable) ? 1 : 0;\r\n                }));\r\n\r\n                // Add pointer to cursor\r\n                // selector.style('cursor', 'pointer');\r\n\r\n                // If current selector is disabled, then turn it on back\r\n                // Else, set enable to false\r\n                if (selector.attr('data-enable') == 'false') {\r\n                    selector.attr('data-enable', true);\r\n                    selector.attr('opacity', '1.0');\r\n                } else {\r\n                    if (totalEnable < 2) return;\r\n                    selector.attr('data-enable', false);\r\n                    selector.attr('opacity', '0.1');\r\n                    enable = false;\r\n                }\r\n\r\n                /*----------  Reset opacity after click  ----------*/\r\n                \r\n                self.item.each(function() {\r\n                    if (d3.select(this).attr('data-ref') !== item['data-ref'] && d3.select(this).attr('data-enable') == 'true') {\r\n                        d3.select(this).attr('opacity', '1.0');\r\n                    }\r\n                });\r\n\r\n                chart.selectAllPath().each(function(){\r\n                    if (d3.select(this).attr('data-ref') !== item['data-ref']) {\r\n                        d3.select(this).attr('opacity', '1.0');\r\n                    }\r\n                });\r\n                /*----------  End Reset opacity after click  ----------*/\r\n                \r\n\r\n                chart.pie.value(function(d) {\r\n                    if (d[\"data-ref\"] == item[\"data-ref\"]) d.enable = enable;\r\n                    return (d.enable) ? d.value : 0;\r\n                });\r\n\r\n                path = path.data(chart.pie(dataSet));\r\n\r\n                path.transition()\r\n                    .duration(500)\r\n                    .attrTween('d', function(d) {\r\n                        var interpolate = d3.interpolate(chart.currentData, d);\r\n                        // Returns an interpolator between the two arbitrary values a and b. \r\n                        // The interpolator implementation is based on the type of the end value b.\r\n                        chart.currentData = interpolate(0);\r\n                        return function(t) {\r\n                            return arc(interpolate(t));\r\n                        };\r\n                    })\r\n                    // Remove stroke when re-draw arcs to avoid duplicate strokes\r\n                    .attr('stroke', 'none');;\r\n                \r\n            },\r\n\r\n            'mouseover': function(item) {\r\n                if (Helper.isFunction(onMouseOverCallback)) {\r\n                    onMouseOverCallback.call(this, item);\r\n                }\r\n\r\n                var legendSelector = d3.select(this);\r\n                // Add pointer to cursor\r\n                // legendSelector.style('cursor', 'pointer');\r\n                self.lightenLegendItem(legendSelector);\r\n\r\n                if (legendSelector.attr('data-enable')) {\r\n                    // For Legend\r\n                    self.item.each(function() {\r\n                        if (d3.select(this).attr('data-ref') !== item['data-ref'] && d3.select(this).attr('data-enable')) {\r\n                            d3.select(this).attr('opacity', '0.3');\r\n                        }\r\n                    });\r\n\r\n                    // For Chart\r\n                    chart.selectAllPath().each(function(){\r\n                        if (d3.select(this).attr('data-ref') !== item['data-ref']) {\r\n                            d3.select(this).attr('opacity', '0.3');\r\n                        }\r\n                    });\r\n\r\n                    var selector = d3.select(\"path[data-ref='\" + item['data-ref'] + \"']\");\r\n\r\n                    selector\r\n                        .transition()\r\n                            .duration(500)\r\n                            .ease('bounce')\r\n                            .attr('d', d3.svg.arc()\r\n                                .innerRadius(chartInnerAfter)\r\n                                .outerRadius(chartOuterAfter)\r\n                            );\r\n                }\r\n\r\n                \r\n\r\n            },\r\n\r\n            'mouseout': function(item) {\r\n                if (Helper.isFunction(onMouseOutCallback)) {\r\n                    onMouseOutCallback.call(this, item);\r\n                }\r\n\r\n                var legendSelector = d3.select(this);\r\n                // Add pointer to cursor\r\n                // legendSelector.style('cursor', 'pointer');\r\n                self.normalizeLegendItem(legendSelector);\r\n\r\n                // if (legendSelector.attr('data-enable') == 'true') {\r\n                    // For Legend\r\n                    self.item.each(function() {\r\n                        if (d3.select(this).attr('data-ref') !== item['data-ref'] && d3.select(this).attr('data-enable')) {\r\n                            d3.select(this).attr('opacity', '1.0');\r\n                        }\r\n                    });\r\n\r\n                    // For Chart\r\n                    chart.selectAllPath().each(function(){\r\n                        if (d3.select(this).attr('data-ref') !== item['data-ref']) {\r\n                            d3.select(this).attr('opacity', '1.0');\r\n                        }\r\n                    });\r\n\r\n                    var selector = d3.select(\"path[data-ref='\" + item['data-ref'] + \"']\");\r\n\r\n                    selector\r\n                        .transition()\r\n                            .duration(500)\r\n                            .ease('bounce')\r\n                            .attr('d', d3.svg.arc()\r\n                                .innerRadius(chartInnerBefore)\r\n                                .outerRadius(chartOuterBefore)\r\n                            );\r\n                // }\r\n\r\n            }\r\n        \r\n        };\r\n\r\n        if (self.options.show)\r\n            self.item.on(self.itemEventFactory);\r\n    }\r\n\r\n    /**\r\n     * Update interaction for barchart\r\n     * @param  {[type]} chart       [description]\r\n     * @return {[type]}             [description]\r\n     */\r\n    updateInteractionForBarChart(chart) {\r\n\r\n        var self = this;\r\n\r\n        var hoverOptions        = chart.hover.options,\r\n            hoverEnable         = chart.hover.enable,\r\n            onMouseOverCallback = hoverOptions.onMouseOver.callback,\r\n            onMouseOutCallback  = hoverOptions.onMouseOut.callback,\r\n            onClickCallback     = chart.click.callback;\r\n\r\n        self.itemEventFactory = {\r\n\r\n            'click': function(item) {\r\n                if (Helper.isFunction(onClickCallback)) {\r\n                    onClickCallback.call(this, item);\r\n                }\r\n\r\n                var selector = d3.select(this);\r\n                var enable = true,\r\n                    dataBackup = chart.dataTarget,\r\n                    dataSet = self.data;\r\n                var totalEnable = d3.sum(dataSet.map(function(d) {\r\n                    return (d.enable) ? 1 : 0;\r\n                }));\r\n\r\n                var enableSet = [];\r\n                var enableSetOld = [];\r\n                var data = [];\r\n                // Add pointer to cursor\r\n                // selector.style('cursor', 'pointer');\r\n\r\n                // If current selector is disabled, then turn it on back\r\n                // Else, set enable to false\r\n                if (selector.attr('data-enable') == 'false') {\r\n                    selector.attr('data-enable', 'true');\r\n                    selector.style('opacity', '1.0');\r\n                } else {\r\n                    if (totalEnable < 2) return;\r\n                    selector.attr('data-enable', 'false');\r\n                    selector.style('opacity', '0.1');\r\n                    enable = false;\r\n                }\r\n\r\n                //set current data for legend\r\n                self.data.forEach(function(d, i) {\r\n                    if (d.enable)\r\n                        enableSetOld.push(d.group);\r\n                    if (d.group == item.group)\r\n                        d.enable = enable;\r\n                    if (d.enable)\r\n                        enableSet.push(d.group);\r\n                });\r\n\r\n                dataBackup.forEach(function (d){\r\n                    var negElement = [];\r\n                    var posElement = [];\r\n                    d.forEach(function (s){\r\n                        enableSet.forEach(function (e, i) {\r\n                            if (e == s.group) {\r\n                                if (s.y0 < 0) negElement.push({e: s, s: i});\r\n                                else posElement.push({e: s, s: i})\r\n                            }\r\n                        });\r\n                    });\r\n                    if (!chart.isGroup) {\r\n                        if (negElement.length > 0) {\r\n                            if (negElement[0].e.y1 < 0) negElement[0].e.y1 = 0;\r\n                            for (var i = 1; i < negElement.length; i++) {\r\n                                negElement[i].e.y1 = negElement[i-1].e.y1 + negElement[i-1].e.y0;\r\n                            };\r\n                        }\r\n                        if (posElement.length > 0) {\r\n                            if (posElement[0].e.y1 - posElement[0].e.y0 != 0) posElement[0].e.y1 = posElement[0].e.y0;\r\n                            for (var i = 1; i < posElement.length; i++) {\r\n                                posElement[i].e.y1 = posElement[i-1].e.y1 + posElement[i].e.y0;\r\n                            };\r\n                        }\r\n                    }\r\n                    var element = new Array(negElement.length + posElement.length);\r\n                    for (var i = 0; i < negElement.length; i++) {\r\n                        element[negElement[i].s] = negElement[i].e;\r\n                    };\r\n                    for (var i = 0; i < posElement.length; i++) {\r\n                        element[posElement[i].s] = posElement[i].e;\r\n                    };\r\n                    data.push(element);\r\n                });\r\n\r\n                chart.updateLegendInteraction(data, enableSet, enableSetOld, item.group);\r\n                \r\n            },\r\n\r\n            'mouseover': function(item) {\r\n                var selector = d3.select(this);\r\n                // selector.style('cursor', 'pointer');\r\n                self.lightenLegendItem(selector);\r\n\r\n                if (selector.attr('data-enable') == 'true')\r\n                    d3.selectAll('.c9-custom-bar>.c9-custom-rect')\r\n                        .filter(function (d){ return d['group-ref'] != item['group-ref']; })\r\n                        .attr('opacity', 0.3);\r\n            },\r\n\r\n            'mouseout': function(item) {\r\n                var selector = d3.select(this);\r\n                // selector.style('cursor', 'pointer');\r\n                self.normalizeLegendItem(selector);\r\n\r\n                d3.selectAll('.c9-custom-bar>.c9-custom-rect')\r\n                    .filter(function (d){ return d['group-ref'] != item['group-ref']; })\r\n                    .attr('opacity', 1);\r\n            }\r\n        \r\n        };\r\n        if (self.options.show)\r\n            self.item.on(self.itemEventFactory);\r\n    }\r\n\r\n    lightenLegendItem(item) {\r\n        var self = this;\r\n\r\n        item.select('.c9-custom-legend-rect').attr('fill', function(d){ return Helper.shadeColor(0.5, d.color || d[0].color); });\r\n        item.select('.c9-custom-legend-text').style('fill', function(d){ return Helper.shadeColor(-0.5, self.options.fontColor); });\r\n    }\r\n\r\n    normalizeLegendItem(item) {\r\n        var self = this;\r\n\r\n        item.select('.c9-custom-legend-rect').attr('fill', function(d){ return d.color || d[0].color; });\r\n        item.select('.c9-custom-legend-text').style('fill', function(d){ return self.options.fontColor; });\r\n    }\r\n    /*=====  End of Main Functions  ======*/\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/utils/C9.Legend.js\n **/","import Helper from '../../helper/C9.Helper';\r\n\r\nexport default class Table {\r\n    constructor(options, chart) {\r\n        var self = this;\r\n\r\n        var config = {\r\n            container: \"body\",\r\n            show: false,\r\n            headings: [\"Name\", \"Value\"],\r\n            style: \"default\", // || \"stripe\"\r\n            serial: true,\r\n            hover: {\r\n                enable: true,\r\n                callback: null\r\n            },\r\n            click: {\r\n                enable: true,\r\n                callback: null\r\n            }\r\n        };\r\n\r\n\r\n        self._options   = options;\r\n        self._chart     = chart;\r\n\r\n        self.updateConfig(config);\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    get data() {\r\n        return this._data;\r\n    }\r\n\r\n    get chart() {\r\n        return this._chart;\r\n    }\r\n\r\n    get options() {\r\n        return this._options;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    set data(arg) {\r\n        if (arg) {\r\n            this._data = arg;\r\n        }\r\n    }\r\n\r\n    set chart(arg) {\r\n        if (arg) {\r\n            this._chart = arg;\r\n        }\r\n    }\r\n\r\n    set options(arg) {\r\n        if (arg) {\r\n            this._options = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n\r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    updateConfig(config) {\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n    }\r\n\r\n    update(data) {\r\n        var self = this;\r\n\r\n        if (self.chart.chartType == \"bar\" || self.chart.chartType == \"line\") {\r\n            //headings\r\n            if (self.options.headings.length < 3 && !data[0].value && data[0][0][\"group-ref\"] != undefined) \r\n                self.options.headings.push(\"Group\");\r\n\r\n            //data\r\n            self.data = [];\r\n            data.forEach(function(d) {\r\n                (Helper.isArray(d) ? d : d.value).forEach(function(b) {\r\n                    self.data.push(b);\r\n                })\r\n            });\r\n        } else {\r\n            self.data = data;\r\n        }\r\n\r\n        if (self.options.show) {\r\n            d3.selectAll('.c9-table').remove();\r\n            d3.selectAll('.c9-table-container').remove();\r\n\r\n            var headTbl = d3.select(self.options.container !== 'body' ? '#' + self.options.container : 'body')\r\n                            .append(\"table\")\r\n                                .attr('class', 'c9-table c9-table-header'),\r\n                thead = headTbl.append(\"thead\"),\r\n                bodyTbl = d3.select(self.options.container !== 'body' ? '#' + self.options.container : 'body')\r\n                                .append(\"div\")\r\n                                .attr('class', 'c9-table-container')\r\n                                    .append(\"table\")\r\n                                    .attr('class', function() {\r\n                                        return self.getTableStyle();\r\n                                    }),\r\n                tbody = bodyTbl.append(\"tbody\");\r\n\r\n            // Append serial no heading\r\n            // Bind each statistic to a line of the table\r\n            // Show serial no.\r\n            var hRows = thead.append(\"tr\");\r\n\r\n            if (self.options.serial) {\r\n                hRows.append(\"th\")\r\n                    .text(\"#\");\r\n            }\r\n\r\n            hRows.selectAll(\"thead\")\r\n                .data(self.options.headings)\r\n                .enter()\r\n                .append(\"th\")\r\n                    .text(function(d) {\r\n                        return d;\r\n                    });\r\n\r\n            // Bind each statistic to a line of the table\r\n            // Show serial no.\r\n            var bRows = tbody\r\n                .selectAll(\"tr\")\r\n                .data(self.data)\r\n                    .enter()\r\n                        .append(\"tr\")\r\n                        .attr(\"data-ref\", function (d){ return d[\"data-ref\"] });\r\n\r\n            if (self.options.serial) {\r\n                bRows.append(\"td\")\r\n                    .text(function(d, i) {\r\n                        return i + 1;\r\n                    });\r\n            }\r\n\r\n            // Add statistic names to each row\r\n            bRows.append(\"td\")\r\n                    .text(function(d) {\r\n                        return d.name;\r\n                    });\r\n\r\n            // Add values to each row\r\n            bRows.append(\"td\")\r\n                    .text(function(d) {\r\n                        return d.value || d.y0 || d.valueY;\r\n                    });\r\n\r\n            // Add group if chart is bar chart\r\n            if (self.chart.chartType == \"bar\" && self.options.headings.length < 3 && !data[0].value && data[0][0][\"group-ref\"] != undefined)\r\n                bRows.append(\"td\")\r\n                        .text(function(d) {\r\n                            return d.group;\r\n                        });\r\n        }\r\n    }\r\n\r\n    draw() {\r\n        var self = this;\r\n\r\n        self.update(self.chart.dataTarget);\r\n    }\r\n\r\n    updateInteractionForBarChart(chart) {\r\n\r\n        var self = this;\r\n\r\n        var hoverOptions        = chart.hover.options,\r\n            hoverEnable         = chart.hover.enable,\r\n            onMouseOverCallback = hoverOptions.callback,\r\n            onMouseOutCallback  = hoverOptions.onMouseOut.callback,\r\n            onClickCallback     = chart.click.callback;\r\n\r\n        self.itemEventFactory = {\r\n\r\n            'click': function(item) {\r\n                if (Helper.isFunction(onClickCallback)) {\r\n                    onClickCallback.call(this, item);\r\n                }\r\n                \r\n            },\r\n\r\n            'mouseover': function(item) {\r\n                if (!item) return;\r\n\r\n                var selector = d3.select(this);\r\n                selector.style('cursor', 'pointer');\r\n                // if (selector.attr('data-enable') == 'true')\r\n                    d3.selectAll('.c9-custom-bar>.c9-custom-rect')\r\n                        .filter(function (d){ return d['data-ref'] != item['data-ref']; })\r\n                        .attr('opacity', 0.3);\r\n            },\r\n\r\n            'mouseout': function(item) {\r\n                if (!item) return;\r\n                d3.select(this).style('cursor', 'pointer');\r\n                d3.selectAll('.c9-custom-bar>.c9-custom-rect')\r\n                    .filter(function (d){ return d['data-ref'] != item['data-ref']; })\r\n                    .attr('opacity', 1);\r\n            }\r\n        \r\n        };\r\n        if (self.options.show)\r\n            self.selectAllRow().on(self.itemEventFactory);\r\n    }\r\n\r\n    updateInteractionForDonutPieChart(chart) {\r\n\r\n        var self = this;\r\n\r\n        var hoverOptions        = chart.hover.options,\r\n            hoverEnable         = chart.hover.enable,\r\n            onMouseOverCallback = hoverOptions.callback,\r\n            onMouseOutCallback  = hoverOptions.onMouseOut.callback,\r\n            onClickCallback     = chart.click.callback;\r\n\r\n        var chartType = chart.chartType;\r\n\r\n        var chartInnerBefore    = chartType == 'pie' ?  0 : chart.options.innerRadius,\r\n            chartOuterBefore    = chartType == 'pie' ?  chart.options.radius : chart.options.outerRadius,\r\n            chartInnerAfter     = chartType == 'pie' ?  0 : chart.options.innerRadius,\r\n            chartOuterAfter     = chartType == 'pie' ?  chart.options.radius * 1.2 : chart.options.outerRadius * 1.2;\r\n        self.itemEventFactory = {\r\n\r\n            'click': function(item) {\r\n                if (Helper.isFunction(onClickCallback)) {\r\n                    onClickCallback.call(this, item);\r\n                }\r\n\r\n            },\r\n\r\n            'mouseover': function(item) {\r\n                if (!item)\r\n                    return;\r\n\r\n                if (Helper.isFunction(onMouseOverCallback)) {\r\n                    onMouseOverCallback.call(this, item);\r\n                }\r\n\r\n                var legendSelector = d3.select(this);\r\n                // Add pointer to cursor\r\n                legendSelector.style('cursor', 'pointer');\r\n                // if (legendSelector.attr('enable') == 'true') {\r\n\r\n                    // For Chart\r\n                    chart.selectAllPath().each(function(){\r\n                        if (d3.select(this).attr('data-ref') !== item['data-ref']) {\r\n                            d3.select(this).attr('opacity', '0.3');\r\n                        }\r\n                    });\r\n\r\n                    var selector = d3.select(\"path[data-ref='\" + item['data-ref'] + \"']\");\r\n\r\n                    selector\r\n                        .transition()\r\n                            .duration(500)\r\n                            .ease('bounce')\r\n                            .attr('d', d3.svg.arc()\r\n                                .innerRadius(chartInnerAfter)\r\n                                .outerRadius(chartOuterAfter)\r\n                            );\r\n                // }\r\n\r\n            },\r\n\r\n            'mouseout': function(item) {\r\n                if (!item)\r\n                    return;\r\n                \r\n                if (Helper.isFunction(onMouseOutCallback)) {\r\n                    onMouseOutCallback.call(this, item);\r\n                }\r\n\r\n                var legendSelector = d3.select(this);\r\n                // Add pointer to cursor\r\n                legendSelector.style('cursor', 'pointer');\r\n\r\n                chart.selectAllPath().each(function(){\r\n                    if (d3.select(this).attr('data-ref') !== item['data-ref']) {\r\n                        d3.select(this).attr('opacity', '1.0');\r\n                    }\r\n                });\r\n\r\n                var selector = d3.select(\"path[data-ref='\" + item['data-ref'] + \"']\");\r\n\r\n                selector\r\n                    .transition()\r\n                        .duration(500)\r\n                        .ease('bounce')\r\n                        .attr('d', d3.svg.arc()\r\n                            .innerRadius(chartInnerBefore)\r\n                            .outerRadius(chartOuterBefore)\r\n                        );\r\n            }\r\n        \r\n        };\r\n\r\n        if (self.options.show)\r\n            self.selectAllRow().on(self.itemEventFactory);\r\n    }\r\n\r\n    selectAllRow(){\r\n        return d3.selectAll(\".c9-table tr\");\r\n    }\r\n\r\n    getTableStyle() {\r\n        var self = this;\r\n\r\n        if (self.options.style === 'default') {\r\n            return 'c9-table c9-table-body';\r\n        } else if (self.options.style === 'stripe') {\r\n            return 'c9-table c9-table-body c9-stripe';\r\n        }\r\n    }\r\n    /*=====  End of Main Functions  ======*/\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/utils/C9.Table.js\n **/","import Helper from '../../helper/C9.Helper';\r\n\r\nexport default class Tooltip {\r\n    constructor(options) {\r\n        var self = this;\r\n\r\n        var config = {\r\n            show: true,\r\n            position: 'right', // [top, right, bottom, left]\r\n            backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n            fontColor: '#fff',\r\n            fontSize: '11px',\r\n            format: null\r\n        };\r\n\r\n        self._options           = options;\r\n\r\n        self.updateConfig(config);\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    get format() {\r\n        return this._format;\r\n    }\r\n\r\n    get eventFactory() {\r\n        return this._eventFactory;\r\n    }\r\n\r\n    get options() {\r\n        return this._options;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    set format(arg) {\r\n        if (arg) {\r\n            this._format = arg;\r\n        }\r\n    }\r\n\r\n    set eventFactory(arg) {\r\n        if (arg) {\r\n            this._eventFactory = arg;\r\n        }\r\n    }\r\n\r\n    set options(arg) {\r\n        if (arg) {\r\n            this._options = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n\r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    updateConfig(config) {\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n    }\r\n\r\n    /**\r\n     * Draw Tooltip\r\n     */\r\n    draw(data, chart, eventType) {\r\n        var self = this;\r\n\r\n        var format = self.format;\r\n\r\n        // First of all, remove all exisiting tooltips\r\n        d3.select(chart.id).selectAll('.c9-custom-tooltip-container').remove();\r\n\r\n        var selector = d3.select(chart.id);\r\n\r\n        // TODO: Add margin to tooltip configs\r\n        // Default: (100, 100) relative to mouse coordinate and chart margin transformation\r\n        var divOnHover = selector.append('div')\r\n                            .attr('class', function() { \r\n                                return 'c9-custom-tooltip-container ' + self.getTriangleClass(); \r\n                            })\r\n                            // .attr(\"transform\", function() { return 'translate(' + (d3.mouse(this)[0] - 100) +\",\"+ (d3.mouse(this)[1] - 100) + ')'; })\r\n                            .style('display', 'none')\r\n                            .style('position', 'absolute')\r\n                            .style('pointer-events', 'all')\r\n                            .style('background-color', self.options.backgroundColor)\r\n                            .style('color', self.options.fontColor)\r\n                            .style('font-size', self.options.fontSize);\r\n                            // .style('width', '100px')\r\n                            // .style('height', '50px')\r\n                            // .html(function() {\r\n                            //     return self.getFormatByChartType(chart, data);\r\n                            // });\r\n\r\n        self.eventFactory = {\r\n\r\n            'mouseover': function(_data) {\r\n                divOnHover\r\n                    .html(function() {\r\n                        return self.getFormatByChartType(chart, _data);\r\n                    })\r\n                    .transition()\r\n                    // .style('left', function() {return d3.mouse(this)[0] + 'px';})\r\n                    .style('left', function() {\r\n                        return self.getCoordinate(chart)['left'];\r\n                    })\r\n                    // .style('top', function() {return d3.mouse(this)[1]  + 'px';})\r\n                    .style('top', function() {\r\n                        return self.getCoordinate(chart)['top'];\r\n                    })\r\n                    .duration(200)\r\n                    .style(\"display\", 'block')\r\n                    .style('pointer-events', 'none');\r\n            },\r\n\r\n            'mousemove': function(_data) {\r\n                divOnHover\r\n                    .html(function() {\r\n                        return self.getFormatByChartType(chart, _data);\r\n                    })\r\n                    .transition()\r\n                    // .style('left', function() {return d3.mouse(this)[0] + 'px';})\r\n                    .style('left', function() {\r\n                        return self.getCoordinate(chart)['left'];\r\n                    })\r\n                    // .style('top', function() {return d3.mouse(this)[1]  + 'px';})\r\n                    .style('top', function() {\r\n                        return self.getCoordinate(chart)['top'];\r\n                    })\r\n                    .duration(200)\r\n                    .style(\"display\", 'block')\r\n                    .style('pointer-events', 'none');\r\n            },\r\n\r\n            'mouseout': function(_data) {\r\n                divOnHover\r\n                    .transition()\r\n                    .duration(200)      \r\n                    .style('display', 'none');\r\n\r\n            }\r\n\r\n        };\r\n\r\n        if (self.options.show) {\r\n\r\n            switch(eventType) {\r\n                case 'mouseover':\r\n                    self.eventFactory.mouseover(data);\r\n                    break;\r\n                case 'mouseout':\r\n                    self.eventFactory.mouseout(data);\r\n                    break;\r\n                case 'mousemove':\r\n                    self.eventFactory.mousemove(data);\r\n                    break;\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    getTriangleClass() {\r\n        var self = this;\r\n        let r ;\r\n\r\n        switch(self.options.position) {\r\n            case 'top':\r\n                r = 'c9-tooltip-top';\r\n                break;\r\n            case 'right':\r\n                r = 'c9-tooltip-right';\r\n                break;\r\n            case 'bottom':\r\n                r = 'c9-tooltip-bottom';\r\n                break;\r\n            case 'left':\r\n                r = 'c9-tooltip-left';\r\n                break;\r\n        }\r\n        return r;\r\n    }\r\n\r\n    setDefaultFormatByChartType(chart, data) {\r\n        // if (Helper.isEmpty(data)) { console.log(data);return false;}\r\n        var self = this;\r\n\r\n        let chartType = chart.chartType, format;\r\n\r\n        switch(chartType) {\r\n            case 'bar':\r\n                format = function(data) {\r\n                    return '<strong>' + data.name + '</strong>' + '<br><span>' + data.value + '</span>'\r\n                };\r\n                break;\r\n            case 'pie':\r\n                format = function(data) {\r\n                    return '<strong>' + data.data.name + '</strong>' + '<br><span>' + data.data.value + '</span>' \r\n                };\r\n                break;\r\n            case 'donut':\r\n                format = function(data) {\r\n                    return '<strong>' + data.data.name + '</strong>' + '<br><span>' + data.data.value + '</span>' \r\n                };\r\n                break;\r\n            case 'line':\r\n                format = function(data) {\r\n                    let _format = '';\r\n                    data.forEach(function(d, i){\r\n                        _format += '<strong>' + d.name + '</strong>' + '<br><span> Value X: ' + d.valueX + '</span>' + '<br><span> Value Y: ' + d.valueY + '</span><br>';    \r\n                    });\r\n                    return _format;\r\n                };\r\n                break;\r\n            case 'timeline':\r\n                format = function(data) {\r\n                    return '<strong>' + data.name + '</strong>' + '<br><span> Start at: ' + data.start + '</span><br><span> End at: ' + data.end + '</span>' \r\n                };\r\n                break;\r\n        }\r\n\r\n        // Update format for tooltip based on chart type\r\n        self.format     = self.options.format || format;\r\n        // console.log(self.format);\r\n    }\r\n\r\n    getCoordinate(chart) {\r\n        var self = this;\r\n        let r ;\r\n\r\n        var offset = self.getOffset(d3.select(chart.id)[0][0]);\r\n\r\n        switch(self.options.position) {\r\n            case 'top':\r\n                r = {\r\n                    'left': (d3.event.pageX - offset.left - 50) + 'px',\r\n                    'top': (d3.event.pageY - offset.top - 50) + 'px'\r\n                };\r\n                break;\r\n            case 'right':\r\n                r = {\r\n                    // 'left': (d3.event.pageX - offset.left - 50) + 'px',\r\n                    'left': (d3.event.pageX - offset.left) + 'px',\r\n                    // 'top': (d3.event.pageY - offset.top - 50) + 'px'\r\n                    'top': (d3.event.pageY - offset.top - 25) + 'px'\r\n                };\r\n                break;\r\n            case 'bottom':\r\n                r = {\r\n                    'left': (d3.event.pageX - offset.left - 50) + 'px',\r\n                    'top': (d3.event.pageY - offset.top + 50) + 'px'\r\n                };\r\n                break;\r\n            case 'left':\r\n                r = {\r\n                    // 'left': (d3.event.pageX - offset.left + 50) + 'px',\r\n                    'left': (d3.event.pageX - offset.left - 50) + 'px',\r\n                    // 'top': (d3.event.pageY - offset.top - 50) + 'px'\r\n                    'top': (d3.event.pageY - offset.top - 25) + 'px'\r\n                };\r\n                break;\r\n        }\r\n        return r;\r\n    }\r\n\r\n    getOffset(elem) {\r\n        var box = { top: 0, left: 0 };\r\n\r\n        // BlackBerry 5, iOS 3 (original iPhone)\r\n        if ( typeof elem.getBoundingClientRect !== undefined ) {\r\n          box = elem.getBoundingClientRect();\r\n        }\r\n\r\n        return {\r\n          top: box.top  + ( window.pageYOffset || elem.scrollTop )  - ( elem.clientTop  || 0 ),\r\n          left: box.left + ( window.pageXOffset || elem.scrollLeft ) - ( elem.clientLeft || 0 )\r\n        };\r\n    }\r\n\r\n    getFormatByChartType(chart, data) {\r\n        var self = this;\r\n\r\n        self.setDefaultFormatByChartType(chart, data);\r\n\r\n        let r = self.format(data);\r\n\r\n        return r;\r\n    }\r\n    /*=====  End of Main Functions  ======*/\r\n\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/utils/C9.Tooltip.js\n **/","import Helper from './C9.Helper';\r\n\r\nexport default class DataAdapter {\r\n\r\n    constructor(options, chartType, callback) {\r\n\r\n        var self = this;\r\n\r\n        var config = {\r\n            // ALL OPTIONS AVAILABLE IN DATA CONFIG\r\n            keys: {\r\n                name: \"name\",\r\n                value: \"value\",\r\n                x: \"value.x\",\r\n                y: \"value\",\r\n                coor: \"coor\"\r\n            },\r\n            groups: [],\r\n            stacks: [],\r\n            timeFormat: false,\r\n\r\n            // NO NEED TO ADD TO DATA OPTIONS\r\n            // Just use to define default parameters\r\n            colorRange: null,\r\n        };\r\n\r\n        self._keys      = Helper.merge(options.keys, config.keys);\r\n        self._groups    = options.groups    || config.groups;\r\n        self._stacks    = options.stacks    || config.stacks;\r\n        self._timeFormat    = options.timeFormat    || config.timeFormat;\r\n        self._colorRange= options.colorRange|| config.colorRange;\r\n\r\n        self._dataSource = [];\r\n        self._dataTarget = []; // Initialize new Array to use Array methods\r\n        self._dataRefs = [];\r\n\r\n        self._options = options;\r\n        self._chartType = chartType;\r\n        self._callback = callback;\r\n\r\n        self.updateConfig(config);\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    get options() {\r\n        return this._options;\r\n    }\r\n\r\n    get callback() {\r\n        return this._callback;\r\n    }\r\n\r\n    get chartType() {\r\n        return this._chartType;\r\n    }\r\n\r\n    get file() {\r\n        return this._file;\r\n    }\r\n\r\n    get keys() {\r\n        return this._keys;\r\n    }\r\n\r\n    get dataSource() {\r\n        return this._dataSource;\r\n    }\r\n\r\n    get dataTarget() {\r\n        return this._dataTarget;\r\n    }\r\n\r\n    get groups() {\r\n        return this._groups;\r\n    }\r\n\r\n    get stacks() {\r\n        return this._stacks;\r\n    }\r\n\r\n    get colorRange() {\r\n        return this._colorRange;\r\n    }\r\n\r\n    get timeFormat() {\r\n        return this._timeFormat;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    set options(arg) {\r\n        if (arg) {\r\n            this._options = arg;\r\n        }\r\n    }\r\n\r\n    set file(arg) {\r\n        if (arg) {\r\n            this._file = arg;\r\n        }\r\n    }\r\n\r\n    set keys(arg) {\r\n        if (arg) {\r\n            this._keys = arg;\r\n        }\r\n    }\r\n\r\n    set dataSource(arg) {\r\n        if (arg) {\r\n            this._dataSource = arg;\r\n        }\r\n    }\r\n\r\n    set dataTarget(arg) {\r\n        if (arg) {\r\n            this._dataTarget = arg;\r\n        }\r\n    }\r\n\r\n    set groups(arg) {\r\n        if (arg) {\r\n            this._groups = arg;\r\n        }\r\n    }\r\n\r\n    set stacks(arg) {\r\n        if (arg) {\r\n            this._stacks = arg;\r\n        }\r\n    }\r\n\r\n    set colorRange(arg) {\r\n        if (arg) {\r\n            this._colorRange = arg;\r\n        }\r\n    }\r\n\r\n    set timeFormat(arg) {\r\n        if (arg) {\r\n            this._timeFormat = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n\r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    updateConfig(config) {\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n\r\n        // self.initDataSource();\r\n    }\r\n\r\n    // initDataSource() {\r\n    //     var self = this;\r\n\r\n    //     // if (self.hasPlainData()) {\r\n    //     //     self.executePlainData();\r\n    //     // }\r\n    //     // TESTING\r\n    //     //  else if (self.hasFile()) {\r\n    //     //     self.executeFile();\r\n    //     // }\r\n    // }\r\n\r\n    hasPlainData() {\r\n        var self = this;\r\n\r\n        // return options.plain && Helper.isArray(options.plain);\r\n        return !Helper.isEmpty(self.options.plain); // fix for map\r\n    }\r\n\r\n    hasFile() {\r\n        var self = this;\r\n\r\n        return Helper.isObject(self.options.file) \r\n            && !Helper.isEmpty(self.options.file.url) \r\n            && !Helper.isEmpty(self.options.file.type);\r\n    }\r\n\r\n    executePlainData(callback) {\r\n        var self = this;\r\n\r\n        self.dataSource = self.options.plain;\r\n\r\n        callback.call(self, self.dataSource);\r\n    }\r\n\r\n    executeFile(callback) {\r\n        var self = this;\r\n\r\n        self.file  = self.options.file;\r\n\r\n        if (!Helper.isEmpty(self.file)) {\r\n\r\n            switch(self.file.type) {\r\n                case \"csv\":\r\n                    self.getCsv(callback);\r\n                    break;\r\n                case \"tsv\":\r\n                    self.getTsv(callback);\r\n                    break;\r\n                case \"text\":\r\n                    self.getText(callback);\r\n                    break;\r\n                case \"json\":\r\n                    self.getJson(callback);\r\n                    break;\r\n                case \"xml\":\r\n                    self.getXml(callback);\r\n                    break;\r\n                case \"xhr\":\r\n                    self.getJson(callback);\r\n                    break;\r\n                default:\r\n                    self.getJson(callback);\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    getDataTypeForBarChart() {\r\n        var self = this;\r\n\r\n        if (!Helper.isEmpty(self.groups) && Helper.isArray(self.groups) && self.groups.length !== 1) {\r\n            return \"group\";\r\n        } else if (!Helper.isEmpty(self.stacks) && Helper.isArray(self.stacks)) {\r\n            return \"stack\";\r\n        }\r\n\r\n        // default grouped bar if user do not defined groups for array value\r\n        for (var i = self.dataSource.length - 1; i >= 0; i--) {\r\n            if (Helper.isArray(Helper.get(self.keys.value, self.dataSource[i])))\r\n                return \"group\";\r\n        }\r\n\r\n        return \"single\";\r\n    }\r\n\r\n    getDataTarget(type, callback) {\r\n        var self = this;\r\n\r\n        // TESTING\r\n        if (self.hasFile()) {\r\n            self.executeFile(function(data) {\r\n                self.dataSource = data;\r\n                self.generateDataTarget(type);\r\n                callback.call(self, self.dataTarget);\r\n            });\r\n\r\n        } else if (self.hasPlainData()) {\r\n            self.executePlainData(function(data) {\r\n                self.dataSource = data;\r\n                self.generateDataTarget(type);\r\n                callback.call(self, self.dataTarget);\r\n            });\r\n        }\r\n    }\r\n\r\n    generateDataTarget(type) {\r\n        var self = this;\r\n\r\n        switch(type) {\r\n            case \"bar\":\r\n                self.getDataTargetForBarChart();\r\n                break;\r\n\r\n            case \"line\":\r\n               self.getDataTargetForLineChart();\r\n                break;\r\n\r\n            case \"pie\":\r\n               self.getDataTargetForPieChart();\r\n                break;\r\n\r\n            case \"donut\":\r\n               self.getDataTargetForDonutChart();\r\n                break;\r\n\r\n            case \"timeline\":\r\n               self.getDataTargetForTimelineChart();\r\n                break;\r\n\r\n            case \"map\":\r\n               self.getDataTargetForMap();\r\n                break;\r\n\r\n            default:\r\n               self.dataSource;\r\n                break;\r\n        }\r\n    }\r\n\r\n    getName(v) {\r\n        return v.name; \r\n    }\r\n\r\n    getValue(v) {\r\n        var self = this;\r\n\r\n        return Helper.get(self.keys, v);\r\n    }\r\n\r\n    /*=====  End of Main Functions  ======*/\r\n\r\n    /*=================================================\r\n    =            Normalize Data For Charts            =\r\n    =================================================*/\r\n    getDataTargetForBarChart() {\r\n        var self = this;\r\n\r\n        switch(self.getDataTypeForBarChart()) {\r\n            case \"single\":\r\n                let color = self.colorRange;\r\n                let groups = self.groups;\r\n\r\n                self.dataSource.forEach(function(data, index) {\r\n                    let _data = [{\r\n                        \"name\" : Helper.get(self.keys.name, data),\r\n                        \"value\": Helper.get(self.keys.value, data),\r\n                        \"y0\" : Helper.get(self.keys.value, data),\r\n                        \"y1\" : Helper.get(self.keys.value, data),\r\n                        \"group\": groups[0] || 'data' + (1),\r\n                        \"data-ref\": Helper.guid(),\r\n                        \"enable\" : true,\r\n                        \"color\": color(0),\r\n                    }];\r\n                    self.dataTarget.push(_data);\r\n                });\r\n\r\n                // return self.dataTarget;\r\n                break;\r\n\r\n            case \"group\":\r\n                var groups = self.groups;\r\n                var groupRefs = [];\r\n                // Iterate over each group\r\n                self.dataSource.forEach(function(data, index) {\r\n                    let _dsArray    = Helper.get(self.keys.value, data);\r\n\r\n                    let _stack      = [],\r\n                        _stackItem = {\r\n                            \"color\": \"#ffffff\",\r\n                            \"y0\": 0,\r\n                            \"y1\": 1,\r\n                            \"group\": \"\",\r\n                            \"name\": \"\",\r\n                            \"data-ref\": \"\",\r\n                            \"group-ref\": \"\",\r\n                            \"enable\"    : true,\r\n                        },\r\n                        color = self.colorRange;\r\n\r\n                    // Iterate each single bar in a group\r\n                    if (Helper.isArray(_dsArray)) {\r\n                        _dsArray.forEach(function(d, i) {\r\n                            if (groupRefs.length - 1 < i)\r\n                                groupRefs.push(Helper.guid());\r\n                            if (Helper.isEmpty(groups[i]))\r\n                                groups.push('data' + (i+1));\r\n                            _stackItem = {\r\n                                \"color\": color(i),\r\n                                \"y0\": d,\r\n                                \"y1\": d > 0 ? d : 0,\r\n                                \"group\": groups[i],\r\n                                \"name\": Helper.get(self.keys.name, data),\r\n                                \"value\": d,\r\n                                \"data-ref\": Helper.guid(),\r\n                                \"group-ref\": groupRefs[i],\r\n                                \"enable\"    : true,\r\n                            };\r\n                            _stack.push(_stackItem);\r\n                        });\r\n                    } else {\r\n                        if (groupRefs.length == 0)\r\n                            groupRefs.push(Helper.guid());\r\n                        if (Helper.isEmpty(groups[0]))\r\n                            groups.push('data1');\r\n                        _stackItem = {\r\n                            \"color\": color(0),\r\n                            \"y0\": _dsArray,\r\n                            \"y1\": _dsArray > 0 ? _dsArray : 0,\r\n                            \"group\": groups[0],\r\n                            \"name\": Helper.get(self.keys.name, data),\r\n                            \"value\": _dsArray,\r\n                            \"data-ref\": Helper.guid(),\r\n                            \"group-ref\": groupRefs[0],\r\n                            \"enable\"    : true,\r\n                        };\r\n                        _stack.push(_stackItem);\r\n                    }\r\n\r\n                    self.dataTarget.push(_stack);\r\n                });\r\n\r\n                self.groups = groups;\r\n                return self.dataTarget;\r\n                break;\r\n\r\n            case \"stack\":\r\n                var stacks = self.stacks;\r\n                var groupRefs = [];\r\n                // Iterate over each group\r\n                self.dataSource.forEach(function(data, index) {\r\n                    let _dsArray    = Helper.get(self.keys.value, data);\r\n\r\n                    let _stack      = [],\r\n                        _stackItem = {\r\n                            \"color\": \"#ffffff\",\r\n                            \"y0\": 0,\r\n                            \"y1\": 1,\r\n                            \"group\": \"\",\r\n                            \"name\": \"\",\r\n                            \"data-ref\": \"\",\r\n                            \"enable\"    : true,\r\n                        },\r\n                        color = self.colorRange;\r\n\r\n                    // Iterate each single bar in a group\r\n                    if (Helper.isArray(_dsArray)) {\r\n                        let _negBase = 0;\r\n                        let _posBase = 0;\r\n                        _dsArray.forEach(function(d, i) {\r\n                            if (groupRefs.length - 1 < i)\r\n                                groupRefs.push(Helper.guid());\r\n                            if (Helper.isEmpty(stacks[i]))\r\n                                stacks.push('data' + (i+1));\r\n                            _stackItem = {\r\n                                \"color\": color(i),\r\n                                \"y0\": d,\r\n                                \"y1\": d > 0 ? d + _posBase : _negBase,\r\n                                \"group\": stacks[i],\r\n                                \"name\": Helper.get(self.keys.name, data),\r\n                                \"value\": d,\r\n                                \"data-ref\": Helper.guid(),\r\n                                \"group-ref\": groupRefs[i],\r\n                                \"enable\"    : true,\r\n                            };\r\n                            _stack.push(_stackItem);\r\n                            if (d > 0) _posBase += d;\r\n                            else _negBase += d;\r\n                        });\r\n                    } else {\r\n                        if (groupRefs.length == 0)\r\n                            groupRefs.push(Helper.guid());\r\n                        if (Helper.isEmpty(stacks[0]))\r\n                            stacks.push('data1');\r\n                        _stackItem = {\r\n                            \"color\": color(0),\r\n                            \"y0\": _dsArray,\r\n                            \"y1\": _dsArray > 0 ? _dsArray : 0,\r\n                            \"group\": stacks[0],\r\n                            \"name\": Helper.get(self.keys.name, data),\r\n                            \"value\": _dsArray,\r\n                            \"data-ref\": Helper.guid(),\r\n                            \"group-ref\": groupRefs[0],\r\n                            \"enable\"    : true,\r\n                        };\r\n                        _stack.push(_stackItem);\r\n                    }\r\n\r\n                    self.dataTarget.push(_stack);\r\n                });\r\n\r\n                self.stacks = stacks;\r\n                return self.dataTarget;\r\n                break;\r\n\r\n            default:\r\n                return self.dataSource;\r\n                break;\r\n        }\r\n    \r\n    }\r\n\r\n    getDataTargetForPieChart() {\r\n        var self = this;\r\n\r\n        let color = self.colorRange;\r\n        self.dataSource.forEach(function(data, index) {\r\n            let _data = {\r\n                \"color\"     : color(index),\r\n                \"name\"      : Helper.get(self.keys.name, data),\r\n                \"value\"     : Helper.get(self.keys.value, data),\r\n                \"data-ref\"  : Helper.guid(),\r\n                \"enable\"    : true,\r\n            };\r\n            self.dataTarget.push(_data);\r\n        });\r\n\r\n        return self.dataTarget;\r\n\r\n    }\r\n\r\n    getDataTargetForDonutChart() {\r\n        var self = this;\r\n\r\n        let color = self.colorRange;\r\n        self.dataSource.forEach(function(data, index) {\r\n            let _data = {\r\n                \"color\"     : color(index),\r\n                \"data-ref\"  : Helper.guid(),\r\n                \"enable\"    : true,\r\n                \"name\"      : Helper.get(self.keys.name, data),\r\n                \"value\"     : Helper.get(self.keys.value, data),\r\n            };\r\n\r\n            self.dataTarget.push(_data);\r\n        });\r\n\r\n        return self.dataTarget;\r\n\r\n    }\r\n\r\n    getDataTargetForTimelineChart() {\r\n        var self = this;\r\n\r\n        let color = self.colorRange;\r\n\r\n        self.dataSource.forEach(function(data, index) {\r\n\r\n            let _data = {\r\n                // \"color\"     : color(index),\r\n                \"icon\"      : data.icon,\r\n                \"name\"      : Helper.get(self.keys.name, data),\r\n                \"value\"     : [],\r\n                \"data-ref\"  : Helper.guid(),\r\n                \"enable\"    : true,\r\n            };\r\n\r\n            let _dsArray    = Helper.get(self.keys.value, data),\r\n                _valueArray = [],\r\n                _valueItem  = {\r\n                    \"name\": Helper.get(self.keys.name, data),\r\n                    \"start\": null ,\r\n                    \"end\": null ,\r\n                    \"color\": \"#fff\",\r\n                    \"data-ref\": null,\r\n                    \"enable\": true\r\n                };\r\n\r\n            if (Helper.isArray(_dsArray)) {\r\n                _dsArray.forEach(function(d, i) {\r\n                    _valueItem = {\r\n                        \"name\": Helper.get(self.keys.name, data),\r\n                        \"start\": new Date(d.start),\r\n                        \"end\": new Date(d.end) ,\r\n                        \"color\": color(index),\r\n                        \"data-ref\": Helper.guid(),\r\n                        \"enable\": true,\r\n                    };\r\n                    _valueArray.push(_valueItem);\r\n                });\r\n            } else {\r\n                _valueItem = {\r\n                    \"name\": Helper.get(self.keys.name, data),\r\n                    \"start\": new Date(_dsArray.start),\r\n                    \"end\": new Date(_dsArray.end) ,\r\n                    \"color\": color(index),\r\n                    \"data-ref\": Helper.guid(),\r\n                    \"enable\": true,\r\n                };\r\n                _valueArray.push(_valueItem);\r\n            }\r\n            _data.value = _valueArray;\r\n\r\n            self.dataTarget.push(_data);\r\n        });\r\n        return self.dataTarget;\r\n\r\n    }\r\n    \r\n    getDataTargetForLineChart() {\r\n        var self = this;\r\n\r\n        let color = self.colorRange;\r\n        self.dataSource.forEach(function(data, index) {\r\n            let _data = {\r\n                \"color\"     : color(index),\r\n                \"name\"      : Helper.get(self.keys.name, data),\r\n                \"value\"    : [],\r\n                \"data-ref\"  : Helper.guid(),\r\n                \"enable\"    : true,\r\n            };\r\n\r\n            let _valueXArray = Helper.get(self.keys.x, data),\r\n                _valueYArray = Helper.get(self.keys.y, data),\r\n                _valueArray = [],\r\n                _valueItem  = {\r\n                    \"name\"  : Helper.get(self.keys.name, data),\r\n                    \"valueX\": null,\r\n                    \"valueY\": null,\r\n                    \"data-ref\": Helper.guid(),\r\n                    \"enable\": true\r\n                };\r\n\r\n            if (Helper.isArray(_valueYArray)) {\r\n                /**\r\n                 *\r\n                 * CASE 1: [{name:, value: []}, {}, ..]\r\n                 *\r\n                 */\r\n                \r\n                if (!Helper.isArray(_valueXArray)) {\r\n                    _valueYArray.forEach(function(d, i) {\r\n                        _valueItem = {\r\n                            \"name\"  : Helper.get(self.keys.name, data),\r\n                            \"valueX\": i,\r\n                            \"valueY\": d,\r\n                            \"data-ref\": Helper.guid(),\r\n                            \"enable\": true\r\n                        };\r\n                        _valueArray.push(_valueItem);\r\n                    });\r\n                } else \r\n\r\n                /**\r\n                 *\r\n                 * CASE 2: [{name:, value: {x: [], y:[]}, {}, ..]\r\n                 *\r\n                 */\r\n                \r\n                if (Helper.isArray(_valueXArray) && !self.timeFormat) {\r\n                    _valueYArray.forEach(function(d, i) {\r\n                        _valueItem = {\r\n                            \"name\"  : Helper.get(self.keys.name, data),\r\n                            \"valueX\": !Helper.isEmpty(_valueXArray[i]) ? _valueXArray[i] : i,\r\n                            \"valueY\": d,\r\n                            \"data-ref\": Helper.guid(),\r\n                            \"enable\": true\r\n                        };\r\n                        _valueArray.push(_valueItem);\r\n                    });\r\n                } else \r\n\r\n                /**\r\n                 *\r\n                 * CASE 3: [{name:, value: {x: [], y:[]}, {}, ..] with config `timeFormat`\r\n                 *\r\n                 */\r\n                \r\n                if (Helper.isArray(_valueXArray) && self.timeFormat) {\r\n                    let _parser = Helper.dateParser(self.timeFormat);\r\n\r\n                    _valueYArray.forEach(function(d, i) {\r\n                        _valueItem = {\r\n                            \"name\"  : Helper.get(self.keys.name, data),\r\n                            \"valueX\": !Helper.isEmpty(_valueXArray[i]) ? _parser(_valueXArray[i]) : i,\r\n                            \"valueY\": d,\r\n                            \"data-ref\": Helper.guid(),\r\n                            \"enable\": true\r\n                        };\r\n                        _valueArray.push(_valueItem);\r\n                    });\r\n                }\r\n            }\r\n\r\n            _data.value = _valueArray;\r\n\r\n            self.dataTarget.push(_data);\r\n        });\r\n\r\n        return self.dataTarget;\r\n\r\n    }\r\n    /*=====  End of Normalize Data For Charts  ======*/\r\n    \r\n    /*=================================================\r\n    =              Normalize Data For Map             =\r\n    =================================================*/\r\n\r\n    getDataTargetForMap() {\r\n        var self = this;\r\n\r\n        var getDataValue = function(key, data, isArray){\r\n            let _keys = key.split('.');\r\n            let _value = Helper.get(key, data);\r\n            let _v;\r\n            if (_keys.length == 1 && keys[0] == 'value' && !isArray) {\r\n                _v = _value;\r\n            } else {\r\n                _v = new Object();\r\n                _v[_keys[_keys.length - 1]] = _value;\r\n            }\r\n            return _v;\r\n        }\r\n\r\n        var getData = function(data) {\r\n            let _data = {\r\n                \"name\": Helper.get(self.keys.name, data),\r\n                \"coor\": Helper.get(self.keys.coor, data),\r\n                \"value\": null\r\n            }\r\n            if (Helper.isArray(self.keys.value)) {\r\n                self.keys.value.forEach(function(k) {\r\n                    let _v = getDataValue(k, data, true);\r\n                    _data.value = Helper.merge(_data.value, _v);\r\n                });\r\n            }\r\n            else {\r\n                _data.value = getDataValue(self.keys.value, data, false);\r\n            }\r\n\r\n            return _data;\r\n        }\r\n\r\n        if (!Helper.isArray(self.dataSource)) \r\n            self.dataTarget = getData(self.dataSource);\r\n        else \r\n            self.dataSource.forEach(function(data) {\r\n                self.dataTarget.push(getData(data));\r\n            });\r\n\r\n        return self.dataTarget;\r\n    }\r\n\r\n    /*=====    End of Normalize Data For Map   ======*/\r\n    \r\n\r\n    /*=============================================\r\n    =            Data Input From Files            =\r\n    =============================================*/\r\n    \r\n    getCsv(callback) {\r\n\r\n        var self = this;\r\n\r\n        d3.csv(self.file.url, function(err, data) {\r\n            if (err) throw err;\r\n\r\n            if (!Helper.isEmpty(callback) && Helper.isFunction(callback))\r\n                callback.call(self, data);\r\n        });\r\n    }\r\n\r\n    getTsv(callback) {\r\n\r\n        var self = this;\r\n\r\n        d3.tsv(self.file.url, function(err, data) {\r\n            if (err) throw err;\r\n            \r\n            if (!Helper.isEmpty(callback) && Helper.isFunction(callback))\r\n                callback.call(self, data);\r\n        });\r\n\r\n    }\r\n\r\n    getText(callback) {\r\n\r\n        var self = this;\r\n\r\n        d3.text(self.file.url, function(err, data) {\r\n            if (err) throw err;\r\n            \r\n            if (!Helper.isEmpty(callback) && Helper.isFunction(callback))\r\n                callback.call(self, data);\r\n        });\r\n\r\n    }\r\n\r\n    getJson(callback) {\r\n\r\n        var self = this;\r\n\r\n        d3.json(self.file.url, function(err, data) {\r\n            if (err) throw err;\r\n\r\n            if (!Helper.isEmpty(callback) && Helper.isFunction(callback))\r\n                callback.call(self, data);\r\n        });\r\n    }\r\n\r\n    getXml(callback) {\r\n\r\n        var self = this;\r\n\r\n        d3.xml(self.file.url, function(err, data) {\r\n            if (err) throw err;\r\n            \r\n            // Convert the XML document to an array of objects.\r\n            // Note that querySelectorAll returns a NodeList, not a proper Array,\r\n            // so we must use map.call to invoke array methods.\r\n            data = [].map.call(data.querySelectorAll(\"data\"), function(d) {\r\n                return {\r\n                    name: d.querySelector(\"name\").textContent,\r\n                    value: d.querySelector(\"value\").textContent\r\n                };\r\n            });\r\n\r\n            if (!Helper.isEmpty(callback) && Helper.isFunction(callback))\r\n                callback.call(self, data);\r\n        });\r\n    }\r\n    \r\n    /*=====  End of Data Input From Files  ======*/\r\n    \r\n\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/helper/C9.DataAdapter.js\n **/","import Chart from './C9.Chart';\r\n\r\nimport Axis from './utils/C9.Axis';\r\nimport Title from './utils/C9.Title';\r\nimport Legend from './utils/C9.Legend';\r\nimport Table from './utils/C9.Table';\r\nimport Tooltip from './utils/C9.Tooltip';\r\n\r\nimport Helper from '../helper/C9.Helper';\r\nimport DataAdapter from '../helper/C9.DataAdapter';\r\n\r\nexport default class DonutChart extends Chart {\r\n    constructor(options) {\r\n        super(options);\r\n\r\n        var self = this;\r\n\r\n        var R = Math.min(self.width - self.margin.left - self.margin.right, self.height - self.margin.top - self.margin.bottom) / 2;\r\n        self.config = {\r\n            outerRadius: R,\r\n            innerRadius: R > 80 ? R - 80 : R - 40,\r\n            // showText: true // show/hide text on middle or each donut\r\n        };\r\n\r\n        // self.updateConfig(config);\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    get pie() {\r\n        return this._pie;\r\n    }\r\n\r\n    get arc() {\r\n        return this._arc;\r\n    }\r\n\r\n    get currentData() {\r\n        return this._currentData;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    set pie(arg) {\r\n        if (arg) {\r\n            this._pie = arg;\r\n        }\r\n    }\r\n\r\n    set arc(arg) {\r\n        if (arg) {\r\n            this._arc = arg;\r\n        }\r\n    }\r\n\r\n    set currentData(arg) {\r\n        if (arg) {\r\n            this._currentData = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n    \r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    /**\r\n     * Update Donut Chart Config\r\n     */\r\n    updateConfig(config, callback) {\r\n        super.updateConfig(config);\r\n\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n\r\n        self.chartType      = 'donut';\r\n\r\n        var dataOption          = self.dataOption;\r\n        dataOption.colorRange   = self.colorRange;\r\n\r\n        var da = new DataAdapter(dataOption, self.chartType, null);\r\n        da.getDataTarget(self.chartType, function(data) {\r\n            self.dataTarget = data;\r\n            \r\n            if (Helper.isFunction(callback)) {\r\n                callback.call(self, self.dataTarget);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Update Donut Chart Config\r\n     */\r\n    updateDataConfig(dataCfg, callback) {\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(self.options, dataCfg);\r\n\r\n        self.chartType      = 'donut';\r\n\r\n        var dataOption          = self.dataOption;\r\n        dataOption.colorRange   = self.colorRange;\r\n\r\n        var da = new DataAdapter(dataOption, self.chartType, null);\r\n        da.getDataTarget(self.chartType, function(data) {\r\n            self.dataTarget = data;\r\n            \r\n            if (Helper.isFunction(callback)) {\r\n                callback.call(self, self.dataTarget);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Update Donut Chart based on new data\r\n     * @param  {[type]} data [description]\r\n     */\r\n    update(data) {\r\n        var self = this;\r\n\r\n        var width   = self.width - self.margin.left - self.margin.right,\r\n            height  = self.height - self.margin.top - self.margin.bottom,\r\n            color   = self.colorRange;\r\n\r\n        self.arc = d3.svg.arc()\r\n                    .outerRadius(self.options.outerRadius)\r\n                    .innerRadius(self.options.innerRadius);\r\n\r\n        //we can sort data here\r\n        self.pie = d3.layout.pie()\r\n                    .sort(null)\r\n                    .value(function(d) { return d.value; });\r\n\r\n        self.body.selectAll(\".c9-chart-donut.c9-custom-arc-container\").data([]).exit().remove();\r\n\r\n        //draw chart\r\n        var arcs = self.body\r\n                    .append('g')\r\n                        .attr('class', 'c9-chart-donut c9-custom-arc-container')\r\n                        .attr('transform', 'translate(' + (width / 2) + ',' + (height / 2) + ')')\r\n                        .selectAll('.c9-chart-donut.c9-custom-arc')\r\n                        .data(self.pie(data)).enter()\r\n                        .append('g')\r\n                            .attr('class', 'c9-chart-donut c9-custom-arc');\r\n\r\n        // Append main path contains donut\r\n        // TODO: add a unique class to allow Legend could find selected donut/pie\r\n        arcs.append('path')\r\n                .attr('class', 'c9-chart-donut c9-custom-path')\r\n                .attr('data-ref', function(d) { return d.data['data-ref']; })\r\n                .attr('d', self.arc)\r\n                .attr('fill', function(d, i) { return color(i); })\r\n                .attr('stroke', '#ffffff')\r\n                .each(function(d) { self.currentData = d; }); \r\n                // Current data used for calculate interpolation \r\n                // between current arc vs disabled arc\r\n\r\n\r\n        // Append middle text display name\r\n        // if (self.showText) {\r\n        //     arcs.append('text')\r\n        //             .attr('class', 'c9-chart-donut c9-custom-text')\r\n        //             .attr('transform', function(d) { return 'translate(' + self.arc.centroid(d) + ')'; })\r\n        //             .attr('dy', '.35em')\r\n        //             .attr('text-anchor', 'middle')\r\n        //             .text(function(d) { return d.data.name; });\r\n        // }\r\n        \r\n        self.updateInteraction();\r\n    }\r\n\r\n    /**\r\n     * Select all path as type PATH in Donut Chart via its CLASS\r\n     */\r\n    selectAllPath() {\r\n        var self = this;\r\n\r\n        return self.body\r\n                // .selectAll('g')\r\n                    .selectAll('path.c9-chart-donut.c9-custom-path');\r\n    }\r\n\r\n    /**\r\n     * Update Interaction: Hover\r\n     * @return {} \r\n     */\r\n    updateInteraction() {\r\n        var self    = this,\r\n            selector= self.selectAllPath(),\r\n            width   = self.width - self.margin.left - self.margin.right,\r\n            height  = self.height - self.margin.top - self.margin.bottom,\r\n            color   = self.colorRange,\r\n            chartInnerBefore = self.options.innerRadius,\r\n            chartOuterBefore = self.options.outerRadius,\r\n            chartInnerAfter = self.options.innerRadius,\r\n            chartOuterAfter = self.options.outerRadius * 1.2;\r\n\r\n        var hoverOptions        = self.hover.options,\r\n            hoverEnable         = self.hover.enable,\r\n            onMouseOverCallback = hoverOptions.onMouseOver.callback,\r\n            onMouseOutCallback  = hoverOptions.onMouseOut.callback,\r\n            onClickCallback  = self.click.callback;\r\n\r\n        var tooltip = new Tooltip(self.options.tooltip);\r\n\r\n        // Main Event Dispatch for paths in donut chart\r\n        self._eventFactory = {\r\n            'click': function(d, i) {\r\n                if (Helper.isFunction(onClickCallback)) {\r\n                    onClickCallback.call(this, d);\r\n                }\r\n            },\r\n\r\n            'mouseover': function(d, i) {\r\n                if (!hoverEnable) return;\r\n\r\n                if (Helper.isFunction(onMouseOverCallback)) {\r\n                    onMouseOverCallback.call(this, d);\r\n                }\r\n\r\n                var selector = d3.select(this);\r\n                selector.transition()\r\n                        .attr('d', d3.svg.arc()\r\n                            .innerRadius(chartInnerAfter)\r\n                            .outerRadius(chartOuterAfter)\r\n                        );\r\n\r\n                // For legend\r\n                if (self.options.legend.show)\r\n                    self.legend.item.each(function() {\r\n                        if (d3.select(this).attr('data-ref') !== d.data['data-ref'] && d3.select(this).attr('data-enable') == 'true') {\r\n                            d3.select(this).attr('opacity', '0.3');\r\n                        }\r\n                    });\r\n\r\n                // For Table\r\n                if (self.options.table.show) {\r\n                    var tr = d3.selectAll('.c9-table-container>.c9-table-body tr');\r\n                    tr.filter(function(i) { return i['data-ref'] != d.data['data-ref'] }).selectAll('td').style('opacity', '0.5');\r\n                    var selectedItem = tr.filter(function(i) { return i['data-ref'] == d.data['data-ref'] });\r\n                    //set its style and scroll to its pos\r\n                    selectedItem.selectAll('td').style('opacity', '1');\r\n                    Helper.scroll(d3.select('.c9-table-container')[0][0], selectedItem[0][0].offsetTop, 200);\r\n                }\r\n\r\n                // For Chart\r\n                self.selectAllPath().each(function(){\r\n                    if (d3.select(this).attr('data-ref') !== d.data['data-ref']) {\r\n                        d3.select(this).attr('opacity', '0.3');\r\n                    }\r\n                });\r\n\r\n                // For Tooltip\r\n                tooltip.draw(d, self, 'mouseover');\r\n            },\r\n            \r\n            'mouseout': function(d, i) {\r\n                if (!hoverEnable) return;\r\n\r\n                if (Helper.isFunction(onMouseOutCallback)) {\r\n                    onMouseOutCallback.call(this, d);\r\n                }\r\n\r\n                var selector = d3.select(this);\r\n                selector.transition()\r\n                        .duration(500)\r\n                        .ease('bounce')\r\n                        .attr('d', d3.svg.arc()\r\n                            .innerRadius(chartInnerBefore)\r\n                            .outerRadius(chartOuterBefore)\r\n                        );\r\n\r\n                // For legend\r\n                if (self.options.legend.show)\r\n                self.legend.item.each(function() {\r\n                    if (d3.select(this).attr('data-ref') !== d.data['data-ref'] && d3.select(this).attr('data-enable') == 'true') {\r\n                        d3.select(this).attr('opacity', '1.0');\r\n                    }\r\n                });\r\n\r\n                // For Table\r\n                if (self.options.table.show)\r\n                    d3.selectAll('.c9-table-container>.c9-table-body tr').selectAll('td').style('opacity', '');\r\n                \r\n                // For Chart\r\n                self.selectAllPath().each(function(){\r\n                    if (d3.select(this).attr('data-ref') !== d.data['data-ref']) {\r\n                        d3.select(this).attr('opacity', '1.0');\r\n                    }\r\n                });\r\n\r\n                // For Tooltip\r\n                tooltip.draw(d, self, 'mouseout');\r\n            }\r\n\r\n        };\r\n\r\n        selector.on(self._eventFactory);\r\n    }\r\n    \r\n    /*=====  End of Main Functions  ======*/\r\n    \r\n    /*========================================\r\n    =            User's Functions            =\r\n    ========================================*/\r\n    /**\r\n     * Custom Event Listener\r\n     * @param  {[type]}   eventType [description]\r\n     * @param  {Function} callback  [description]\r\n     * @return {[type]}             [description]\r\n     */\r\n    on(eventType, callback) {\r\n        super.on(eventType, callback);\r\n        \r\n        var self = this;\r\n        var selector    = self.selectAllPath();\r\n\r\n        // Update Event Factory\r\n        let eventFactory = {\r\n            'click.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            },\r\n            'mouseover.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            },\r\n            'mouseout.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            }\r\n        }\r\n\r\n        let eventName = eventType + '.event';\r\n\r\n        selector.on(eventName, eventFactory[eventName]);\r\n    }\r\n\r\n    /**\r\n     * Main draw function of Donut Chart\r\n     */\r\n    draw() {\r\n        super.draw();\r\n\r\n        var self = this;\r\n        \r\n        self.updateConfig(self.config, function(data) {\r\n            var title   = new Title(self.options.title, self);\r\n            var legend  = new Legend(self.options.legend, self, self.dataTarget);\r\n            var table   = new Table(self.options.table, self, self.dataTarget);\r\n\r\n            self.title = title;\r\n            self.legend = legend;\r\n            self.table = table;\r\n\r\n            // Draw title\r\n            self.title.draw();\r\n\r\n            // Update interaction of this own chart\r\n            self.update(self.dataTarget);\r\n            self.updateInteraction();\r\n\r\n            self.legend = legend;\r\n            self.table = table;\r\n\r\n            // Draw legend\r\n            self.legend.draw();\r\n            self.legend.updateInteractionForDonutPieChart(self, self.selectAllPath(), self.pie, self.currentData, self.arc);\r\n\r\n            // Draw table\r\n            self.table.draw();\r\n            self.table.updateInteractionForDonutPieChart(self);\r\n        });\r\n    }\r\n    \r\n    /**\r\n     * Set option via stand-alone function\r\n     * @param {[type]} key   [description]\r\n     * @param {[type]} value [description]\r\n     */\r\n    setOption(key, value) {\r\n        super.setOption(key, value);\r\n\r\n        var self = this;\r\n\r\n        Helper.set(key, value, self.options);\r\n\r\n        self.updateConfig(self.options);\r\n    }\r\n\r\n    /**\r\n     * Update chart based on new data with optional dataConfig\r\n     * @param  {[type]} data       [description]\r\n     * @param  {[type]} dataConfig [description]\r\n     */\r\n    updateData(newData, newDataConfig) {\r\n        var self = this;\r\n\r\n        var newCfg = {};\r\n\r\n        if (!Helper.isEmpty(newDataConfig)) {\r\n\r\n            newCfg.data = {\r\n                plain: newData,\r\n                keys: newDataConfig,\r\n            };\r\n\r\n        } else {\r\n\r\n            newCfg.data = {\r\n                plain: newData,\r\n            };\r\n\r\n        }\r\n        \r\n        self.updateDataConfig(newCfg, function(data) {\r\n            // Update Chart\r\n            self.update(data);\r\n\r\n            // Update Legend\r\n            self.legend.update(data);\r\n            self.legend.updateInteractionForDonutPieChart(self, self.selectAllPath(), self.pie, self.currentData, self.arc);    \r\n        \r\n            // Update Table\r\n            self.table.update(data);\r\n            self.table.updateInteractionForDonutPieChart(self);\r\n        });\r\n    }\r\n    \r\n    \r\n    /*=====  End of User's Functions  ======*/\r\n    \r\n    \r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/C9.DonutChart.js\n **/","import Chart from './C9.Chart';\r\n\r\nimport Axis from './utils/C9.Axis';\r\nimport Title from './utils/C9.Title';\r\nimport Legend from './utils/C9.Legend';\r\nimport Table from './utils/C9.Table';\r\nimport Tooltip from './utils/C9.Tooltip';\r\n\r\nimport Helper from '../helper/C9.Helper';\r\nimport DataAdapter from '../helper/C9.DataAdapter';\r\n\r\nexport default class LineChart extends Chart {\r\n    constructor(options) {\r\n        super(options);\r\n\r\n        var self    = this;\r\n\r\n        self.config  = {\r\n            point: {\r\n                show: true,\r\n                fill: \"steelblue\",\r\n                stroke: \"steelblue\",\r\n                'stroke-width': 1,\r\n                opacity: 1.0,\r\n                radius: 5,\r\n            },\r\n            area: {\r\n                show: true\r\n            },\r\n            line: {\r\n                style: \"solid\", // \"dash\", \"dot\"\r\n                width: 2\r\n            },\r\n            interpolate: \"linear\", // refer: https://www.dashingd3js.com/svg-paths-and-d3js\r\n        };\r\n\r\n        // self.updateConfig(config);\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    get isTimeDomain() {\r\n        return this._isTimeDomain;\r\n    }\r\n\r\n    get bisectDate() {\r\n        return this._bisectDate;\r\n    }\r\n\r\n    get hoverLine() {\r\n        return this._hoverLine;\r\n    }\r\n\r\n    get subChartX() {\r\n        return this._subChartX;\r\n    }\r\n\r\n    get subChartY() {\r\n        return this._subChartY;\r\n    }\r\n\r\n    get subChartWidth() {\r\n        return this._subChartWidth;\r\n    }\r\n\r\n    get subChartHeight() {\r\n        return this._subChartHeight;\r\n    }\r\n\r\n    get subChartMargin() {\r\n        return this._subChartMargin;\r\n    }\r\n\r\n    get subChartXAxis() {\r\n        return this._subChartXAxis;\r\n    }\r\n\r\n    get brush() {\r\n        return this._brush;\r\n    }\r\n\r\n    get subChartAreaGen() {\r\n        return this._subChartAreaGen;\r\n    }\r\n\r\n    get lineGen() {\r\n        return this._lineGen;\r\n    }\r\n\r\n    get areaGen() {\r\n        return this._areaGen;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    set isTimeDomain(arg) {\r\n        if (arg) {\r\n            this._isTimeDomain = arg;\r\n        }\r\n    }\r\n\r\n    set bisectDate(arg) {\r\n        if (arg) {\r\n            this._bisectDate = arg;\r\n        }\r\n    }\r\n\r\n    set hoverLine(arg) {\r\n        if (arg) {\r\n            this._hoverLine = arg;\r\n        }\r\n    }\r\n\r\n    set subChartX(arg) {\r\n        if (arg) {\r\n            this._subChartX = arg;\r\n        }\r\n    }\r\n\r\n    set subChartY(arg) {\r\n        if (arg) {\r\n            this._subChartY = arg;\r\n        }\r\n    }\r\n\r\n    set subChartWidth(arg) {\r\n        if (arg) {\r\n            this._subChartWidth = arg;\r\n        }\r\n    }\r\n\r\n    set subChartHeight(arg) {\r\n        if (arg) {\r\n            this._subChartHeight = arg;\r\n        }\r\n    }\r\n\r\n    set subChartMargin(arg) {\r\n        if (arg) {\r\n            this._subChartMargin = arg;\r\n        }\r\n    }\r\n\r\n    set subChartXAxis(arg) {\r\n        if (arg) {\r\n            this._subChartXAxis = arg;\r\n        }\r\n    }\r\n\r\n    set brush(arg) {\r\n        if (arg) {\r\n            this._brush = arg;\r\n        }\r\n    }\r\n\r\n    set subChartAreaGen(arg) {\r\n        if (arg) {\r\n            this._subChartAreaGen = arg;\r\n        }\r\n    }\r\n\r\n    set lineGen(arg) {\r\n        if (arg) {\r\n            this._lineGen = arg;\r\n        }\r\n    }\r\n\r\n    set areaGen(arg) {\r\n        if (arg) {\r\n            this._areaGen = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n    \r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n\r\n    /**\r\n     * Init Line Chart Config\r\n     */\r\n    updateConfig(config, callback) {\r\n        super.updateConfig(config);\r\n\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n\r\n        self.chartType = \"line\";\r\n        self.bisectDate = d3.bisector(function(d) { return d.valueX; }).left;\r\n\r\n        var dataOption          = self.dataOption;\r\n        dataOption.colorRange   = self.colorRange;\r\n\r\n        var da = new DataAdapter(dataOption, self.chartType, null);\r\n        da.getDataTarget(self.chartType, function(data) {\r\n            self.dataTarget = data;\r\n            self.isTimeDomain   = da.timeFormat;\r\n\r\n            var width   = self.width - self.margin.left - self.margin.right,\r\n                height  = self.height - self.margin.top - self.margin.bottom;\r\n\r\n            self.x = (self.isTimeDomain) ? d3.time.scale().range([0, width]) : d3.scale.linear().range([0, width]),\r\n            self.y = d3.scale.linear().range([height, 0]);\r\n\r\n            self.updateDomain(self.dataTarget);\r\n\r\n            console.log(self.x.domain());\r\n\r\n            self.lineGen = d3.svg.line()\r\n                            .x(function(d) { return self.x(d.valueX); })\r\n                            .y(function(d) { return self.y(d.valueY); })\r\n                            .interpolate(self.options.interpolate);\r\n\r\n            self.areaGen = d3.svg.area()\r\n                            .x(function(d) { return self.x(d.valueX); })\r\n                            .y0(function(d) { return self.y(d.valueY); })\r\n                            .y1(height)\r\n                            .interpolate(self.options.interpolate);\r\n\r\n            if (Helper.isFunction(callback)) {\r\n                callback.call(self, self.dataTarget);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Update data config\r\n     */\r\n    updateDataConfig(dataCfg, callback) {\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(self.options, dataCfg);\r\n\r\n        self.chartType = \"line\";\r\n        self.bisectDate = d3.bisector(function(d) { return d.valueX; }).left;\r\n\r\n        var dataOption          = self.dataOption;\r\n        dataOption.colorRange   = self.colorRange;\r\n\r\n        var da = new DataAdapter(dataOption, self.chartType, null);\r\n        da.getDataTarget(self.chartType, function(data) {\r\n            self.dataTarget = data;\r\n            self.isTimeDomain   = da.timeFormat;\r\n\r\n            var width   = self.width - self.margin.left - self.margin.right,\r\n                height  = self.height - self.margin.top - self.margin.bottom;\r\n\r\n            self.x = (self.isTimeDomain) ? d3.time.scale().range([0, width]) : d3.scale.linear().range([0, width]),\r\n            self.y = d3.scale.linear().range([height, 0]);\r\n\r\n            self.updateDomain(self.dataTarget);\r\n\r\n            self.lineGen = d3.svg.line()\r\n                            .x(function(d) { return self.x(d.valueX); })\r\n                            .y(function(d) { return self.y(d.valueY); })\r\n                            .interpolate(self.options.interpolate);\r\n\r\n            self.areaGen = d3.svg.area()\r\n                            .x(function(d) { return self.x(d.valueX); })\r\n                            .y0(function(d) { return self.y(d.valueY); })\r\n                            .y1(height)\r\n                            .interpolate(self.options.interpolate);\r\n\r\n            if (Helper.isFunction(callback)) {\r\n                callback.call(self, self.dataTarget);\r\n            }\r\n        });\r\n    }\r\n\r\n    updateOverlay() {\r\n        var self = this;\r\n\r\n        var width   = self.width - self.margin.left - self.margin.right,\r\n            height  = self.height - self.margin.top - self.margin.bottom;\r\n\r\n        //** Create a invisible rect for mouse tracking\r\n        var paddingX = (self.x.domain()[1] - self.x.domain()[0]) * 0.01,\r\n            paddingY = (self.y.domain()[1] - self.y.domain()[0]) * 0.05;\r\n\r\n        self.body\r\n            .append('rect')\r\n            .attr('class', 'c9-chart-line c9-rect-overlay')\r\n            // .attr('width', self.actualWidth)\r\n            // .attr('height', self.actualHeight)\r\n            .attr('width', width - self.x(paddingX))\r\n            .attr('height', height)\r\n            .attr('x', self.x(paddingX) / 2)\r\n            .style('fill', 'none')\r\n            .style('pointer-events', 'all');\r\n    }\r\n\r\n    updateHoverLine() {\r\n        var self = this;\r\n\r\n        //** Add the line to the group\r\n        self.hoverLine = self.body\r\n                .append('g')\r\n                .attr('class', 'c9-chart-line c9-comparator-line')\r\n                .append('line')\r\n                .style('stroke', 'grey')\r\n                .style('stroke-opacity', 0);\r\n\r\n        self.hoverCircle = self.hoverLine\r\n                .append('circle')\r\n                .attr('class', 'c9-chart-line c9-comparator-line')\r\n                .attr('r', self.options.point.radius);\r\n    }\r\n\r\n    /**\r\n     * Update LineChart Domain\r\n     * @param  {[type]} data [description]\r\n     */\r\n    updateDomain(data) {\r\n        var self = this;\r\n\r\n        var valueXArray = d3.merge(data.map(function(_data) {\r\n            return _data.value.map(function(d) {\r\n                return d.valueX;\r\n            })\r\n        }));\r\n\r\n        var valueYArray = d3.merge(data.map(function(_data) {\r\n            return _data.value.map(function(d) {\r\n                return d.valueY;\r\n            })\r\n        }));\r\n\r\n        self.x.domain(d3.extent(valueXArray));\r\n\r\n        self.y.domain(d3.extent(valueYArray));\r\n\r\n        // Update domain if all values positive / negative\r\n        if (self.y.domain()[0] > 0 && self.y.domain()[1] > 0) {\r\n            self.y.domain([0, self.y.domain()[1]]);\r\n        } else if (self.y.domain()[0] < 0 && self.y.domain()[1] < 0) {\r\n            self.y.domain([self.y.domain()[0], 0]);\r\n        }\r\n\r\n        // Check if its is timeDomain then skip\r\n        if (!self.isTimeDomain) {\r\n            var xDomain = self.x.domain(), paddingX = (self.x.domain()[1] - self.x.domain()[0]) * 0.01;\r\n            var yDomain = self.y.domain(), paddingY = (self.y.domain()[1] - self.y.domain()[0]) * 0.05;\r\n                \r\n            self.x.domain([xDomain[0] - paddingX, xDomain[1] + paddingX]);\r\n            self.y.domain([yDomain[0], yDomain[1] + paddingY]);\r\n        }\r\n        // else {\r\n        //     var xDomain = self.x.domain(), paddingX = (self.x.domain()[1] - self.x.domain()[0]);\r\n        //     var yDomain = self.y.domain(), paddingY = (self.y.domain()[1] - self.y.domain()[0]);\r\n        //         console.log(xDomain[0]);\r\n        //     self.x.domain([xDomain[0] - new Date(paddingX), xDomain[1] + new Date(paddingX)]);\r\n        //     self.y.domain([yDomain[0], yDomain[1] + paddingY]);\r\n        // }\r\n    }\r\n\r\n    /**\r\n     * Update main path of Line Chart when brushing\r\n     */\r\n    update(data) {\r\n        var self = this;\r\n\r\n        var width   = self.width - self.margin.left - self.margin.right,\r\n            height  = self.height - self.margin.top - self.margin.bottom;\r\n\r\n        self.updateDomain(data);\r\n\r\n        self.body.selectAll(\".c9-chart-line.c9-area-container\").data([]).exit().remove();\r\n        self.body.selectAll(\".c9-chart-line.c9-path-container\").data([]).exit().remove();\r\n        self.body.selectAll(\".c9-chart-line.c9-point-container\").data([]).exit().remove();\r\n\r\n        if (self.options.area.show) {\r\n            var areaContainer = self.body.append('g')\r\n                                .attr('class', 'c9-chart-line c9-area-container')\r\n                                .attr(\"clip-path\", \"url(#clip)\");\r\n\r\n            areaContainer.selectAll(\".c9-chart-line.c9-path-area-custom\")\r\n            // self.body.selectAll(\"dot\")\r\n                .data(data)\r\n                .enter()\r\n                .append('path')\r\n                .filter(function(d) {\r\n                    return d.enable;\r\n                })\r\n                // .attr(\"clip-path\", \"url(#clip)\")\r\n                .attr('class', 'c9-chart-line c9-path-area-custom')\r\n                .attr('d', function(d) {\r\n                    return self.areaGen(d.value);\r\n                })\r\n                .attr('data-ref', function(d) {\r\n                    return 'c9-' + d['data-ref'];\r\n                })\r\n                .style('fill', function(d) {\r\n                    return d.color;\r\n                })\r\n                .style('stroke', 'none')\r\n                .style('opacity', '0.5');\r\n        }\r\n\r\n        var pathContainer = self.body.append('g')\r\n                            .attr('class', 'c9-chart-line c9-path-container')\r\n                            .attr(\"clip-path\", \"url(#clip)\");\r\n            \r\n        pathContainer.selectAll(\".c9-chart-line.c9-path-line-custom\")\r\n        // self.body.selectAll(\"dot\")\r\n            .data(data)\r\n            .enter()\r\n            .append('path')\r\n            .filter(function(d) {\r\n                return d.enable;\r\n            })\r\n            .attr('class', 'c9-chart-line c9-path-line-custom')\r\n            .attr('d', function(d) {\r\n                return self.lineGen(d.value);\r\n            })\r\n            .attr('data-ref', function(d) {\r\n                return 'c9-' + d['data-ref'];\r\n            })\r\n            .style('stroke', function(d) {\r\n                return d.color;\r\n            })\r\n            .style('stroke-dasharray', function() {\r\n                return self.getLineStyle();\r\n            })\r\n            .style('stroke-width', self.options.line.width)\r\n            .style('fill', 'none');\r\n\r\n        if (self.options.point.show) {\r\n            var pointContainer = self.body.append('g')\r\n                                    .attr('class', 'c9-chart-line c9-point-container')\r\n                                    .attr(\"clip-path\", \"url(#clip)\");\r\n            \r\n            data.forEach(function(d) {\r\n                if (!d.enable) return;\r\n                pointContainer.selectAll(\".c9-chart-line.c9-point-container\")\r\n                // self.body.selectAll(\"dot\")\r\n                    .data(d.value)\r\n                    .enter()\r\n                    .append(\"circle\")\r\n                    // .attr(\"clip-path\", \"url(#clip)\")\r\n                    .attr('class', 'c9-chart-line c9-circle-custom')\r\n                    .attr(\"r\", self.options.point.radius)\r\n                    .attr(\"cx\", function(_d) {\r\n                        return self.x(_d.valueX);\r\n                    })\r\n                    .attr(\"cy\", function(_d) {\r\n                        return self.y(_d.valueY);\r\n                    })\r\n                    .attr(\"data-ref\", function(data) {\r\n                        return data[\"data-ref\"];\r\n                    })\r\n                    .style(\"fill\", self.options.point.fill)\r\n                    .style(\"stroke\", self.options.point.stroke)\r\n                    .style(\"stroke-width\", self.options.point['stroke-width'])\r\n                    .style(\"opacity\", self.options.point.opacity);\r\n            });\r\n        }\r\n\r\n        /*----------  Set actual size for chart after initialization  ----------*/\r\n        var chartBox = self.body.node().getBBox();\r\n        self.actualWidth = chartBox.width - 4 * self.options.point.radius;\r\n        self.actualHeight = chartBox.height;\r\n        /*----------  End of Set actual size for chart after initialization  ----------*/\r\n\r\n        self.updateInteraction();\r\n    }  \r\n\r\n    /**\r\n     * Update sub chart\r\n     */\r\n    updateSubChart(data) {\r\n        var self = this;\r\n\r\n        if (self.options.subchart.show) {\r\n            var width   = self.width - self.margin.left - self.margin.right,\r\n                height  = self.height - self.margin.top - self.margin.bottom;\r\n\r\n            /*----------  Sub Chart  ----------*/\r\n            self.subChartWidth = width,\r\n            self.subChartHeight = self.options.subchart.height;\r\n            if (Helper.isEmpty(self.subChartMargin)) {\r\n                self.subChartMargin = {\r\n                    'top': self.actualHeight + 100,\r\n                    'left': self.margin.left\r\n                }\r\n            }\r\n\r\n            self.subChartX = (self._isTimeDomain) ? d3.time.scale().range([0, self.subChartWidth]) : d3.scale.linear().range([0, self.subChartWidth]),\r\n            self.subChartY = d3.scale.linear().range([self.subChartHeight, 0]);\r\n\r\n            self.subChartX.domain(self.x.domain());\r\n            self.subChartY.domain(self.y.domain());\r\n\r\n            self.subChartXAxis = d3.svg.axis()\r\n                            .scale(self.subChartX)\r\n                            .orient(\"bottom\");\r\n\r\n            self.brush = d3.svg.brush()\r\n                            .x(self.subChartX)\r\n                            .on(\"brush\", function() {\r\n                                // Update axis\r\n                                self.x.domain(self.brush.empty() ? self.subChartX.domain() :self.brush.extent());\r\n                                self.axis.update(self.x, self.y, 500);\r\n\r\n                                // Update main path of Line Chart\r\n                                if (self.options.area.show) {\r\n                                    self.body.selectAll(\"path.c9-chart-line.c9-path-area-custom\")\r\n                                        .attr(\"d\",  function(d) { return self.areaGen(d.value) });\r\n                                }\r\n                                self.body.selectAll(\"path.c9-chart-line.c9-path-line-custom\")\r\n                                        .attr(\"d\",  function(d) { return self.lineGen(d.value) });\r\n\r\n                                if (self.options.point.show) {\r\n                                    self.body.selectAll(\"circle.c9-chart-line.c9-circle-custom\")\r\n                                            .attr(\"cx\", function(d) { return self.x(d.valueX); })\r\n                                            .attr(\"cy\", function(d) { return self.y(d.valueY); });\r\n                                }\r\n                            });\r\n\r\n            self.subChartAreaGen = d3.svg.area()\r\n                            .x(function(d) { return self.subChartX(d.valueX) })\r\n                            .y0(function(d) { return self.subChartY(d.valueY) })\r\n                            .y1(self.subChartHeight)\r\n                            .interpolate(self.options.interpolate);\r\n\r\n            self.svg.attr('height', self.height + self.subChartHeight);\r\n\r\n            self.svg.selectAll(\".c9-subchart-custom\").remove();\r\n            self.svg.selectAll(\".c9-subchart-custom .c9-subchart-axis\").remove();\r\n\r\n            var subChart = self.svg.append(\"g\")\r\n                            .attr(\"class\", \"c9-subchart-custom\")\r\n                            .attr(\"transform\", \"translate(\" + self.subChartMargin.left + \",\" + self.subChartMargin.top + \")\");\r\n\r\n            var subChartAreaContainer = subChart.append('g')\r\n                                    .attr('class', 'c9-subchart-custom c9-subchart-area-container')\r\n                                    .attr(\"clip-path\", \"url(#clip)\");\r\n\r\n            data.forEach(function(d,i) {\r\n                if (!d.enable) return;\r\n\r\n                subChartAreaContainer.append(\"path\")\r\n                    // .attr(\"clip-path\", \"url(#clip)\")\r\n                    .attr(\"class\", \"c9-subchart-area\")\r\n                    .attr(\"d\", function() { return self.subChartAreaGen(d.value) })\r\n                    .attr('data-ref', 'c9-'+d['data-ref'])\r\n                    .style('fill', d.color)\r\n                    .style('stroke', 'none')\r\n                    .style('opacity', '0.5');\r\n            });\r\n            \r\n\r\n            subChart.append(\"g\")\r\n                .attr(\"class\", \"c9-subchart-axis\")\r\n                .attr(\"transform\", \"translate(0,\" + self.subChartHeight + \")\")\r\n                .call(self.subChartXAxis);\r\n\r\n            //append the brush for the selection of subsection  \r\n            subChart.append(\"g\")\r\n                .attr(\"class\", \"c9-subchart-brush\")\r\n                .call(self.brush)\r\n                .selectAll(\"rect\")\r\n                .attr(\"height\", self.subChartHeight);\r\n\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Select all circle as type CIRCLE in Line Chart via its CLASS\r\n     */\r\n    selectAllCircle() {\r\n        var self = this;\r\n\r\n        return self.body\r\n                .selectAll('circle.c9-chart-line.c9-circle-custom');\r\n    }\r\n\r\n    /**\r\n     * Select all rect as type RECT in Line Chart via its CLASS\r\n     */\r\n    selectRectLayer() {\r\n        var self = this;\r\n\r\n        return d3\r\n                .selectAll('svg rect.c9-chart-line.c9-rect-overlay');\r\n    }\r\n\r\n    /**\r\n     * Update Interaction: Hover\r\n     */\r\n    updateInteraction() {\r\n        var self = this,\r\n            selector        = self.selectRectLayer(),\r\n            hoverEnable     = self.hover.enable,\r\n            hoverOptions    = self.hover.options,\r\n            onMouseOverCallback = hoverOptions.onMouseOver.callback,\r\n            onMouseOutCallback  = hoverOptions.onMouseOut.callback,\r\n            onMouseMoveCallback  = hoverOptions.onMouseMove.callback,\r\n            onClickCallback  = self.click.callback;\r\n\r\n        var tooltip = new Tooltip(self.options.tooltip);\r\n\r\n        // Update Event Factory\r\n        self.eventFactory = {\r\n            // 'click': function(d) {\r\n            //     if (Helper.isFunction(onClickCallback)) {\r\n            //         onClickCallback.call(this, d);\r\n            //     }\r\n            // },\r\n            // 'mouseover': function(d) {\r\n            //     if (!hoverEnable) return;\r\n                \r\n            //     if (Helper.isFunction(onMouseOverCallback)) {\r\n            //         onMouseOverCallback.call(this, d);\r\n            //     }\r\n\r\n            //     // tooltip.draw(d, self, 'mouseover');\r\n            // },\r\n            'mouseout': function(d) {\r\n                if (!hoverEnable) return;\r\n\r\n                // if (Helper.isFunction(onMouseOutCallback)) {\r\n                //     onMouseOutCallback.call(this, d);\r\n                // }\r\n\r\n                self.hoverLine.style('stroke-opacity', 0);\r\n\r\n                // Remove circle style before\r\n                self.selectAllCircle()[0].forEach(function(circle) {\r\n                    d3.select(circle)\r\n                        .style('fill', self.options.point.fill)\r\n                        .style('fill-opacity', self.options.point.opacity);\r\n                }); \r\n\r\n                tooltip.draw(d, self, 'mouseout');\r\n            },\r\n            'mousemove': function(d) {\r\n                if (!hoverEnable) return;\r\n\r\n\r\n                var mouse   = d3.mouse(this),\r\n                    mouseX  = mouse[0],\r\n                    mouseY  = mouse[1],\r\n\r\n                    curValueX   = self.x.invert(mouseX);\r\n\r\n                var sameTimeArr = [],\r\n                    sameTimeValueArr = [];\r\n\r\n                self.dataTarget.forEach(function(d, i) {\r\n                    sameTimeArr[i] = d.value;\r\n                    sameTimeArr[i].sort(function(a, b) { return a.valueX - b.valueX; });\r\n                    var idx = self._isTimeDomain ? self.bisectDate(sameTimeArr[i], new Date(curValueX)) : self.bisectDate(sameTimeArr[i], curValueX);\r\n                    \r\n                    var d0, d1;\r\n                    \r\n                    d0 = (idx === 0) ? sameTimeArr[i][idx] : sameTimeArr[i][idx - 1];\r\n                    d1 = !Helper.isEmpty(sameTimeArr[i][idx]) ? sameTimeArr[i][idx] : sameTimeArr[i][idx-1] ;\r\n\r\n                    // Check d0, d1 still in boundary or not\r\n                    // To work well with brushing\r\n                    d0 = self.checkBoundary(d0.valueX) === -1 ? d1 : d0;\r\n                    d1 = self.checkBoundary(d1.valueX) === 1 ? d0 : d1;\r\n\r\n                    // work out which date value is closest to the mouse\r\n                    sameTimeValueArr[i] = (curValueX - d0.valueX > d1.valueX - curValueX) ? d1 : d0;\r\n                });\r\n\r\n                if (Helper.isFunction(onMouseMoveCallback)) {\r\n                    onMouseMoveCallback.call(this, sameTimeValueArr);\r\n                }\r\n                \r\n                var x = self.x(!Helper.isEmpty(sameTimeValueArr[0].valueX) ? sameTimeValueArr[0].valueX : sameTimeValueArr[1].valueX);\r\n                var y = self.y(!Helper.isEmpty(sameTimeValueArr[0].valueY) ? sameTimeValueArr[0].valueY : sameTimeValueArr[1].valueY);\r\n\r\n                // console.log(x);\r\n\r\n                // Remove circle style before\r\n                self.selectAllCircle()[0].forEach(function(circle) {\r\n                    d3.select(circle)\r\n                        .style('fill', self.options.point.fill)\r\n                        .style('fill-opacity', self.options.point.opacity);\r\n                }); \r\n\r\n                // Update circle style after mouse move\r\n                for (let i=0; i < sameTimeValueArr.length; i++) {\r\n                    let circle = d3.select(\"circle[data-ref='\" + sameTimeValueArr[i]['data-ref'] + \"']\");\r\n                    circle\r\n                    .style('fill', self.getLightenColor(self.options.point.fill))\r\n                    .style('fill-opacity', 1);\r\n                }\r\n\r\n                // focus.select('#focusCircle')\r\n                //     .attr('cx', x)\r\n                //     .attr('cy', y);\r\n                self.hoverLine\r\n                    .attr('x1', x).attr('y1', self.y(self.y.domain()[0]))\r\n                    .attr('x2', x).attr('y2', self.y(self.y.domain()[1]))\r\n                    .style('stroke-opacity', 1);\r\n                // self.hoverLine\r\n                //     .attr('x1', self.x(self.x.domain()[0])).attr('y1', y)\r\n                //     .attr('x2', self.x(self.x.domain()[1])).attr('y2', y)\r\n                //     .attr('stroke-opacity', 1);\r\n\r\n                //** Display Hover line\r\n                // self.hoverLine\r\n                //     .attr('x1', self.x(sameTimeValueArr[0].valueX))\r\n                //     .attr('x2', self.x(sameTimeValueArr[0].valueX))\r\n                //     .attr('stroke-opacity', 1);\r\n\r\n                tooltip.draw(sameTimeValueArr, self, 'mousemove');\r\n            }\r\n        }\r\n\r\n        selector.on(self.eventFactory);\r\n    }\r\n\r\n    getLineStyle() {\r\n        var self = this;\r\n\r\n        let r;\r\n\r\n        switch(self.options.line.style) {\r\n            case 'dot':\r\n                r = \"1, 1\";\r\n                break;\r\n            case 'solid':\r\n                r = 'none';\r\n                break;\r\n            case 'dash':\r\n                r = \"3, 3\";\r\n                break;\r\n            default:\r\n                r = 'none';\r\n                break;\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    checkBoundary(value) {\r\n        var self = this;\r\n\r\n        var bound = self.width - self.margin.left - self.margin.right,\r\n            checkWidth = self.x(value);\r\n\r\n        return checkWidth < 0 ? -1 : (checkWidth > bound) ? 1 : 0;\r\n    }\r\n    \r\n    /*=====  End of Main Functions  ======*/\r\n\r\n    /*========================================\r\n    =            User's Functions            =\r\n    ========================================*/\r\n    /**\r\n     * Custom Event Listener\r\n     * @param  {[type]}   eventType [description]\r\n     * @param  {Function} callback  [description]\r\n     */\r\n    on(eventType, callback) {\r\n        super.on(eventType, callback);\r\n        \r\n        var self = this;\r\n        var selector    = self.selectRectLayer();\r\n\r\n        // Update Event Factory\r\n        let eventFactory = {\r\n            'mousemove.event': function(d) {\r\n\r\n                var mouse   = d3.mouse(this),\r\n                    mouseX  = mouse[0],\r\n                    mouseY  = mouse[1],\r\n\r\n                    curValueX   = self.x.invert(mouseX);\r\n\r\n                var sameTimeArr = [],\r\n                    sameTimeValueArr = [];\r\n\r\n                self.dataTarget.forEach(function(d, i) {\r\n                    sameTimeArr[i] = d.value;\r\n                    sameTimeArr[i].sort(function(a, b) { return a.valueX - b.valueX; });\r\n                    var idx = self._isTimeDomain ? self.bisectDate(sameTimeArr[i], new Date(curValueX)) : self.bisectDate(sameTimeArr[i], curValueX);\r\n                    \r\n                    var d0, d1;\r\n                    \r\n                    d0 = (idx === 0) ? sameTimeArr[i][idx] : sameTimeArr[i][idx - 1];\r\n                    d1 = sameTimeArr[i][idx];\r\n\r\n                    // work out which date value is closest to the mouse\r\n                    sameTimeValueArr[i] = (curValueX - d0.valueX > d1.valueX - curValueX) ? d1 : d0;\r\n                });\r\n\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, sameTimeValueArr);\r\n                }\r\n            }\r\n        }\r\n\r\n        let eventName = eventType + '.event';\r\n\r\n        selector.on(eventName, eventFactory[eventName]);\r\n    }\r\n\r\n    /**\r\n     * Main draw function of Line Chart\r\n     */\r\n    draw() {\r\n        super.draw();\r\n\r\n        var self = this;\r\n\r\n        self.updateConfig(self.config, function(data) {\r\n            var axis    = new Axis(self.options.axis, self, self.width - self.margin.left - self.margin.right, self.height - self.margin.top - self.margin.bottom);\r\n            var title   = new Title(self.options.title, self);\r\n            var legend  = new Legend(self.options.legend, self);\r\n            var table  = new Table(self.options.table, self, data);\r\n\r\n            self.axis = axis;\r\n            self.title = title;\r\n            self.legend = legend;\r\n            self.table = table;\r\n\r\n            // Draw title\r\n            self.title.draw();\r\n\r\n            // Draw axis\r\n            self.axis.draw();\r\n\r\n            self.update(data);\r\n            self.updateSubChart(data);\r\n            self.updateOverlay();\r\n            self.updateHoverLine();\r\n            self.updateInteraction();\r\n\r\n            // Draw legend\r\n            self.legend.draw();\r\n            self.legend.updateInteractionForLineChart(self);\r\n\r\n            // Draw table\r\n            self.table.draw();\r\n        });\r\n    }\r\n    \r\n    /**\r\n     * Set option via stand-alone function\r\n     * @param {[type]} key   [description]\r\n     * @param {[type]} value [description]\r\n     */\r\n    setOption(key, value) {\r\n        super.setOption(key, value);\r\n\r\n        var self = this;\r\n\r\n        Helper.set(key, value, self.options);\r\n\r\n        self.updateConfig(self.options);\r\n    }\r\n\r\n    /**\r\n     * Update chart based on new data with optional dataConfig\r\n     * @param  {[type]} data       [description]\r\n     * @param  {[type]} dataConfig [description]\r\n     */\r\n    updateData(newData, newDataConfig) {\r\n        var self = this;\r\n\r\n        var newCfg = {};\r\n\r\n        if (!Helper.isEmpty(newDataConfig)) {\r\n\r\n            newCfg.data = {\r\n                plain: newData,\r\n                keys: newDataConfig,\r\n            };\r\n\r\n        } else {\r\n\r\n            newCfg.data = {\r\n                plain: newData,\r\n            };\r\n\r\n        }\r\n        \r\n        self.updateDataConfig(newCfg, function(data) {\r\n            // Update Chart\r\n            self.update(data);\r\n            self.updateSubChart(data);\r\n\r\n            // Update Axis\r\n            self.axis.update(self.x, self.y, 100);\r\n\r\n            // Update Legend\r\n            self.legend.update(data);\r\n            self.legend.updateInteractionForLineChart(self);\r\n\r\n            // Update Table\r\n            self.table.update(data);\r\n        });\r\n    }\r\n    /*=====  End of User's Functions  ======*/\r\n    \r\n    \r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/C9.LineChart.js\n **/","import Chart from './C9.Chart';\r\n\r\nimport Axis from './utils/C9.Axis';\r\nimport Title from './utils/C9.Title';\r\nimport Legend from './utils/C9.Legend';\r\nimport Table from './utils/C9.Table';\r\nimport Tooltip from './utils/C9.Tooltip';\r\n\r\nimport Helper from '../helper/C9.Helper';\r\nimport DataAdapter from '../helper/C9.DataAdapter';\r\n\r\nexport default class PieChart extends Chart {\r\n    constructor(options) {\r\n        super(options);\r\n\r\n        var self = this;\r\n\r\n        self.config = {\r\n            radius: Math.min(self.width - self.margin.left - self.margin.right, self.height - self.margin.top - self.margin.bottom) / 2,\r\n            // showText: true\r\n        };\r\n\r\n        // self.updateConfig(config);\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    get pie() {\r\n        return this._pie;\r\n    }\r\n\r\n    get arc() {\r\n        return this._arc;\r\n    }\r\n\r\n    get currentData() {\r\n        return this._currentData;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    set pie(arg) {\r\n        if (arg) {\r\n            this._pie = arg;\r\n        }\r\n    }\r\n\r\n    set arc(arg) {\r\n        if (arg) {\r\n            this._arc = arg;\r\n        }\r\n    }\r\n\r\n    set currentData(arg) {\r\n        if (arg) {\r\n            this._currentData = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n    \r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    /**\r\n     * Update Donut Chart Config\r\n     */\r\n    updateConfig(config, callback) {\r\n        super.updateConfig(config);\r\n\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n\r\n        self.chartType  = 'pie';\r\n\r\n        var dataOption          = self.dataOption;\r\n        dataOption.colorRange   = self.colorRange;\r\n\r\n        var da = new DataAdapter(dataOption, self.chartType, null);\r\n        da.getDataTarget(self.chartType, function(data) {\r\n            self.dataTarget = data;\r\n            \r\n            if (Helper.isFunction(callback)) {\r\n                callback.call(self, self.dataTarget);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Update Donut Chart Config\r\n     */\r\n    updateDataConfig(dataCfg, callback) {\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(self.options, dataCfg);\r\n\r\n        self.chartType  = 'pie';\r\n\r\n        var dataOption          = self.dataOption;\r\n        dataOption.colorRange   = self.colorRange;\r\n\r\n        var da = new DataAdapter(dataOption, self.chartType, null);\r\n        da.getDataTarget(self.chartType, function(data) {\r\n            self.dataTarget = data;\r\n\r\n            if (Helper.isFunction(callback)) {\r\n                callback.call(self, self.dataTarget);\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Update Donut Chart based on new data\r\n     * @param  {[type]} data [description]\r\n     */\r\n    update(data) {\r\n        var self = this;\r\n\r\n        var width   = self.width - self.margin.left - self.margin.right,\r\n            height  = self.height - self.margin.top - self.margin.bottom,\r\n            color   = self.colorRange;\r\n\r\n        self.arc = d3.svg.arc()\r\n                    .innerRadius(0)\r\n                    .outerRadius(self.options.radius);\r\n\r\n        //we can sort data here\r\n        self.pie = d3.layout.pie()\r\n                    .sort(null)\r\n                    .value(function(d) { return d.value; });\r\n\r\n        self.body.selectAll(\".c9-chart-pie.c9-custom-arc-container\").data([]).exit().remove();\r\n\r\n        //draw chart\r\n        var arcs = self.body\r\n                    .append('g')\r\n                        .attr('class', 'c9-chart-pie c9-custom-arc-container')\r\n                        .attr('transform', 'translate(' + (width / 2) + ',' + (height / 2) + ')')\r\n                        .selectAll('.c9-chart-pie.c9-custom-arc')\r\n                        .data(self.pie(data)).enter()\r\n                        .append('g')\r\n                            .attr('class', 'c9-chart-pie c9-custom-arc');\r\n\r\n        // Append main path contains pie\r\n        arcs.append('path')\r\n                .attr('class', 'c9-chart-pie c9-custom-path')\r\n                .attr('data-ref', function(d) { return d.data['data-ref']; })\r\n                .attr('d', self.arc)\r\n                .attr('fill', function(d, i) { return color(i); })\r\n                .attr('stroke', '#ffffff')\r\n                .each(function(d) { self.currentData = d; }); \r\n                // Current data used for calculate interpolation \r\n                // between current arc vs disabled arc\r\n\r\n\r\n        // Append middle text display name\r\n        // if (self.options.showText) {\r\n        //     arcs.append('text')\r\n        //             .attr('class', 'c9-chart-pie c9-custom-text')\r\n        //             .attr('transform', function(d) { return 'translate(' + self.arc.centroid(d) + ')'; })\r\n        //             .attr('dy', '.35em')\r\n        //             .attr('text-anchor', 'middle')\r\n        //             .text(function(d) { return d.data.name; });\r\n        // }\r\n        \r\n        self.updateInteraction();\r\n    }\r\n\r\n    /**\r\n     * Select all path as type PATH in Donut Chart via its CLASS\r\n     */\r\n    selectAllPath() {\r\n        var self = this;\r\n\r\n        return self.body\r\n                    .selectAll('path.c9-chart-pie.c9-custom-path');\r\n    }\r\n\r\n    /**\r\n     * Update Interaction: Hover\r\n     * @return {} \r\n     */\r\n    updateInteraction() {\r\n        var self    = this,\r\n            selector= self.selectAllPath(),\r\n            color   = self.colorRange,\r\n            chartInnerBefore = 0,\r\n            chartOuterBefore = self.options.radius,\r\n            chartInnerAfter = 0,\r\n            chartOuterAfter = self.options.radius * 1.2,\r\n            hoverOptions        = self.hover.options,\r\n            hoverEnable         = self.hover.enable,\r\n            onMouseOverCallback = hoverOptions.onMouseOver.callback,\r\n            onMouseOutCallback  = hoverOptions.onMouseOut.callback,\r\n            onClickCallback     = self.click.callback;\r\n\r\n        var tooltip = new Tooltip(self.options.tooltip);\r\n\r\n        // Main Event Dispatch for paths in pie chart\r\n        self.eventFactory = {\r\n            'click': function(d, i) {\r\n                if (Helper.isFunction(onClickCallback)) {\r\n                    onClickCallback.call(this, d);\r\n                }\r\n            },\r\n\r\n            'mouseover': function(d, i) {\r\n                if (!hoverEnable) return;\r\n\r\n                if (Helper.isFunction(onMouseOverCallback)) {\r\n                    onMouseOverCallback.call(this, d);\r\n                }\r\n\r\n                var selector = d3.select(this);\r\n                selector.transition()\r\n                        .attr('d', d3.svg.arc()\r\n                            .innerRadius(chartInnerAfter)\r\n                            .outerRadius(chartOuterAfter)\r\n                        );\r\n\r\n                // For legend\r\n                if (self.options.legend.show) {\r\n                    self.legend.item.each(function() {\r\n                        if (d3.select(this).attr('data-ref') !== d.data['data-ref'] && d3.select(this).attr('data-enable')) {\r\n                            d3.select(this).attr('opacity', '0.3');\r\n                        }\r\n                    });\r\n                }\r\n\r\n                // For Table\r\n                if (self.options.table.show) {\r\n                    var tr = d3.selectAll('.c9-table-container>.c9-table-body tr');\r\n                    tr.filter(function(i) { return i['data-ref'] != d.data['data-ref'] }).selectAll('td').style('opacity', '0.5');\r\n                    var selectedItem = tr.filter(function(i) { return i['data-ref'] == d.data['data-ref'] });\r\n                    //set its style and scroll to its pos\r\n                    selectedItem.selectAll('td').style('opacity', '1');\r\n                    Helper.scroll(d3.select('.c9-table-container')[0][0], selectedItem[0][0].offsetTop, 200);\r\n                }\r\n\r\n                // For Chart\r\n                self.selectAllPath().each(function(){\r\n                    if (d3.select(this).attr('data-ref') !== d.data['data-ref']) {\r\n                        d3.select(this).attr('opacity', '0.3');\r\n                    }\r\n                });\r\n\r\n                // For Tooltip\r\n                tooltip.draw(d, self, 'mouseover');\r\n            },\r\n            \r\n            'mouseout': function(d, i) {\r\n                if (!hoverEnable) return;\r\n\r\n                if (Helper.isFunction(onMouseOutCallback)) {\r\n                    onMouseOutCallback.call(this, d);\r\n                }\r\n\r\n                var selector = d3.select(this);\r\n                selector.transition()\r\n                        .duration(500)\r\n                        .ease('bounce')\r\n                        .attr('d', d3.svg.arc()\r\n                            .innerRadius(chartInnerBefore)\r\n                            .outerRadius(chartOuterBefore)\r\n                        );\r\n\r\n                // For legend\r\n                if (self.options.legend.show)\r\n                    self.legend.item.each(function() {\r\n                        if (d3.select(this).attr('data-ref') !== d.data['data-ref'] && d3.select(this).attr('data-enable')) {\r\n                            d3.select(this).attr('opacity', '1.0');\r\n                        }\r\n                    });\r\n\r\n                // For Table\r\n                if (self.options.table.show) {\r\n                    d3.selectAll('.c9-table-container>.c9-table-body tr').selectAll('td').style('opacity', '');\r\n                }\r\n                \r\n\r\n                // For Chart\r\n                self.selectAllPath().each(function(){\r\n                    if (d3.select(this).attr('data-ref') !== d.data['data-ref']) {\r\n                        d3.select(this).attr('opacity', '1.0');\r\n                    }\r\n                });\r\n\r\n                // For Tooltip\r\n                tooltip.draw(d, self, 'mouseout');\r\n            }\r\n        }\r\n\r\n        selector.on(self.eventFactory);\r\n    }\r\n    \r\n    /*=====  End of Main Functions  ======*/\r\n\r\n    /*========================================\r\n    =            User's Functions            =\r\n    ========================================*/\r\n    /**\r\n     * Custom Event Listener\r\n     * @param  {[type]}   eventType [description]\r\n     * @param  {Function} callback  [description]\r\n     * @return {[type]}             [description]\r\n     */\r\n    on(eventType, callback) {\r\n        super.on(eventType, callback);\r\n        \r\n        var self = this;\r\n        var selector    = self.selectAllPath();\r\n\r\n        // Update Event Factory\r\n        let eventFactory = {\r\n            'click.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            },\r\n            'mouseover.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            },\r\n            'mouseout.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            }\r\n        }\r\n\r\n        let eventName = eventType + '.event';\r\n\r\n        selector.on(eventName, eventFactory[eventName]);\r\n    }\r\n\r\n    /**\r\n     * Main draw function of Pie Chart\r\n     */\r\n    draw() {\r\n        super.draw();\r\n\r\n        var self = this;\r\n\r\n        self.updateConfig(self.config, function(data) {\r\n            var title   = new Title(self.options.title, self);\r\n            var legend  = new Legend(self.options.legend, self, self.dataTarget);\r\n            var table   = new Table(self.options.table, self, self.dataTarget);\r\n\r\n            self.title = title;\r\n            self.legend = legend;\r\n            self.table = table;\r\n\r\n            // Draw title\r\n            self.title.draw();\r\n\r\n            // Update interaction of this own chart\r\n            self.update(data);\r\n            self.updateInteraction();\r\n            \r\n            // Draw legend\r\n            self.legend.draw();\r\n            self.legend.updateInteractionForDonutPieChart(self, self.selectAllPath(), self.pie, self.currentData, self.arc);    \r\n            \r\n            // Draw table\r\n            self.table.draw();\r\n            self.table.updateInteractionForDonutPieChart(self);\r\n        });\r\n    }\r\n    \r\n    /**\r\n     * Set option via stand-alone function\r\n     * @param {[type]} key   [description]\r\n     * @param {[type]} value [description]\r\n     */\r\n    setOption(key, value) {\r\n        super.setOption(key, value);\r\n\r\n        var self = this;\r\n\r\n        Helper.set(key, value, self.options);\r\n\r\n        self.updateConfig(self.options);\r\n    }\r\n\r\n    /**\r\n     * Update chart based on new data with optional dataConfig\r\n     * @param  {[type]} data       [description]\r\n     * @param  {[type]} dataConfig [description]\r\n     */\r\n    updateData(newData, newDataConfig) {\r\n        var self = this;\r\n\r\n        var newCfg = {};\r\n\r\n        if (!Helper.isEmpty(newDataConfig)) {\r\n\r\n            newCfg.data = {\r\n                plain: newData,\r\n                keys: newDataConfig,\r\n            };\r\n\r\n        } else {\r\n\r\n            newCfg.data = {\r\n                plain: newData,\r\n            };\r\n\r\n        }\r\n\r\n        self.updateDataConfig(newCfg, function(data) {\r\n            // Update Chart\r\n            self.update(self.dataTarget);\r\n\r\n            // Update Legend\r\n            self.legend.update(self.dataTarget);\r\n            self.legend.updateInteractionForDonutPieChart(self, self.selectAllPath(), self.pie, self.currentData, self.arc);    \r\n        \r\n            // Update Table\r\n            self.table.update(self.dataTarget);\r\n            self.table.updateInteractionForDonutPieChart(self);\r\n        });\r\n        \r\n    }\r\n    /*=====  End of User's Functions  ======*/\r\n    \r\n    \r\n    \r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/C9.PieChart.js\n **/","import Chart from './C9.Chart';\r\n\r\nimport Axis from './utils/C9.Axis';\r\nimport Title from './utils/C9.Title';\r\nimport Legend from './utils/C9.Legend';\r\nimport Table from './utils/C9.Table';\r\nimport Tooltip from './utils/C9.Tooltip';\r\n\r\nimport Helper from '../helper/C9.Helper';\r\nimport DataAdapter from '../helper/C9.DataAdapter';\r\n\r\nexport default class TimeLine extends Chart {\r\n    constructor(options) {\r\n        super(options);\r\n\r\n        var self = this;\r\n\r\n        self.config = {\r\n            separatorColor: \"rgb(154, 154, 154)\",\r\n            backgroundColor: null,\r\n            starting: 0,\r\n            ending: 0,\r\n            stack: true,\r\n            itemHeight: 25,\r\n            itemMargin: 15,\r\n            labelMargin: 50,\r\n            striped: null\r\n        };\r\n\r\n        // self.updateConfig(config);\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    get maxStack() {\r\n        return this._maxStack;\r\n    }\r\n\r\n    get subChartX() {\r\n        return this._subChartX;\r\n    }\r\n\r\n    get subChartXAxis() {\r\n        return this._subChartXAxis;\r\n    }\r\n\r\n    get subChartWidth() {\r\n        return this._subChartWidth;\r\n    }\r\n\r\n    get subChartHeight() {\r\n        return this._subChartHeight;\r\n    }\r\n\r\n    get subChartMargin() {\r\n        return this._subChartMargin;\r\n    }\r\n\r\n    get brush() {\r\n        return this._brush;\r\n    }\r\n\r\n    get stackList() {\r\n        return this._stackList;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    set maxStack(arg) {\r\n        if (arg) {\r\n            this._maxStack = arg;\r\n        }\r\n    }\r\n\r\n    set subChartX(arg) {\r\n        if (arg) {\r\n            this._subChartX = arg;\r\n        }\r\n    }\r\n\r\n    set subChartXAxis(arg) {\r\n        if (arg) {\r\n            this._subChartXAxis = arg;\r\n        }\r\n    }\r\n\r\n    set subChartWidth(arg) {\r\n        if (arg) {\r\n            this._subChartWidth = arg;\r\n        }\r\n    }\r\n\r\n    set subChartHeight(arg) {\r\n        if (arg) {\r\n            this._subChartHeight = arg;\r\n        }\r\n    }\r\n\r\n    set subChartMargin(arg) {\r\n        if (arg) {\r\n            this._subChartMargin = arg;\r\n        }\r\n    }\r\n\r\n    set brush(arg) {\r\n        if (arg) {\r\n            this._brush = arg;\r\n        }\r\n    }\r\n\r\n    set stackList(arg) {\r\n        if (arg) {\r\n            this._stackList = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n    \r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n\r\n    updateConfig(config, callback) {\r\n        super.updateConfig(config);\r\n\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n\r\n        self.chartType          = \"timeline\";\r\n        self.maxStack           = 1;\r\n        self.stackList          = {};\r\n\r\n        var dataOption          = self.dataOption;\r\n        dataOption.colorRange   = self.colorRange;\r\n\r\n        var da = new DataAdapter(dataOption, self.chartType, null);\r\n        da.getDataTarget(self.chartType, function(data) {\r\n            self.dataTarget = data;\r\n\r\n            var maxStack = 0,\r\n                minTime = 0,\r\n                maxTime = 0,\r\n                width = self.width - self.margin.left - self.margin.right,\r\n                height = self.height - self.margin.top - self.margin.bottom;\r\n\r\n            // count number of stack and calculate min time, max time from data\r\n            if (self.options.stack || self.options.ending === 0 || self.options.starting === 0) {\r\n                \r\n                self.dataTarget.forEach(function (datum, index) {\r\n\r\n                    if (self.options.stack && Object.keys(self.stackList).indexOf(index) == -1) {\r\n                        self.stackList[index] = maxStack;\r\n                        maxStack++;\r\n                    }\r\n\r\n                    datum.value.forEach(function (time, i) {\r\n                        if(self.options.starting === 0)\r\n                            if (time.start < minTime || minTime === 0)\r\n                                minTime = time.start;\r\n                        if(self.options.ending === 0) {\r\n                            if (time.start > maxTime)\r\n                                maxTime = time.start;\r\n                            if (time.end > maxTime)\r\n                                maxTime = time.end;\r\n                        }\r\n                    });\r\n                });\r\n\r\n                if (self.options.ending === 0) {\r\n                  self.options.ending = maxTime;\r\n                }\r\n                if (self.options.starting === 0) {\r\n                  self.options.starting = minTime;\r\n                }\r\n            }\r\n\r\n            self.maxStack = maxStack;\r\n\r\n            self.x = d3.time.scale()\r\n                    .domain([self.options.starting, self.options.ending])\r\n                    .range([0, self.width]);\r\n\r\n            if (Helper.isFunction(callback)) {\r\n                callback.call(self, self.dataTarget);\r\n            }\r\n        });\r\n    }\r\n\r\n    updateDataConfig(dataCfg, callback) {\r\n\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(self.options, dataCfg);\r\n\r\n        self.chartType          = \"timeline\";\r\n        self.maxStack           = 1;\r\n        self.stackList          = {};\r\n\r\n        var dataOption          = self.dataOption;\r\n        dataOption.colorRange   = self.colorRange;\r\n\r\n        var da = new DataAdapter(dataOption, self.chartType, null);\r\n        da.getDataTarget(self.chartType, function(data) {\r\n            var maxStack = 0,\r\n                minTime = 0,\r\n                maxTime = 0,\r\n                width = self.width - self.margin.left - self.margin.right,\r\n                height = self.height - self.margin.top - self.margin.bottom;\r\n\r\n            // count number of stack and calculate min time, max time from data\r\n            if (self.options.stack || self.options.ending === 0 || self.options.starting === 0) {\r\n                \r\n                self.dataTarget.forEach(function (datum, index) {\r\n\r\n                    if (self.options.stack && Object.keys(self.stackList).indexOf(index) == -1) {\r\n                        self.stackList[index] = maxStack;\r\n                        maxStack++;\r\n                    }\r\n\r\n                    datum.value.forEach(function (time, i) {\r\n                        if(self.options.starting === 0)\r\n                            if (time.start < minTime || minTime === 0)\r\n                                minTime = time.start;\r\n                        if(self.options.ending === 0) {\r\n                            if (time.start > maxTime)\r\n                                maxTime = time.start;\r\n                            if (time.end > maxTime)\r\n                                maxTime = time.end;\r\n                        }\r\n                    });\r\n                });\r\n\r\n                if (self.options.ending === 0) {\r\n                  self.options.ending = maxTime;\r\n                }\r\n                if (self.options.starting === 0) {\r\n                  self.options.starting = minTime;\r\n                }\r\n            }\r\n\r\n            self.maxStack = maxStack;\r\n\r\n            self.x = d3.time.scale()\r\n                    .domain([self.options.starting, self.options.ending])\r\n                    .range([0, self.width]);\r\n\r\n            if (Helper.isFunction(callback)) {\r\n                callback.call(self, self.dataTarget);\r\n            }\r\n        });\r\n    }\r\n\r\n    update(data) {\r\n        var self = this;\r\n\r\n        var width = self.width - self.margin.left - self.margin.right,\r\n            height = self.height - self.margin.top - self.margin.bottom;\r\n\r\n        var scale = width / (self.options.ending - self.options.starting);\r\n\r\n        var color = self.colorRange;\r\n\r\n        var stackList = self.stackList;\r\n\r\n        self.body.selectAll(\".c9-timeline-border-bar\").data([]).exit().remove();\r\n        self.body.selectAll(\".c9-timeline-chart.c9-background-container\").data([]).exit().remove();\r\n        self.body.selectAll(\".c9-timeline-chart.c9-stripe-background-container\").data([]).exit().remove();\r\n        self.body.selectAll(\".c9-timeline-chart.c9-rect-container\").data([]).exit().remove();\r\n        self.svg.selectAll(\".c9-timeline-chart.c9-label-container\").remove();\r\n        self.body.selectAll(\".c9-timeline-row-separator\").remove();\r\n\r\n        // Update clip-parth\r\n        self.svg.select('#clip').select('rect').attr('height', (self.options.itemHeight + self.options.itemMargin) * data.length);\r\n\r\n        //draw border\r\n        self.body.append(\"rect\")\r\n            .attr(\"class\", \"c9-timeline-border-bar\")\r\n            .attr(\"x\", 0)\r\n            .attr(\"width\", width)\r\n            .attr(\"y\", 0 - self.options.itemMargin / 2)\r\n            .attr(\"height\", (self.options.itemHeight + self.options.itemMargin) * (self.options.stack ? self.maxStack : 1))\r\n            .attr(\"stroke\", \"rgb(154, 154, 154)\")\r\n            .attr(\"stroke-width\", 2)\r\n            .attr(\"fill\", \"none\");\r\n\r\n        var labelContainer = self.svg.append(\"g\")\r\n                                .attr('class', 'c9-timeline-chart c9-label-container');\r\n\r\n        data.forEach( function(datum, index) {\r\n            var barYAxis = ((self.options.itemHeight + self.options.itemMargin) * stackList[index]);\r\n            if (!self.options.stack) barYAxis = 0;\r\n\r\n            //draw background\r\n            if (((!self.options.stack && index == 0) || self.options.stack) && self.options.backgroundColor) { \r\n                var bgContainer = self.body.append(\"g\")\r\n                                    .attr('class', 'c9-timeline-chart c9-background-container');\r\n\r\n                bgContainer.selectAll(\".c9-background-container\")\r\n                    .data(datum.value).enter()\r\n                    .append(\"rect\")\r\n                    .attr(\"class\", \"c9-timeline-background-bar\")\r\n                    .attr(\"x\", 0)\r\n                    .attr(\"width\", width)\r\n                    .attr(\"y\", barYAxis - self.options.itemMargin / 2)\r\n                    .attr(\"height\", self.options.itemHeight + self.options.itemMargin)\r\n                    .attr(\"fill\", Helper.isArray(self.options.backgroundColor) ? self.options.backgroundColor[index % (self.maxStack - 1)] : self.options.backgroundColor);\r\n            }\r\n\r\n            if (((!self.options.stack && index == 0) || self.options.stack) && self.options.striped) { \r\n                var bgContainer = self.body.append(\"g\")\r\n                                    .attr('class', 'c9-timeline-chart c9-stripe-background-container');\r\n                bgContainer.selectAll(\".c9-stripe-background-container\")\r\n                    .data(datum.value).enter()\r\n                    .insert(\"rect\")\r\n                    .attr(\"class\", \"c9-timeline-stripe-background-bar\")\r\n                    .attr(\"x\", 0)\r\n                    .attr(\"width\", width)\r\n                    .attr(\"y\", barYAxis - self.options.itemMargin / 2)\r\n                    .attr(\"height\", self.options.itemHeight + self.options.itemMargin)\r\n                    .attr(\"fill\", index % 2 ? \"rgb(255, 255, 255)\" : \"rgb(230, 230, 230)\");\r\n            }\r\n\r\n            //draw item\r\n            var itemContainer = self.body.append(\"g\")\r\n                                    .attr('class', 'c9-timeline-chart c9-rect-container')\r\n                                    .attr(\"clip-path\", \"url(#clip)\");\r\n\r\n            itemContainer.selectAll(\".c9-rect-container\")\r\n                .data(datum.value).enter()\r\n                .append(function (d, i) {\r\n                    return document.createElementNS(d3.ns.prefix.svg, d.end != \"Invalid Date\" ? \"rect\" : \"circle\");\r\n                })\r\n                .attr('class', 'c9-timeline-custom-rect')\r\n                .attr(\"x\", function(d, i) { return self.getXPos(d,i,scale); })\r\n                .attr(\"y\", function(d, i) { return self.getStackPosition(d, i, index); })\r\n                .attr(\"width\", function (d, i) {\r\n                    return (d.end - d.start) * scale;\r\n                })\r\n                .attr(\"cy\", function (d, i) {\r\n                    return self.getStackPosition(d, i, index) + self.options.itemHeight / 2;\r\n                })\r\n                .attr(\"cx\", function(d, i) { return self.getXPos(d,i,scale); })\r\n                .attr(\"r\", self.options.itemHeight / 2)\r\n                .attr(\"height\", self.options.itemHeight)\r\n                .style(\"fill\", color(index));\r\n\r\n            if (self.options.separatorColor && index < self.maxStack - 1) {\r\n                var lineYAxis = ( self.options.itemHeight + self.options.itemMargin / 2 + (self.options.itemHeight + self.options.itemMargin) * stackList[index]);\r\n                self.body.append(\"svg:line\")\r\n                  .attr(\"class\", \"c9-timeline-row-separator\")\r\n                  .attr(\"x1\", 0)\r\n                  .attr(\"x2\", width)\r\n                  .attr(\"y1\", lineYAxis)\r\n                  .attr(\"y2\", lineYAxis)\r\n                  .attr(\"stroke-width\", 3)\r\n                  .attr(\"stroke\", Helper.isArray(self.options.separatorColor) ? self.options.separatorColor[index % (self.maxStack - 1)] : self.options.separatorColor);\r\n            }\r\n\r\n            //draw the label left side item\r\n            if (self.options.stack && !Helper.isEmpty(datum.name) && datum.name != \"\") { \r\n                var rowsDown = self.margin.top + (self.options.itemHeight + self.options.itemMargin) * (stackList[index] === undefined ? 0 : stackList[index]) + self.options.itemHeight * 0.75;\r\n\r\n                labelContainer.append(\"text\")\r\n                    .attr(\"class\", \"c9-timeline-label\")\r\n                    .attr(\"transform\", \"translate(\" + self.options.labelMargin + \",\" + rowsDown + \")\")\r\n                    .text(datum.name);\r\n            }\r\n            //draw icon\r\n            else if (self.options.stack && !Helper.isEmpty(datum.icon) && datum.icon != \"\") {\r\n                labelContainer.append(\"image\")\r\n                    .attr(\"class\", \"c9-timeline-label\")\r\n                    .attr(\"transform\", \"translate(\"+ self.options.labelMargin +\",\"+ (self.margin.top + (self.options.itemHeight + self.options.itemMargin) * stackList[index])+\")\")\r\n                    .attr(\"xlink:href\", datum.icon)\r\n                    .attr(\"width\", self.options.itemHeight)\r\n                    .attr(\"height\", self.options.itemHeight);\r\n            }\r\n        });\r\n\r\n        self.updateInteraction();\r\n    }\r\n\r\n    /**\r\n     * Update sub chart\r\n     */\r\n    updateSubChart(data) {\r\n        var self = this;\r\n\r\n        if (self.options.subchart.show) {\r\n            var width = self.width - self.margin.left - self.margin.right,\r\n                height = self.height - self.margin.top - self.margin.bottom;\r\n\r\n            // Set actual size for chart after initialization\r\n            var chartBox = self.body.node().getBBox();\r\n            // self.actualWidth = chartBox.width - 4 * self.point.radius;\r\n            self.actualHeight = chartBox.height;\r\n\r\n            /*----------  Sub Chart  ----------*/\r\n            \r\n            self.subChartWidth = width,\r\n            self.subChartHeight = self.options.subchart.height,\r\n            self.subChartMargin = {\r\n                'top': self.actualHeight + 100,\r\n                'left': self.margin.left\r\n            };\r\n\r\n            self.subChartX = d3.time.scale().range([0, self.subChartWidth]);\r\n\r\n            self.subChartX.domain([self.options.starting, self.options.ending]);\r\n\r\n            self.subChartXAxis = d3.svg.axis()\r\n                            .scale(self.subChartX)\r\n                            .orient(\"bottom\");\r\n\r\n            self.brush = d3.svg.brush()\r\n                            .x(self.subChartX)\r\n                            .on(\"brush\", function() {\r\n                                // Update axis\r\n                                self.x.domain(self.brush.empty() ? self.subChartX.domain() : self.brush.extent());\r\n                                self.axis.update(self.x, self.y, 500);\r\n                                var scale = width / (self.options.ending - self.options.starting);\r\n                                // Update main path of Line Chart\r\n                                self.body.selectAll(\".c9-timeline-custom-rect\")\r\n                                        .attr(\"x\", function(d, i) { return self.x(d.start); });\r\n                                        // .attr(\"x\", function(d, i) { return self.getXPos(d,i, scale); });\r\n                                        // .attr(\"y\", function(d, i) { return self.getStackPosition(d,i,stackList, index); })\r\n                                        // .attr(\"cx\", function(d, i) { return self.getXPos(d,i, scale); })\r\n                                        // .attr(\"cy\", function (d, i) {\r\n                                        //     return self.getStackPosition(d, i, stackList, index) + self.options.itemHeight / 2;\r\n                                        // });\r\n                            });\r\n\r\n            var scale = width / (self.options.ending - self.options.starting);\r\n\r\n            var color = self.colorRange;\r\n\r\n            self.svg.attr('height', self.height + self.subChartHeight);\r\n\r\n            self.svg.selectAll(\".c9-subchart-custom\").remove();\r\n            self.svg.selectAll(\".c9-subchart-custom .c9-subchart-axis\").remove();\r\n\r\n            var subChart = self.svg.append(\"g\")\r\n                            .attr(\"class\", \"c9-subchart-custom\")\r\n                            // .attr(\"clip-path\", \"url(#clip)\")\r\n                            .attr(\"transform\", \"translate(\" + self.subChartMargin.left + \",\" + self.subChartMargin.top + \")\");\r\n\r\n            var itemContainer = subChart.append('g')\r\n                                    .attr('class', 'c9-subchart-custom c9-subchart-timeline-container');\r\n                                    // .attr(\"clip-path\", \"url(#clip)\");\r\n\r\n            data.forEach(function(datum, index) {\r\n                if (!datum.enable) return;\r\n\r\n                itemContainer.selectAll(\".c9-subchart-timeline-container\")\r\n                    .data(datum.value).enter()\r\n                    .append(function (d, i) {\r\n                        return document.createElementNS(d3.ns.prefix.svg, d.end != \"Invalid Date\" ? \"rect\" : \"circle\");\r\n                    })\r\n                    .attr('class', 'c9-timeline-custom-rect')\r\n                    // .attr(\"x\", function(d, i) { return self.getXPos(d,i, scale); })\r\n                    .attr(\"x\", function(d, i) { return self.subChartX(d.start); })\r\n                    .attr(\"y\", function(d, i) { return self.getStackPosition(d, i , index); })\r\n                    // .attr(\"width\", function (d, i) {\r\n                    //     return (d.end - d.start) * scale;\r\n                    // })\r\n                    .attr(\"width\", function (d, i) {\r\n                        return self.subChartX(d.end) - self.subChartX(d.start);\r\n                    })\r\n                    .attr(\"cy\", function (d, i) {\r\n                        return self.getStackPosition(d, i, index) + self.options.itemHeight / 2;\r\n                    })\r\n                    // .attr(\"cx\", function(d, i) { return self.getXPos(d,i, scale); })\r\n                    .attr(\"cx\", function(d, i) { return self.subChartX(d.start); })\r\n                    .attr(\"r\", self.options.itemHeight / 2)\r\n                    .attr(\"height\", self.options.itemHeight / 2)\r\n                    .style(\"fill\", color(index));\r\n            });\r\n            \r\n\r\n            itemContainer.append(\"g\")\r\n                .attr(\"class\", \"c9-subchart-axis\")\r\n                .attr(\"transform\", \"translate(0,\" + self.subChartHeight + \")\")\r\n                .call(self.subChartXAxis);\r\n\r\n            //append the brush for the selection of subsection  \r\n            itemContainer.append(\"g\")\r\n                .attr(\"class\", \"c9-subchart-brush\")\r\n                .call(self.brush)\r\n                .selectAll(\"rect\")\r\n                .attr(\"height\", self.subChartHeight);\r\n\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Select all path as type RECT in Timeline Chart via its CLASS\r\n     */\r\n    selectAllRect() {\r\n        var self = this;\r\n\r\n        return self.body\r\n                    .selectAll('.c9-timeline-custom-rect');\r\n    }\r\n\r\n    /**\r\n     * Update Interaction: Hover\r\n     * @return {} \r\n     */\r\n    updateInteraction() {\r\n        var self    = this,\r\n            selector= self.selectAllRect(),\r\n            hoverOptions        = self.hover.options,\r\n            hoverEnable         = self.hover.enable,\r\n            onMouseOverCallback = hoverOptions.onMouseOver.callback,\r\n            onMouseOutCallback  = hoverOptions.onMouseOut.callback,\r\n            onClickCallback     = self.click.callback;\r\n\r\n        var tooltip = new Tooltip(self.options.tooltip);\r\n\r\n        // Main Event Dispatch for paths in pie chart\r\n        self.eventFactory = {\r\n            'click': function(d, i) {\r\n                if (Helper.isFunction(onClickCallback)) {\r\n                    onClickCallback.call(this, d);\r\n                }\r\n            },\r\n\r\n            'mouseover': function(d, i) {\r\n                if (!hoverEnable) return;\r\n\r\n                if (Helper.isFunction(onMouseOverCallback)) {\r\n                    onMouseOverCallback.call(this, d);\r\n                }\r\n\r\n                d3.select(this).style(\"fill\", function (d, i) { return self.getLightenColor(d.color || color(i)); });\r\n\r\n                tooltip.draw(d, self, 'mouseover');\r\n            },\r\n            \r\n            'mouseout': function(d, i) {\r\n                if (!hoverEnable) return;\r\n\r\n                if (Helper.isFunction(onMouseOutCallback)) {\r\n                    onMouseOutCallback.call(this, d);\r\n                }\r\n\r\n                d3.select(this).style(\"fill\", function (d, i) { return d.color || color(i); });\r\n\r\n                tooltip.draw(d, self, 'mouseout');\r\n            }\r\n        };\r\n\r\n        selector.on(self.eventFactory);\r\n    }\r\n\r\n    getXPos(d, i, scale) {\r\n        var self = this;\r\n        return (d.start - self.options.starting) * scale;\r\n    }\r\n\r\n    getStackPosition(d, i, index) {\r\n        var self = this;\r\n\r\n        var stackList = self.stackList;\r\n        \r\n        if (self.options.stack) {\r\n            return (self.options.itemHeight + self.options.itemMargin) * stackList[index];\r\n        }\r\n        return 0;\r\n    }\r\n    \r\n    /*=====  End of Main Functions  ======*/\r\n\r\n    /*========================================\r\n    =            User's Functions            =\r\n    ========================================*/\r\n\r\n    /**\r\n     * Custom Event Listener\r\n     * @param  {[type]}   eventType [description]\r\n     * @param  {Function} callback  [description]\r\n     * @return {[type]}             [description]\r\n     */\r\n    on(eventType, callback) {\r\n        super.on(eventType, callback);\r\n        \r\n        var self = this;\r\n        var selector    = self.selectAllRect();\r\n\r\n        // Update Event Factory\r\n        let eventFactory = {\r\n            'click.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            },\r\n            'mouseover.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            },\r\n            'mouseout.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            }\r\n        }\r\n\r\n        let eventName = eventType + '.event';\r\n\r\n        selector.on(eventName, eventFactory[eventName]);\r\n    }\r\n    \r\n    /**\r\n     * Main draw function\r\n     */\r\n    draw() {\r\n        super.draw();\r\n\r\n        var self = this;\r\n        \r\n        self.updateConfig(self.config, function(data) {\r\n            var axis    = new Axis(self.options.axis, self, self.width - self.margin.left - self.margin.right, (self.options.itemHeight + self.options.itemMargin) * self.maxStack);\r\n            var title   = new Title(self.options.title, self);  \r\n            var legend  = new Legend(self.options.legend, self, self.colorRange, data);\r\n\r\n            self.axis = axis;\r\n            self.title = title;\r\n            self.legend = legend;\r\n\r\n            // Draw title\r\n            self.title.draw();\r\n\r\n            // Draw axis\r\n            self.axis.draw();\r\n\r\n            self.update(data);\r\n            self.updateSubChart(data);\r\n            self.updateInteraction();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Set option via stand-alone function\r\n     * @param {[type]} key   [description]\r\n     * @param {[type]} value [description]\r\n     */\r\n    setOption(key, value) {\r\n        super.setOption(key, value);\r\n\r\n        var self = this;\r\n\r\n        Helper.set(key, value, self.options);\r\n\r\n        self.updateConfig(self.options);\r\n    }\r\n\r\n    /**\r\n     * Update chart based on new data with optional dataConfig\r\n     * @param  {[type]} data       [description]\r\n     * @param  {[type]} dataConfig [description]\r\n     */\r\n    updateData(newData, newDataConfig) {\r\n        var self = this;\r\n\r\n        var newCfg = {};\r\n\r\n        if (!Helper.isEmpty(newDataConfig)) {\r\n\r\n            newCfg.data = {\r\n                plain: newData,\r\n                keys: newDataConfig,\r\n            };\r\n\r\n        } else {\r\n\r\n            newCfg.data = {\r\n                plain: newData,\r\n            };\r\n\r\n        }\r\n        \r\n        // Update chart\r\n        self.updateDataConfig(newCfg, function(data) {\r\n            self.update(self.dataTarget);\r\n            self.updateSubChart(self.dataTarget);\r\n\r\n            // Update Axis\r\n            self.axis.update(self.x, self.y, 100);\r\n        });\r\n    }\r\n    /*=====  End of User's Functions  ======*/\r\n    \r\n    \r\n    \r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/C9.TimeLine.js\n **/","import Helper from '../helper/C9.Helper';\r\nimport Tooltip from '../charts/utils/C9.Tooltip';\r\nimport DataAdapter from '../helper/C9.DataAdapter';\r\nexport default class Map {\r\n    constructor(options) {\r\n        var self    = this;\r\n        var config  = {\r\n            // container\r\n            id: \"body\",\r\n            // Layers:\r\n            // BingMaps, OSM, Raster, Tile, TileImage, Vector, VectorTile,...\r\n            // REF: http://openlayers.org/en/latest/apidoc/ol.source.html?stableonly=true\r\n            layers: {\r\n                type: \"Tile\",\r\n                source: {\r\n                    name: \"OSM\"\r\n                }\r\n            }, \r\n            view: {\r\n                lat: 0,\r\n                lon: 0,\r\n                zoom: 2\r\n            },\r\n            data: null,\r\n            tooltip: {\r\n                format: null\r\n            }\r\n        };\r\n\r\n        self._options = Helper.mergeDeep(config, options);\r\n        self._dataSource      = self._options.data;\r\n        self.initMapConfig();\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n\r\n    // get id() {\r\n    //     return this._options.id;\r\n    // }\r\n\r\n    // get height() {\r\n    //     return this._height;\r\n    // }\r\n\r\n    // get width() {\r\n    //     return this._width;\r\n    // }\r\n\r\n    // get view() {\r\n    //     return this._view;\r\n    // }\r\n\r\n    // get markers() {\r\n    //     return this._markers;\r\n    // }\r\n\r\n    // get layers() {\r\n    //     return this._layers;\r\n    // }\r\n\r\n    get dataSource() {\r\n        return this._dataSource;\r\n    }\r\n\r\n    get data() {\r\n        return this._data;\r\n    }\r\n\r\n    get options() {\r\n        return this._options;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n    \r\n    \r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n\r\n    // set id(newId) {\r\n    //     if (newId) {\r\n    //         this._options.id = newId;\r\n    //     }\r\n    // }\r\n\r\n    // set height(newHeight) {\r\n    //     if (newHeight) {\r\n    //         this._height = newHeight;    \r\n    //     }\r\n    // }\r\n\r\n    // set width(newWidth) {\r\n    //     if (newWidth) {\r\n    //         this._width = newWidth;\r\n    //     }\r\n    // }\r\n\r\n    // set view(newView) {\r\n    //     if (newView) {\r\n    //         this._view = newView;\r\n    //     }\r\n    // }\r\n\r\n    // set markers(newMarkers) {\r\n    //     if (newMarkers) {\r\n    //         this._markers = newMarkers;\r\n    //     }\r\n    // }\r\n\r\n    // set layers(newLayers) {\r\n    //     if (newLayers) {\r\n    //         this._layers = newLayers;\r\n    //     }\r\n    // }\r\n\r\n    set dataSource(newData) {\r\n        if (newData) {\r\n            this._dataSource = newData;\r\n        }\r\n    }\r\n\r\n    set data(newData) {\r\n        if (newData) {\r\n            this._data = newData;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n    \r\n    \r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    \r\n    initMapConfig() {\r\n        var self = this;\r\n\r\n        //c9Layers contain all layers\r\n        self.c9Layers = [];\r\n        //c9Markers contain all markers\r\n        // self.c9Markers = new ol.source.Vector({});\r\n        //c9Objects contain all polygons, lines\r\n        self.c9Objs = new ol.source.Vector({});\r\n        self.c9GeojsonObjs = [];\r\n        //init all thing relating to user's data\r\n\r\n        //layer\r\n        self.initLayer();\r\n        \r\n        //quick markers\r\n        // self.initMarker();\r\n\r\n        //object\r\n        // self.initObj();\r\n\r\n        //init popup\r\n        var popup = document.createElement('div');\r\n        popup.id = 'c9MapPopup';\r\n        popup.className = 'c9-map-tooltip-container c9-custom-tooltip-container c9-tooltip-top';\r\n        document.body.appendChild(popup);\r\n    }\r\n\r\n    draw() {\r\n        var self = this;\r\n        var view = self.options.view,\r\n            id   = self.options.id;\r\n\r\n        self.c9View = new ol.View({\r\n            center: ol.proj.fromLonLat([view.lon, view.lat]),\r\n            zoom: view.zoom > 2 ? view.zoom : 2,\r\n            minZoom: 2,\r\n        });\r\n        self.c9Map = new ol.Map({\r\n            target: id,\r\n            layers: self.c9Layers,\r\n            view: self.c9View,\r\n            interactions : ol.interaction.defaults({doubleClickZoom: false})\r\n        });\r\n\r\n        /******************** ADD C9 OBJECTS ********************/\r\n        self.c9ObjsLayer = new ol.layer.Vector({ \r\n            source: self.c9Objs,\r\n            map: self.c9Map\r\n        });\r\n        /********************************************************/\r\n\r\n        /********************* ADD C9 POPUP *********************/\r\n        self.c9Popup = new ol.Overlay({\r\n            positioning: 'bottom-center',\r\n            element: document.getElementById('c9MapPopup')\r\n        });\r\n\r\n        //add overlay to contain popup\r\n        self.c9Map.addOverlay(self.c9Popup);\r\n        /********************************************************/\r\n\r\n        /********************* HOVER STYLE **********************/\r\n        self.c9CustomHover = new ol.layer.Vector({\r\n            source: new ol.source.Vector(),\r\n            map: self.c9Map,\r\n            style: new ol.style.Style({\r\n                stroke: new ol.style.Stroke({\r\n                    color: 'rgb(0, 153, 255)',\r\n                    width: 3\r\n                }),\r\n                fill: new ol.style.Fill({\r\n                    color: 'rgba(255, 255, 255, 0.2)'\r\n                })\r\n            })\r\n        });\r\n        /********************************************************/\r\n        //adapt data to obj\r\n        self.update(self.dataSource);\r\n        //define interaction\r\n        self.updateInteraction();\r\n\r\n    }\r\n    /*=====  End of Main Functions  ======*/\r\n\r\n    /**\r\n     * Create layer\r\n     * @param  {String} type of layer\r\n     * @param  {source} source data defined by C9\r\n     */\r\n    createLayer(options){\r\n        var self = this;\r\n        if (Helper.isEmpty(options)) return;\r\n        \r\n        var type = options.type || 'Tile',\r\n            source = options.source || {name: 'OSM'};\r\n            // style = options.style;\r\n\r\n        var layer = new ol.layer[type];\r\n        layer.setSource(self.setupSource(source));\r\n        // if (!Helper.isEmpty(style)) layer.setStyle(style);\r\n\r\n        //adapt source data to c9obj\r\n        //support maximum 2 source level\r\n        var containFeature = true, vs;\r\n        try {\r\n            vs = layer.getSource();\r\n            vs.getFeatures();\r\n        }\r\n        catch (err) {\r\n            try {\r\n                vs = layer.getSource().getSource();\r\n                vs.getFeatures();\r\n            }\r\n            catch (err) {\r\n                containFeature = false;    \r\n            }\r\n        }\r\n        if (containFeature) {\r\n            var readFormat = function(feature) {\r\n                var result = {};\r\n                feature.getKeys().forEach(function(k) {\r\n                    result[k] = feature.getProperties()[k];\r\n                });\r\n                result['id'] = feature.getId();\r\n                return result;\r\n            }\r\n            if (!Helper.isEmpty(options.style)) {\r\n                try {\r\n                    self.setStyle({obj: layer.getSource(), style: options.style});\r\n                }\r\n                catch (err) {\r\n                    try {\r\n                        self.setStyle({obj: vs, style: options.style});\r\n                    }\r\n                    catch (err) {\r\n                        try {\r\n                            self.setStyle({obj: layer, style: options.style});    \r\n                        }\r\n                        catch (err) {\r\n                            throw 'Cannot set style for this source';\r\n                        }\r\n                    }\r\n                    \r\n                }\r\n            }\r\n            //register layer loaded event to set data for obj\r\n            vs.once('change', function(e) {\r\n                if (vs.getState() == 'ready') {\r\n                    var objs = vs.getFeatures();\r\n                    self.c9GeojsonObjs.push(layer.getSource());\r\n                    // self.c9Objs.addFeatures(objs);\r\n\r\n                    objs.forEach(function(o) {\r\n                        o.set('data', readFormat(o));\r\n                        o.set('type', 'c9-geojson');\r\n                        // o.set('c9-style', options.style);\r\n                        if (Helper.isFunction(options.condition) && !Helper.isEmpty(options.data)) {\r\n                            var data      = options.data,\r\n                                condition = options.condition;\r\n                            if (Helper.isArray(data)) {\r\n                                for (var i = 0; i < data.length; i++) {\r\n                                    if (condition(o, data[i])) {\r\n                                        for (var j in data[i]) {\r\n                                            o.get('data')[j] = data[i][j];\r\n                                        }\r\n                                        break;\r\n                                    }\r\n                                }\r\n                            } \r\n                            else \r\n                                if (condition(o, data)) {\r\n                                    for (var i in data) {\r\n                                        o.get('data')[i] = data[i];\r\n                                    }\r\n                                }\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n        }\r\n\r\n        self.c9Layers.push(layer);\r\n\r\n        return layer;\r\n    }\r\n\r\n    /**\r\n     * Init Layer base on first user's data\r\n     */\r\n    initLayer() {\r\n        var self = this;\r\n        var layers = self.options.layers;\r\n\r\n        if (layers instanceof Array) {\r\n            layers.forEach(function(l, i) {\r\n                self.createLayer({type: l.type, source: l.source, style: l.style, condition: l.condition, data: l.data});\r\n            })\r\n        }\r\n        else {\r\n            self.createLayer({type: layers.type, source: layers.source, style: layers.style, condition: layers.condition, data: layers.data});\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Setup source for layer\r\n     * @param  {Object} source data style defined by c9\r\n     * @return {String} return source (ol.source)\r\n     */\r\n    setupSource(s){\r\n        var source = undefined;\r\n        switch (s.name) {\r\n            case 'BingMaps':\r\n                source = new ol.source.BingMaps({\r\n                    key: s.key,\r\n                    imagerySet: s.imagerySet || 'Road'\r\n                });\r\n                break;\r\n            case 'Stamen':\r\n                source = new ol.source.Stamen({\r\n                    layer: s.layer || 'watercolor'\r\n                });\r\n                break;\r\n            /********** TileJSON require ol >= v3.8.2 **********/\r\n            case 'TileJSON':\r\n                source = new ol.source.TileJSON({\r\n                    url: s.url,\r\n                    crossOrigin: s.crossOrigin || 'anonymous'\r\n                });\r\n                break;\r\n            case 'TileArcGISRest':\r\n                source = new ol.source.TileArcGISRest({\r\n                    url: s.url\r\n                });\r\n                break;\r\n            case 'Vector':\r\n                source = new ol.source.Vector({\r\n                    url: s.url,\r\n                    format: s.format === undefined ? null : new ol.format[s.format]({\r\n                        extractStyles: s.extractStyles || false\r\n                    })\r\n                });\r\n                break;\r\n            case 'Cluster':\r\n                source = new ol.source.Cluster({\r\n                    distance: s.distance || 20,\r\n                    source: this.setupSource(s.source)\r\n                });\r\n                break;\r\n            case 'ImageVector':\r\n                source = new ol.source.ImageVector({\r\n                    source: this.setupSource(s.source),\r\n                    // default style\r\n                    style: new ol.style.Style({\r\n                        fill: new ol.style.Fill({\r\n                            color: 'rgba(255, 255, 255, 0.2)'\r\n                        }),\r\n                        stroke: new ol.style.Stroke({\r\n                            color: '#319FD3',\r\n                            width: 1\r\n                        })\r\n                    })\r\n                });\r\n                break;\r\n            default: \r\n                source = new ol.source.OSM();\r\n                break;\r\n\r\n        }\r\n\r\n        return source;\r\n    }\r\n\r\n    /**\r\n     * define some interactions\r\n     */\r\n    updateInteraction(){\r\n        var self = this;\r\n        const LEFT_KEY = 37, RIGHT_KEY = 39, DEL_KEY = 46, DURATION = 1000, LOAD_MAP_DELAY = 500;\r\n\r\n        // add default interaction of ol3\r\n        // self.c9Map.addInteraction(self.c9DefaultHoverStyle = new ol.interaction.Select({\r\n        //     condition: ol.events.condition.pointerMove\r\n        // }));\r\n\r\n        //normal: stroke 'rgb(49, 159, 211)' width: 1\r\n        //        fill '#fff'\r\n        \r\n\r\n        /******************* SOME HELPER FUNCTION ********************/\r\n        var getCenterLonLat = function(f) {\r\n            return ol.proj.transform(getCenter(f), 'EPSG:3857', 'EPSG:4326');\r\n        }\r\n        var getCenter = function(f) {\r\n            return ol.extent.getCenter(f.getGeometry().getExtent());\r\n        }\r\n        var transformCoordinates = function(c) {\r\n            return ol.proj.transform(c, 'EPSG:3857', 'EPSG:4326');\r\n        }\r\n        /**\r\n         * Create pan animation on object\r\n         * @param  {ol.Feature}\r\n         */\r\n        var panAnimation = function(feature){\r\n            if (self.c9View.getCenter()[0] == getCenter(feature)[0] && self.c9View.getCenter()[1] == getCenter(feature)[1]) return;\r\n\r\n            var pan = ol.animation.pan({\r\n                duration: DURATION,\r\n                source: (self.c9View.getCenter())\r\n            });\r\n            self.c9Map.beforeRender(pan);\r\n            self.c9View.setCenter(getCenter(feature));\r\n        }\r\n        /**\r\n         * Create marker's flash effect\r\n         * @param  {ol.Feature}\r\n         */\r\n        var createMarkerEffect = function(feature){\r\n            var duration = 3000;\r\n            var start = new Date().getTime();\r\n            var listenerKey;\r\n\r\n            function animate(event) {\r\n                var vectorContext = event.vectorContext;\r\n                var frameState = event.frameState;\r\n                var flashGeom = feature.getGeometry().clone();\r\n                var elapsed = frameState.time - start;\r\n                var elapsedRatio = elapsed / duration;\r\n                // radius will be 5 at start and 30 at end.\r\n                var radius = ol.easing.easeOut(elapsedRatio) * 25 + 5;\r\n                var opacity = ol.easing.easeOut(1 - elapsedRatio);\r\n\r\n                var style = new ol.style.Style({\r\n                    image: new ol.style.Circle({\r\n                        radius: radius,\r\n                        snapToPixel: false,\r\n                        stroke: new ol.style.Stroke({\r\n                            color: 'rgba(255, 0, 0, ' + opacity + ')',\r\n                            width: 0.25 + opacity\r\n                        })\r\n                    })\r\n                });\r\n\r\n                vectorContext.setStyle(style);\r\n                vectorContext.drawGeometry(flashGeom);\r\n                if (elapsed > duration) {\r\n                    ol.Observable.unByKey(listenerKey);\r\n                    return;\r\n                }\r\n                // tell OL3 to continue postcompose animation\r\n                self.c9Map.render();\r\n            }\r\n            listenerKey = self.c9Map.on('postcompose', animate);\r\n        }\r\n        /**\r\n         * Caculate distance between marker and center view, plus direction compare with center\r\n         * @param  {ol.Feature}\r\n         * @return {[Number, Boolean]} Array of distance value and direction value (left if true, right if false)\r\n         */\r\n        var distanceAndDirection = function(f) {\r\n            var center = transformCoordinates(self.c9View.getCenter());\r\n            var fCoordinates = getCenterLonLat(f);\r\n            return [Math.sqrt(Math.pow(fCoordinates[0] - center[0], 2) + Math.pow(fCoordinates[1] - center[1], 2)), (fCoordinates[0] - center[0]) <= 0];\r\n        }\r\n        var formatPopup = function(data) {\r\n            if (Helper.isEmpty(data)) return;\r\n            var capitalizeFirstLetter = function(string) { return string.charAt(0).toUpperCase() + string.slice(1); }\r\n            var strongSpan = function(strong, span) { if (span == '' || Helper.isEmpty(span) || Helper.isObject(span)) return \"\"; return \"<strong>\" + capitalizeFirstLetter(strong) + \":</strong>\" + \"<span> \" + span + \"</span></br>\"; };\r\n            var result = strongSpan(\"Name\", data.name), v;\r\n            if (!Helper.isEmpty(data.coor)) result += (strongSpan(\"Lon\", data.coor.lon || data.coor[0]) + strongSpan(\"Lat\", data.coor.lat || data.coor[1]));\r\n\r\n            for (var i in v = data.value) {\r\n                result += strongSpan(i, v[i]);\r\n            }\r\n            return result;\r\n        }\r\n        /*************************************************************/\r\n        \r\n        //register pointer move event to show cursor as pointer if user hover on markers\r\n        self.c9Map.on('pointermove', function(evt) {\r\n            var f = self.c9Map.forEachFeatureAtPixel(evt.pixel, function(feature, layer){\r\n                return feature;\r\n            });\r\n\r\n            // new hover style\r\n            if (f !== self.lastHoveredObj) {\r\n                if (self.lastHoveredObj) {\r\n                    if (self.lastHoveredObj.get('type') != \"c9-geojson\" && self.lastHoveredObj.get('c9-style'))\r\n                        self.lastHoveredObj.setStyle(self.lastHoveredObj.get('c9-style'));\r\n                    else\r\n                        self.c9CustomHover.getSource().removeFeature(self.lastHoveredObj);\r\n                }\r\n                if (f) {\r\n                    var fStyle = f.get('c9-style'), strokeColor = 'rgb(0, 153, 255)', strokeWidth = 3, fillColor = 'rgba(255, 255, 255, 0.2)';\r\n                    if (fStyle) {\r\n                        strokeColor = fStyle.getStroke().getColor() == '#319FD3' ? 'rgb(0, 153, 255)' : self.getLightenColor(fStyle.getStroke().getColor());\r\n                        strokeWidth = fStyle.getStroke().getWidth() + 2;\r\n                        fillColor   = fStyle.getFill().getColor() == 'rgba(255, 255, 255, 0.2)' ? 'rgba(255, 255, 255, 0.2)' : self.getLightenColor(fStyle.getFill().getColor());\r\n                    }\r\n                    var newStyle = new ol.style.Style({\r\n                        stroke: new ol.style.Stroke({\r\n                            color: strokeColor,\r\n                            width: strokeWidth\r\n                        }),\r\n                        fill: new ol.style.Fill({\r\n                            color: fillColor\r\n                        })\r\n                    });\r\n                    if (fStyle) \r\n                        f.setStyle(newStyle);\r\n                    else {\r\n                        self.c9CustomHover.setStyle(newStyle);\r\n                        self.c9CustomHover.getSource().addFeature(f);    \r\n                    }\r\n                }\r\n                self.lastHoveredObj = f;\r\n            }\r\n            if (f) {\r\n                self.c9Map.getTargetElement().style.cursor = 'pointer';\r\n                // self.createMarkerEffect(f);\r\n                /************* LIGHTEN COLOR ***********/\r\n                // if (f.get('type') == 'c9-line' || f.get('type') == 'c9-polygon' || f.get('type') == 'c9-multipolygon'){\r\n                //     var fStyle = f.getStyle();\r\n                //     var defaultStyle = f.get('c9-style');\r\n\r\n                //     if (fStyle.getStroke().getWidth() == defaultStyle.strokeWidth)\r\n                //         f.setStyle(new ol.style.Style({\r\n                //             stroke: new ol.style.Stroke({\r\n                //                 width: fStyle.getStroke().getWidth() + 2,\r\n                //                 color: self.getLightenColor(fStyle.getStroke().getColor())\r\n                //             }),\r\n                //             fill: new ol.style.Fill({\r\n                //                 color: self.getLightenColor(fStyle.getFill().getColor())\r\n                //             })\r\n                //         }));\r\n                // }\r\n\r\n                // if (f !== self.lastHoveredObj) {\r\n                //     if (self.lastHoveredObj) {\r\n                //         self.c9CustomHover.getSource().removeFeature(self.lastHoveredObj);\r\n                //     }\r\n                //     if (f) {\r\n                //         self.c9CustomHover.getSource().addFeature(f);\r\n                //     }\r\n                //     self.lastHoveredObj = f;\r\n                // }\r\n\r\n                /****************************************/\r\n\r\n                /************** SHOW POPUP *************/\r\n                self.c9Popup.getElement().style.display = 'none';\r\n\r\n                // panAnimation(f);\r\n                \r\n                try {\r\n                    if (self.options.tooltip.format) self.options.tooltip.format(f.get('data'));\r\n                }\r\n                catch(err) {\r\n                    throw \"Check data format again\";\r\n                    return;\r\n                }\r\n\r\n                var content = self.options.tooltip.format ? self.options.tooltip.format(f.get('data')) : formatPopup(f.get('data'));\r\n                if (Helper.isEmpty(content) || content.toString().trim() == \"\") return;\r\n\r\n                self.c9Popup.getElement().style.display = 'block';\r\n                self.c9Popup.getElement().innerHTML = content;\r\n                // self.c9Popup.setPosition(getCenter(f));\r\n                self.c9Popup.setPosition(evt.coordinate);\r\n                /****************************************/\r\n                // var stop = new CustomEvent(\"click\", {detail: {message: \"stop\"}});\r\n                // self.c9Map.dispatchEvent(stop);\r\n            }\r\n            if (!f) {\r\n                self.c9Map.getTargetElement().style.cursor = '';\r\n                self.c9Popup.getElement().style.display = 'none';\r\n\r\n                //remove last obj style\r\n                // if (!Helper.isEmpty(self.lastHoveredObj) && (self.lastHoveredObj.get('type') == 'c9-line' || self.lastHoveredObj.get('type') == 'c9-polygon' || self.lastHoveredObj.get('type') == 'c9-multipolygon')) {\r\n                //     var defaultStyle = self.lastHoveredObj.get('c9-style');\r\n                //     self.lastHoveredObj.setStyle(defaultStyle);\r\n                // }   \r\n            }\r\n        });\r\n\r\n        //register map first render's event to show marker's effect\r\n        self.c9Map.once('postrender', function(evt) {\r\n            setTimeout(function(){\r\n                self.c9Objs.getFeatures().forEach(function(f, i){\r\n                    if (f.get('type') == 'c9-marker')\r\n                        createMarkerEffect(f);\r\n                })\r\n            }, LOAD_MAP_DELAY);\r\n        });\r\n\r\n        //register click event to show effect on markers\r\n        self.c9Map.on('click', function(evt){\r\n\r\n            // if (evt instanceof CustomEvent) return;\r\n            var f = self.c9Map.forEachFeatureAtPixel(evt.pixel, function(feature, layer){\r\n                self.lastSelectedObj = feature;\r\n                return feature;\r\n            });\r\n            if (f) {\r\n                // self.createMarkerEffect(f);\r\n                // self.c9Popup.getElement().style.display = 'none';\r\n\r\n                panAnimation(f);\r\n                \r\n                // try {\r\n                //     if (self.options.format) self.options.format(f.get('data'));\r\n                // }\r\n                // catch(err) {\r\n                //     throw \"Check data format again\";\r\n                //     return;\r\n                // }\r\n\r\n                // var content = self.options.format ? self.options.format(f.get('data')) : formatPopup(f.get('data'));\r\n                // if (Helper.isEmpty(content) || content.toString().trim() == \"\") return;\r\n\r\n                // self.c9Popup.getElement().style.display = 'block';\r\n                // self.c9Popup.getElement().innerHTML = content;\r\n                // self.c9Popup.setPosition(getCenter(f));\r\n\r\n                // // var stop = new CustomEvent(\"click\", {detail: {message: \"stop\"}});\r\n                // // self.c9Map.dispatchEvent(stop);\r\n            }\r\n            if (!f)\r\n                self.c9Popup.getElement().style.display = 'none';\r\n        });\r\n\r\n        //register keydown event to change center view\r\n        document.addEventListener('keydown', function(e) {\r\n            var keydownAnimate = function(k) {\r\n                var selectedFeature = undefined;\r\n                var minDistance = Infinity;\r\n                self.c9Objs.getFeatures().forEach(function(f, i) {\r\n                    if (f.get('type') == \"c9-marker\") {\r\n                        var checkAnimate = distanceAndDirection(f);\r\n\r\n                        if (((checkAnimate[1] && k == LEFT_KEY) || (!checkAnimate[1] && k == RIGHT_KEY)) && checkAnimate[0] < minDistance && checkAnimate[0] != 0) {\r\n                            minDistance = checkAnimate[0];\r\n                            selectedFeature = f;\r\n                        }\r\n                    }\r\n                });\r\n                if (selectedFeature) {\r\n                    setTimeout(createMarkerEffect(selectedFeature), LOAD_MAP_DELAY);\r\n                    panAnimation(selectedFeature);\r\n                }\r\n            }\r\n            switch(e.keyCode) {\r\n                case LEFT_KEY:\r\n                    keydownAnimate(LEFT_KEY);\r\n                    break;\r\n                case RIGHT_KEY:\r\n                    keydownAnimate(RIGHT_KEY);\r\n                    break;\r\n                case DEL_KEY:\r\n                    // if (!Helper.isEmpty(self.lastSelectedObj) && (!Helper.isEmpty(self.lastSelectedObj.get('type')) || self.lastSelectedObj.get('type') != 'c9-geojson')) self.c9Objs.removeFeature(self.lastSelectedObj);\r\n                    break;\r\n            }\r\n        })\r\n    }\r\n\r\n    // /**\r\n    //  * marker first set up\r\n    //  */\r\n    // initMarker() {\r\n    //     var self = this;\r\n    //     //data\r\n    //     var markers = self.markers;\r\n    //     //add marker layer to layer list (c9Layers)\r\n    //     self.c9Layers.push(new ol.layer.Vector({\r\n    //         source: self.c9Markers\r\n    //     }));\r\n\r\n    //     if (markers.length === 0) return;\r\n\r\n    //     if (markers instanceof Array) {\r\n    //         markers.forEach(function(m, i) {\r\n    //             self.createMarker({lat: m.lat, lon: m.lon, imgSrc: m.img, scale: m.scale});\r\n    //         });\r\n    //     }\r\n    //     else {\r\n    //         self.createMarker({lat: markers.lat, lon: markers.lon, imgSrc: markers.img, scale: markers.scale});\r\n    //     }\r\n    // }\r\n    /**\r\n     * obj first set up\r\n     */\r\n    // initObj() {\r\n    //     var self = this;\r\n\r\n    //     //add layer Vector to layer list (c9Layers)\r\n    //     self.c9Layers.push(new ol.layer.Vector({\r\n    //         source: self.c9Objs\r\n    //     }));\r\n    // }\r\n\r\n    /**\r\n     * create c9 obj\r\n     * @data  {Object} coordinate\r\n     * @options  {Object} some options: strokeWidth,strokeColor,fillColor,imgSrc,scale\r\n     * @return {}\r\n     */\r\n    createObj(data, options){\r\n        var self = this;\r\n\r\n        /**\r\n         * Create marker\r\n         * @param  {Number} latitude of marker\r\n         * @param  {Number} longitude of marker\r\n         * @param  {String} image source (support for both local and net)\r\n         * @param  {Number} scale image if its size is too large - default = 1\r\n         */\r\n        var createMarker = function(data, coor, options){\r\n\r\n            if (!Helper.isArray(coor) && coor.length != 2) return;\r\n\r\n            const DEFAULT_SRC = 'http://s21.postimg.org/blklb8scn/marker_icon.png'\r\n            const DEFAULT_SCALE = 1;\r\n\r\n            var lat    = coor[1],\r\n                lon    = coor[0],\r\n                imgSrc = options ? (options.imgSrc || DEFAULT_SRC) : DEFAULT_SRC,\r\n                scale  = options ? (options.scale  || DEFAULT_SCALE) : DEFAULT_SCALE;\r\n\r\n            var marker = new ol.Feature({\r\n                'data-ref': '',\r\n                type: 'c9-marker',\r\n                data: data,\r\n                // 'c9-id': ,\r\n                geometry: new ol.geom.Point(ol.proj.fromLonLat([lon, lat]))\r\n            });\r\n\r\n            /**\r\n             * Create marker style\r\n             * @param  {String} image source\r\n             * @param  {Number} scale\r\n             * @return {ol.style.Style} return marker style\r\n             */\r\n            var createMarkerStyle = function(imgSrc, scale){\r\n                return new ol.style.Style({\r\n                    image: new ol.style.Icon({\r\n                        anchor: [0.5, 1], //middle-width and bottom-height of image\r\n                        src: imgSrc,\r\n                        scale: scale\r\n                    })\r\n                });\r\n            }\r\n            // marker.set('c9-style', markerStyle);\r\n            marker.setStyle(createMarkerStyle(imgSrc, scale));\r\n\r\n            //add this marker to marker list (c9Objs)\r\n            self.c9Objs.addFeature(marker);\r\n        }\r\n\r\n        var coorAndType = self.normalizeCoordinate(data.coor);\r\n        if (coorAndType.coor == null) return;\r\n\r\n        //marker\r\n        if (coorAndType.type == \"marker\") {\r\n            createMarker(data, coorAndType.coor, options);\r\n            return;\r\n        }\r\n\r\n        // if (data == self.c9Markers) {\r\n        //     data = [];\r\n        //     self.c9Markers.getFeatures().forEach(function (d) {\r\n        //         data.push(ol.proj.transform(d.getGeometry().getCoordinates(), 'EPSG:3857', 'EPSG:4326'));\r\n        //     })\r\n        // }\r\n\r\n        var strokeWidth = options ? (options.strokeWidth || 1) : 1,\r\n            strokeColor = options ? (options.strokeColor || \"#319FD3\") : \"#319FD3\",\r\n            fillColor   = options ? (options.fillColor || \"rgba(255, 255, 255, 0.2)\") : \"rgba(255, 255, 255, 0.2)\";\r\n\r\n        var obj = new ol.Feature({\r\n            'data-ref': '',\r\n            type: \"c9-\" + coorAndType.type,\r\n            data: data,\r\n            geometry: coorAndType.type == \"polygon\" ? new ol.geom.Polygon(coorAndType.coor) : coorAndType.type == \"line\" ? new ol.geom.LineString(coorAndType.coor) : new ol.geom.MultiPolygon(coorAndType.coor)\r\n        });\r\n\r\n        obj.getGeometry().transform('EPSG:4326', 'EPSG:3857');\r\n\r\n        /**\r\n         * Create obj style\r\n         * @param  {Number} stroke width\r\n         * @param  {String} stroke color\r\n         * @param  {String} fill color\r\n         * @return {ol.style.Style} return obj style\r\n         */\r\n        var createObjStyle = function(strokeWidth, strokeColor, fillColor){\r\n            return new ol.style.Style({\r\n                stroke: new ol.style.Stroke({\r\n                    width: strokeWidth,\r\n                    color: strokeColor                \r\n                }),\r\n                fill: new ol.style.Fill({\r\n                    color: fillColor\r\n                })\r\n            });\r\n        }\r\n\r\n        var objStyle = createObjStyle(strokeWidth, strokeColor, fillColor);\r\n        obj.set('c9-style', objStyle);\r\n        obj.setStyle(objStyle);\r\n\r\n        //add this marker to marker list (c9Objs)\r\n        self.c9Objs.addFeature(obj);\r\n    }\r\n\r\n    /**\r\n     * normalize coordinate\r\n     * currently only support marker, linestring, polygon and multipolygon\r\n     * @coor  {Array} coordinate of object\r\n     * @return {Array} coordinate was normalized\r\n     */\r\n    normalizeCoordinate(coor){\r\n        var normCoor = [], type, error = {coor: null, type: null};\r\n        if ((Helper.isObject(coor) && coor.length == undefined) || (Helper.isArray(coor) && coor.length == 2 && !isNaN(coor[0]) && !isNaN(coor[1]))) {\r\n            // marker - [] - {}\r\n            type = \"marker\";\r\n            if (coor.length == undefined) {\r\n                if (Helper.isEmpty(coor.lat) || Helper.isEmpty(coor.lon))\r\n                    return error;\r\n                normCoor = [coor.lon, coor. lat];\r\n            }\r\n            else {\r\n                normCoor = coor;\r\n            }\r\n            \r\n        } else if (Helper.isArray(coor)) {\r\n            // linestring - [{},{}] - [[],[]] - [{},[]] - [[],{}]\r\n            var isArrayOrObject = function(obj) {\r\n                var result = {};\r\n                if (Helper.isObject(obj) && obj.length == undefined) {\r\n                    result['check'] = !Helper.isEmpty(obj.lat) && !Helper.isEmpty(obj.lon);\r\n                    if (result['check']) result['coor'] = [obj.lon, obj.lat];\r\n                }\r\n                else {\r\n                    result['check'] = Helper.isArray(obj) && obj.length == 2 && !isNaN(obj[0]) && !isNaN(obj[1]);\r\n                    if (result['check']) result['coor'] = obj;\r\n                }\r\n                return result;\r\n            }\r\n\r\n            // check data inside to eliminate case: multipolygon contains 2 polygons\r\n            if (coor.length == 2 && isArrayOrObject(coor[0]).check && isArrayOrObject(coor[1]).check) {\r\n                type = \"line\";\r\n                normCoor.push(isArrayOrObject(coor[0]).coor);\r\n                normCoor.push(isArrayOrObject(coor[1]).coor);\r\n            }\r\n            // multipolygon [[[[] || {}, ...]], [[[] || {}, ...]], ...]\r\n            else if (coor.length >= 2){\r\n                type = \"multipolygon\";\r\n                coor.forEach(function(pc, i) {\r\n                    if (Helper.isArray(pc) && pc.length == 1) {\r\n                        normCoor.push([[]]);\r\n                        pc[0].forEach(function(c) {\r\n                            // data - [] || {}\r\n                            var obj = isArrayOrObject(c);\r\n                            if (obj.check) normCoor[i][0].push(obj.coor);\r\n                        })\r\n                        // cannot create polygon with the number of points is less than 2\r\n                        if (normCoor[i][0].length <= 2) return error; \r\n                    }\r\n                    else return error; // because data format is not true\r\n                })\r\n            }\r\n            // polygon [[[] || {}, ...]]\r\n            else if (coor.length == 1) {\r\n                type = \"polygon\";\r\n                normCoor.push([]);\r\n                coor[0].forEach(function(c) {\r\n                    // data - [] || {}\r\n                    var obj = isArrayOrObject(c);\r\n                    if (obj.check) normCoor[0].push(obj.coor);\r\n                })\r\n                if (normCoor[0].length <= 2) return error;\r\n            }\r\n            else return error;\r\n        }\r\n        return {\r\n            coor: normCoor,\r\n            type: type\r\n        };\r\n    }\r\n\r\n    /**\r\n     * create obj base on user data\r\n     * @data  {Object} data structure: {coor: [], name: , value: }\r\n     */\r\n    update(data){\r\n        if (Helper.isEmpty(data)) return;\r\n        var self = this;\r\n\r\n        var da = new DataAdapter(data);\r\n        self.data = da.getDataTarget('map');\r\n\r\n        if (!Helper.isEmpty(self.c9Map)) {\r\n            if (Helper.isArray(self.data))\r\n                self.data.forEach(function(d){\r\n                    self.createObj(d);\r\n                })\r\n            else\r\n                self.createObj(self.data);\r\n        }\r\n    }\r\n\r\n    getObjs(){\r\n        var c9GeojsonObjs = [];\r\n        this.c9GeojsonObjs.forEach(function(o){\r\n            c9GeojsonObjs = c9GeojsonObjs.concat(o.getSource().getFeatures());\r\n        });\r\n        return this.c9Objs.getFeatures().concat(c9GeojsonObjs);\r\n    }\r\n\r\n    getLayers() {\r\n        return this.c9Layers;\r\n    }\r\n\r\n    /**\r\n     * Custom Event Listener\r\n     * @param  {[type]}   eventType [description]\r\n     * @param  {Function} callback  [description]\r\n     */\r\n    on(eventType, callback) {\r\n        var self = this;\r\n        // Update Event Factory\r\n        let eventFactoryViewport = {\r\n            'click': function(evt) {\r\n                var f = self.c9Map.forEachFeatureAtPixel(self.c9Map.getEventPixel(evt), function(feature, layer){\r\n                    return feature;\r\n                });\r\n                if (Helper.isFunction(callback) && f) {\r\n                    callback.call(this, f);\r\n                }\r\n            },\r\n            'pointermove': function(evt) {\r\n                var f = self.c9Map.forEachFeatureAtPixel(evt.pixel, function(feature, layer){\r\n                    return feature;\r\n                });\r\n                if (Helper.isFunction(callback) && f) {\r\n                    callback.call(this, f);\r\n                }\r\n            },\r\n            'postrender': function(evt) {\r\n                console.log(callback)\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, evt);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (eventType == \"click\")\r\n            self.c9Map.getViewport().addEventListener(eventType, eventFactoryViewport[eventType]);\r\n        else if (eventType == \"pointermove\")\r\n            self.c9Map.on(eventType, eventFactoryViewport[eventType]);\r\n        else if (eventType == \"postrender\")\r\n            self.c9Map.once(eventType, eventFactoryViewport[eventType]);\r\n    }\r\n\r\n    getLightenColor(color) {\r\n        if (color.includes('rgba')) {\r\n            var alpha = color.split(',')[color.split(',').length - 1].replace(')', '');\r\n            var currentColor = color.replace(',' + alpha, '').replace('a', '');\r\n            var newColor = Helper.shadeColor(-0.2, currentColor);\r\n            return 'rgba(' + newColor.split('(')[1].split(')')[0] + ',' + alpha.trim() + ')';\r\n        }\r\n        else\r\n            return Helper.shadeColor(-0.2, color);\r\n    }\r\n\r\n    /**\r\n     * set style: consist of layer, source and obj\r\n     * @obj   {ol.layer || ol.source || ol.Feature}\r\n     * @style {function || ol.style} style function || ol.style\r\n     */\r\n    setStyle(options){\r\n        if (Helper.isEmpty(options) || Helper.isEmpty(options.obj) || Helper.isEmpty(options.style)) return;\r\n        //create style for obj\r\n        if (Helper.isFunction(options.style) || style instanceof ol.style.Style) {\r\n            options.obj.setStyle(options.style);\r\n        }\r\n        else {\r\n            const DEFAULT_SRC = 'http://s21.postimg.org/blklb8scn/marker_icon.png'\r\n            const DEFAULT_SCALE = 1;\r\n\r\n            var strokeColor = options.style.strokeColor ? options.style.strokeColor : '#319FD3',\r\n                strokeWidth = options.style.strokeWidth ? options.style.strokeColor : 1,\r\n                fillColor   = options.style.fillColor ? options.style.fillColor     : 'rgba(255, 255, 255, 0.2)',\r\n                imgSrc      = options.style.type == 'marker' || options.style.type == 'c9-marker' ? (options.style.imgSrc || DEFAULT_SRC)   : null,\r\n                scale       = options.style.type == 'marker' || options.style.type == 'c9-marker' ? (options.style.scale  || DEFAULT_SCALE) : null;\r\n\r\n            if (imgSrc != null)\r\n                obj.setStyle(new ol.style.Style({\r\n                    image: new ol.style.Icon({\r\n                        anchor: [0.5, 1], //middle-width and bottom-height of image\r\n                        src: imgSrc,\r\n                        scale: scale\r\n                    })\r\n                }))\r\n            else\r\n                obj.setStyle(new ol.style.Style({\r\n                    stroke: new ol.style.Stroke({\r\n                        color: strokeColor,\r\n                        width: strokeWidth\r\n                    }),\r\n                    fill: new ol.style.Fill({\r\n                        color: fillColor\r\n                    })\r\n                }))\r\n        }\r\n    }\r\n\r\n    // TODO - set hover style\r\n\r\n    /**\r\n     * create a layer from geojson file\r\n     * @url  {String} url of geojson file\r\n     */\r\n    createLayerFromGeojson(options) {\r\n        var self = this;\r\n        if (Helper.isEmpty(options) || Helper.isEmpty(options.url)) return;\r\n\r\n        var layer = self.createLayer({\r\n            type: \"Image\",\r\n            source: {\r\n                name: \"ImageVector\",\r\n                source: {\r\n                    name: 'Vector',\r\n                    url: options.url,\r\n                    format: 'GeoJSON'   \r\n                }\r\n            },\r\n            condition: options.condition,\r\n            data: options.data\r\n        });\r\n\r\n        //create style\r\n        self.setStyle({obj: layer.getSource(), style: options.style});\r\n        // if (!Helper.isEmpty(options.style)) {\r\n        //     if (Helper.isFunction(style) || style instanceof ol.style.Style) {\r\n        //         layer.getSource().setStyle(options.style);\r\n        //     }\r\n        //     else {\r\n        //         var strokeColor = options.style.strokeColor ? options.style.strokeColor : '#319FD3',\r\n        //             strokeWidth = options.style.strokeWidth ? options.style.strokeColor : 1,\r\n        //             fillColor   = options.style.fillColor   ? options.style.fillColor   : 'rgba(255, 255, 255, 0.2)';\r\n\r\n        //         layer.getSource().setStyle(new ol.style.Style({\r\n        //             stroke: new ol.style.Stroke({\r\n        //                 color: strokeColor,\r\n        //                 width: strokeWidth\r\n        //             }),\r\n        //             fill: new ol.style.Fill({\r\n        //                 color: fillColor\r\n        //             })\r\n        //         }))\r\n        //     }\r\n        // }\r\n\r\n        return layer;\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/map/C9.Map.js\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/C9.css\n ** module id = 15\n ** module chunks = 0\n **/"],"sourceRoot":""}