{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap d737b01c447fcecb22e7","webpack:///./src/index.js","webpack:///./src/charts/C9.BarChart.js","webpack:///./src/charts/C9.Chart.js","webpack:///./src/helper/C9.Helper.js","webpack:///./src/charts/utils/C9.Axis.js","webpack:///./src/charts/utils/C9.Title.js","webpack:///./src/charts/utils/C9.Legend.js","webpack:///./src/charts/utils/C9.Table.js","webpack:///./src/charts/utils/C9.Tooltip.js","webpack:///./src/helper/C9.DataAdapter.js","webpack:///./src/charts/C9.DonutChart.js","webpack:///./src/charts/C9.LineChart.js","webpack:///./src/charts/C9.PieChart.js","webpack:///./src/charts/C9.TimeLine.js","webpack:///./src/map/C9.Map.js","webpack:///./src/C9.css"],"names":["module","exports","BarChart","DonutChart","LineChart","PieChart","TimeLine","Map","DataAdapter","Helper","options","self","config","isLogaric","updateConfig","mergeDeep","chartType","dataOption","colorRange","da","dataTarget","getDataTarget","dataSource","barChartType","getDataTypeForBarChart","groupNames","groups","stacks","isGroup","width","margin","left","right","height","top","bottom","x","d3","scale","ordinal","rangeRoundBands","y","log","range","linear","minMax","getMinMax","domain","map","d","name","min","max","xGroup","rangeBand","dataCfg","data","body","selectAll","exit","remove","color","bar","enter","append","attr","bars","style","i","group","undefined","y1","y0","Math","abs","updateInteraction","groupNamesOld","newLabel","type","groupType","axis","update","xGroupOld","midGroup","length","indexOf","transition","duration","lower","upper","d1","floor","toString","split","d2","toFixed","hoverEnable","hover","enable","hoverOptions","selector","selectAllBar","onMouseOverCallback","onMouseOver","callback","onMouseOutCallback","onMouseOut","onClickCallback","click","tooltip","eventFactory","isFunction","call","table","show","tr","filter","selectedItem","scroll","select","offsetTop","getLightenColor","draw","on","eventType","eventName","title","legend","updateInteractionForBarChart","key","value","set","newData","newDataConfig","newCfg","isEmpty","plain","keys","updateDataConfig","_groupType","arg","_xGroup","_groupNames","_isGroup","Chart","id","template","fadeIn","fadeOut","onMouseMove","text","position","fontSize","size","fontColor","fontWeight","space","backgroundColor","format","container","headings","serial","file","url","time","tick","rotate","count","padding","values","hours","interval","label","grid","subchart","_options","merge","svg","shadeColor","dataConfig","_container","_id","_width","_height","_actualWidth","_actualHeight","_colorRange","err","_margin","_dataOption","_svg","_body","_hover","_click","_dataTarget","_dataSource","_eventFactory","_x","_y","_chartType","_title","_axis","_legend","_table","_tooltip","each","loopable","reverse","len","isArray","Object","setValue","setPrefix","constPrefix","Util","isObject","object","array","Array","prototype","func","target","source","obj3","attrname","get","_key","_data","_keys","_current","_value","_context","_handle","arr","sum","reduce","a","b","guid","replace","c","r","random","v","_temp","_min","_max","forEach","s","push","_newMin","_newMax","dateParser","parse","dateFormatter","p","from","to","convertColorToHex","sbcRip","l","RGB","slice","parseFloat","parseInt","round","h","f","t","element","difference","scrollTop","perTick","setTimeout","colour","colours","toLowerCase","assign","Axis","chart","_chart","xScale","starting","ending","xAxis","orient","tickFormat","ticks","tickPadding","tickValues","isLogaricVariant","yAxis","innerTickSize","outerTickSize","textAnchor","angle","sin","PI","textDx","textY","_xAxis","_yAxis","Title","node","getComputedTextLength","setYLocation","Legend","box","maxWidth","maxHeight","item","getSize","getBoundingClientRect","getXY","xy","items","itemHeight","numItemsCol","maxWidthCol","n","pos","preItem","newR","prePos","itemEventFactory","dataSet","totalEnable","updateDomain","subChartX","subChartY","subChartXAxis","updateSubChart","legendSelector","lightenLegendItem","normalizeLegendItem","path","pie","currentData","arc","chartInnerBefore","innerRadius","chartOuterBefore","radius","outerRadius","chartInnerAfter","chartOuterAfter","selectAllPath","attrTween","interpolate","ease","dataBackup","enableSet","enableSetOld","negElement","posElement","e","updateLegendInteraction","_item","_itemEventFactory","_maxWidth","_maxHeight","Table","headTbl","thead","bodyTbl","getTableStyle","tbody","hRows","bRows","valueY","selectAllRow","Tooltip","divOnHover","getTriangleClass","html","getFormatByChartType","getCoordinate","mouseover","mouseout","mousemove","_format","valueX","start","end","offset","getOffset","event","pageX","pageY","elem","window","pageYOffset","clientTop","pageXOffset","scrollLeft","clientLeft","setDefaultFormatByChartType","coor","timeFormat","_groups","_stacks","_timeFormat","_dataRefs","initDataSource","hasPlainData","executePlainData","hasFile","executeFile","_file","getCsv","getTsv","getText","getJson","getXml","getDataTargetForBarChart","getDataTargetForLineChart","getDataTargetForPieChart","getDataTargetForDonutChart","getDataTargetForTimelineChart","getDataTargetForMap","groupRefs","index","_dsArray","_stack","_stackItem","_negBase","_posBase","icon","_valueArray","_valueItem","Date","_valueXArray","_valueYArray","_parser","getDataValue","_v","getData","k","csv","tsv","JSON","json","xml","querySelectorAll","querySelector","textContent","R","layout","sort","arcs","updateInteractionForDonutPieChart","_pie","_arc","_currentData","point","fill","stroke","opacity","area","line","bisectDate","bisector","isTimeDomain","lineGen","areaGen","paddingX","paddingY","hoverLine","hoverCircle","valueXArray","valueYArray","extent","xDomain","yDomain","areaContainer","pathContainer","getLineStyle","pointContainer","_d","chartBox","getBBox","actualWidth","actualHeight","subChartWidth","subChartHeight","subChartMargin","_isTimeDomain","brush","empty","subChartAreaGen","subChart","subChartAreaContainer","selectRectLayer","onMouseMoveCallback","selectAllCircle","circle","mouse","mouseX","mouseY","curValueX","invert","sameTimeArr","sameTimeValueArr","idx","d0","checkBoundary","bound","checkWidth","updateOverlay","updateHoverLine","updateInteractionForLineChart","_bisectDate","_hoverLine","_subChartX","_subChartY","_subChartWidth","_subChartHeight","_subChartMargin","_subChartXAxis","_brush","_subChartAreaGen","_lineGen","_areaGen","separatorColor","stack","itemMargin","labelMargin","striped","maxStack","stackList","minTime","maxTime","datum","labelContainer","barYAxis","bgContainer","insert","itemContainer","document","createElementNS","ns","prefix","getXPos","getStackPosition","lineYAxis","rowsDown","selectAllRect","_maxStack","_stackList","layers","view","lat","lon","zoom","initMapConfig","c9Layers","c9Objs","ol","Vector","initLayer","popup","createElement","className","appendChild","c9View","View","center","proj","fromLonLat","minZoom","c9Map","interactions","interaction","defaults","doubleClickZoom","c9ObjsLayer","layer","c9Popup","Overlay","positioning","getElementById","addOverlay","c9CustomHover","Style","Stroke","Fill","setSource","setupSource","containFeature","getSource","getFeatures","readFormat","feature","result","getKeys","getProperties","once","getState","objs","o","getGeometry","getType","createLayer","BingMaps","imagerySet","Stamen","TileJSON","crossOrigin","TileArcGISRest","extractStyles","Cluster","distance","ImageVector","OSM","LEFT_KEY","RIGHT_KEY","DEL_KEY","DURATION","LOAD_MAP_DELAY","getCenterLonLat","transform","getCenter","getExtent","transformCoordinates","panAnimation","pan","animation","beforeRender","setCenter","createMarkerEffect","getTime","listenerKey","animate","vectorContext","frameState","flashGeom","clone","elapsed","elapsedRatio","easing","easeOut","image","Circle","snapToPixel","setStyle","drawGeometry","Observable","unByKey","render","distanceAndDirection","fCoordinates","sqrt","pow","formatPopup","capitalizeFirstLetter","string","charAt","toUpperCase","strongSpan","strong","span","evt","forEachFeatureAtPixel","pixel","lastHoveredObj","removeFeature","fStyle","strokeColor","strokeWidth","fillColor","getStroke","getColor","getWidth","getFill","newStyle","addFeature","getTargetElement","cursor","getElement","display","content","trim","innerHTML","setPosition","coordinate","lastSelectedObj","addEventListener","keydownAnimate","selectedFeature","minDistance","Infinity","checkAnimate","keyCode","createMarker","DEFAULT_SRC","DEFAULT_SCALE","imgSrc","marker","Feature","geometry","geom","Point","createMarkerStyle","Icon","anchor","src","markerStyle","coorAndType","normalizeCoordinate","obj","Polygon","LineString","MultiPolygon","createObjStyle","objStyle","normCoor","error","isNaN","isArrayOrObject","check","pc","createObj","eventFactoryViewport","getEventPixel","getViewport","includes","alpha","currentColor","newColor"],"mappings":"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","file":"C9.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"C9\"] = factory();\n\telse\n\t\troot[\"C9\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap d737b01c447fcecb22e7\n **/","// Chart Importer\r\nimport BarChart from './charts/C9.BarChart';\r\nimport DonutChart from './charts/C9.DonutChart';\r\nimport LineChart from './charts/C9.LineChart';\r\nimport PieChart from './charts/C9.PieChart';\r\nimport TimeLine from './charts/C9.TimeLine';\r\n\r\n// Map Importer\r\nimport Map from './map/C9.Map';\r\n\r\n// Helper Importer\r\nimport Helper from './helper/C9.Helper';\r\nimport DataAdapter from './helper/C9.DataAdapter';\r\n\r\n// CSS Importer\r\nimport styles from './C9.css';\r\n\r\nmodule.exports = {\r\n\tBarChart,\r\n\tDonutChart,\r\n\tLineChart,\r\n\tPieChart,\r\n\tTimeLine,\r\n\r\n\tMap,\r\n\t\r\n\tDataAdapter,\r\n\tHelper,\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","import Chart from './C9.Chart';\r\n\r\nimport Axis from './utils/C9.Axis';\r\nimport Title from './utils/C9.Title';\r\nimport Legend from './utils/C9.Legend';\r\nimport Table from './utils/C9.Table';\r\nimport Tooltip from './utils/C9.Tooltip';\r\n\r\nimport Helper from '../helper/C9.Helper';\r\nimport DataAdapter from '../helper/C9.DataAdapter';\r\n\r\nexport default class BarChart extends Chart {\r\n    constructor(options) {\r\n        super(options);\r\n\r\n        var self = this;\r\n\r\n        var config = {\r\n            // barWidth: undefined,\r\n            isLogaric: false,\r\n        };\r\n\r\n        self.updateConfig(config);\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    // get barWidth() {\r\n    //     return this._barWidth;\r\n    // }\r\n\r\n    get groupType() {\r\n        return this._groupType;\r\n    }\r\n    \r\n    get xGroup() {\r\n        return this._xGroup;\r\n    }\r\n\r\n    get groupNames() {\r\n        return this._groupNames;\r\n    }\r\n\r\n    get isGroup() {\r\n        return this._isGroup;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    // set barWidth(arg) {\r\n    //     if (arg) {\r\n    //         this._barWidth = arg;\r\n    //     }\r\n    // }\r\n\r\n    set groupType(arg) {\r\n        if (arg) {\r\n            this._groupType = arg;\r\n        }\r\n    }\r\n\r\n    set xGroup(arg) {\r\n        if (arg) {\r\n            this._xGroup = arg;\r\n        }\r\n    }\r\n\r\n    set groupNames(arg) {\r\n        if (arg) {\r\n            this._groupNames = arg;\r\n        }\r\n    }\r\n\r\n    set isGroup(arg) {\r\n        if (arg) {\r\n            this._isGroup = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n    \r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    /**\r\n     * Init Bar Chart Config\r\n     */\r\n    updateConfig(config){\r\n        super.updateConfig(config);\r\n\r\n        var self  = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n\r\n        self.chartType      = \"bar\";\r\n\r\n        var dataOption          = self.dataOption;\r\n        dataOption.colorRange   = self.colorRange;\r\n\r\n        var da = new DataAdapter(dataOption);\r\n        self.dataTarget = da.getDataTarget(self.chartType);\r\n        self.dataSource = da.dataSource;\r\n\r\n        var barChartType = da.getDataTypeForBarChart();\r\n        if (barChartType != \"single\") {\r\n            self.groupNames    = da.groups || da.stacks;  //define group names use for showing legend\r\n            self.isGroup       = barChartType == \"group\";\r\n        }\r\n\r\n        var width        = self.width - self.margin.left - self.margin.right,\r\n            height       = self.height - self.margin.top - self.margin.bottom;\r\n\r\n        // .1 to make outerPadding, according to: https://github.com/d3/d3/wiki/Ordinal-Scales\r\n        var x = d3.scale.ordinal().rangeRoundBands([0, width], .1),\r\n            y = self.options.isLogaric ? d3.scale.log().range([height, 0]) : d3.scale.linear().range([height, 0]);\r\n\r\n        var minMax = Helper.getMinMax(self.dataTarget, barChartType, self.options.isLogaric);\r\n\r\n        x.domain(self.dataTarget.map(function(d) {\r\n            return d[0].name;\r\n        }));\r\n\r\n        y.domain([minMax.min, minMax.max]);\r\n\r\n        /******** Handle for grouped, stacked bar chart ********/\r\n        if (self.groupNames) {\r\n            self.xGroup = d3.scale.ordinal();\r\n            self.xGroup.domain(self.groupNames).rangeRoundBands([0, x.rangeBand()]);\r\n        }\r\n        \r\n        /**********************************************/\r\n\r\n        // Make flexible width according to barWidth\r\n        // self.barWidth       = self.options.barWidth  ||  x.rangeBand();\r\n        self.x              = x;\r\n        self.y              = y;\r\n        \r\n    }\r\n\r\n    /**\r\n     * Update Chart Data Config\r\n     * Notes: Merge Deep change order of Config and Option\r\n     * ---------------------------------------------------\r\n     */\r\n    updateDataConfig(dataCfg){\r\n        var self  = this;\r\n\r\n        self.options = Helper.mergeDeep(self.options, dataCfg);\r\n\r\n        var dataOption          = self.dataOption;\r\n        dataOption.colorRange   = self.colorRange;\r\n\r\n        var da = new DataAdapter(dataOption);\r\n        self.dataTarget = da.getDataTarget(self.chartType);\r\n        self.dataSource = da.dataSource;\r\n\r\n        var barChartType = da.getDataTypeForBarChart();\r\n        if (barChartType != \"single\") {\r\n            self.groupNames    = da.groups || da.stacks;  //define group names use for showing legend\r\n            self.isGroup       = barChartType == \"group\";\r\n        }\r\n\r\n        var width        = self.width - self.margin.left - self.margin.right,\r\n            height       = self.height - self.margin.top - self.margin.bottom;\r\n\r\n        // .1 to make outerPadding, according to: https://github.com/d3/d3/wiki/Ordinal-Scales\r\n        var x = d3.scale.ordinal().rangeRoundBands([0, width], .1),\r\n            y = self.options.isLogaric ? d3.scale.log().range([height, 0]) : d3.scale.linear().range([height, 0]);\r\n\r\n        var minMax = Helper.getMinMax(self.dataTarget, barChartType, self.options.isLogaric);\r\n\r\n        x.domain(self.dataTarget.map(function(d) {\r\n            return d[0].name;\r\n        }));\r\n\r\n        y.domain([minMax.min, minMax.max]);\r\n\r\n        /******** Handle for grouped, stacked bar chart ********/\r\n        if (self.groupNames) {\r\n            self.xGroup = d3.scale.ordinal();\r\n            self.xGroup.domain(self.groupNames).rangeRoundBands([0, x.rangeBand()]);\r\n        }\r\n        \r\n        /**********************************************/\r\n\r\n        // Make flexible width according to barWidth\r\n        // self.barWidth       = self.options.barWidth  ||  x.rangeBand();\r\n        self.x              = x;\r\n        self.y              = y;\r\n        \r\n    }\r\n\r\n    /**\r\n     * Update chart based on data\r\n     * @param  {[type]} data [description]\r\n     */\r\n    update(data) {\r\n        var self = this;\r\n\r\n        self.body.selectAll(\".c9-chart-bar.c9-custom-rect\").data([]).exit().remove();\r\n        self.body.selectAll(\".c9-chart-bar.c9-custom-bar\").data([]).exit().remove();\r\n\r\n        var color = self.colorRange,\r\n            x     = self.x,\r\n            y     = self.y,\r\n            xGroup= self.xGroup;\r\n\r\n        var bar = self.body\r\n                    .selectAll(\".c9-chart-bar.c9-custom-bar\")\r\n                    .data(data)\r\n                    .enter()\r\n                        .append(\"g\")\r\n                        .attr(\"class\", \"c9-chart-bar c9-custom-bar\")\r\n                        .attr(\"transform\", function(d) { return \"translate(\" + x(d[0].name) + \",0)\"; });\r\n\r\n        var bars = bar.selectAll(\".c9-chart-bar.c9-custom-rect\")\r\n            .data(function(d) { return d; });\r\n\r\n        bars.enter()\r\n            .append(\"rect\")\r\n            .attr(\"class\", \"c9-chart-bar c9-custom-rect\")\r\n            .style(\"fill\", function (d, i) { return d.color || color(i); })\r\n            .attr(\"x\", function(d) { return self.isGroup ? xGroup(d.group) : undefined; })\r\n            .attr(\"y\", function(d) { return y(d.y1); })\r\n            .attr(\"width\", function(d) { return self.isGroup ? xGroup.rangeBand() : x.rangeBand(); })\r\n            .attr(\"height\", function(d) { return self.options.isLogaric ? y(y.domain()[0]) - y(d.y0) : y(0) - y(Math.abs(d.y0)); });\r\n            \r\n        self.updateInteraction();\r\n    }\r\n\r\n    /**\r\n     * Update Interaction with Legend\r\n     * @param  {[type]} data          [description]\r\n     * @param  {[type]} groupNames    [description]\r\n     * @param  {[type]} groupNamesOld [description]\r\n     * @param  {[type]} newLabel      [description]\r\n     */\r\n    updateLegendInteraction(data, groupNames, groupNamesOld, newLabel){\r\n        var self = this;\r\n        var type = self.groupType;\r\n\r\n        var y = self.y;\r\n        var minMax = Helper.getMinMax(data, self.isGroup == false ? \"stack\" : null, self.options.isLogaric);\r\n        y.domain([minMax.min, minMax.max]);\r\n        self.axis.update(null, y, 750);\r\n        \r\n        var xGroup = d3.scale.ordinal();\r\n        xGroup.domain(groupNames).rangeRoundBands([0, self.x.rangeBand()]);\r\n\r\n        var xGroupOld = d3.scale.ordinal();\r\n        xGroupOld.domain(groupNamesOld).rangeRoundBands([0, self.x.rangeBand()]);\r\n\r\n        var midGroup = undefined;\r\n        //check add new label in the middle\r\n        if (groupNames.length > groupNamesOld.length && 0 < groupNames.indexOf(newLabel) && groupNames.indexOf(newLabel) < groupNames.length - 1 )\r\n            midGroup = groupNamesOld[groupNames.indexOf(newLabel)];\r\n\r\n        // self.body.selectAll(\".c9-custom-rect\").transition().duration(750).attr(\"height\", 0).remove();\r\n        self.body.selectAll(\".c9-chart-bar.c9-custom-rect\").data([]).exit().remove();\r\n        self.body.selectAll(\".c9-chart-bar.c9-custom-bar\").data([]).exit().remove();\r\n\r\n        var bar = self.body\r\n                    .selectAll(\".c9-chart-bar.c9-custom-bar\")\r\n                    .data(data)\r\n                    .enter()\r\n                    .append(\"g\")\r\n                    .attr(\"class\", \"c9-chart-bar c9-custom-bar\")\r\n                    .attr(\"transform\", function (d, i) { return \"translate(\" + self.x(self.dataTarget[i][0].name) + \",0)\"; });\r\n\r\n        var bars = bar.selectAll(\".c9-custom-rect\")\r\n            .data(function(d) { return d; });\r\n\r\n        bars.enter()\r\n            .append(\"rect\")\r\n            .attr(\"class\", \"c9-chart-bar c9-custom-rect\")\r\n            .style(\"fill\", function(d) { return d.color; })\r\n            .attr(\"x\", function(d) {\r\n                // use for stack\r\n                if (!self.isGroup) return undefined;\r\n                // use for group\r\n                // group member positioning at the end of groups, so its x is the position of right edge of bar\r\n                if (groupNames.length > groupNamesOld.length && d.group == newLabel && groupNames.indexOf(newLabel) == groupNames.length - 1)\r\n                    return self.x.rangeBand();\r\n                return midGroup ? d.group == newLabel ? xGroupOld(midGroup) : xGroupOld(d.group) : xGroupOld(d.group);\r\n            })\r\n            .attr(\"y\", function(d) { return self.isGroup ? y(d.y1) : self.options.isLogaric ? y(y.domain()[1]) : y(0); })\r\n            .attr(\"width\", function(d) {\r\n                return !self.isGroup ? self.x.rangeBand() : d.group == newLabel ? 0 : xGroupOld.rangeBand();\r\n            })\r\n            .attr(\"height\", function(d) { return self.options.isLogaric ? y(y.domain()[0]) - y(d.y0) : self.isGroup ? y(0) - y(Math.abs(d.y0)) : 0; });\r\n\r\n        bars.transition().duration(750)\r\n            .attr(\"x\", function(d) { return !self.isGroup ? undefined : xGroup(d.group); })\r\n            .attr(\"width\", function(d) { return !self.isGroup ? self.x.rangeBand() : xGroup.rangeBand(); })\r\n            .attr(\"y\", function(d) { return y(d.y1); })\r\n            .attr(\"height\", function(d) { return self.options.isLogaric ? y(y.domain()[0]) - y(d.y0) : y(0) - y(Math.abs(d.y0)); });\r\n            \r\n        self.updateInteraction();\r\n    }\r\n\r\n    /**\r\n     * Retrieve value from upper and lower bounds of each stack\r\n     * @param  {String} lower Lower bound of value\r\n     * @param  {String} upper Upper bound of value\r\n     * @return {String}       Value to return\r\n     */\r\n    retrieveValue(lower, upper) {\r\n        var d1 = Math.floor(lower) === lower ? 0 : lower.toString().split(\".\")[1].length;\r\n        var d2 = Math.floor(upper) === upper ? 0 : upper.toString().split(\".\")[1].length;\r\n        return d1 > d2 ? (upper - lower).toFixed(d1) : (upper - lower).toFixed(d2);\r\n    }\r\n    \r\n    /**\r\n     * Select all bars as type RECT in Bar Chart via its CLASS\r\n     */\r\n    selectAllBar() {\r\n        var self = this;\r\n\r\n        return self.body.selectAll('.c9-custom-rect');\r\n    }\r\n\r\n    /**\r\n     * Update Interaction: Hover\r\n     */\r\n    updateInteraction() {\r\n        var self = this,\r\n            hoverEnable     = self.hover.enable,\r\n            hoverOptions    = self.hover.options,\r\n            selector        = self.selectAllBar(),\r\n            onMouseOverCallback = hoverOptions.onMouseOver.callback,\r\n            onMouseOutCallback  = hoverOptions.onMouseOut.callback,\r\n            onClickCallback  = self.click.callback;\r\n\r\n        var tooltip = new Tooltip(self.options.tooltip);\r\n\r\n        // Update Event Factory\r\n        self.eventFactory = {\r\n            'click': function(d) {\r\n                if (Helper.isFunction(onClickCallback)) {\r\n                    onClickCallback.call(this, d);\r\n                }\r\n            },\r\n            'mouseover': function(d) {\r\n                if (!hoverEnable) return;\r\n                \r\n                if (Helper.isFunction(onMouseOverCallback)) {\r\n                    onMouseOverCallback.call(this, d);\r\n                }\r\n\r\n                // For table\r\n                if (self.options.table.show) {\r\n                    var tr = d3.selectAll('.c9-table-container>.c9-table-body tr');\r\n                    tr.filter(function(i) { return i['data-ref'] != d['data-ref'] }).selectAll('td').style('opacity', '0.5');\r\n                    var selectedItem = tr.filter(function(i) { return i['data-ref'] == d['data-ref'] });\r\n                    //set its style and scroll to its pos\r\n                    selectedItem.selectAll('td').style('opacity', '1');\r\n                    Helper.scroll(d3.select('.c9-table-container')[0][0], selectedItem[0][0].offsetTop, 200);\r\n                }\r\n\r\n                d3.select(this).style(\"fill\", function (d, i) { return self.getLightenColor(d.color || color(i)); });\r\n\r\n                tooltip.draw(d, self, 'mouseover');\r\n            },\r\n            'mouseout': function(d) {\r\n                if (!hoverEnable) return;\r\n\r\n                if (Helper.isFunction(onMouseOutCallback)) {\r\n                    onMouseOutCallback.call(this, d);\r\n                }\r\n\r\n                // For Table\r\n                if (self.options.table.show)\r\n                    d3.selectAll('.c9-table-container>.c9-table-body tr').selectAll('td').style('opacity', '');\r\n\r\n                d3.select(this).style(\"fill\", function (d, i) { return d.color || color(i); });\r\n\r\n                tooltip.draw(d, self, 'mouseout');\r\n            }\r\n        }\r\n\r\n        selector.on(self.eventFactory);\r\n    }\r\n    \r\n    /*=====  End of Main Functions  ======*/\r\n    \r\n    /*========================================\r\n    =            User's Functions            =\r\n    ========================================*/\r\n    \r\n\r\n    /**\r\n     * Custom Event Listener\r\n     * @param  {[type]}   eventType [description]\r\n     * @param  {Function} callback  [description]\r\n     */\r\n    on(eventType, callback) {\r\n        super.on(eventType, callback);\r\n        \r\n        var self = this;\r\n        var selector    = self.selectAllBar();\r\n\r\n        // Update Event Factory\r\n        let eventFactory = {\r\n            'click.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            },\r\n            'mouseover.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            },\r\n            'mouseout.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            }\r\n        }\r\n\r\n        let eventName = eventType + '.event';\r\n\r\n        selector.on(eventName, eventFactory[eventName]);\r\n    }\r\n    \r\n    /**\r\n     * [Main draw function of Bar Chart]\r\n     * @return {[type]} [description]\r\n     */\r\n    draw() {\r\n        super.draw();\r\n\r\n        var self = this;\r\n\r\n        var axis    = new Axis(self.options.axis, self, self.width - self.margin.left - self.margin.right, self.height - self.margin.top - self.margin.bottom);\r\n        var title   = new Title(self.options.title, self);\r\n        var legend  = new Legend(self.options.legend, self, self.dataTarget);\r\n        var table   = new Table(self.options.table, self, self.dataTarget);\r\n\r\n        self.axis = axis;\r\n        self.title = title;\r\n        self.table = table;\r\n        self.legend = legend;\r\n\r\n        \r\n        // Draw axis\r\n        self.axis.draw();\r\n        \r\n        // Draw title\r\n        self.title.draw();\r\n\r\n        // Update Chart based on dataTarget\r\n        self.update(self.dataTarget);\r\n        self.updateInteraction();\r\n\r\n        // Draw legend\r\n        self.legend.draw();\r\n        self.legend.updateInteractionForBarChart(self);\r\n\r\n        // Draw table\r\n        self.table.draw();\r\n        self.table.updateInteractionForBarChart(self);\r\n    }\r\n\r\n    /**\r\n     * Set option via stand-alone function\r\n     * @param {[type]} key   [description]\r\n     * @param {[type]} value [description]\r\n     */\r\n    setOption(key, value) {\r\n        super.setOption(key, value);\r\n\r\n        var self = this;\r\n\r\n        Helper.set(key, value, self.options);\r\n\r\n        self.updateConfig(self.options);\r\n    }\r\n\r\n    /**\r\n     * Update chart based on new data with optional dataConfig\r\n     * @param  {[type]} data       [description]\r\n     * @param  {[type]} dataConfig [description]\r\n     */\r\n    updateData(newData, newDataConfig) {\r\n        var self = this;\r\n\r\n        var newCfg = {};\r\n\r\n        if (!Helper.isEmpty(newDataConfig)) {\r\n\r\n            newCfg.data = {\r\n                plain: newData,\r\n                keys: newDataConfig,\r\n            };\r\n\r\n        } else {\r\n\r\n            newCfg.data = {\r\n                plain: newData,\r\n            };\r\n\r\n        }\r\n\r\n        // Update Chart\r\n        self.updateDataConfig(newCfg);\r\n        self.update(self.dataTarget);\r\n\r\n        // Update Axis\r\n        self.axis.update(self.x, self.y, 100);\r\n\r\n        // Update Legend\r\n        self.legend.update(self.dataTarget);\r\n        self.legend.updateInteractionForBarChart(self);\r\n\r\n        // Update Table\r\n        self.table.update(self.dataTarget);\r\n    }\r\n    /*=====  End of User's Functions  ======*/\r\n    \r\n    \r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/C9.BarChart.js\n **/","import Helper from '../helper/C9.Helper';\r\n\r\nexport default class Chart {\r\n    constructor(options) {\r\n        var self    = this;\r\n        var config  = {\r\n            // container\r\n            id: \"body\",\r\n            // size (width, height), margin, padding\r\n            width: 750,\r\n            height: 500,\r\n            margin: {\r\n                top: 100,\r\n                left: 50,\r\n                right: 50,\r\n                bottom:100\r\n            },\r\n\r\n            // interaction in chart\r\n            hover: {\r\n                enable: true,\r\n                options: {\r\n                    template: '',\r\n                    onMouseOver: {\r\n                        fadeIn: 200,\r\n                        callback: function(data) {\r\n                            // console.dir(data);\r\n                        },\r\n                    },\r\n                    onMouseOut: {\r\n                        fadeOut: 500,\r\n                        callback: function(data) {\r\n                            // console.dir(data);\r\n                        },\r\n                    },\r\n                    onMouseMove: {\r\n                        callback: function(data) {\r\n                            // console.dir(data);\r\n                        },\r\n                    }\r\n                }\r\n            },\r\n\r\n            click: {\r\n                callback: function(data) {\r\n                    // console.dir(data);\r\n                },\r\n            },\r\n\r\n            // title\r\n            title: {\r\n                show      : true,\r\n                text      : \"Sample Chart\",\r\n                position  : 'top',\r\n                fontSize  : \"14px\"\r\n            },\r\n\r\n            // legend\r\n            legend: {\r\n                show      : true,\r\n                position  : \"top\",\r\n                size      : 10,\r\n                fontSize  : \"12px\",\r\n                fontColor : \"#999\",\r\n                fontWeight: 'bold',\r\n                margin    : [5, 5, 5, 5],\r\n                space     : 10,\r\n            },\r\n\r\n            // tooltip\r\n            tooltip: {\r\n                show: true,\r\n                position: 'left', // [top, right, bottom, left]\r\n                backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n                fontColor: '#fff',\r\n                fontSize: '11px',\r\n                format: null\r\n            },\r\n\r\n            // table \r\n            table: {\r\n                container: \"body\",\r\n                show: false,\r\n                headings: [\"Name\", \"Value\"],\r\n                style: \"stripe\", // \"strip\", \"border\"\r\n                serial: true,\r\n                hover: {\r\n                    enable: true,\r\n                    callback: null\r\n                },\r\n                click: {\r\n                    enable: true,\r\n                    callback: null\r\n                }\r\n            },\r\n\r\n            // color range\r\n            colorRange: \"category20\",\r\n\r\n            // data\r\n            data: {\r\n                // ALL OPTIONS AVAILABLE IN DATA CONFIG\r\n                plain: [],\r\n                file: {\r\n                    type: null,\r\n                    url: null,\r\n                },\r\n                keys: {\r\n                    name: \"name\",\r\n                    value: \"value\",\r\n                    time: \"time\"\r\n                },\r\n                groups: [],\r\n                stacks: [],\r\n            },\r\n\r\n            axis: {\r\n                x: {\r\n                    tick: {\r\n                        rotate: 0,\r\n                        count: 10,\r\n                        size: 6,\r\n                        padding: 3,\r\n                        format: undefined,\r\n                        values: [],\r\n                        //the following use for timeline chart\r\n                        type: d3.time.hours,\r\n                        interval: 1\r\n                    },\r\n                    label: {\r\n                        text: \"Name\",\r\n                        position: \"default\"\r\n                    },\r\n                    show: true,\r\n                    grid: false,\r\n                    type: \"\"\r\n                },\r\n                y: {\r\n                    tick: {\r\n                        rotate: 0,\r\n                        count: 10,\r\n                        size: 6,\r\n                        padding: 3,\r\n                        format: undefined,\r\n                        values: []\r\n                    },\r\n                    label: {\r\n                        text: \"Value\",\r\n                        position: \"default\"\r\n                    },\r\n                    show: true,\r\n                    grid: true,\r\n                    type: \"\"\r\n                }\r\n            },\r\n\r\n            // sub-chart\r\n            subchart: {\r\n                show: false,\r\n                height: 100,\r\n            },\r\n        };\r\n\r\n        self._options   = options;\r\n\r\n        self.updateConfig(config);\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    get container() {\r\n        return this._container;\r\n    }\r\n    \r\n    get id() {\r\n        if (this._id !== 'body') {\r\n            return '#' + this._id;\r\n        }\r\n        return this._id;\r\n    }\r\n\r\n    get width() {\r\n        return this._width;\r\n    }\r\n\r\n    get height() {\r\n        return this._height;\r\n    }\r\n\r\n    get actualWidth() {\r\n        return this._actualWidth;\r\n    }\r\n\r\n    get actualHeight() {\r\n        return this._actualHeight;\r\n    }\r\n\r\n    /**\r\n     * If colorRange is Array of color then scale range according to it\r\n     * If colorRange is a String like \"category20\", \"category20b\", etc. then scale using d3.scale.category\r\n     */\r\n    get colorRange() {\r\n        var color = this._colorRange;\r\n\r\n        if (typeof color == 'string') {\r\n            try {\r\n                return d3.scale[color]();    \r\n            }\r\n            catch(err) {\r\n                return function(i) {\r\n                    return color;\r\n                };\r\n            }\r\n        } else if (typeof color == 'object') {\r\n            return d3.scale.ordinal().range(color);\r\n        }\r\n    }\r\n\r\n    get margin() {\r\n        return this._margin;\r\n    }\r\n\r\n    get dataOption() {\r\n        return this._dataOption;\r\n    }\r\n\r\n    get svg() {\r\n        return this._svg;\r\n    }\r\n\r\n    get body() {\r\n        return this._body;\r\n    }\r\n\r\n    get options() {\r\n        return this._options;\r\n    }\r\n\r\n    get hover() {\r\n        return this._hover;\r\n    }\r\n\r\n    get click() {\r\n        return this._click;\r\n    }\r\n\r\n    get dataTarget() {\r\n        return this._dataTarget;\r\n    }\r\n\r\n    get dataSource() {\r\n        return this._dataSource;\r\n    }\r\n\r\n    get eventFactory() {\r\n        return this._eventFactory;\r\n    }\r\n\r\n    get x() {\r\n        return this._x;\r\n    }\r\n\r\n    get y() {\r\n        return this._y;\r\n    }\r\n\r\n    get chartType() {\r\n        return this._chartType;\r\n    }\r\n\r\n    get title() {\r\n        return this._title;\r\n    }\r\n\r\n    get axis() {\r\n        return this._axis;\r\n    }\r\n\r\n    get legend() {\r\n        return this._legend;\r\n    }\r\n\r\n    get table() {\r\n        return this._table;\r\n    }\r\n\r\n    get tooltip() {\r\n        return this._tooltip;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n    \r\n    \r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    set container(arg) {\r\n        if (arg) {\r\n            this._container = arg;\r\n        }\r\n    }\r\n    \r\n    set id(arg) {\r\n        if (arg) {\r\n            this._id = arg;\r\n        }\r\n    }\r\n\r\n    set width(arg) {\r\n        if (arg) {\r\n            this._width = arg;\r\n        }\r\n    }\r\n\r\n    set height(arg) {\r\n        if (arg) {\r\n            this._height = arg;\r\n        }\r\n    }\r\n\r\n    set actualWidth(arg) {\r\n        if (arg) {\r\n            this._actualWidth = arg;\r\n        }\r\n    }\r\n\r\n    set actualHeight(arg) {\r\n        if (arg) {\r\n            this._actualHeight = arg;\r\n        }\r\n    }\r\n\r\n    set colorRange(arg) {\r\n        if (arg) {\r\n            this._colorRange = arg;\r\n        }\r\n    }\r\n\r\n    set margin(arg) {\r\n        if (arg) {\r\n            this._margin = arg;\r\n        }\r\n    }\r\n\r\n    set dataOption(arg) {\r\n        if (arg) {\r\n            this._dataOption = arg;\r\n        }\r\n    }\r\n\r\n    set svg(arg) {\r\n        if (arg) {\r\n            this._svg = arg;\r\n        }\r\n    }\r\n\r\n    set body(arg) {\r\n        if (arg) {\r\n            this._body = arg;\r\n        }\r\n    }\r\n\r\n    set options(arg) {\r\n        if (arg) {\r\n            this._options = arg;\r\n        }\r\n    }\r\n\r\n    set hover(arg) {\r\n        if (arg) {\r\n            this._hover = arg;\r\n        }\r\n    }\r\n\r\n    set click(arg) {\r\n        if (arg) {\r\n            this._click = arg;\r\n        }\r\n    }\r\n\r\n    set dataTarget(arg) {\r\n        if (arg) {\r\n            this._dataTarget = arg;\r\n        }\r\n    }\r\n\r\n    set dataSource(arg) {\r\n        if (arg) {\r\n            this._dataSource = arg;\r\n        }\r\n    }\r\n\r\n    set eventFactory(arg) {\r\n        if (arg) {\r\n            this._eventFactory = arg;\r\n        }\r\n    }\r\n\r\n    set x(arg) {\r\n        if (arg) {\r\n            this._x = arg;\r\n        }\r\n    }\r\n\r\n    set y(arg) {\r\n        if (arg) {\r\n            this._y = arg;\r\n        }\r\n    }\r\n\r\n    set chartType(arg) {\r\n        if (arg) {\r\n            this._chartType = arg;\r\n        }\r\n    }\r\n\r\n    set title(arg) {\r\n        if (arg) {\r\n            this._title = arg;\r\n        }\r\n    }\r\n\r\n    set axis(arg) {\r\n        if (arg) {\r\n            this._axis = arg;\r\n        }\r\n    }\r\n\r\n    set legend(arg) {\r\n        if (arg) {\r\n            this._legend = arg;\r\n        }\r\n    }\r\n\r\n    set table(arg) {\r\n        if (arg) {\r\n            this._table = arg;\r\n        }\r\n    }\r\n\r\n    set tooltip(arg) {\r\n        if (arg) {\r\n            this._tooltip = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n    \r\n    \r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    /**\r\n     * Update parent config\r\n     */\r\n    updateConfig(config) {\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n\r\n        var options = self.options;\r\n\r\n        self.id        = options.id        || config.id;\r\n        self.width     = options.width     || config.width;\r\n        self.height    = options.height    || config.height;\r\n        self.colorRange= options.colorRange|| config.colorRange;\r\n        \r\n        self.margin    = Helper.merge(options.margin, config.margin);\r\n        self.hover     = Helper.merge(options.hover, config.hover);\r\n        self.click     = Helper.merge(options.click, config.click);\r\n        \r\n        self.dataOption= Helper.mergeDeep(config.data, options.data);\r\n\r\n        self.options.subchart  = Helper.merge(options.subchart, config.subchart);\r\n        self.options.table     = Helper.merge(options.table, config.table);\r\n        self.options.tooltip   = Helper.merge(options.tooltip, config.tooltip);\r\n        self.options.legend    = Helper.merge(options.legend, config.legend);\r\n        self.options.axis      = Helper.mergeDeep(config.axis, options.axis);\r\n    }\r\n\r\n    /**\r\n     * Draw or Re-draw Base Chart\r\n     */\r\n    draw() {\r\n        var self = this;\r\n\r\n        var margin  = self.margin,\r\n            id      = self.id,\r\n            width   = self.width - margin.left - margin.right,\r\n            height  = self.height - margin.top - margin.bottom;\r\n\r\n        self.container = d3.select(id);\r\n\r\n        // Remove existing chart at current container\r\n        self.container.selectAll(\".c9-svg\").data([]).exit().remove();\r\n\r\n        self.svg = d3.select(id)\r\n            .style('position', 'relative')\r\n            .append(\"svg\")\r\n            .attr('class', 'c9-svg')\r\n            .attr(\"width\", self.width)\r\n            .attr(\"height\", self.height)\r\n            .style('overflow', 'visible'); // to overwrite overflow: hidden by Boostrap as default\r\n\r\n\r\n        self.svg.append(\"defs\")\r\n            .append(\"clipPath\")\r\n                .attr(\"id\", \"clip\")\r\n            .append(\"rect\")\r\n                .attr(\"width\", width)\r\n                .attr(\"height\", height);\r\n\r\n        self.body = self.svg\r\n                    .append(\"g\")\r\n                    .attr('class', 'c9-chart c9-custom-container')\r\n                    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");               \r\n    }\r\n\r\n    /**\r\n     * Get lightening color to create effect when interacting\r\n     * @param  {[type]} color [description]\r\n     */\r\n    getLightenColor(color) {\r\n        return Helper.shadeColor(0.5, color);\r\n    }\r\n\r\n    /*=====  End of Main Functions  ======*/\r\n\r\n    /*========================================\r\n    =            User's Functions            =\r\n    ========================================*/\r\n    /**\r\n     * Custom Event Listener\r\n     * @param  {[type]}   eventType [description]\r\n     * @param  {Function} callback  [description]\r\n     */\r\n    on(eventType, callback) {\r\n\r\n    }\r\n\r\n    /**\r\n     * Set option via stand-alone function\r\n     * @param {[type]} key   [description]\r\n     * @param {[type]} value [description]\r\n     */\r\n    setOption(key, value) {\r\n        var self = this;\r\n\r\n        Helper.set(key, value, self.options);\r\n\r\n        // Self-update on Base Chart to make sure that self.options consisting\r\n        // of all new values\r\n        self.updateConfig(self.options);\r\n    }\r\n\r\n    /**\r\n     * Update chart based on new data with optional dataConfig\r\n     * @param  {[type]} data       [description]\r\n     * @param  {[type]} dataConfig [description]\r\n     */\r\n    updateData(data, dataConfig) {\r\n\r\n    }\r\n    /*=====  End of User's Functions  ======*/\r\n    \r\n\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/C9.Chart.js\n **/","var Helper = {\r\n    \r\n    each: function(loopable, callback, self, reverse) {\r\n        // Check to see if null or undefined firstly.\r\n        var i, len;\r\n        if (self.isArray(loopable)) {\r\n            len = loopable.length;\r\n            if (reverse) {\r\n                for (i = len - 1; i >= 0; i--) {\r\n                    callback.call(self, loopable[i], i);\r\n                }\r\n            } else {\r\n                for (i = 0; i < len; i++) {\r\n                    callback.call(self, loopable[i], i);\r\n                }\r\n            }\r\n        } else if (typeof loopable === 'object') {\r\n            var keys = Object.keys(loopable);\r\n            len = keys.length;\r\n            for (i = 0; i < len; i++) {\r\n                callback.call(self, loopable[keys[i]], keys[i]);\r\n            }\r\n        }\r\n    },\r\n\r\n    setValue: function(value, key) {\r\n        var self = this;\r\n        self[key] = value;\r\n    },\r\n\r\n    setPrefix: function(config) {\r\n        var constPrefix = '_';\r\n        if (config) {\r\n            return constPrefix + config;\r\n        }\r\n    },\r\n\r\n    isEmpty: function(value) {\r\n        return value === null || value === undefined || (Util.isArray(value) && value.length === 0) || (Util.isArray(value) && Util.isEmpty(value[0]));\r\n    },\r\n\r\n    isObject: function(object) {\r\n        return !Util.isEmpty(object) && typeof(object) === 'object';\r\n    },\r\n\r\n    isArray: function(array) {\r\n        return !Util.isEmpty(array) && (Array.isArray(array) || Object.prototype.toString.call(array) === '[object Array]');\r\n    },\r\n\r\n    isFunction: function(func) {\r\n        return !Util.isEmpty(func) && typeof(func) === 'function';\r\n    },\r\n\r\n    // Overlap source by target\r\n    merge: function(target, source){\r\n        var obj3 = {};\r\n        for (var attrname in source) { if (!Util.isEmpty(source[attrname])) obj3[attrname] = source[attrname]; }\r\n        for (var attrname in target) { if (!Util.isEmpty(target[attrname])) obj3[attrname] = target[attrname]; }\r\n        return obj3;\r\n    },\r\n\r\n    // Overlap target by source\r\n    mergeDeep: function(target, source) {\r\n        return mergeDeep(target, source);\r\n    },\r\n\r\n    get: function(_key, _data){\r\n        var _keys = _key.split(\".\");\r\n        var _current = _data;\r\n\r\n        for (var i = 0; i < _keys.length; i++) {\r\n\r\n            if ('undefined' == typeof(_current[_keys[i]])) {\r\n                return '';\r\n            } else {\r\n                _current = _current[_keys[i]];\r\n            }\r\n        }\r\n\r\n        return _current;\r\n    },\r\n    \r\n    set: function(_key, _value, _context) {\r\n        var _current = _context;  // a moving reference to internal objects within obj\r\n        var _keys = _key.split('.');\r\n        var len = _keys.length;\r\n        for(var i = 0; i < len-1; i++) {\r\n            var _handle = _keys[i];\r\n            if( !_current[_handle] ) _current[_handle] = {}\r\n            _current = _current[_handle];\r\n        }\r\n\r\n        _current[_keys[len-1]] = _value;\r\n    },\r\n\r\n    max: function(arr) {\r\n        return Math.max(...arr);\r\n    }, \r\n\r\n    min: function(arr) {\r\n        return Math.min(...arr);\r\n    }, \r\n\r\n    sum: function(arr) {\r\n        return arr.reduce(function(a, b) { return a + b; }, 0);\r\n    },\r\n\r\n    guid: function() {\r\n        return 'c9-xxxxxx-4xxx-yxxx'.replace(/[xy]/g, function(c) {\r\n            let r = Math.random()*16|0, \r\n                v = c == 'x' ? r : (r&0x3|0x8);\r\n            return v.toString(16);\r\n        });\r\n    },\r\n\r\n    getMinMax: function(data, type, isLogaric) {\r\n        var self  = this;\r\n        var _temp = new Array();\r\n        var _min  = 0,\r\n            _max  = 0;\r\n        if (type == \"stack\")\r\n            data.forEach(function (d){\r\n                d.forEach(function (s){\r\n                    if (s.y0 > 0)\r\n                        _temp.push(s.y1);\r\n                    else\r\n                        _temp.push(s.y1 + s.y0);\r\n                })\r\n            })\r\n        else\r\n            data.forEach(function (d){\r\n                d.forEach(function (s){\r\n                    _temp.push(s.y0);\r\n                })\r\n            });\r\n\r\n\r\n        var _newMin = self.min(_temp);\r\n        var _newMax = self.max(_temp);\r\n        if (_newMin < _min || isLogaric)\r\n            _min = _newMin;\r\n        if (_newMax > _max)\r\n            _max = _newMax;\r\n\r\n        return {min: _min, max: _max};\r\n    },\r\n    dateParser: function(format) {\r\n        return d3.time.format(format).parse;\r\n    },\r\n    dateFormatter: function(format) {\r\n        return d3.time.format(format);\r\n    },\r\n    // Convert color 'from' to 'to' (if any) in propotion of 'p'\r\n    // Use to lighten/darken specific color\r\n    shadeColor: function(p, from, to) {\r\n        // Convert color from 'Name' to 'Hex'\r\n        from = Util.convertColorToHex(from) || from;\r\n        \r\n        if(typeof(p)!=\"number\"||p<-1||p>1||typeof(from)!=\"string\"||(from[0]!='r'&&from[0]!='#')||(typeof(to)!=\"string\"&&typeof(to)!=\"undefined\"))return null; //ErrorCheck\r\n        if(!this.sbcRip)\r\n            this.sbcRip=function(d) {\r\n                var l=d.length,RGB=new Object();\r\n                if(l>9){\r\n                    d=d.split(\",\");\r\n                    if(d.length<3||d.length>4)return null;//ErrorCheck\r\n                    RGB[0]=i(d[0].slice(4)),RGB[1]=i(d[1]),RGB[2]=i(d[2]),RGB[3]=d[3]?parseFloat(d[3]):-1;\r\n                }else{\r\n                    if(l==8||l==6||l<4)return null; //ErrorCheck\r\n                    if(l<6)d=\"#\"+d[1]+d[1]+d[2]+d[2]+d[3]+d[3]+(l>4?d[4]+\"\"+d[4]:\"\"); //3 digit\r\n                    d=i(d.slice(1),16),RGB[0]=d>>16&255,RGB[1]=d>>8&255,RGB[2]=d&255,RGB[3]=l==9||l==5?r(((d>>24&255)/255)*10000)/10000:-1;\r\n                }\r\n                return RGB;\r\n            }\r\n        var i=parseInt,r=Math.round,h=from.length>9,h=typeof(to)==\"string\"?to.length>9?true:to==\"c\"?!h:false:h,b=p<0,p=b?p*-1:p,to=to&&to!=\"c\"?to:b?\"#000000\":\"#FFFFFF\",f=this.sbcRip(from),t=this.sbcRip(to);\r\n        if(!f||!t)return null; //ErrorCheck\r\n        if(h)return \"rgb(\"+r((t[0]-f[0])*p+f[0])+\",\"+r((t[1]-f[1])*p+f[1])+\",\"+r((t[2]-f[2])*p+f[2])+(f[3]<0&&t[3]<0?\")\":\",\"+(f[3]>-1&&t[3]>-1?r(((t[3]-f[3])*p+f[3])*10000)/10000:t[3]<0?f[3]:t[3])+\")\");\r\n        else return \"#\"+(0x100000000+(f[3]>-1&&t[3]>-1?r(((t[3]-f[3])*p+f[3])*255):t[3]>-1?r(t[3]*255):f[3]>-1?r(f[3]*255):255)*0x1000000+r((t[0]-f[0])*p+f[0])*0x10000+r((t[1]-f[1])*p+f[1])*0x100+r((t[2]-f[2])*p+f[2])).toString(16).slice(f[3]>-1||t[3]>-1?1:3);\r\n    },\r\n    //smooth scroll c9 table\r\n    scroll: function(element, to, duration) {\r\n        var self = this;\r\n        if (duration <= 0) return;\r\n        var difference = to - element.scrollTop;\r\n        var perTick = difference / duration * 10;\r\n\r\n        setTimeout(function() {\r\n            element.scrollTop = element.scrollTop + perTick;\r\n            if (element.scrollTop === to) return;\r\n            self.scroll(element, to, duration - 10);\r\n        }, 10);\r\n    }   \r\n};\r\n\r\nvar Util = {\r\n    isEmpty: function(value) {\r\n        return value === null || value === undefined;\r\n    },\r\n\r\n    isArray: function(array) {\r\n        return Array.isArray(array) || Object.prototype.toString.call(array) === '[object Array]';\r\n    },\r\n\r\n    isObject: function(object) {\r\n        return (object && typeof object === 'object' && !Array.isArray(object));\r\n    },\r\n\r\n    convertColorToHex: function(colour) {\r\n        var colours = {\r\n            \"aliceblue\":\"#f0f8ff\",\"antiquewhite\":\"#faebd7\",\"aqua\":\"#00ffff\",\"aquamarine\":\"#7fffd4\",\"azure\":\"#f0ffff\",\r\n            \"beige\":\"#f5f5dc\",\"bisque\":\"#ffe4c4\",\"black\":\"#000000\",\"blanchedalmond\":\"#ffebcd\",\"blue\":\"#0000ff\",\"blueviolet\":\"#8a2be2\",\"brown\":\"#a52a2a\",\"burlywood\":\"#deb887\",\r\n            \"cadetblue\":\"#5f9ea0\",\"chartreuse\":\"#7fff00\",\"chocolate\":\"#d2691e\",\"coral\":\"#ff7f50\",\"cornflowerblue\":\"#6495ed\",\"cornsilk\":\"#fff8dc\",\"crimson\":\"#dc143c\",\"cyan\":\"#00ffff\",\r\n            \"darkblue\":\"#00008b\",\"darkcyan\":\"#008b8b\",\"darkgoldenrod\":\"#b8860b\",\"darkgray\":\"#a9a9a9\",\"darkgreen\":\"#006400\",\"darkkhaki\":\"#bdb76b\",\"darkmagenta\":\"#8b008b\",\"darkolivegreen\":\"#556b2f\",\r\n            \"darkorange\":\"#ff8c00\",\"darkorchid\":\"#9932cc\",\"darkred\":\"#8b0000\",\"darksalmon\":\"#e9967a\",\"darkseagreen\":\"#8fbc8f\",\"darkslateblue\":\"#483d8b\",\"darkslategray\":\"#2f4f4f\",\"darkturquoise\":\"#00ced1\",\r\n            \"darkviolet\":\"#9400d3\",\"deeppink\":\"#ff1493\",\"deepskyblue\":\"#00bfff\",\"dimgray\":\"#696969\",\"dodgerblue\":\"#1e90ff\",\r\n            \"firebrick\":\"#b22222\",\"floralwhite\":\"#fffaf0\",\"forestgreen\":\"#228b22\",\"fuchsia\":\"#ff00ff\",\r\n            \"gainsboro\":\"#dcdcdc\",\"ghostwhite\":\"#f8f8ff\",\"gold\":\"#ffd700\",\"goldenrod\":\"#daa520\",\"gray\":\"#808080\",\"green\":\"#008000\",\"greenyellow\":\"#adff2f\",\r\n            \"honeydew\":\"#f0fff0\",\"hotpink\":\"#ff69b4\",\r\n            \"indianred \":\"#cd5c5c\",\"indigo\":\"#4b0082\",\"ivory\":\"#fffff0\",\"khaki\":\"#f0e68c\",\r\n            \"lavender\":\"#e6e6fa\",\"lavenderblush\":\"#fff0f5\",\"lawngreen\":\"#7cfc00\",\"lemonchiffon\":\"#fffacd\",\"lightblue\":\"#add8e6\",\"lightcoral\":\"#f08080\",\"lightcyan\":\"#e0ffff\",\"lightgoldenrodyellow\":\"#fafad2\",\r\n            \"lightgrey\":\"#d3d3d3\",\"lightgreen\":\"#90ee90\",\"lightpink\":\"#ffb6c1\",\"lightsalmon\":\"#ffa07a\",\"lightseagreen\":\"#20b2aa\",\"lightskyblue\":\"#87cefa\",\"lightslategray\":\"#778899\",\"lightsteelblue\":\"#b0c4de\",\r\n            \"lightyellow\":\"#ffffe0\",\"lime\":\"#00ff00\",\"limegreen\":\"#32cd32\",\"linen\":\"#faf0e6\",\r\n            \"magenta\":\"#ff00ff\",\"maroon\":\"#800000\",\"mediumaquamarine\":\"#66cdaa\",\"mediumblue\":\"#0000cd\",\"mediumorchid\":\"#ba55d3\",\"mediumpurple\":\"#9370d8\",\"mediumseagreen\":\"#3cb371\",\"mediumslateblue\":\"#7b68ee\",\r\n            \"mediumspringgreen\":\"#00fa9a\",\"mediumturquoise\":\"#48d1cc\",\"mediumvioletred\":\"#c71585\",\"midnightblue\":\"#191970\",\"mintcream\":\"#f5fffa\",\"mistyrose\":\"#ffe4e1\",\"moccasin\":\"#ffe4b5\",\r\n            \"navajowhite\":\"#ffdead\",\"navy\":\"#000080\",\r\n            \"oldlace\":\"#fdf5e6\",\"olive\":\"#808000\",\"olivedrab\":\"#6b8e23\",\"orange\":\"#ffa500\",\"orangered\":\"#ff4500\",\"orchid\":\"#da70d6\",\r\n            \"palegoldenrod\":\"#eee8aa\",\"palegreen\":\"#98fb98\",\"paleturquoise\":\"#afeeee\",\"palevioletred\":\"#d87093\",\"papayawhip\":\"#ffefd5\",\"peachpuff\":\"#ffdab9\",\"peru\":\"#cd853f\",\"pink\":\"#ffc0cb\",\"plum\":\"#dda0dd\",\"powderblue\":\"#b0e0e6\",\"purple\":\"#800080\",\r\n            \"red\":\"#ff0000\",\"rosybrown\":\"#bc8f8f\",\"royalblue\":\"#4169e1\",\r\n            \"saddlebrown\":\"#8b4513\",\"salmon\":\"#fa8072\",\"sandybrown\":\"#f4a460\",\"seagreen\":\"#2e8b57\",\"seashell\":\"#fff5ee\",\"sienna\":\"#a0522d\",\"silver\":\"#c0c0c0\",\"skyblue\":\"#87ceeb\",\"slateblue\":\"#6a5acd\",\"slategray\":\"#708090\",\"snow\":\"#fffafa\",\"springgreen\":\"#00ff7f\",\"steelblue\":\"#4682b4\",\r\n            \"tan\":\"#d2b48c\",\"teal\":\"#008080\",\"thistle\":\"#d8bfd8\",\"tomato\":\"#ff6347\",\"turquoise\":\"#40e0d0\",\r\n            \"violet\":\"#ee82ee\",\r\n            \"wheat\":\"#f5deb3\",\"white\":\"#ffffff\",\"whitesmoke\":\"#f5f5f5\",\r\n            \"yellow\":\"#ffff00\",\"yellowgreen\":\"#9acd32\"\r\n        };\r\n\r\n        if (typeof colours[colour.toLowerCase()] != 'undefined')\r\n            return colours[colour.toLowerCase()];\r\n\r\n        return false;\r\n    }\r\n};\r\n\r\nfunction mergeDeep(target, source) {\r\n    if (Util.isObject(target) && Util.isObject(source)) {\r\n        for (const key in source) {\r\n            if (Util.isObject(source[key])) {\r\n                if (Helper.isEmpty(target[key])) {\r\n                    Object.assign(target, {\r\n                        [key]: {}\r\n                    });\r\n                }\r\n                mergeDeep(target[key], source[key]);\r\n            } else {\r\n                Object.assign(target, {\r\n                    [key]: source[key]\r\n                });\r\n            }\r\n        }\r\n    }\r\n    return target;\r\n}\r\n\r\n\r\n\r\n\r\nmodule.exports = Helper;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/helper/C9.Helper.js\n **/","import Helper from '../../helper/C9.Helper';\r\n\r\nexport default class Axis {\r\n    constructor(options, chart, width, height) {\r\n        var self = this;\r\n\r\n        var config = {\r\n                x: {\r\n                    tick: {\r\n                        rotate: 0,\r\n                        count: 10,\r\n                        size: 6,\r\n                        padding: 3,\r\n                        format: undefined,\r\n                        values: [],\r\n                        //the following use for timeline chart\r\n                        type: d3.time.hours,\r\n                        interval: 1\r\n                    },\r\n                    label: {\r\n                        text: \"Name\",\r\n                        position: \"default\"\r\n                    },\r\n                    show: true,\r\n                    grid: false,\r\n                    type: \"\"\r\n                },\r\n                y: {\r\n                    tick: {\r\n                        rotate: 0,\r\n                        count: 10,\r\n                        size: 6,\r\n                        padding: 3,\r\n                        format: undefined,\r\n                        values: []\r\n                    },\r\n                    label: {\r\n                        text: \"Value\",\r\n                        position: \"default\"\r\n                    },\r\n                    show: true,\r\n                    grid: true,\r\n                    type: \"\"\r\n                }\r\n            };\r\n\r\n        self._options   = options;\r\n        self._chart     = chart;\r\n        self._width     = width;\r\n        self._height    = height;\r\n\r\n        self.updateConfig(config);\r\n            \r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    \r\n    get x() {\r\n        return this._x;\r\n    }\r\n\r\n    get y() {\r\n        return this._y;\r\n    }\r\n\r\n    get xAxis() {\r\n        return this._xAxis;\r\n    }\r\n\r\n    get yAxis() {\r\n        return this._yAxis;\r\n    }\r\n\r\n    get chart() {\r\n        return this._chart;\r\n    }\r\n\r\n    get options() {\r\n        return this._options;\r\n    }\r\n\r\n    get width() {\r\n        return this._width;\r\n    }\r\n\r\n    get height() {\r\n        return this._height;\r\n    }\r\n\r\n    get data() {\r\n        return this._data;\r\n    }\r\n    \r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    \r\n    set x(arg) {\r\n        if (arg) {\r\n            this._x = arg;\r\n        }\r\n    }\r\n\r\n    set y(arg) {\r\n        if (arg) {\r\n            this._y = arg;\r\n        }\r\n    }\r\n\r\n    set xAxis(arg) {\r\n        if (arg) {\r\n            this._xAxis = arg;\r\n        }\r\n    }\r\n\r\n    set yAxis(arg) {\r\n        if (arg) {\r\n            this._yAxis = arg;\r\n        }\r\n    }\r\n\r\n    set chart(arg) {\r\n        if (arg) {\r\n            this._chart = arg;\r\n        }\r\n    }\r\n\r\n    set options(arg) {\r\n        if (arg) {\r\n            this._options = arg;\r\n        }\r\n    }\r\n\r\n    set width(arg) {\r\n        if (arg) {\r\n            this._width = arg;\r\n        }\r\n    }\r\n\r\n    set height(arg) {\r\n        if (arg) {\r\n            this._height = arg;\r\n        }\r\n    }\r\n\r\n    set data(arg) {\r\n        if (arg) {\r\n            this._data = arg;\r\n        }\r\n    }\r\n    \r\n    /*=====  End of Setter  ======*/\r\n    \r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    updateConfig(config) {\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n        \r\n        self.x = self.chart.x;\r\n        self.y = self.chart.y;\r\n\r\n        self.data       = self.chart.dataTarget;\r\n\r\n        if (self.chart.chartType == \"timeline\") {\r\n            var xScale = d3.time.scale()\r\n                .domain([self.chart.options.starting, self.chart.options.ending])\r\n                .range([0, self.width]);\r\n\r\n            self.xAxis = d3.svg.axis()\r\n                .scale(xScale)\r\n                .orient(\"bottom\")\r\n                .tickFormat(self.options.x.tick.format === undefined ? d3.time.format(\"%I %p\") : self.options.x.tick.format)\r\n                // .tickSize(options.tickFormat === undefined ? 6 : options.tickFormat.tickSize)\r\n                .ticks(self.options.x.tick.type, self.options.x.tick.interval);\r\n            // delete options.starting;\r\n            // delete options.ending;\r\n        } else {\r\n            self.xAxis = d3.svg.axis()\r\n                .scale(self.x)\r\n                .orient(\"bottom\")\r\n                .tickPadding(self.options.x.tick.padding)\r\n                .ticks(self.options.x.tick.count)\r\n                .tickValues(self.options.x.tick.values.length > 0 ? self.options.x.tick.values : undefined)\r\n                .tickFormat(self.options.x.type == \"timeseries\" ? self.options.x.tick.format || d3.time.format(\"%Y-%m-%d\") : self.options.x.tick.format ? self.options.x.tick.format : undefined);\r\n\r\n            // In LOG scale, can't specify default number of ticks\r\n            // must be filter with tickFormat instead\r\n            // refer: https://github.com/d3/d3/wiki/Quantitative-Scales#log_ticks\r\n            if (self.isLogaricVariant) {\r\n                self.yAxis = d3.svg.axis()\r\n                    .scale(self.y)\r\n                    .orient(\"left\")\r\n                    .ticks(self.options.y.tick.count, self.options.y.type == \"timeseries\" ? self.options.y.tick.format || \"%Y-%m-%d\" : self.options.y.tick.format ? self.options.y.tick.format : undefined)\r\n                    .tickPadding(self.options.y.tick.padding)\r\n                    .tickValues(self.options.y.tick.values.length > 0 ? self.options.y.tick.values : undefined);\r\n            } else {\r\n                self.yAxis = d3.svg.axis()\r\n                    .scale(self.y)\r\n                    .orient(\"left\")\r\n                    .ticks(self.options.y.tick.count)\r\n                    .tickPadding(self.options.y.tick.padding)\r\n                    .tickValues(self.options.y.tick.values.length > 0 ? self.options.y.tick.values : undefined)\r\n                    .tickFormat(self.options.y.type == \"timeseries\" ? self.options.y.tick.format || d3.time.format(\"%Y-%m-%d\") : self.options.y.tick.format ? self.options.y.tick.format : undefined);\r\n            }   \r\n        }\r\n\r\n        if (self.chart.chartType != \"timeline\") {\r\n            // Grid\r\n            if (self.options.x.grid) {\r\n                self.xAxis.innerTickSize(-self.height)\r\n                    .outerTickSize(0);\r\n            }\r\n\r\n            if (self.options.y.grid) {\r\n                self.yAxis.innerTickSize(-self.width)\r\n                    .outerTickSize(0);\r\n            }\r\n        }\r\n\r\n        var textAnchor = function(angle) {\r\n            var sin = Math.sin(angle * Math.PI / 180).toFixed(15);\r\n            return sin == 0 ? \"middle\" : (sin > 0 ? \"start\" : \"end\");\r\n        };\r\n\r\n        var textDx = function(angle) {\r\n            var sin = Math.sin(angle * Math.PI / 180).toFixed(15);\r\n            return 8 * sin;\r\n        };\r\n\r\n        var textY = function(angle) {\r\n            return 11.5 - 2.5 * (angle / 15) * (angle > 0 ? 1 : -1);\r\n        };\r\n\r\n        //draw x axis\r\n        self.chart.body.append(\"g\")\r\n            .attr(\"class\", \"c9-axis c9-axis-x\")\r\n            .attr(\"transform\", \"translate(0,\" + (self.height) + \")\")\r\n            .call(self.xAxis);\r\n        //draw tick\r\n        d3.select(\".c9-axis.c9-axis-x\").selectAll(\"text\")\r\n            .style(\"text-anchor\", textAnchor(self.options.x.tick.rotate))\r\n            .attr(\"y\", textY(self.options.x.tick.rotate))\r\n            .attr(\"x\", 0)\r\n            .attr(\"dy\", \".71em\")\r\n            .attr(\"dx\", textDx(self.options.x.tick.rotate))\r\n            .attr(\"transform\", \"rotate(\" + self.options.x.tick.rotate + \")\");\r\n        //draw label\r\n        d3.select(\".c9-axis.c9-axis-x\")\r\n            .append(\"text\")\r\n            .attr(\"class\", \"c9-axis c9-axis-x-text\")\r\n            .attr(\"dx\", \"-.8em\")\r\n            .attr(\"dy\", \"-.55em\")\r\n            .attr(\"x\", self.width + 20)\r\n            .attr(\"y\", 10)\r\n            .style(\"text-anchor\", \"start\")\r\n            .text(self.options.x.text);\r\n\r\n        //hide x axis\r\n        if (!self.options.x.show) {\r\n            d3.select(\".c9-axis.c9-axis-x>.domain\").style(\"display\", \"none\");\r\n            if (!self.options.x.grid) d3.selectAll(\".c9-axis.c9-axis-x>g.tick>line\").style(\"display\", \"none\");\r\n        }\r\n\r\n        if (self.chart.chartType != \"timeline\") {\r\n            self.chart.body.append(\"g\")\r\n                .attr(\"class\", \"c9-axis c9-axis-y\")\r\n                .call(self.yAxis);\r\n\r\n            d3.select(\".c9-axis.c9-axis-y\")\r\n                .append(\"text\")\r\n                .attr(\"class\", \"c9-axis c9-axis-y-text\")\r\n                .attr(\"y\", -10)\r\n                .attr(\"dy\", \".10\")\r\n                .style(\"text-anchor\", \"end\")\r\n                .text(self.options.y.text);\r\n\r\n            if (!self.options.y.show) {\r\n                d3.select(\".c9-axis.c9-axis-y>.domain\").style(\"display\", \"none\");\r\n                if (!self.options.y.grid) d3.selectAll(\".c9-axis.c9-axis-y>g.tick>line\").style(\"display\", \"none\");\r\n            }\r\n        }\r\n    }\r\n\r\n    update(x, y, duration) {\r\n        var self = this;\r\n\r\n        if (!Helper.isEmpty(x)) {\r\n            self.x = x;\r\n\r\n            if (self.chart.chartType == 'timeline') {\r\n                var xScale = d3.time.scale()\r\n                    .domain([self.chart.options.starting, self.chart.options.ending])\r\n                    .range([0, self.width]);\r\n\r\n                self.xAxis.scale(xScale);\r\n            } else {\r\n                self.xAxis.scale(self.x);\r\n            }\r\n\r\n            self.chart.body.select('.c9-axis.c9-axis-x').transition().duration(duration).call(self.xAxis);\r\n        }\r\n        if (!Helper.isEmpty(y)) {\r\n            self.y = y;\r\n\r\n            if (self.chart.chartType == 'timeline') {\r\n                return ;\r\n            } else {\r\n                self.yAxis.scale(self.y);\r\n            }\r\n\r\n            self.chart.body.select(\".c9-axis.c9-axis-y\").transition().duration(duration).call(self.yAxis);\r\n        }\r\n    }\r\n\r\n    draw() {\r\n        var self = this;\r\n\r\n        self.update(self.x, self.y, 100);\r\n    }\r\n    /*=====  End of Main Functions  ======*/  \r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/utils/C9.Axis.js\n **/","import Helper from '../../helper/C9.Helper';\r\n\r\nexport default class Title {\r\n    constructor(options, chart) {\r\n        var self = this;\r\n\r\n        var config = {\r\n            show      : true,\r\n            text      : \"Sample Chart\",\r\n            position  : 'top',\r\n            fontSize  : \"14px\"\r\n        };\r\n\r\n        self._options  = options;\r\n        self._chart    = chart;\r\n\r\n        self.updateConfig(config);\r\n            \r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    get chart() {\r\n        return this._chart;\r\n    }\r\n\r\n    get options() {\r\n        return this._options;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/ \r\n    set chart(arg) {\r\n        if (arg) {\r\n            this._chart = arg;\r\n        }\r\n    }\r\n\r\n    set options(arg) {\r\n        if (arg) {\r\n            this._options = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n    \r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    updateConfig(config) {\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n    }\r\n\r\n    draw() {\r\n        var self = this;\r\n\r\n        if (self.options.show) {\r\n            var text = self.chart.svg\r\n                            .append(\"g\")\r\n                                .attr('class', 'c9-custom-title c9-custom-title-container')\r\n                            .append(\"text\")\r\n                                .attr(\"class\", \"c9-custom-title c9-custom-title-text\");\r\n\r\n            // Get title self.chart.width: text.node().getComputedTextLength()           \r\n            text.attr(\"x\", (((self.chart.width - text.node().getComputedTextLength()) / 2)))           \r\n                .attr(\"y\", self.setYLocation(self.chart.height, self.chart.margin))\r\n                .attr(\"text-anchor\", \"middle\")  \r\n                .style(\"font-size\", self.options.fontSize)  \r\n                .text(self.options.text);\r\n        }\r\n    }\r\n\r\n    setYLocation(height, margin) {\r\n        var self = this;\r\n        \r\n        if (self.options.position === 'top') {\r\n            return (margin.top / 2);\r\n        } else if (self.options.position === 'bottom') {\r\n            return (height - margin.bottom / 2);\r\n        }\r\n    }\r\n    /*=====  End of Main Functions  ======*/\r\n    \r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/utils/C9.Title.js\n **/","import Helper from '../../helper/C9.Helper';\r\n\r\nexport default class Legend {\r\n    constructor(options, chart) {\r\n        var self = this;\r\n\r\n        var config = {\r\n            show      : true,\r\n            position  : \"top\",\r\n            size      : 10,\r\n            fontSize  : \"12px\",\r\n            fontColor : \"#999\",\r\n            fontWeight: 'bold',\r\n            margin    : [5, 5, 5, 5],\r\n            space     : 10,\r\n            box       : false,\r\n            // legendStyle     : \"rect\" // TODO: Allow user to choose type of legend (circle, rect, etc.)\r\n        };\r\n\r\n        \r\n        self._options   = options;\r\n        self._chart     = chart;\r\n\r\n        self.updateConfig(config);\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    get options() {\r\n        return this._options;\r\n    }\r\n\r\n    get data() {\r\n        return this._data;\r\n    }\r\n\r\n    get chart() {\r\n        return this._chart;\r\n    }\r\n\r\n    get item() {\r\n        return this._item;\r\n    }\r\n\r\n    get itemEventFactory() {\r\n        return this._itemEventFactory;\r\n    }\r\n    \r\n    get maxWidth() {\r\n        return this._maxWidth;\r\n    }\r\n\r\n    get maxHeight() {\r\n        return this._maxHeight;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    set options(arg) {\r\n        if (arg) {\r\n            this._options = arg;\r\n        }\r\n    }\r\n\r\n    set data(arg) {\r\n        if (arg) {\r\n            this._data = arg;\r\n        }\r\n    }\r\n\r\n    set chart(arg) {\r\n        if (arg) {\r\n            this._chart = arg;\r\n        }\r\n    }\r\n\r\n    set item(arg) {\r\n        if (arg) {\r\n            this._item = arg;\r\n        }\r\n    }\r\n\r\n    set itemEventFactory(arg) {\r\n        if (arg) {\r\n            this._itemEventFactory = arg;\r\n        }\r\n    }\r\n    \r\n    set maxWidth(arg) {\r\n        if (arg) {\r\n            this._maxWidth = arg;\r\n        }\r\n    }\r\n\r\n    set maxHeight(arg) {\r\n        if (arg) {\r\n            this._maxHeight = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n    \r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    updateConfig(config) {\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n\r\n        self.maxWidth   = self.chart.width;\r\n        self.maxHeight  = self.chart.height;\r\n        self.data       = self.chart.dataTarget;\r\n    }\r\n\r\n    update(data) {\r\n        var self = this;\r\n\r\n        self.data = data;\r\n\r\n        if (self.options.show) {\r\n            // Remove current legend\r\n            self.chart.svg.selectAll('.c9-custom-legend.c9-custom-legend-container').remove();\r\n\r\n            // var color = self.color;\r\n            var domain = [];\r\n\r\n            if (self.chart.chartType == \"bar\") {\r\n                self.data = self.data[self.data.reduce((p, c, i, a) => a[p].length > c.length ? p : i, 0)];\r\n            }\r\n\r\n            // Legend will be appended in main SVG container\r\n            // var container = d3.select(self._body[0][0].parentNode)\r\n            var container = self.chart.svg\r\n                .append(\"g\")\r\n                .attr(\"class\", \"c9-custom-legend c9-custom-legend-container\");\r\n            \r\n            // var legendBox = legendContainer.selectAll(\".c9-custom-legend.c9-custom-legend-box\").data([true]).enter();\r\n\r\n            self.item = container.selectAll(\"g.c9-custom-legend.c9-custom-legend-item\")\r\n                .data(self.data)\r\n                .enter().append(\"g\")\r\n                .attr(\"class\", \"c9-custom-legend c9-custom-legend-item\")\r\n                .attr('data-ref', function(d) { return d['data-ref']; })\r\n                .attr('data-enable', function(d) { return d['enable']; })\r\n                \r\n\r\n            self.item.append('rect')\r\n                .attr('class', 'c9-custom-legend c9-custom-legend-rect')\r\n                .attr('width', self.options.size)\r\n                .attr('height', self.options.size)\r\n                .attr('r', self.options.size)\r\n                .attr('fill', function(d){ return d.color || d[0].color; })\r\n                // .attr('stroke', function(d){ return d.color || d[0].color; })\r\n                .style('cursor', 'pointer');\r\n\r\n            self.item.append('rect')\r\n                .attr('width', 5)\r\n                .attr('height', self.options.size)\r\n                .attr('x', self.options.size)\r\n                .attr('y', 0)\r\n                .attr('opacity', 0)\r\n                .style('cursor', 'pointer');\r\n\r\n            self.item.append('text')\r\n                .attr('class', 'c9-custom-legend c9-custom-legend-text')\r\n                .attr('x', self.options.size + 5)\r\n                .attr('y', self.options.size)\r\n                .style('font-size', self.options.fontSize)\r\n                .style('font-weight', self.options.fontWeight)\r\n                .style('fill', self.options.fontColor)\r\n                .style('cursor', 'pointer')\r\n                // .attr('text-anchor', 'middle')\r\n                .text(function(d) { return self.chart.chartType == \"bar\" ? d.group : d.name; });\r\n\r\n            //caculate position for legend\r\n            var getSize = function(item) { \r\n                return item.getBoundingClientRect() \r\n            };\r\n            var getXY = function(item) { \r\n                var xy = d3.select(item).attr('transform').split(','); \r\n                return {\r\n                    x: parseFloat(xy[0].replace('translate(', '')), \r\n                    y: parseFloat(xy[1].replace(')', ''))\r\n                }; \r\n            };\r\n\r\n            var r = 0; // current row\r\n            var items = d3.selectAll(\".c9-custom-legend-item\")[0];\r\n            var itemHeight = getSize(items[0]).height;\r\n            var numItemsCol = Math.floor((self.maxHeight - self.options.margin[0] - self.options.margin[2]) / (itemHeight + self.options.space));\r\n            \r\n            if (self.options.space > itemHeight) numItemsCol++;\r\n            \r\n            var maxWidthCol = new Array(Math.floor(items.length / numItemsCol));\r\n\r\n            items.forEach(function (i, n) {\r\n                var pos = Math.floor(n / numItemsCol);\r\n                var width = getSize(i).width;\r\n                if (maxWidthCol[pos] == undefined || width > maxWidthCol[pos]) maxWidthCol[pos] = width;\r\n            });\r\n\r\n            if  (self.options.position == \"bottom\"){\r\n                self.item.attr(\"transform\", function(d, i) {\r\n                    if (i > 0) {\r\n                        var item  = items[i];\r\n                        var preItem  = items[i - 1];\r\n                        var newR = Math.floor((getXY(preItem).x + getSize(preItem).width + self.options.space + getSize(item).width + self.options.margin[1]) / self.maxWidth);\r\n                        if (newR > 0) r++;\r\n                        return \"translate(\" + (newR > 0 ? self.options.margin[3] : getXY(preItem).x + getSize(preItem).width + self.options.space) + \",\" + (self.maxHeight - self.options.margin[0] - itemHeight - r * (itemHeight + self.options.space)) + \")\";\r\n                    } else {\r\n                        return \"translate(\" + self.options.margin[3] + \",\" + (self.maxHeight - self.options.margin[0] - itemHeight) + \")\";\r\n                    }\r\n                });\r\n            } else if (self.options.position == \"left\") {\r\n                self.item.attr(\"transform\", function(d, i) {\r\n                    var pos = Math.floor(i / numItemsCol);\r\n\r\n                    if (i > 0) {\r\n                        var prePos = Math.floor((i - 1) / numItemsCol);\r\n                        var item  = items[i];\r\n                        var preItem  = items[i - 1];\r\n                        return \"translate(\" + (pos > prePos ? (maxWidthCol[pos] + self.options.space + getXY(preItem).x) : getXY(preItem).x) + \",\" + (pos > prePos ? self.options.margin[0] : getXY(preItem).y + getSize(preItem).height + self.options.space) + \")\";\r\n                    }\r\n                    else\r\n                        return \"translate(\" + self.options.margin[3] + \",\" + self.options.margin[0] + \")\";\r\n                });\r\n            } else if (self.options.position == \"right\") {\r\n                self.item.attr(\"transform\", function(d, i) {\r\n                    var pos = Math.floor(i / numItemsCol);\r\n                    if (i > 0) {\r\n                        var prePos = Math.floor((i - 1) / numItemsCol);\r\n                        var item  = items[i];\r\n                        var preItem  = items[i - 1];\r\n                        return \"translate(\" + (pos > prePos ? (getXY(preItem).x - self.options.space - maxWidthCol[pos]) : getXY(preItem).x) + \",\" + (pos > prePos ? self.options.margin[0] : getXY(preItem).y + getSize(preItem).height + self.options.space) + \")\";\r\n                    }\r\n                    else\r\n                        return \"translate(\" + (self.maxWidth - self.options.margin[3] - maxWidthCol[pos]) + \",\" + self.options.margin[0] + \")\";\r\n                });\r\n            } else {\r\n                self.item.attr(\"transform\", function(d, i) {\r\n                    if (i > 0) {\r\n                        var item  = items[i];\r\n                        var preItem  = items[i - 1];\r\n                        var newR = Math.floor((getXY(preItem).x + getSize(preItem).width + self.options.space + getSize(item).width + self.options.margin[1]) / self.maxWidth);\r\n                        if (newR > 0) r++;\r\n                        return \"translate(\" + (newR > 0 ? self.options.margin[3] : getXY(preItem).x + getSize(preItem).width + self.options.space) + \",\" + (self.options.margin[0] + r * (itemHeight + self.options.space)) + \")\";\r\n                    }\r\n                    else\r\n                        return \"translate(\" + self.options.margin[3] + \",\" + self.options.margin[0] + \")\";\r\n                });\r\n            }\r\n            \r\n            // if (self._legendBox && legendDomain.length > 0) {\r\n            //     var box = legendContainer[0][0].getBBox();\r\n            //     legendBox.attr(\"class\", \".c9-custom-legend.c9-custom-legend-box\")\r\n            //         .attr(\"x\", 0)\r\n            //         .attr(\"y\", 0)\r\n            //         .attr(\"width\", box.width + self._legendMargin[1] + self._legendMargin[3])\r\n            //         .attr(\"height\", box.height + self._legendMargin[2] + self._legendMargin[0])\r\n            //         .style(\"fill\", \"none\")\r\n            //         .style(\"stroke\", color);\r\n            // }\r\n        }\r\n    }\r\n\r\n    draw() {\r\n        var self = this;\r\n\r\n        self.update(self.chart.dataTarget);\r\n    }\r\n\r\n    /**\r\n     * Update interaction event dispatchers for legend\r\n     * For: Donut Chart, Pie Chart\r\n     */\r\n    updateInteractionForLineChart(chart) {\r\n\r\n        var self = this;\r\n\r\n        var hoverOptions        = chart.hover.options,\r\n            hoverEnable         = chart.hover.enable,\r\n            onMouseOverCallback = hoverOptions.onMouseOver.callback,\r\n            onMouseOutCallback  = hoverOptions.onMouseOut.callback,\r\n            onClickCallback     = chart.click.callback;\r\n\r\n        self.itemEventFactory = {\r\n\r\n            'click': function(item) {\r\n                if (Helper.isFunction(onClickCallback)) {\r\n                    onClickCallback.call(this, item);\r\n                }\r\n\r\n                var selector = d3.select(this);\r\n                var enable = true,\r\n                    dataSet = self.data;\r\n                var totalEnable = d3.sum(dataSet.map(function(d) {\r\n                    return (d.enable) ? 1 : 0;\r\n                }));\r\n\r\n                // Add pointer to cursor\r\n                // selector.style('cursor', 'pointer');\r\n\r\n                // If current selector is disabled, then turn it on back\r\n                // Else, set enable to false\r\n                if (selector.attr('data-enable') == 'false') {\r\n                    selector.attr('data-enable', true);\r\n                    selector.style('opacity', '1');\r\n                } else {\r\n                    if (totalEnable < 2) return;\r\n                    selector.attr('data-enable', false);\r\n                    selector.style('opacity', '0.1');\r\n                    enable = false;\r\n                }\r\n\r\n                // update line\r\n                var newData = [];\r\n                chart.dataTarget.forEach(function(_data) {\r\n                    if (_data['data-ref'] == item['data-ref']) _data.enable = enable;\r\n                    if (_data.enable) newData.push(_data);\r\n                });\r\n\r\n                chart.updateDomain(newData);\r\n                chart.axis.update(chart.x, chart.y, 750);\r\n                chart.update(newData);\r\n\r\n                // Update subchart\r\n                if (chart.options.subchart.show) {\r\n                    chart.subChartX.domain(chart.x.domain());\r\n                    chart.subChartY.domain(chart.y.domain());\r\n                    chart.svg.select('.c9-subchart-custom .c9-subchart-axis').transition().duration(750).call(chart.subChartXAxis);\r\n                    chart.updateSubChart(newData);\r\n                }\r\n            },\r\n\r\n            'mouseover': function(item) {\r\n                if (Helper.isFunction(onMouseOverCallback)) {\r\n                    onMouseOverCallback.call(this, item);\r\n                }\r\n\r\n                var legendSelector = d3.select(this);\r\n\r\n                // Add pointer to cursor and make it lighten\r\n                // legendSelector.style('cursor', 'pointer');\r\n                self.lightenLegendItem(legendSelector);\r\n            },\r\n\r\n            'mouseout': function(item) {\r\n                if (Helper.isFunction(onMouseOutCallback)) {\r\n                    onMouseOutCallback.call(this, item);\r\n                }\r\n\r\n                var legendSelector = d3.select(this);\r\n\r\n                // Add pointer to cursor\r\n                // legendSelector.style('cursor', 'pointer');\r\n                self.normalizeLegendItem(legendSelector);\r\n            }\r\n        \r\n        };\r\n\r\n        if (self.options.show) {\r\n            self.item.on(self.itemEventFactory);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Update interaction event dispatchers for legend\r\n     * For: Donut Chart, Pie Chart\r\n     */\r\n    updateInteractionForDonutPieChart(chart, path, pie, currentData, arc) {\r\n\r\n        var self = this;\r\n\r\n        var hoverOptions        = chart.hover.options,\r\n            hoverEnable         = chart.hover.enable,\r\n            onMouseOverCallback = hoverOptions.onMouseOver.callback,\r\n            onMouseOutCallback  = hoverOptions.onMouseOut.callback,\r\n            onClickCallback     = chart.click.callback;\r\n\r\n        var chartType = chart.chartType;\r\n\r\n        var chartInnerBefore    = chartType == 'pie' ?  0 : chart.options.innerRadius,\r\n            chartOuterBefore    = chartType == 'pie' ?  chart.options.radius : chart.options.outerRadius,\r\n            chartInnerAfter     = chartType == 'pie' ?  0 : chart.options.innerRadius,\r\n            chartOuterAfter     = chartType == 'pie' ?  chart.options.radius * 1.2 : chart.options.outerRadius * 1.2;\r\n\r\n        self.itemEventFactory = {\r\n\r\n            'click': function(item) {\r\n                if (Helper.isFunction(onClickCallback)) {\r\n                    onClickCallback.call(this, item);\r\n                }\r\n\r\n                var selector = d3.select(this);\r\n                var enable = true,\r\n                    dataSet = self.data;\r\n                var totalEnable = d3.sum(dataSet.map(function(d) {\r\n                    return (d.enable) ? 1 : 0;\r\n                }));\r\n\r\n                // Add pointer to cursor\r\n                // selector.style('cursor', 'pointer');\r\n\r\n                // If current selector is disabled, then turn it on back\r\n                // Else, set enable to false\r\n                if (selector.attr('data-enable') == 'false') {\r\n                    selector.attr('data-enable', true);\r\n                    selector.attr('opacity', '1.0');\r\n                } else {\r\n                    if (totalEnable < 2) return;\r\n                    selector.attr('data-enable', false);\r\n                    selector.attr('opacity', '0.1');\r\n                    enable = false;\r\n                }\r\n\r\n                /*----------  Reset opacity after click  ----------*/\r\n                \r\n                self.item.each(function() {\r\n                    if (d3.select(this).attr('data-ref') !== item['data-ref'] && d3.select(this).attr('data-enable') == 'true') {\r\n                        d3.select(this).attr('opacity', '1.0');\r\n                    }\r\n                });\r\n\r\n                chart.selectAllPath().each(function(){\r\n                    if (d3.select(this).attr('data-ref') !== item['data-ref']) {\r\n                        d3.select(this).attr('opacity', '1.0');\r\n                    }\r\n                });\r\n                /*----------  End Reset opacity after click  ----------*/\r\n                \r\n\r\n                chart.pie.value(function(d) {\r\n                    if (d[\"data-ref\"] == item[\"data-ref\"]) d.enable = enable;\r\n                    return (d.enable) ? d.value : 0;\r\n                });\r\n\r\n                path = path.data(chart.pie(dataSet));\r\n\r\n                path.transition()\r\n                    .duration(500)\r\n                    .attrTween('d', function(d) {\r\n                        var interpolate = d3.interpolate(chart.currentData, d);\r\n                        // Returns an interpolator between the two arbitrary values a and b. \r\n                        // The interpolator implementation is based on the type of the end value b.\r\n                        chart.currentData = interpolate(0);\r\n                        return function(t) {\r\n                            return arc(interpolate(t));\r\n                        };\r\n                    })\r\n                    // Remove stroke when re-draw arcs to avoid duplicate strokes\r\n                    .attr('stroke', 'none');;\r\n                \r\n            },\r\n\r\n            'mouseover': function(item) {\r\n                if (Helper.isFunction(onMouseOverCallback)) {\r\n                    onMouseOverCallback.call(this, item);\r\n                }\r\n\r\n                var legendSelector = d3.select(this);\r\n                // Add pointer to cursor\r\n                // legendSelector.style('cursor', 'pointer');\r\n                self.lightenLegendItem(legendSelector);\r\n\r\n                if (legendSelector.attr('data-enable')) {\r\n                    // For Legend\r\n                    self.item.each(function() {\r\n                        if (d3.select(this).attr('data-ref') !== item['data-ref'] && d3.select(this).attr('data-enable')) {\r\n                            d3.select(this).attr('opacity', '0.3');\r\n                        }\r\n                    });\r\n\r\n                    // For Chart\r\n                    chart.selectAllPath().each(function(){\r\n                        if (d3.select(this).attr('data-ref') !== item['data-ref']) {\r\n                            d3.select(this).attr('opacity', '0.3');\r\n                        }\r\n                    });\r\n\r\n                    var selector = d3.select(\"path[data-ref='\" + item['data-ref'] + \"']\");\r\n\r\n                    selector\r\n                        .transition()\r\n                            .duration(500)\r\n                            .ease('bounce')\r\n                            .attr('d', d3.svg.arc()\r\n                                .innerRadius(chartInnerAfter)\r\n                                .outerRadius(chartOuterAfter)\r\n                            );\r\n                }\r\n\r\n                \r\n\r\n            },\r\n\r\n            'mouseout': function(item) {\r\n                if (Helper.isFunction(onMouseOutCallback)) {\r\n                    onMouseOutCallback.call(this, item);\r\n                }\r\n\r\n                var legendSelector = d3.select(this);\r\n                // Add pointer to cursor\r\n                // legendSelector.style('cursor', 'pointer');\r\n                self.normalizeLegendItem(legendSelector);\r\n\r\n                // if (legendSelector.attr('data-enable') == 'true') {\r\n                    // For Legend\r\n                    self.item.each(function() {\r\n                        if (d3.select(this).attr('data-ref') !== item['data-ref'] && d3.select(this).attr('data-enable')) {\r\n                            d3.select(this).attr('opacity', '1.0');\r\n                        }\r\n                    });\r\n\r\n                    // For Chart\r\n                    chart.selectAllPath().each(function(){\r\n                        if (d3.select(this).attr('data-ref') !== item['data-ref']) {\r\n                            d3.select(this).attr('opacity', '1.0');\r\n                        }\r\n                    });\r\n\r\n                    var selector = d3.select(\"path[data-ref='\" + item['data-ref'] + \"']\");\r\n\r\n                    selector\r\n                        .transition()\r\n                            .duration(500)\r\n                            .ease('bounce')\r\n                            .attr('d', d3.svg.arc()\r\n                                .innerRadius(chartInnerBefore)\r\n                                .outerRadius(chartOuterBefore)\r\n                            );\r\n                // }\r\n\r\n            }\r\n        \r\n        };\r\n\r\n        if (self.options.show)\r\n            self.item.on(self.itemEventFactory);\r\n    }\r\n\r\n    /**\r\n     * Update interaction for barchart\r\n     * @param  {[type]} chart       [description]\r\n     * @return {[type]}             [description]\r\n     */\r\n    updateInteractionForBarChart(chart) {\r\n\r\n        var self = this;\r\n\r\n        var hoverOptions        = chart.hover.options,\r\n            hoverEnable         = chart.hover.enable,\r\n            onMouseOverCallback = hoverOptions.onMouseOver.callback,\r\n            onMouseOutCallback  = hoverOptions.onMouseOut.callback,\r\n            onClickCallback     = chart.click.callback;\r\n\r\n        self.itemEventFactory = {\r\n\r\n            'click': function(item) {\r\n                if (Helper.isFunction(onClickCallback)) {\r\n                    onClickCallback.call(this, item);\r\n                }\r\n\r\n                var selector = d3.select(this);\r\n                var enable = true,\r\n                    dataBackup = chart.dataTarget,\r\n                    dataSet = self.data;\r\n                var totalEnable = d3.sum(dataSet.map(function(d) {\r\n                    return (d.enable) ? 1 : 0;\r\n                }));\r\n\r\n                var enableSet = [];\r\n                var enableSetOld = [];\r\n                var data = [];\r\n                // Add pointer to cursor\r\n                // selector.style('cursor', 'pointer');\r\n\r\n                // If current selector is disabled, then turn it on back\r\n                // Else, set enable to false\r\n                if (selector.attr('data-enable') == 'false') {\r\n                    selector.attr('data-enable', 'true');\r\n                    selector.style('opacity', '1.0');\r\n                } else {\r\n                    if (totalEnable < 2) return;\r\n                    selector.attr('data-enable', 'false');\r\n                    selector.style('opacity', '0.1');\r\n                    enable = false;\r\n                }\r\n\r\n                //set current data for legend\r\n                self.data.forEach(function(d, i) {\r\n                    if (d.enable)\r\n                        enableSetOld.push(d.group);\r\n                    if (d.group == item.group)\r\n                        d.enable = enable;\r\n                    if (d.enable)\r\n                        enableSet.push(d.group);\r\n                });\r\n\r\n                dataBackup.forEach(function (d){\r\n                    var negElement = [];\r\n                    var posElement = [];\r\n                    d.forEach(function (s){\r\n                        enableSet.forEach(function (e, i) {\r\n                            if (e == s.group) {\r\n                                if (s.y0 < 0) negElement.push({e: s, s: i});\r\n                                else posElement.push({e: s, s: i})\r\n                            }\r\n                        });\r\n                    });\r\n                    if (!chart.isGroup) {\r\n                        if (negElement.length > 0) {\r\n                            if (negElement[0].e.y1 < 0) negElement[0].e.y1 = 0;\r\n                            for (var i = 1; i < negElement.length; i++) {\r\n                                negElement[i].e.y1 = negElement[i-1].e.y1 + negElement[i-1].e.y0;\r\n                            };\r\n                        }\r\n                        if (posElement.length > 0) {\r\n                            if (posElement[0].e.y1 - posElement[0].e.y0 != 0) posElement[0].e.y1 = posElement[0].e.y0;\r\n                            for (var i = 1; i < posElement.length; i++) {\r\n                                posElement[i].e.y1 = posElement[i-1].e.y1 + posElement[i].e.y0;\r\n                            };\r\n                        }\r\n                    }\r\n                    var element = new Array(negElement.length + posElement.length);\r\n                    for (var i = 0; i < negElement.length; i++) {\r\n                        element[negElement[i].s] = negElement[i].e;\r\n                    };\r\n                    for (var i = 0; i < posElement.length; i++) {\r\n                        element[posElement[i].s] = posElement[i].e;\r\n                    };\r\n                    data.push(element);\r\n                });\r\n\r\n                chart.updateLegendInteraction(data, enableSet, enableSetOld, item.group);\r\n                \r\n            },\r\n\r\n            'mouseover': function(item) {\r\n                var selector = d3.select(this);\r\n                // selector.style('cursor', 'pointer');\r\n                self.lightenLegendItem(selector);\r\n\r\n                if (selector.attr('data-enable') == 'true')\r\n                    d3.selectAll('.c9-custom-bar>.c9-custom-rect')\r\n                        .filter(function (d){ return d['group-ref'] != item['group-ref']; })\r\n                        .attr('opacity', 0.3);\r\n            },\r\n\r\n            'mouseout': function(item) {\r\n                var selector = d3.select(this);\r\n                // selector.style('cursor', 'pointer');\r\n                self.normalizeLegendItem(selector);\r\n\r\n                d3.selectAll('.c9-custom-bar>.c9-custom-rect')\r\n                    .filter(function (d){ return d['group-ref'] != item['group-ref']; })\r\n                    .attr('opacity', 1);\r\n            }\r\n        \r\n        };\r\n        if (self.options.show)\r\n            self.item.on(self.itemEventFactory);\r\n    }\r\n\r\n    lightenLegendItem(item) {\r\n        var self = this;\r\n\r\n        item.select('.c9-custom-legend-rect').attr('fill', function(d){ return Helper.shadeColor(0.5, d.color || d[0].color); });\r\n        item.select('.c9-custom-legend-text').style('fill', function(d){ return Helper.shadeColor(-0.5, self.options.fontColor); });\r\n    }\r\n\r\n    normalizeLegendItem(item) {\r\n        var self = this;\r\n\r\n        item.select('.c9-custom-legend-rect').attr('fill', function(d){ return d.color || d[0].color; });\r\n        item.select('.c9-custom-legend-text').style('fill', function(d){ return self.options.fontColor; });\r\n    }\r\n    /*=====  End of Main Functions  ======*/\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/utils/C9.Legend.js\n **/","import Helper from '../../helper/C9.Helper';\r\n\r\nexport default class Table {\r\n    constructor(options, chart) {\r\n        var self = this;\r\n\r\n        var config = {\r\n            container: \"body\",\r\n            show: false,\r\n            headings: [\"Name\", \"Value\"],\r\n            style: \"stripe\", // || \"stripe\"\r\n            serial: true,\r\n            hover: {\r\n                enable: true,\r\n                callback: null\r\n            },\r\n            click: {\r\n                enable: true,\r\n                callback: null\r\n            }\r\n        };\r\n\r\n\r\n        self._options   = options;\r\n        self._chart     = chart;\r\n\r\n        self.updateConfig(config);\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    get data() {\r\n        return this._data;\r\n    }\r\n\r\n    get chart() {\r\n        return this._chart;\r\n    }\r\n\r\n    get options() {\r\n        return this._options;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    set data(arg) {\r\n        if (arg) {\r\n            this._data = arg;\r\n        }\r\n    }\r\n\r\n    set chart(arg) {\r\n        if (arg) {\r\n            this._chart = arg;\r\n        }\r\n    }\r\n\r\n    set options(arg) {\r\n        if (arg) {\r\n            this._options = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n\r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    updateConfig(config) {\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n    }\r\n\r\n    update(data) {\r\n        var self = this;\r\n\r\n        if (self.chart.chartType == \"bar\" || self.chart.chartType == \"line\") {\r\n            //headings\r\n            if (self.options.headings.length < 3 && !data[0].value && data[0][0][\"group-ref\"] != undefined) \r\n                self.options.headings.push(\"Group\");\r\n\r\n            //data\r\n            self.data = [];\r\n            data.forEach(function(d) {\r\n                (Helper.isArray(d) ? d : d.value).forEach(function(b) {\r\n                    self.data.push(b);\r\n                })\r\n            });\r\n        } else {\r\n            self.data = data;\r\n        }\r\n\r\n        if (self.options.show) {\r\n            d3.selectAll('.c9-table').remove();\r\n            d3.selectAll('.c9-table-container').remove();\r\n\r\n            var headTbl = d3.select(self.options.container)\r\n                            .append(\"table\")\r\n                                .attr('class', 'c9-table c9-table-header'),\r\n                thead = headTbl.append(\"thead\"),\r\n                bodyTbl = d3.select(self.options.container)\r\n                                .append(\"div\")\r\n                                .attr('class', 'c9-table-container')\r\n                                    .append(\"table\")\r\n                                    .attr('class', function() {\r\n                                        return self.getTableStyle();\r\n                                    }),\r\n                tbody = bodyTbl.append(\"tbody\");\r\n\r\n            // Append serial no heading\r\n            // Bind each statistic to a line of the table\r\n            // Show serial no.\r\n            var hRows = thead.append(\"tr\");\r\n\r\n            if (self.options.serial) {\r\n                hRows.append(\"th\")\r\n                    .text(\"#\");\r\n            }\r\n\r\n            hRows.selectAll(\"thead\")\r\n                .data(self.options.headings)\r\n                .enter()\r\n                .append(\"th\")\r\n                    .text(function(d) {\r\n                        return d;\r\n                    });\r\n\r\n            // Bind each statistic to a line of the table\r\n            // Show serial no.\r\n            var bRows = tbody\r\n                .selectAll(\"tr\")\r\n                .data(self.data)\r\n                    .enter()\r\n                        .append(\"tr\")\r\n                        .attr(\"data-ref\", function (d){ return d[\"data-ref\"] });\r\n\r\n            if (self.options.serial) {\r\n                bRows.append(\"td\")\r\n                    .text(function(d, i) {\r\n                        return i + 1;\r\n                    });\r\n            }\r\n\r\n            // Add statistic names to each row\r\n            bRows.append(\"td\")\r\n                    .text(function(d) {\r\n                        return d.name;\r\n                    });\r\n\r\n            // Add values to each row\r\n            bRows.append(\"td\")\r\n                    .text(function(d) {\r\n                        return d.value || d.y0 || d.valueY;\r\n                    });\r\n\r\n            // Add group if chart is bar chart\r\n            if (self.chart.chartType == \"bar\")\r\n                bRows.append(\"td\")\r\n                        .text(function(d) {\r\n                            return d.group;\r\n                        });\r\n\r\n        }\r\n    }\r\n\r\n    draw() {\r\n        var self = this;\r\n\r\n        self.update(self.chart.dataTarget);\r\n    }\r\n\r\n    updateInteractionForBarChart(chart) {\r\n\r\n        var self = this;\r\n\r\n        var hoverOptions        = chart.hover.options,\r\n            hoverEnable         = chart.hover.enable,\r\n            onMouseOverCallback = hoverOptions.onMouseOver.callback,\r\n            onMouseOutCallback  = hoverOptions.onMouseOut.callback,\r\n            onClickCallback     = chart.click.callback;\r\n\r\n        self.itemEventFactory = {\r\n\r\n            'click': function(item) {\r\n                if (Helper.isFunction(onClickCallback)) {\r\n                    onClickCallback.call(this, item);\r\n                }\r\n                \r\n            },\r\n\r\n            'mouseover': function(item) {\r\n                if (!item) return;\r\n\r\n                var selector = d3.select(this);\r\n                selector.style('cursor', 'pointer');\r\n                // if (selector.attr('data-enable') == 'true')\r\n                    d3.selectAll('.c9-custom-bar>.c9-custom-rect')\r\n                        .filter(function (d){ return d['data-ref'] != item['data-ref']; })\r\n                        .attr('opacity', 0.3);\r\n            },\r\n\r\n            'mouseout': function(item) {\r\n                if (!item) return;\r\n                d3.select(this).style('cursor', 'pointer');\r\n                d3.selectAll('.c9-custom-bar>.c9-custom-rect')\r\n                    .filter(function (d){ return d['data-ref'] != item['data-ref']; })\r\n                    .attr('opacity', 1);\r\n            }\r\n        \r\n        };\r\n        if (self.options.show)\r\n            self.selectAllRow().on(self.itemEventFactory);\r\n    }\r\n\r\n    updateInteractionForDonutPieChart(chart) {\r\n\r\n        var self = this;\r\n\r\n        var hoverOptions        = chart.hover.options,\r\n            hoverEnable         = chart.hover.enable,\r\n            onMouseOverCallback = hoverOptions.onMouseOver.callback,\r\n            onMouseOutCallback  = hoverOptions.onMouseOut.callback,\r\n            onClickCallback     = chart.click.callback;\r\n\r\n        var chartType = chart.chartType;\r\n\r\n        var chartInnerBefore    = chartType == 'pie' ?  0 : chart.options.innerRadius,\r\n            chartOuterBefore    = chartType == 'pie' ?  chart.options.radius : chart.options.outerRadius,\r\n            chartInnerAfter     = chartType == 'pie' ?  0 : chart.options.innerRadius,\r\n            chartOuterAfter     = chartType == 'pie' ?  chart.options.radius * 1.2 : chart.options.outerRadius * 1.2;\r\n        self.itemEventFactory = {\r\n\r\n            'click': function(item) {\r\n                if (Helper.isFunction(onClickCallback)) {\r\n                    onClickCallback.call(this, item);\r\n                }\r\n\r\n            },\r\n\r\n            'mouseover': function(item) {\r\n                if (!item)\r\n                    return;\r\n\r\n                if (Helper.isFunction(onMouseOverCallback)) {\r\n                    onMouseOverCallback.call(this, item);\r\n                }\r\n\r\n                var legendSelector = d3.select(this);\r\n                // Add pointer to cursor\r\n                legendSelector.style('cursor', 'pointer');\r\n                // if (legendSelector.attr('enable') == 'true') {\r\n\r\n                    // For Chart\r\n                    chart.selectAllPath().each(function(){\r\n                        if (d3.select(this).attr('data-ref') !== item['data-ref']) {\r\n                            d3.select(this).attr('opacity', '0.3');\r\n                        }\r\n                    });\r\n\r\n                    var selector = d3.select(\"path[data-ref='\" + item['data-ref'] + \"']\");\r\n\r\n                    selector\r\n                        .transition()\r\n                            .duration(500)\r\n                            .ease('bounce')\r\n                            .attr('d', d3.svg.arc()\r\n                                .innerRadius(chartInnerAfter)\r\n                                .outerRadius(chartOuterAfter)\r\n                            );\r\n                // }\r\n\r\n            },\r\n\r\n            'mouseout': function(item) {\r\n                if (!item)\r\n                    return;\r\n                \r\n                if (Helper.isFunction(onMouseOutCallback)) {\r\n                    onMouseOutCallback.call(this, item);\r\n                }\r\n\r\n                var legendSelector = d3.select(this);\r\n                // Add pointer to cursor\r\n                legendSelector.style('cursor', 'pointer');\r\n\r\n                chart.selectAllPath().each(function(){\r\n                    if (d3.select(this).attr('data-ref') !== item['data-ref']) {\r\n                        d3.select(this).attr('opacity', '1.0');\r\n                    }\r\n                });\r\n\r\n                var selector = d3.select(\"path[data-ref='\" + item['data-ref'] + \"']\");\r\n\r\n                selector\r\n                    .transition()\r\n                        .duration(500)\r\n                        .ease('bounce')\r\n                        .attr('d', d3.svg.arc()\r\n                            .innerRadius(chartInnerBefore)\r\n                            .outerRadius(chartOuterBefore)\r\n                        );\r\n            }\r\n        \r\n        };\r\n\r\n        if (self.options.show)\r\n            self.selectAllRow().on(self.itemEventFactory);\r\n    }\r\n\r\n    selectAllRow(){\r\n        return d3.selectAll(\".c9-table tr\");\r\n    }\r\n\r\n    getTableStyle() {\r\n        var self = this;\r\n\r\n        if (self.options.style === 'default') {\r\n            return 'c9-table c9-table-body';\r\n        } else if (self.options.style === 'stripe') {\r\n            return 'c9-table c9-table-body c9-stripe';\r\n        }\r\n    }\r\n    /*=====  End of Main Functions  ======*/\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/utils/C9.Table.js\n **/","import Helper from '../../helper/C9.Helper';\r\n\r\nexport default class Tooltip {\r\n    constructor(options) {\r\n        var self = this;\r\n\r\n        var config = {\r\n            show: true,\r\n            position: 'left', // [top, right, bottom, left]\r\n            backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n            fontColor: '#fff',\r\n            fontSize: '11px',\r\n            format: null\r\n        };\r\n\r\n        self._options           = options;\r\n\r\n        self.updateConfig(config);\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    get format() {\r\n        return this._format;\r\n    }\r\n\r\n    get eventFactory() {\r\n        return this._eventFactory;\r\n    }\r\n\r\n    get options() {\r\n        return this._options;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    set format(arg) {\r\n        if (arg) {\r\n            this._format = arg;\r\n        }\r\n    }\r\n\r\n    set eventFactory(arg) {\r\n        if (arg) {\r\n            this._eventFactory = arg;\r\n        }\r\n    }\r\n\r\n    set options(arg) {\r\n        if (arg) {\r\n            this._options = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n\r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    updateConfig(config) {\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n    }\r\n\r\n    /**\r\n     * Draw Tooltip\r\n     */\r\n    draw(data, chart, eventType) {\r\n        var self = this;\r\n\r\n        var format = self.format;\r\n\r\n        // First of all, remove all exisiting tooltips\r\n        d3.select(chart.id).selectAll('.c9-custom-tooltip-container').remove();\r\n\r\n        var selector = d3.select(chart.id);\r\n\r\n        // TODO: Add margin to tooltip configs\r\n        // Default: (100, 100) relative to mouse coordinate and chart margin transformation\r\n        var divOnHover = selector.append('div')\r\n                            .attr('class', function() { \r\n                                return 'c9-custom-tooltip-container ' + self.getTriangleClass(); \r\n                            })\r\n                            // .attr(\"transform\", function() { return 'translate(' + (d3.mouse(this)[0] - 100) +\",\"+ (d3.mouse(this)[1] - 100) + ')'; })\r\n                            .style('display', 'none')\r\n                            .style('position', 'absolute')\r\n                            .style('pointer-events', 'all')\r\n                            .style('background-color', self.options.backgroundColor)\r\n                            .style('color', self.options.fontColor)\r\n                            .style('font-size', self.options.fontSize);\r\n                            // .style('width', '100px')\r\n                            // .style('height', '50px')\r\n                            // .html(function() {\r\n                            //     return self.getFormatByChartType(chart, data);\r\n                            // });\r\n\r\n        self.eventFactory = {\r\n\r\n            'mouseover': function(_data) {\r\n                divOnHover\r\n                    .html(function() {\r\n                        return self.getFormatByChartType(chart, _data);\r\n                    })\r\n                    .transition()\r\n                    // .style('left', function() {return d3.mouse(this)[0] + 'px';})\r\n                    .style('left', function() {\r\n                        return self.getCoordinate(chart)['left'];\r\n                    })\r\n                    // .style('top', function() {return d3.mouse(this)[1]  + 'px';})\r\n                    .style('top', function() {\r\n                        return self.getCoordinate(chart)['top'];\r\n                    })\r\n                    .duration(200)\r\n                    .style(\"display\", 'block')\r\n                    .style('pointer-events', 'none');\r\n            },\r\n\r\n            'mousemove': function(_data) {\r\n                divOnHover\r\n                    .html(function() {\r\n                        return self.getFormatByChartType(chart, _data);\r\n                    })\r\n                    .transition()\r\n                    // .style('left', function() {return d3.mouse(this)[0] + 'px';})\r\n                    .style('left', function() {\r\n                        return self.getCoordinate(chart)['left'];\r\n                    })\r\n                    // .style('top', function() {return d3.mouse(this)[1]  + 'px';})\r\n                    .style('top', function() {\r\n                        return self.getCoordinate(chart)['top'];\r\n                    })\r\n                    .duration(200)\r\n                    .style(\"display\", 'block')\r\n                    .style('pointer-events', 'none');\r\n            },\r\n\r\n            'mouseout': function(_data) {\r\n                divOnHover\r\n                    .transition()\r\n                    .duration(200)      \r\n                    .style('display', 'none');\r\n\r\n            }\r\n\r\n        };\r\n\r\n        if (self.options.show) {\r\n\r\n            switch(eventType) {\r\n                case 'mouseover':\r\n                    self.eventFactory.mouseover(data);\r\n                    break;\r\n                case 'mouseout':\r\n                    self.eventFactory.mouseout(data);\r\n                    break;\r\n                case 'mousemove':\r\n                    self.eventFactory.mousemove(data);\r\n                    break;\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    getTriangleClass() {\r\n        var self = this;\r\n        let r ;\r\n\r\n        switch(self.options.position) {\r\n            case 'top':\r\n                r = 'c9-tooltip-top';\r\n                break;\r\n            case 'right':\r\n                r = 'c9-tooltip-right';\r\n                break;\r\n            case 'bottom':\r\n                r = 'c9-tooltip-bottom';\r\n                break;\r\n            case 'left':\r\n                r = 'c9-tooltip-left';\r\n                break;\r\n        }\r\n        return r;\r\n    }\r\n\r\n    setDefaultFormatByChartType(chart, data) {\r\n        // if (Helper.isEmpty(data)) { console.log(data);return false;}\r\n        var self = this;\r\n\r\n        let chartType = chart.chartType, format;\r\n\r\n        switch(chartType) {\r\n            case 'bar':\r\n                format = function(data) {\r\n                    return '<strong>' + data.name + '</strong>' + '<br><span>' + data.value + '</span>'\r\n                };\r\n                break;\r\n            case 'pie':\r\n                format = function(data) {\r\n                    return '<strong>' + data.data.name + '</strong>' + '<br><span>' + data.data.value + '</span>' \r\n                };\r\n                break;\r\n            case 'donut':\r\n                format = function(data) {\r\n                    return '<strong>' + data.data.name + '</strong>' + '<br><span>' + data.data.value + '</span>' \r\n                };\r\n                break;\r\n            case 'line':\r\n                format = function(data) {\r\n                    let _format = '';\r\n                    data.forEach(function(d, i){\r\n                        _format += '<strong>' + d.name + '</strong>' + '<br><span> Value X: ' + d.valueX + '</span>' + '<br><span> Value Y: ' + d.valueY + '</span><br>';    \r\n                    });\r\n                    return _format;\r\n                };\r\n                break;\r\n            case 'timeline':\r\n                format = function(data) {\r\n                    return '<strong>' + data.name + '</strong>' + '<br><span> Start at: ' + data.start + '</span><br><span> End at: ' + data.end + '</span>' \r\n                };\r\n                break;\r\n        }\r\n\r\n        // Update format for tooltip based on chart type\r\n        self.format     = self.options.format || format;\r\n        // console.log(self.format);\r\n    }\r\n\r\n    getCoordinate(chart) {\r\n        var self = this;\r\n        let r ;\r\n\r\n        var offset = self.getOffset(d3.select(chart.id)[0][0]);\r\n\r\n        switch(self.options.position) {\r\n            case 'top':\r\n                r = {\r\n                    'left': (d3.event.pageX - offset.left - 50) + 'px',\r\n                    'top': (d3.event.pageY - offset.top - 50) + 'px'\r\n                };\r\n                break;\r\n            case 'right':\r\n                r = {\r\n                    'left': (d3.event.pageX - offset.left - 50) + 'px',\r\n                    'top': (d3.event.pageY - offset.top - 50) + 'px'\r\n                };\r\n                break;\r\n            case 'bottom':\r\n                r = {\r\n                    'left': (d3.event.pageX - offset.left - 50) + 'px',\r\n                    'top': (d3.event.pageY - offset.top + 50) + 'px'\r\n                };\r\n                break;\r\n            case 'left':\r\n                r = {\r\n                    'left': (d3.event.pageX - offset.left + 50) + 'px',\r\n                    'top': (d3.event.pageY - offset.top - 50) + 'px'\r\n                };\r\n                break;\r\n        }\r\n        return r;\r\n    }\r\n\r\n    getOffset(elem) {\r\n        var box = { top: 0, left: 0 };\r\n\r\n        // BlackBerry 5, iOS 3 (original iPhone)\r\n        if ( typeof elem.getBoundingClientRect !== undefined ) {\r\n          box = elem.getBoundingClientRect();\r\n        }\r\n\r\n        return {\r\n          top: box.top  + ( window.pageYOffset || elem.scrollTop )  - ( elem.clientTop  || 0 ),\r\n          left: box.left + ( window.pageXOffset || elem.scrollLeft ) - ( elem.clientLeft || 0 )\r\n        };\r\n    }\r\n\r\n    getFormatByChartType(chart, data) {\r\n        var self = this;\r\n\r\n        self.setDefaultFormatByChartType(chart, data);\r\n\r\n        let r = self.format(data);\r\n\r\n        return r;\r\n    }\r\n    /*=====  End of Main Functions  ======*/\r\n\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/utils/C9.Tooltip.js\n **/","import Helper from './C9.Helper';\r\n\r\nexport default class DataAdapter {\r\n\r\n    constructor(options) {\r\n\r\n        var self = this;\r\n\r\n        var config = {\r\n            // ALL OPTIONS AVAILABLE IN DATA CONFIG\r\n            keys: {\r\n                name: \"name\",\r\n                value: \"value\",\r\n                x: \"value.x\",\r\n                y: \"value\",\r\n                coor: \"coor\"\r\n            },\r\n            groups: [],\r\n            stacks: [],\r\n            timeFormat: false,\r\n\r\n            // NO NEED TO ADD TO DATA OPTIONS\r\n            // Just use to define default parameters\r\n            colorRange: null,\r\n        };\r\n\r\n        self._keys      = Helper.merge(options.keys, config.keys);\r\n        self._groups    = options.groups    || config.groups;\r\n        self._stacks    = options.stacks    || config.stacks;\r\n        self._timeFormat    = options.timeFormat    || config.timeFormat;\r\n        self._colorRange= options.colorRange|| config.colorRange;\r\n\r\n        self._dataSource = null;\r\n        self._dataTarget = []; // Initialize new Array to use Array methods\r\n        self._dataRefs = [];\r\n        self.initDataSource(options);\r\n\r\n\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    get keys() {\r\n        return this._keys;\r\n    }\r\n\r\n    get dataSource() {\r\n        return this._dataSource;\r\n    }\r\n\r\n    get dataTarget() {\r\n        return this._dataTarget;\r\n    }\r\n\r\n    get groups() {\r\n        return this._groups;\r\n    }\r\n\r\n    get stacks() {\r\n        return this._stacks;\r\n    }\r\n\r\n    get colorRange() {\r\n        return this._colorRange;\r\n    }\r\n\r\n    get timeFormat() {\r\n        return this._timeFormat;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    set keys(arg) {\r\n        if (arg) {\r\n            this._keys = arg;\r\n        }\r\n    }\r\n\r\n    set dataSource(arg) {\r\n        if (arg) {\r\n            this._dataSource = arg;\r\n        }\r\n    }\r\n\r\n    set dataTarget(arg) {\r\n        if (arg) {\r\n            this._dataTarget = arg;\r\n        }\r\n    }\r\n\r\n    set groups(arg) {\r\n        if (arg) {\r\n            this._groups = arg;\r\n        }\r\n    }\r\n\r\n    set stacks(arg) {\r\n        if (arg) {\r\n            this._stacks = arg;\r\n        }\r\n    }\r\n\r\n    set colorRange(arg) {\r\n        if (arg) {\r\n            this._colorRange = arg;\r\n        }\r\n    }\r\n\r\n    set timeFormat(arg) {\r\n        if (arg) {\r\n            this._timeFormat = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n\r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    initDataSource(options) {\r\n        var self = this;\r\n\r\n        if (self.hasPlainData(options)) {\r\n            self.executePlainData(options);\r\n        } else if (self.hasFile(options)) {\r\n            self.executeFile(options);\r\n        }\r\n    }\r\n\r\n    hasPlainData(options) {\r\n        // return options.plain && Helper.isArray(options.plain);\r\n        return options.plain; // fix for map\r\n    }\r\n\r\n    hasFile(options) {\r\n        return options.file && Helper.isObject(options.file);\r\n    }\r\n\r\n    executePlainData(options) {\r\n        var self = this;\r\n\r\n        self._dataSource = options.plain;\r\n    }\r\n\r\n    executeFile(options) {\r\n        var self = this;\r\n\r\n        self._file  = Helper.merge(options.file, config.file);\r\n\r\n        if (self._file && self._file.type) {\r\n\r\n            switch(self._file.type) {\r\n                case \"csv\":\r\n                    self._dataSource = self.getCsv();\r\n                    break;\r\n                case \"tsv\":\r\n                    self._dataSource = self.getTsv();\r\n                    break;\r\n                case \"text\":\r\n                    self._dataSource = self.getText();\r\n                    break;\r\n                case \"json\":\r\n                    self._dataSource = self.getJson();\r\n                    break;\r\n                case \"xml\":\r\n                    self._dataSource = self.getXml();\r\n                    break;\r\n                case \"xhr\":\r\n                    self._dataSource = self.getJson();\r\n                    break;\r\n                default:\r\n                    self._dataSource = self.getJson();\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    getDataTypeForBarChart() {\r\n        var self = this;\r\n\r\n        if (!Helper.isEmpty(self.groups) && Helper.isArray(self.groups) && self.groups.length !== 1) {\r\n            return \"group\";\r\n        } else if (!Helper.isEmpty(self.stacks) && Helper.isArray(self.stacks)) {\r\n            return \"stack\";\r\n        }\r\n\r\n        return \"single\";\r\n    }\r\n\r\n    getDataTarget(type) {\r\n        var self = this;\r\n\r\n        switch(type) {\r\n            case \"bar\":\r\n                return self.getDataTargetForBarChart();\r\n                break;\r\n\r\n            case \"line\":\r\n                return self.getDataTargetForLineChart();\r\n                break;\r\n\r\n            case \"pie\":\r\n                return self.getDataTargetForPieChart();\r\n                break;\r\n\r\n            case \"donut\":\r\n                return self.getDataTargetForDonutChart();\r\n                break;\r\n\r\n            case \"timeline\":\r\n                return self.getDataTargetForTimelineChart();\r\n                break;\r\n\r\n            case \"map\":\r\n                return self.getDataTargetForMap();\r\n                break;\r\n\r\n            default:\r\n                return self.dataSource;\r\n                break;\r\n        }\r\n    }\r\n\r\n    getName(v) {\r\n        return v.name; \r\n    }\r\n\r\n    getValue(v) {\r\n        var self = this;\r\n\r\n        return Helper.get(self.keys, v);\r\n    }\r\n\r\n    /*=====  End of Main Functions  ======*/\r\n\r\n    /*=================================================\r\n    =            Normalize Data For Charts            =\r\n    =================================================*/\r\n    getDataTargetForBarChart() {\r\n        var self = this;\r\n\r\n        switch(self.getDataTypeForBarChart()) {\r\n            case \"single\":\r\n                let color = self.colorRange;\r\n                let groups = self.groups;\r\n\r\n                self.dataSource.forEach(function(data, index) {\r\n                    let _data = [{\r\n                        \"name\" : Helper.get(self.keys.name, data),\r\n                        \"value\": Helper.get(self.keys.value, data),\r\n                        \"y0\" : Helper.get(self.keys.value, data),\r\n                        \"y1\" : Helper.get(self.keys.value, data),\r\n                        \"group\": groups[0] || 'data' + (1),\r\n                        \"data-ref\": Helper.guid(),\r\n                        \"enable\" : true,\r\n                        \"color\": color(0),\r\n                    }];\r\n                    self.dataTarget.push(_data);\r\n                });\r\n\r\n                return self.dataTarget;\r\n                break;\r\n\r\n            case \"group\":\r\n                var groups = self.groups;\r\n                var groupRefs = [];\r\n                // Iterate over each group\r\n                self.dataSource.forEach(function(data, index) {\r\n                    let _dsArray    = Helper.get(self.keys.value, data);\r\n\r\n                    let _stack      = [],\r\n                        _stackItem = {\r\n                            \"color\": \"#ffffff\",\r\n                            \"y0\": 0,\r\n                            \"y1\": 1,\r\n                            \"group\": \"\",\r\n                            \"name\": \"\",\r\n                            \"data-ref\": \"\",\r\n                            \"group-ref\": \"\",\r\n                            \"enable\"    : true,\r\n                        },\r\n                        color = self.colorRange;\r\n\r\n                    // Iterate each single bar in a group\r\n                    if (Helper.isArray(_dsArray)) {\r\n                        _dsArray.forEach(function(d, i) {\r\n                            if (groupRefs.length - 1 < i)\r\n                                groupRefs.push(Helper.guid());\r\n                            _stackItem = {\r\n                                \"color\": color(i),\r\n                                \"y0\": d,\r\n                                \"y1\": d > 0 ? d : 0,\r\n                                \"group\": groups[i] || 'data' + (i+1),\r\n                                \"name\": Helper.get(self.keys.name, data),\r\n                                \"value\": d,\r\n                                \"data-ref\": Helper.guid(),\r\n                                \"group-ref\": groupRefs[i],\r\n                                \"enable\"    : true,\r\n                            };\r\n                            _stack.push(_stackItem);\r\n                        });\r\n                    } else {\r\n                        if (groupRefs.length == 0)\r\n                            groupRefs.push(Helper.guid());\r\n                        _stackItem = {\r\n                            \"color\": color(0),\r\n                            \"y0\": _dsArray,\r\n                            \"y1\": _dsArray > 0 ? _dsArray : 0,\r\n                            \"group\": groups[0] || 'data' + (1),\r\n                            \"name\": Helper.get(self.keys.name, data),\r\n                            \"value\": _dsArray,\r\n                            \"data-ref\": Helper.guid(),\r\n                            \"group-ref\": groupRefs[0],\r\n                            \"enable\"    : true,\r\n                        };\r\n                        _stack.push(_stackItem);\r\n                    }\r\n\r\n                    self.dataTarget.push(_stack);\r\n                });\r\n\r\n                return self.dataTarget;\r\n                break;\r\n\r\n            case \"stack\":\r\n                var stacks = self.stacks;\r\n                var groupRefs = [];\r\n                // Iterate over each group\r\n                self.dataSource.forEach(function(data, index) {\r\n                    let _dsArray    = Helper.get(self.keys.value, data);\r\n\r\n                    let _stack      = [],\r\n                        _stackItem = {\r\n                            \"color\": \"#ffffff\",\r\n                            \"y0\": 0,\r\n                            \"y1\": 1,\r\n                            \"group\": \"\",\r\n                            \"name\": \"\",\r\n                            \"data-ref\": \"\",\r\n                            \"enable\"    : true,\r\n                        },\r\n                        color = self.colorRange;\r\n\r\n                    // Iterate each single bar in a group\r\n                    if (Helper.isArray(_dsArray)) {\r\n                        let _negBase = 0;\r\n                        let _posBase = 0;\r\n                        _dsArray.forEach(function(d, i) {\r\n                            if (groupRefs.length - 1 < i)\r\n                                groupRefs.push(Helper.guid());\r\n                            _stackItem = {\r\n                                \"color\": color(i),\r\n                                \"y0\": d,\r\n                                \"y1\": d > 0 ? d + _posBase : _negBase,\r\n                                \"group\": stacks[i]  || 'data' + (i+1),\r\n                                \"name\": Helper.get(self.keys.name, data),\r\n                                \"value\": d,\r\n                                \"data-ref\": Helper.guid(),\r\n                                \"group-ref\": groupRefs[i],\r\n                                \"enable\"    : true,\r\n                            };\r\n                            _stack.push(_stackItem);\r\n                            if (d > 0) _posBase += d;\r\n                            else _negBase += d;\r\n                        });\r\n                    } else {\r\n                        if (groupRefs.length == 0)\r\n                            groupRefs.push(Helper.guid());\r\n                        _stackItem = {\r\n                            \"color\": color(0),\r\n                            \"y0\": _dsArray,\r\n                            \"y1\": _dsArray > 0 ? _dsArray : 0,\r\n                            \"group\": stacks[0] || 'data' + (1),\r\n                            \"name\": Helper.get(self.keys.name, data),\r\n                            \"value\": _dsArray,\r\n                            \"data-ref\": Helper.guid(),\r\n                            \"group-ref\": groupRefs[0],\r\n                            \"enable\"    : true,\r\n                        };\r\n                        _stack.push(_stackItem);\r\n                    }\r\n\r\n                    self.dataTarget.push(_stack);\r\n                });\r\n\r\n                return self.dataTarget;\r\n                break;\r\n\r\n            default:\r\n                return self.dataSource;\r\n                break;\r\n        }\r\n    \r\n    }\r\n\r\n    getDataTargetForPieChart() {\r\n        var self = this;\r\n\r\n        let color = self.colorRange;\r\n        self.dataSource.forEach(function(data, index) {\r\n            let _data = {\r\n                \"color\"     : color(index),\r\n                \"name\"      : Helper.get(self.keys.name, data),\r\n                \"value\"     : Helper.get(self.keys.value, data),\r\n                \"data-ref\"  : Helper.guid(),\r\n                \"enable\"    : true,\r\n            };\r\n            self.dataTarget.push(_data);\r\n        });\r\n\r\n        return self.dataTarget;\r\n\r\n    }\r\n\r\n    getDataTargetForDonutChart() {\r\n        var self = this;\r\n\r\n        let color = self.colorRange;\r\n        self.dataSource.forEach(function(data, index) {\r\n            let _data = {\r\n                \"color\"     : color(index),\r\n                \"data-ref\"  : Helper.guid(),\r\n                \"enable\"    : true,\r\n                \"name\"      : Helper.get(self.keys.name, data),\r\n                \"value\"     : Helper.get(self.keys.value, data),\r\n            };\r\n\r\n            self.dataTarget.push(_data);\r\n        });\r\n\r\n        return self.dataTarget;\r\n\r\n    }\r\n\r\n    getDataTargetForTimelineChart() {\r\n        var self = this;\r\n\r\n        let color = self.colorRange;\r\n\r\n        self.dataSource.forEach(function(data, index) {\r\n\r\n            let _data = {\r\n                // \"color\"     : color(index),\r\n                \"icon\"      : data.icon,\r\n                \"name\"      : Helper.get(self.keys.name, data),\r\n                \"value\"     : [],\r\n                \"data-ref\"  : Helper.guid(),\r\n                \"enable\"    : true,\r\n            };\r\n\r\n            let _dsArray    = Helper.get(self.keys.value, data),\r\n                _valueArray = [],\r\n                _valueItem  = {\r\n                    \"name\": Helper.get(self.keys.name, data),\r\n                    \"start\": null ,\r\n                    \"end\": null ,\r\n                    \"color\": \"#fff\",\r\n                    \"data-ref\": null,\r\n                    \"enable\": true\r\n                };\r\n\r\n            if (Helper.isArray(_dsArray)) {\r\n                _dsArray.forEach(function(d, i) {\r\n                    _valueItem = {\r\n                        \"name\": Helper.get(self.keys.name, data),\r\n                        \"start\": new Date(d.start),\r\n                        \"end\": new Date(d.end) ,\r\n                        \"color\": color(index),\r\n                        \"data-ref\": Helper.guid(),\r\n                        \"enable\": true,\r\n                    };\r\n                    _valueArray.push(_valueItem);\r\n                });\r\n            } else {\r\n                _valueItem = {\r\n                    \"name\": Helper.get(self.keys.name, data),\r\n                    \"start\": new Date(d.start),\r\n                    \"end\": new Date(d.end) ,\r\n                    \"color\": color(index),\r\n                    \"data-ref\": Helper.guid(),\r\n                    \"enable\": true,\r\n                };\r\n                _valueArray.push(_valueItem);\r\n            }\r\n            _data.value = _valueArray;\r\n\r\n            self.dataTarget.push(_data);\r\n        });\r\n        return self.dataTarget;\r\n\r\n    }\r\n    \r\n    getDataTargetForLineChart() {\r\n        var self = this;\r\n\r\n        let color = self.colorRange;\r\n        self.dataSource.forEach(function(data, index) {\r\n            let _data = {\r\n                \"color\"     : color(index),\r\n                \"name\"      : Helper.get(self.keys.name, data),\r\n                \"value\"    : [],\r\n                \"data-ref\"  : Helper.guid(),\r\n                \"enable\"    : true,\r\n            };\r\n\r\n            let _valueXArray = Helper.get(self.keys.x, data),\r\n                _valueYArray = Helper.get(self.keys.y, data),\r\n                _valueArray = [],\r\n                _valueItem  = {\r\n                    \"name\"  : Helper.get(self.keys.name, data),\r\n                    \"valueX\": null,\r\n                    \"valueY\": null,\r\n                    \"data-ref\": Helper.guid(),\r\n                    \"enable\": true\r\n                };\r\n\r\n            if (Helper.isArray(_valueYArray)) {\r\n                /**\r\n                 *\r\n                 * CASE 1: [{name:, value: []}, {}, ..]\r\n                 *\r\n                 */\r\n                \r\n                if (!Helper.isArray(_valueXArray)) {\r\n                    _valueYArray.forEach(function(d, i) {\r\n                        _valueItem = {\r\n                            \"name\"  : Helper.get(self.keys.name, data),\r\n                            \"valueX\": i,\r\n                            \"valueY\": d,\r\n                            \"data-ref\": Helper.guid(),\r\n                            \"enable\": true\r\n                        };\r\n                        _valueArray.push(_valueItem);\r\n                    });\r\n                } else \r\n\r\n                /**\r\n                 *\r\n                 * CASE 2: [{name:, value: {x: [], y:[]}, {}, ..]\r\n                 *\r\n                 */\r\n                \r\n                if (Helper.isArray(_valueXArray) && !self.timeFormat) {\r\n                    _valueYArray.forEach(function(d, i) {\r\n                        _valueItem = {\r\n                            \"name\"  : Helper.get(self.keys.name, data),\r\n                            \"valueX\": !Helper.isEmpty(_valueXArray[i]) ? _valueXArray[i] : i,\r\n                            \"valueY\": d,\r\n                            \"data-ref\": Helper.guid(),\r\n                            \"enable\": true\r\n                        };\r\n                        _valueArray.push(_valueItem);\r\n                    });\r\n                } else \r\n\r\n                /**\r\n                 *\r\n                 * CASE 3: [{name:, value: {x: [], y:[]}, {}, ..] with config `timeFormat`\r\n                 *\r\n                 */\r\n                \r\n                if (Helper.isArray(_valueXArray) && self.timeFormat) {\r\n                    let _parser = Helper.dateParser(self.timeFormat);\r\n\r\n                    _valueYArray.forEach(function(d, i) {\r\n                        _valueItem = {\r\n                            \"name\"  : Helper.get(self.keys.name, data),\r\n                            \"valueX\": !Helper.isEmpty(_valueXArray[i]) ? _parser(_valueXArray[i]) : i,\r\n                            \"valueY\": d,\r\n                            \"data-ref\": Helper.guid(),\r\n                            \"enable\": true\r\n                        };\r\n                        _valueArray.push(_valueItem);\r\n                    });\r\n                }\r\n            }\r\n\r\n            _data.value = _valueArray;\r\n\r\n            self.dataTarget.push(_data);\r\n        });\r\n\r\n        return self.dataTarget;\r\n\r\n    }\r\n    /*=====  End of Normalize Data For Charts  ======*/\r\n    \r\n    /*=================================================\r\n    =              Normalize Data For Map             =\r\n    =================================================*/\r\n\r\n    getDataTargetForMap() {\r\n        var self = this;\r\n\r\n        var getDataValue = function(key, data, isArray){\r\n            let _keys = key.split('.');\r\n            let _value = Helper.get(key, data);\r\n            let _v;\r\n            if (_keys.length == 1 && keys[0] == 'value' && !isArray) {\r\n                _v = _value;\r\n            } else {\r\n                _v = new Object();\r\n                _v[_keys[_keys.length - 1]] = _value;\r\n            }\r\n            return _v;\r\n        }\r\n\r\n        var getData = function(data) {\r\n            let _data = {\r\n                \"name\": Helper.get(self.keys.name, data),\r\n                \"coor\": Helper.get(self.keys.coor, data),\r\n                \"value\": null\r\n            }\r\n            if (Helper.isArray(self.keys.value)) {\r\n                self.keys.value.forEach(function(k) {\r\n                    let _v = getDataValue(k, data, true);\r\n                    _data.value = Helper.merge(_data.value, _v);\r\n                });\r\n            }\r\n            else {\r\n                _data.value = getDataValue(self.keys.value, data, false);\r\n            }\r\n\r\n            return _data;\r\n        }\r\n\r\n        if (!Helper.isArray(self.dataSource)) \r\n            self.dataTarget = getData(self.dataSource);\r\n        else \r\n            self.dataSource.forEach(function(data) {\r\n                self.dataTarget.push(getData(data));\r\n            });\r\n\r\n        return self.dataTarget;\r\n    }\r\n\r\n    /*=====    End of Normalize Data For Map   ======*/\r\n\r\n\r\n    /*=============================\r\n    =            Utils            =\r\n    =============================*/\r\n    // getBarColorForBarChart() {\r\n    //     var self = this;\r\n\r\n    //     var color = self.colorRange;\r\n    //     if (typeof color == 'string') {\r\n    //         try {\r\n    //             return d3.scale[color]();    \r\n    //         }\r\n    //         catch(err) {\r\n    //             return function(i) {\r\n    //                 return color;\r\n    //             };\r\n    //         }\r\n    //     } else if (typeof color == 'object') {\r\n    //         return d3.scale.ordinal().range(color);\r\n    //     }\r\n    // }\r\n    \r\n    \r\n    /*=====  End of Utils  ======*/\r\n    \r\n\r\n    /*=============================================\r\n    =            Data Input From Files            =\r\n    =============================================*/\r\n    \r\n    getCsv() {\r\n\r\n        var self = this;\r\n\r\n        d3.csv(self.file.url, function(err, data) {\r\n            if (err) throw err;\r\n            \r\n            return data;\r\n        });\r\n\r\n    }\r\n\r\n    getTsv() {\r\n\r\n        var self = this;\r\n\r\n        d3.tsv(self.file.url, function(err, data) {\r\n            if (err) throw err;\r\n            \r\n            return data;\r\n        });\r\n\r\n    }\r\n\r\n    getText() {\r\n\r\n        var self = this;\r\n\r\n        d3.text(self.file.url, function(err, data) {\r\n            if (err) throw err;\r\n            \r\n            return JSON.parse(data);\r\n        });\r\n\r\n    }\r\n\r\n    getJson() {\r\n        var self = this;\r\n\r\n        d3.json(self.file.url, function(err, data) {\r\n            if (err) throw err;\r\n            \r\n            return data;\r\n        });\r\n    }\r\n\r\n    getXml() {\r\n        var self = this;\r\n\r\n        d3.xml(self.file.url, function(err, data) {\r\n            if (err) throw err;\r\n            \r\n            // Convert the XML document to an array of objects.\r\n            // Note that querySelectorAll returns a NodeList, not a proper Array,\r\n            // so we must use map.call to invoke array methods.\r\n            data = [].map.call(data.querySelectorAll(\"data\"), function(d) {\r\n                return {\r\n                    name: d.querySelector(\"name\").textContent,\r\n                    value: d.querySelector(\"value\").textContent\r\n                };\r\n            });\r\n\r\n            return data;\r\n        });\r\n    }\r\n    \r\n    /*=====  End of Data Input From Files  ======*/\r\n    \r\n\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/helper/C9.DataAdapter.js\n **/","import Chart from './C9.Chart';\r\n\r\nimport Axis from './utils/C9.Axis';\r\nimport Title from './utils/C9.Title';\r\nimport Legend from './utils/C9.Legend';\r\nimport Table from './utils/C9.Table';\r\nimport Tooltip from './utils/C9.Tooltip';\r\n\r\nimport Helper from '../helper/C9.Helper';\r\nimport DataAdapter from '../helper/C9.DataAdapter';\r\n\r\nexport default class DonutChart extends Chart {\r\n    constructor(options) {\r\n        super(options);\r\n\r\n        var self = this;\r\n\r\n        var R = Math.min(self.width - self.margin.left - self.margin.right, self.height - self.margin.top - self.margin.bottom) / 2;\r\n        var config = {\r\n            outerRadius: R,\r\n            innerRadius: R > 80 ? R - 80 : R - 40,\r\n            // showText: true // show/hide text on middle or each donut\r\n        };\r\n\r\n        self.updateConfig(config);\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    get pie() {\r\n        return this._pie;\r\n    }\r\n\r\n    get arc() {\r\n        return this._arc;\r\n    }\r\n\r\n    get currentData() {\r\n        return this._currentData;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    set pie(arg) {\r\n        if (arg) {\r\n            this._pie = arg;\r\n        }\r\n    }\r\n\r\n    set arc(arg) {\r\n        if (arg) {\r\n            this._arc = arg;\r\n        }\r\n    }\r\n\r\n    set currentData(arg) {\r\n        if (arg) {\r\n            this._currentData = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n    \r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    /**\r\n     * Update Donut Chart Config\r\n     */\r\n    updateConfig(config) {\r\n        super.updateConfig(config);\r\n\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n\r\n        self.chartType      = 'donut';\r\n\r\n        var dataOption          = self.dataOption;\r\n        dataOption.colorRange   = self.colorRange;\r\n\r\n        var da = new DataAdapter(dataOption);\r\n        self.dataTarget     = da.getDataTarget(self.chartType);\r\n    }\r\n\r\n    /**\r\n     * Update Donut Chart Config\r\n     */\r\n    updateDataConfig(dataCfg) {\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(self.options, dataCfg);\r\n\r\n        self.chartType      = 'donut';\r\n\r\n        var dataOption          = self.dataOption;\r\n        dataOption.colorRange   = self.colorRange;\r\n\r\n        var da = new DataAdapter(dataOption);\r\n        self.dataTarget     = da.getDataTarget(self.chartType);\r\n    }\r\n\r\n    /**\r\n     * Update Donut Chart based on new data\r\n     * @param  {[type]} data [description]\r\n     */\r\n    update(data) {\r\n        var self = this;\r\n\r\n        var width   = self.width - self.margin.left - self.margin.right,\r\n            height  = self.height - self.margin.top - self.margin.bottom,\r\n            color   = self.colorRange;\r\n\r\n        self.arc = d3.svg.arc()\r\n                    .outerRadius(self.options.outerRadius)\r\n                    .innerRadius(self.options.innerRadius);\r\n\r\n        //we can sort data here\r\n        self.pie = d3.layout.pie()\r\n                    .sort(null)\r\n                    .value(function(d) { return d.value; });\r\n\r\n        self.body.selectAll(\".c9-chart-donut.c9-custom-arc-container\").data([]).exit().remove();\r\n\r\n        //draw chart\r\n        var arcs = self.body\r\n                    .append('g')\r\n                        .attr('class', 'c9-chart-donut c9-custom-arc-container')\r\n                        .attr('transform', 'translate(' + (width / 2) + ',' + (height / 2) + ')')\r\n                        .selectAll('.c9-chart-donut.c9-custom-arc')\r\n                        .data(self.pie(data)).enter()\r\n                        .append('g')\r\n                            .attr('class', 'c9-chart-donut c9-custom-arc');\r\n\r\n        // Append main path contains donut\r\n        // TODO: add a unique class to allow Legend could find selected donut/pie\r\n        arcs.append('path')\r\n                .attr('class', 'c9-chart-donut c9-custom-path')\r\n                .attr('data-ref', function(d) { return d.data['data-ref']; })\r\n                .attr('d', self.arc)\r\n                .attr('fill', function(d, i) { return color(i); })\r\n                .attr('stroke', '#ffffff')\r\n                .each(function(d) { self.currentData = d; }); \r\n                // Current data used for calculate interpolation \r\n                // between current arc vs disabled arc\r\n\r\n\r\n        // Append middle text display name\r\n        // if (self.showText) {\r\n        //     arcs.append('text')\r\n        //             .attr('class', 'c9-chart-donut c9-custom-text')\r\n        //             .attr('transform', function(d) { return 'translate(' + self.arc.centroid(d) + ')'; })\r\n        //             .attr('dy', '.35em')\r\n        //             .attr('text-anchor', 'middle')\r\n        //             .text(function(d) { return d.data.name; });\r\n        // }\r\n        \r\n        self.updateInteraction();\r\n    }\r\n\r\n    /**\r\n     * Select all path as type PATH in Donut Chart via its CLASS\r\n     */\r\n    selectAllPath() {\r\n        var self = this;\r\n\r\n        return self.body\r\n                // .selectAll('g')\r\n                    .selectAll('path.c9-chart-donut.c9-custom-path');\r\n    }\r\n\r\n    /**\r\n     * Update Interaction: Hover\r\n     * @return {} \r\n     */\r\n    updateInteraction() {\r\n        var self    = this,\r\n            selector= self.selectAllPath(),\r\n            width   = self.width - self.margin.left - self.margin.right,\r\n            height  = self.height - self.margin.top - self.margin.bottom,\r\n            color   = self.colorRange,\r\n            chartInnerBefore = self.options.innerRadius,\r\n            chartOuterBefore = self.options.outerRadius,\r\n            chartInnerAfter = self.options.innerRadius,\r\n            chartOuterAfter = self.options.outerRadius * 1.2;\r\n\r\n        var hoverOptions        = self.hover.options,\r\n            hoverEnable         = self.hover.enable,\r\n            onMouseOverCallback = hoverOptions.onMouseOver.callback,\r\n            onMouseOutCallback  = hoverOptions.onMouseOut.callback,\r\n            onClickCallback  = self.click.callback;\r\n\r\n        var tooltip = new Tooltip(self.options.tooltip);\r\n\r\n        // Main Event Dispatch for paths in donut chart\r\n        self._eventFactory = {\r\n            'click': function(d, i) {\r\n                if (Helper.isFunction(onClickCallback)) {\r\n                    onClickCallback.call(this, d);\r\n                }\r\n            },\r\n\r\n            'mouseover': function(d, i) {\r\n                if (!hoverEnable) return;\r\n\r\n                if (Helper.isFunction(onMouseOverCallback)) {\r\n                    onMouseOverCallback.call(this, d);\r\n                }\r\n\r\n                var selector = d3.select(this);\r\n                selector.transition()\r\n                        .attr('d', d3.svg.arc()\r\n                            .innerRadius(chartInnerAfter)\r\n                            .outerRadius(chartOuterAfter)\r\n                        );\r\n\r\n                // For legend\r\n                if (self.options.legend.show)\r\n                    self.legend.item.each(function() {\r\n                        if (d3.select(this).attr('data-ref') !== d.data['data-ref'] && d3.select(this).attr('data-enable') == 'true') {\r\n                            d3.select(this).attr('opacity', '0.3');\r\n                        }\r\n                    });\r\n\r\n                // For Table\r\n                if (self.options.table.show) {\r\n                    var tr = d3.selectAll('.c9-table-container>.c9-table-body tr');\r\n                    tr.filter(function(i) { return i['data-ref'] != d.data['data-ref'] }).selectAll('td').style('opacity', '0.5');\r\n                    var selectedItem = tr.filter(function(i) { return i['data-ref'] == d.data['data-ref'] });\r\n                    //set its style and scroll to its pos\r\n                    selectedItem.selectAll('td').style('opacity', '1');\r\n                    Helper.scroll(d3.select('.c9-table-container')[0][0], selectedItem[0][0].offsetTop, 200);\r\n                }\r\n\r\n                // For Chart\r\n                self.selectAllPath().each(function(){\r\n                    if (d3.select(this).attr('data-ref') !== d.data['data-ref']) {\r\n                        d3.select(this).attr('opacity', '0.3');\r\n                    }\r\n                });\r\n\r\n                // For Tooltip\r\n                tooltip.draw(d, self, 'mouseover');\r\n            },\r\n            \r\n            'mouseout': function(d, i) {\r\n                if (!hoverEnable) return;\r\n\r\n                if (Helper.isFunction(onMouseOutCallback)) {\r\n                    onMouseOutCallback.call(this, d);\r\n                }\r\n\r\n                var selector = d3.select(this);\r\n                selector.transition()\r\n                        .duration(500)\r\n                        .ease('bounce')\r\n                        .attr('d', d3.svg.arc()\r\n                            .innerRadius(chartInnerBefore)\r\n                            .outerRadius(chartOuterBefore)\r\n                        );\r\n\r\n                // For legend\r\n                if (self.options.legend.show)\r\n                self.legend.item.each(function() {\r\n                    if (d3.select(this).attr('data-ref') !== d.data['data-ref'] && d3.select(this).attr('data-enable') == 'true') {\r\n                        d3.select(this).attr('opacity', '1.0');\r\n                    }\r\n                });\r\n\r\n                // For Table\r\n                if (self.options.table.show)\r\n                    d3.selectAll('.c9-table-container>.c9-table-body tr').selectAll('td').style('opacity', '');\r\n                \r\n                // For Chart\r\n                self.selectAllPath().each(function(){\r\n                    if (d3.select(this).attr('data-ref') !== d.data['data-ref']) {\r\n                        d3.select(this).attr('opacity', '1.0');\r\n                    }\r\n                });\r\n\r\n                // For Tooltip\r\n                tooltip.draw(d, self, 'mouseout');\r\n            }\r\n\r\n        };\r\n\r\n        selector.on(self._eventFactory);\r\n    }\r\n    \r\n    /*=====  End of Main Functions  ======*/\r\n    \r\n    /*========================================\r\n    =            User's Functions            =\r\n    ========================================*/\r\n    /**\r\n     * Custom Event Listener\r\n     * @param  {[type]}   eventType [description]\r\n     * @param  {Function} callback  [description]\r\n     * @return {[type]}             [description]\r\n     */\r\n    on(eventType, callback) {\r\n        super.on(eventType, callback);\r\n        \r\n        var self = this;\r\n        var selector    = self.selectAllPath();\r\n\r\n        // Update Event Factory\r\n        let eventFactory = {\r\n            'click.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            },\r\n            'mouseover.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            },\r\n            'mouseout.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            }\r\n        }\r\n\r\n        let eventName = eventType + '.event';\r\n\r\n        selector.on(eventName, eventFactory[eventName]);\r\n    }\r\n\r\n    /**\r\n     * Main draw function of Donut Chart\r\n     */\r\n    draw() {\r\n        super.draw();\r\n\r\n        var self = this;\r\n        \r\n        var title   = new Title(self.options.title, self);\r\n        var legend  = new Legend(self.options.legend, self, self.dataTarget);\r\n        var table   = new Table(self.options.table, self, self.dataTarget);\r\n\r\n        self.title = title;\r\n        self.legend = legend;\r\n        self.table = table;\r\n\r\n        // Draw title\r\n        self.title.draw();\r\n\r\n        // Update interaction of this own chart\r\n        self.update(self.dataTarget);\r\n        self.updateInteraction();\r\n\r\n        self.legend = legend;\r\n        self.table = table;\r\n\r\n        // Draw legend\r\n        self.legend.draw();\r\n        self.legend.updateInteractionForDonutPieChart(self, self.selectAllPath(), self.pie, self.currentData, self.arc);\r\n\r\n        // Draw table\r\n        self.table.draw();\r\n        self.table.updateInteractionForDonutPieChart(self);\r\n    }\r\n    \r\n    /**\r\n     * Set option via stand-alone function\r\n     * @param {[type]} key   [description]\r\n     * @param {[type]} value [description]\r\n     */\r\n    setOption(key, value) {\r\n        super.setOption(key, value);\r\n\r\n        var self = this;\r\n\r\n        Helper.set(key, value, self.options);\r\n\r\n        self.updateConfig(self.options);\r\n    }\r\n\r\n    /**\r\n     * Update chart based on new data with optional dataConfig\r\n     * @param  {[type]} data       [description]\r\n     * @param  {[type]} dataConfig [description]\r\n     */\r\n    updateData(newData, newDataConfig) {\r\n        var self = this;\r\n\r\n        var newCfg = {};\r\n\r\n        if (!Helper.isEmpty(newDataConfig)) {\r\n\r\n            newCfg.data = {\r\n                plain: newData,\r\n                keys: newDataConfig,\r\n            };\r\n\r\n        } else {\r\n\r\n            newCfg.data = {\r\n                plain: newData,\r\n            };\r\n\r\n        }\r\n        \r\n        // Update Chart\r\n        self.updateDataConfig(newCfg);\r\n        self.update(self.dataTarget);\r\n\r\n        // Update Legend\r\n        self.legend.update(self.dataTarget);\r\n        self.legend.updateInteractionForDonutPieChart(self, self.selectAllPath(), self.pie, self.currentData, self.arc);    \r\n    \r\n        // Update Table\r\n        self.table.update(self.dataTarget);\r\n    }\r\n    \r\n    \r\n    /*=====  End of User's Functions  ======*/\r\n    \r\n    \r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/C9.DonutChart.js\n **/","import Chart from './C9.Chart';\r\n\r\nimport Axis from './utils/C9.Axis';\r\nimport Title from './utils/C9.Title';\r\nimport Legend from './utils/C9.Legend';\r\nimport Table from './utils/C9.Table';\r\nimport Tooltip from './utils/C9.Tooltip';\r\n\r\nimport Helper from '../helper/C9.Helper';\r\nimport DataAdapter from '../helper/C9.DataAdapter';\r\n\r\nexport default class LineChart extends Chart {\r\n    constructor(options) {\r\n        super(options);\r\n\r\n        var self    = this;\r\n\r\n        var config  = {\r\n            point: {\r\n                show: true,\r\n                fill: \"steelblue\",\r\n                stroke: \"#d26b5f\",\r\n                'stroke-width': 2,\r\n                opacity: 1.0,\r\n                radius: 5,\r\n            },\r\n            area: {\r\n                show: true\r\n            },\r\n            line: {\r\n                style: \"solid\", // \"dash\", \"dot\"\r\n                width: 2\r\n            },\r\n            interpolate: \"linear\", // refer: https://www.dashingd3js.com/svg-paths-and-d3js\r\n        };\r\n\r\n        self.updateConfig(config);\r\n\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    get isTimeDomain() {\r\n        return this._isTimeDomain;\r\n    }\r\n\r\n    get bisectDate() {\r\n        return this._bisectDate;\r\n    }\r\n\r\n    get hoverLine() {\r\n        return this._hoverLine;\r\n    }\r\n\r\n    get subChartX() {\r\n        return this._subChartX;\r\n    }\r\n\r\n    get subChartY() {\r\n        return this._subChartY;\r\n    }\r\n\r\n    get subChartWidth() {\r\n        return this._subChartWidth;\r\n    }\r\n\r\n    get subChartHeight() {\r\n        return this._subChartHeight;\r\n    }\r\n\r\n    get subChartMargin() {\r\n        return this._subChartMargin;\r\n    }\r\n\r\n    get subChartXAxis() {\r\n        return this._subChartXAxis;\r\n    }\r\n\r\n    get brush() {\r\n        return this._brush;\r\n    }\r\n\r\n    get subChartAreaGen() {\r\n        return this._subChartAreaGen;\r\n    }\r\n\r\n    get lineGen() {\r\n        return this._lineGen;\r\n    }\r\n\r\n    get areaGen() {\r\n        return this._areaGen;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    set isTimeDomain(arg) {\r\n        if (arg) {\r\n            this._isTimeDomain = arg;\r\n        }\r\n    }\r\n\r\n    set bisectDate(arg) {\r\n        if (arg) {\r\n            this._bisectDate = arg;\r\n        }\r\n    }\r\n\r\n    set hoverLine(arg) {\r\n        if (arg) {\r\n            this._hoverLine = arg;\r\n        }\r\n    }\r\n\r\n    set subChartX(arg) {\r\n        if (arg) {\r\n            this._subChartX = arg;\r\n        }\r\n    }\r\n\r\n    set subChartY(arg) {\r\n        if (arg) {\r\n            this._subChartY = arg;\r\n        }\r\n    }\r\n\r\n    set subChartWidth(arg) {\r\n        if (arg) {\r\n            this._subChartWidth = arg;\r\n        }\r\n    }\r\n\r\n    set subChartHeight(arg) {\r\n        if (arg) {\r\n            this._subChartHeight = arg;\r\n        }\r\n    }\r\n\r\n    set subChartMargin(arg) {\r\n        if (arg) {\r\n            this._subChartMargin = arg;\r\n        }\r\n    }\r\n\r\n    set subChartXAxis(arg) {\r\n        if (arg) {\r\n            this._subChartXAxis = arg;\r\n        }\r\n    }\r\n\r\n    set brush(arg) {\r\n        if (arg) {\r\n            this._brush = arg;\r\n        }\r\n    }\r\n\r\n    set subChartAreaGen(arg) {\r\n        if (arg) {\r\n            this._subChartAreaGen = arg;\r\n        }\r\n    }\r\n\r\n    set lineGen(arg) {\r\n        if (arg) {\r\n            this._lineGen = arg;\r\n        }\r\n    }\r\n\r\n    set areaGen(arg) {\r\n        if (arg) {\r\n            this._areaGen = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n    \r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n\r\n    /**\r\n     * Init Line Chart Config\r\n     */\r\n    updateConfig(config) {\r\n        super.updateConfig(config);\r\n\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n\r\n        self.chartType = \"line\";\r\n        self.bisectDate = d3.bisector(function(d) { return d.valueX; }).left;\r\n\r\n        var dataOption          = self.dataOption;\r\n        dataOption.colorRange   = self.colorRange;\r\n\r\n        var da = new DataAdapter(dataOption);\r\n        self.dataTarget     = da.getDataTarget(self.chartType);\r\n        self.isTimeDomain   = da.timeFormat;\r\n\r\n        var width   = self.width - self.margin.left - self.margin.right,\r\n            height  = self.height - self.margin.top - self.margin.bottom;\r\n\r\n        self.x = (self.isTimeDomain) ? d3.time.scale().range([0, width]) : d3.scale.linear().range([0, width]),\r\n        self.y = d3.scale.linear().range([height, 0]);\r\n\r\n        self.updateDomain(self.dataTarget);\r\n\r\n        self.lineGen = d3.svg.line()\r\n                        .x(function(d) { return self.x(d.valueX); })\r\n                        .y(function(d) { return self.y(d.valueY); })\r\n                        .interpolate(self.options.interpolate);\r\n\r\n        self.areaGen = d3.svg.area()\r\n                        .x(function(d) { return self.x(d.valueX); })\r\n                        .y0(function(d) { return self.y(d.valueY); })\r\n                        .y1(height)\r\n                        .interpolate(self.options.interpolate);\r\n    }\r\n\r\n    /**\r\n     * Update data config\r\n     */\r\n    updateDataConfig(dataCfg) {\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(self.options, dataCfg);\r\n\r\n        self.chartType = \"line\";\r\n        self.bisectDate = d3.bisector(function(d) { return d.valueX; }).left;\r\n\r\n        var dataOption          = self.dataOption;\r\n        dataOption.colorRange   = self.colorRange;\r\n\r\n        var da = new DataAdapter(dataOption);\r\n        self.dataTarget     = da.getDataTarget(self.chartType);\r\n        self.isTimeDomain   = da.timeFormat;\r\n\r\n        var width   = self.width - self.margin.left - self.margin.right,\r\n            height  = self.height - self.margin.top - self.margin.bottom;\r\n\r\n        self.x = (self.isTimeDomain) ? d3.time.scale().range([0, width]) : d3.scale.linear().range([0, width]),\r\n        self.y = d3.scale.linear().range([height, 0]);\r\n\r\n        self.updateDomain(self.dataTarget);\r\n\r\n        self.lineGen = d3.svg.line()\r\n                        .x(function(d) { return self.x(d.valueX); })\r\n                        .y(function(d) { return self.y(d.valueY); })\r\n                        .interpolate(self.options.interpolate);\r\n\r\n        self.areaGen = d3.svg.area()\r\n                        .x(function(d) { return self.x(d.valueX); })\r\n                        .y0(function(d) { return self.y(d.valueY); })\r\n                        .y1(height)\r\n                        .interpolate(self.options.interpolate);\r\n    }\r\n\r\n    updateOverlay() {\r\n        var self = this;\r\n\r\n        var width   = self.width - self.margin.left - self.margin.right,\r\n            height  = self.height - self.margin.top - self.margin.bottom;\r\n\r\n        //** Create a invisible rect for mouse tracking\r\n        var paddingX = (self.x.domain()[1] - self.x.domain()[0]) * 0.01,\r\n            paddingY = (self.y.domain()[1] - self.y.domain()[0]) * 0.05;\r\n\r\n        self.body\r\n            .append('rect')\r\n            .attr('class', 'c9-chart-line c9-rect-overlay')\r\n            // .attr('width', self.actualWidth)\r\n            // .attr('height', self.actualHeight)\r\n            .attr('width', width - self.x(paddingX))\r\n            .attr('height', height)\r\n            .attr('x', self.x(paddingX) / 2)\r\n            .style('fill', 'none')\r\n            .style('pointer-events', 'all');\r\n    }\r\n\r\n    updateHoverLine() {\r\n        var self = this;\r\n\r\n        //** Add the line to the group\r\n        self.hoverLine = self.body\r\n                .append('g')\r\n                .attr('class', 'c9-chart-line c9-comparator-line')\r\n                .append('line')\r\n                .style('stroke', 'grey')\r\n                .style('stroke-opacity', 0);\r\n\r\n        self.hoverCircle = self.hoverLine\r\n                .append('circle')\r\n                .attr('class', 'c9-chart-line c9-comparator-line')\r\n                .attr('r', self.options.point.radius);\r\n    }\r\n\r\n    /**\r\n     * Update LineChart Domain\r\n     * @param  {[type]} data [description]\r\n     */\r\n    updateDomain(data) {\r\n        var self = this;\r\n\r\n        var valueXArray = d3.merge(data.map(function(_data) {\r\n            return _data.value.map(function(d) {\r\n                return d.valueX;\r\n            })\r\n        }));\r\n\r\n        var valueYArray = d3.merge(data.map(function(_data) {\r\n            return _data.value.map(function(d) {\r\n                return d.valueY;\r\n            })\r\n        }));\r\n\r\n        self.x.domain(d3.extent(valueXArray));\r\n\r\n        self.y.domain(d3.extent(valueYArray));\r\n\r\n        // Update domain if all values positive / negative\r\n        if (self.y.domain()[0] > 0 && self.y.domain()[1] > 0) {\r\n            self.y.domain([0, self.y.domain()[1]]);\r\n        } else if (self.y.domain()[0] < 0 && self.y.domain()[1] < 0) {\r\n            self.y.domain([self.y.domain()[0], 0]);\r\n        }\r\n\r\n        var xDomain = self.x.domain(), paddingX = (self.x.domain()[1] - self.x.domain()[0]) * 0.01;\r\n        var yDomain = self.y.domain(), paddingY = (self.y.domain()[1] - self.y.domain()[0]) * 0.05;\r\n            \r\n        self.x.domain([xDomain[0] - paddingX, xDomain[1] + paddingX]);\r\n        self.y.domain([yDomain[0], yDomain[1] + paddingY]);\r\n    }\r\n\r\n    /**\r\n     * Update main path of Line Chart when brushing\r\n     */\r\n    update(data) {\r\n        var self = this;\r\n\r\n        var width   = self.width - self.margin.left - self.margin.right,\r\n            height  = self.height - self.margin.top - self.margin.bottom;\r\n\r\n        self.updateDomain(data);\r\n\r\n        self.body.selectAll(\".c9-chart-line.c9-area-container\").data([]).exit().remove();\r\n        self.body.selectAll(\".c9-chart-line.c9-path-container\").data([]).exit().remove();\r\n        self.body.selectAll(\".c9-chart-line.c9-point-container\").data([]).exit().remove();\r\n\r\n        if (self.options.area.show) {\r\n            var areaContainer = self.body.append('g')\r\n                                .attr('class', 'c9-chart-line c9-area-container')\r\n                                .attr(\"clip-path\", \"url(#clip)\");\r\n\r\n            areaContainer.selectAll(\".c9-chart-line.c9-path-area-custom\")\r\n            // self.body.selectAll(\"dot\")\r\n                .data(data)\r\n                .enter()\r\n                .append('path')\r\n                .filter(function(d) {\r\n                    return d.enable;\r\n                })\r\n                // .attr(\"clip-path\", \"url(#clip)\")\r\n                .attr('class', 'c9-chart-line c9-path-area-custom')\r\n                .attr('d', function(d) {\r\n                    return self.areaGen(d.value);\r\n                })\r\n                .attr('data-ref', function(d) {\r\n                    return 'c9-' + d['data-ref'];\r\n                })\r\n                .style('fill', function(d) {\r\n                    return d.color;\r\n                })\r\n                .style('stroke', 'none')\r\n                .style('opacity', '0.5');\r\n        }\r\n\r\n        var pathContainer = self.body.append('g')\r\n                            .attr('class', 'c9-chart-line c9-path-container')\r\n                            .attr(\"clip-path\", \"url(#clip)\");\r\n            \r\n        pathContainer.selectAll(\".c9-chart-line.c9-path-line-custom\")\r\n        // self.body.selectAll(\"dot\")\r\n            .data(data)\r\n            .enter()\r\n            .append('path')\r\n            .filter(function(d) {\r\n                return d.enable;\r\n            })\r\n            .attr('class', 'c9-chart-line c9-path-line-custom')\r\n            .attr('d', function(d) {\r\n                return self.lineGen(d.value);\r\n            })\r\n            .attr('data-ref', function(d) {\r\n                return 'c9-' + d['data-ref'];\r\n            })\r\n            .style('stroke', function(d) {\r\n                return d.color;\r\n            })\r\n            .style('stroke-dasharray', function() {\r\n                return self.getLineStyle();\r\n            })\r\n            .style('stroke-width', self.options.line.width)\r\n            .style('fill', 'none');\r\n\r\n        if (self.options.point.show) {\r\n            var pointContainer = self.body.append('g')\r\n                                    .attr('class', 'c9-chart-line c9-point-container')\r\n                                    .attr(\"clip-path\", \"url(#clip)\");\r\n            \r\n            data.forEach(function(d) {\r\n                if (!d.enable) return;\r\n                pointContainer.selectAll(\".c9-chart-line.c9-point-container\")\r\n                // self.body.selectAll(\"dot\")\r\n                    .data(d.value)\r\n                    .enter()\r\n                    .append(\"circle\")\r\n                    // .attr(\"clip-path\", \"url(#clip)\")\r\n                    .attr('class', 'c9-chart-line c9-circle-custom')\r\n                    .attr(\"r\", self.options.point.radius)\r\n                    .attr(\"cx\", function(_d) {\r\n                        return self.x(_d.valueX);\r\n                    })\r\n                    .attr(\"cy\", function(_d) {\r\n                        return self.y(_d.valueY);\r\n                    })\r\n                    .attr(\"data-ref\", function(data) {\r\n                        return data[\"data-ref\"];\r\n                    })\r\n                    .style(\"fill\", self.options.point.fill)\r\n                    .style(\"stroke\", self.options.point.stroke)\r\n                    .style(\"stroke-width\", self.options.point['stroke-width'])\r\n                    .style(\"opacity\", self.options.point.opacity);\r\n            });\r\n        }\r\n\r\n        /*----------  Set actual size for chart after initialization  ----------*/\r\n        var chartBox = self.body.node().getBBox();\r\n        self.actualWidth = chartBox.width - 4 * self.options.point.radius;\r\n        self.actualHeight = chartBox.height;\r\n        /*----------  End of Set actual size for chart after initialization  ----------*/\r\n\r\n        self.updateInteraction();\r\n    }  \r\n\r\n    /**\r\n     * Update sub chart\r\n     */\r\n    updateSubChart(data) {\r\n        var self = this;\r\n\r\n        if (self.options.subchart.show) {\r\n            var width   = self.width - self.margin.left - self.margin.right,\r\n                height  = self.height - self.margin.top - self.margin.bottom;\r\n\r\n            /*----------  Sub Chart  ----------*/\r\n            self.subChartWidth = width,\r\n            self.subChartHeight = self.options.subchart.height;\r\n            if (Helper.isEmpty(self.subChartMargin)) {\r\n                self.subChartMargin = {\r\n                    'top': self.actualHeight + 100,\r\n                    'left': self.margin.left\r\n                }\r\n            }\r\n\r\n            self.subChartX = (self._isTimeDomain) ? d3.time.scale().range([0, self.subChartWidth]) : d3.scale.linear().range([0, self.subChartWidth]),\r\n            self.subChartY = d3.scale.linear().range([self.subChartHeight, 0]);\r\n\r\n            self.subChartX.domain(self.x.domain());\r\n            self.subChartY.domain(self.y.domain());\r\n\r\n            self.subChartXAxis = d3.svg.axis()\r\n                            .scale(self.subChartX)\r\n                            .orient(\"bottom\");\r\n\r\n            self.brush = d3.svg.brush()\r\n                            .x(self.subChartX)\r\n                            .on(\"brush\", function() {\r\n                                // Update axis\r\n                                self.x.domain(self.brush.empty() ? self.subChartX.domain() :self.brush.extent());\r\n                                self.axis.update(self.x, self.y, 500);\r\n\r\n                                // Update main path of Line Chart\r\n                                if (self.options.area.show) {\r\n                                    self.body.selectAll(\"path.c9-chart-line.c9-path-area-custom\")\r\n                                        .attr(\"d\",  function(d) { return self.areaGen(d.value) });\r\n                                }\r\n                                self.body.selectAll(\"path.c9-chart-line.c9-path-line-custom\")\r\n                                        .attr(\"d\",  function(d) { return self.lineGen(d.value) });\r\n\r\n                                if (self.options.point.show) {\r\n                                    self.body.selectAll(\"circle.c9-chart-line.c9-circle-custom\")\r\n                                            .attr(\"cx\", function(d) { return self.x(d.valueX); })\r\n                                            .attr(\"cy\", function(d) { return self.y(d.valueY); });\r\n                                }\r\n                            });\r\n\r\n            self.subChartAreaGen = d3.svg.area()\r\n                            .x(function(d) { return self.subChartX(d.valueX) })\r\n                            .y0(function(d) { return self.subChartY(d.valueY) })\r\n                            .y1(self.subChartHeight)\r\n                            .interpolate(self.options.interpolate);\r\n\r\n            self.svg.attr('height', self.height + self.subChartHeight);\r\n\r\n            self.svg.selectAll(\".c9-subchart-custom\").remove();\r\n            self.svg.selectAll(\".c9-subchart-custom .c9-subchart-axis\").remove();\r\n\r\n            var subChart = self.svg.append(\"g\")\r\n                            .attr(\"class\", \"c9-subchart-custom\")\r\n                            .attr(\"transform\", \"translate(\" + self.subChartMargin.left + \",\" + self.subChartMargin.top + \")\");\r\n\r\n            var subChartAreaContainer = subChart.append('g')\r\n                                    .attr('class', 'c9-subchart-custom c9-subchart-area-container')\r\n                                    .attr(\"clip-path\", \"url(#clip)\");\r\n\r\n            data.forEach(function(d,i) {\r\n                if (!d.enable) return;\r\n\r\n                subChartAreaContainer.append(\"path\")\r\n                    // .attr(\"clip-path\", \"url(#clip)\")\r\n                    .attr(\"class\", \"c9-subchart-area\")\r\n                    .attr(\"d\", function() { return self.subChartAreaGen(d.value) })\r\n                    .attr('data-ref', 'c9-'+d['data-ref'])\r\n                    .style('fill', d.color)\r\n                    .style('stroke', 'none')\r\n                    .style('opacity', '0.5');\r\n            });\r\n            \r\n\r\n            subChart.append(\"g\")\r\n                .attr(\"class\", \"c9-subchart-axis\")\r\n                .attr(\"transform\", \"translate(0,\" + self.subChartHeight + \")\")\r\n                .call(self.subChartXAxis);\r\n\r\n            //append the brush for the selection of subsection  \r\n            subChart.append(\"g\")\r\n                .attr(\"class\", \"c9-subchart-brush\")\r\n                .call(self.brush)\r\n                .selectAll(\"rect\")\r\n                .attr(\"height\", self.subChartHeight);\r\n\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Select all circle as type CIRCLE in Line Chart via its CLASS\r\n     */\r\n    selectAllCircle() {\r\n        var self = this;\r\n\r\n        return self.body\r\n                .selectAll('circle.c9-chart-line.c9-circle-custom');\r\n    }\r\n\r\n    /**\r\n     * Select all rect as type RECT in Line Chart via its CLASS\r\n     */\r\n    selectRectLayer() {\r\n        var self = this;\r\n\r\n        return d3\r\n                .selectAll('svg rect.c9-chart-line.c9-rect-overlay');\r\n    }\r\n\r\n    /**\r\n     * Update Interaction: Hover\r\n     */\r\n    updateInteraction() {\r\n        var self = this,\r\n            selector        = self.selectRectLayer(),\r\n            hoverEnable     = self.hover.enable,\r\n            hoverOptions    = self.hover.options,\r\n            onMouseOverCallback = hoverOptions.onMouseOver.callback,\r\n            onMouseOutCallback  = hoverOptions.onMouseOut.callback,\r\n            onMouseMoveCallback  = hoverOptions.onMouseMove.callback,\r\n            onClickCallback  = self.click.callback;\r\n\r\n        var tooltip = new Tooltip(self.options.tooltip);\r\n\r\n        // Update Event Factory\r\n        self.eventFactory = {\r\n            // 'click': function(d) {\r\n            //     if (Helper.isFunction(onClickCallback)) {\r\n            //         onClickCallback.call(this, d);\r\n            //     }\r\n            // },\r\n            // 'mouseover': function(d) {\r\n            //     if (!hoverEnable) return;\r\n                \r\n            //     if (Helper.isFunction(onMouseOverCallback)) {\r\n            //         onMouseOverCallback.call(this, d);\r\n            //     }\r\n\r\n            //     // tooltip.draw(d, self, 'mouseover');\r\n            // },\r\n            'mouseout': function(d) {\r\n                if (!hoverEnable) return;\r\n\r\n                // if (Helper.isFunction(onMouseOutCallback)) {\r\n                //     onMouseOutCallback.call(this, d);\r\n                // }\r\n\r\n                self.hoverLine.style('stroke-opacity', 0);\r\n\r\n                // Remove circle style before\r\n                self.selectAllCircle()[0].forEach(function(circle) {\r\n                    d3.select(circle)\r\n                        .style('fill', self.options.point.fill)\r\n                        .style('fill-opacity', self.options.point.opacity);\r\n                }); \r\n\r\n                tooltip.draw(d, self, 'mouseout');\r\n            },\r\n            'mousemove': function(d) {\r\n                if (!hoverEnable) return;\r\n\r\n\r\n                var mouse   = d3.mouse(this),\r\n                    mouseX  = mouse[0],\r\n                    mouseY  = mouse[1],\r\n\r\n                    curValueX   = self.x.invert(mouseX);\r\n\r\n                var sameTimeArr = [],\r\n                    sameTimeValueArr = [];\r\n\r\n                self.dataTarget.forEach(function(d, i) {\r\n                    sameTimeArr[i] = d.value;\r\n                    sameTimeArr[i].sort(function(a, b) { return a.valueX - b.valueX; });\r\n                    var idx = self._isTimeDomain ? self.bisectDate(sameTimeArr[i], new Date(curValueX)) : self.bisectDate(sameTimeArr[i], curValueX);\r\n                    \r\n                    var d0, d1;\r\n                    \r\n                    d0 = (idx === 0) ? sameTimeArr[i][idx] : sameTimeArr[i][idx - 1];\r\n                    d1 = !Helper.isEmpty(sameTimeArr[i][idx]) ? sameTimeArr[i][idx] : sameTimeArr[i][idx-1] ;\r\n\r\n                    // Check d0, d1 still in boundary or not\r\n                    // To work well with brushing\r\n                    d0 = self.checkBoundary(d0.valueX) === -1 ? d1 : d0;\r\n                    d1 = self.checkBoundary(d1.valueX) === 1 ? d0 : d1;\r\n\r\n                    // work out which date value is closest to the mouse\r\n                    sameTimeValueArr[i] = (curValueX - d0.valueX > d1.valueX - curValueX) ? d1 : d0;\r\n                });\r\n\r\n                if (Helper.isFunction(onMouseMoveCallback)) {\r\n                    onMouseMoveCallback.call(this, sameTimeValueArr);\r\n                }\r\n                \r\n                var x = self.x(!Helper.isEmpty(sameTimeValueArr[0].valueX) ? sameTimeValueArr[0].valueX : sameTimeValueArr[1].valueX);\r\n                var y = self.y(!Helper.isEmpty(sameTimeValueArr[0].valueY) ? sameTimeValueArr[0].valueY : sameTimeValueArr[1].valueY);\r\n\r\n                // console.log(x);\r\n\r\n                // Remove circle style before\r\n                self.selectAllCircle()[0].forEach(function(circle) {\r\n                    d3.select(circle)\r\n                        .style('fill', self.options.point.fill)\r\n                        .style('fill-opacity', self.options.point.opacity);\r\n                }); \r\n\r\n                // Update circle style after mouse move\r\n                for (let i=0; i < sameTimeValueArr.length; i++) {\r\n                    let circle = d3.select(\"circle[data-ref='\" + sameTimeValueArr[i]['data-ref'] + \"']\");\r\n                    circle\r\n                    .style('fill', 'steelblue')\r\n                    .style('fill-opacity', 1);\r\n                }\r\n\r\n                // focus.select('#focusCircle')\r\n                //     .attr('cx', x)\r\n                //     .attr('cy', y);\r\n                self.hoverLine\r\n                    .attr('x1', x).attr('y1', self.y(self.y.domain()[0]))\r\n                    .attr('x2', x).attr('y2', self.y(self.y.domain()[1]))\r\n                    .style('stroke-opacity', 1);\r\n                // self.hoverLine\r\n                //     .attr('x1', self.x(self.x.domain()[0])).attr('y1', y)\r\n                //     .attr('x2', self.x(self.x.domain()[1])).attr('y2', y)\r\n                //     .attr('stroke-opacity', 1);\r\n\r\n                //** Display Hover line\r\n                // self.hoverLine\r\n                //     .attr('x1', self.x(sameTimeValueArr[0].valueX))\r\n                //     .attr('x2', self.x(sameTimeValueArr[0].valueX))\r\n                //     .attr('stroke-opacity', 1);\r\n\r\n                tooltip.draw(sameTimeValueArr, self, 'mousemove');\r\n            }\r\n        }\r\n\r\n        selector.on(self.eventFactory);\r\n    }\r\n\r\n    getLineStyle() {\r\n        var self = this;\r\n\r\n        let r;\r\n\r\n        switch(self.options.line.style) {\r\n            case 'dot':\r\n                r = \"1, 1\";\r\n                break;\r\n            case 'solid':\r\n                r = 'none';\r\n                break;\r\n            case 'dash':\r\n                r = \"3, 3\";\r\n                break;\r\n            default:\r\n                r = 'none';\r\n                break;\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    checkBoundary(value) {\r\n        var self = this;\r\n\r\n        var bound = self.width - self.margin.left - self.margin.right,\r\n            checkWidth = self.x(value);\r\n\r\n        return checkWidth < 0 ? -1 : (checkWidth > bound) ? 1 : 0;\r\n    }\r\n    \r\n    /*=====  End of Main Functions  ======*/\r\n\r\n    /*========================================\r\n    =            User's Functions            =\r\n    ========================================*/\r\n    /**\r\n     * Custom Event Listener\r\n     * @param  {[type]}   eventType [description]\r\n     * @param  {Function} callback  [description]\r\n     */\r\n    on(eventType, callback) {\r\n        super.on(eventType, callback);\r\n        \r\n        var self = this;\r\n        var selector    = self.selectRectLayer();\r\n\r\n        // Update Event Factory\r\n        let eventFactory = {\r\n            'mousemove.event': function(d) {\r\n\r\n                var mouse   = d3.mouse(this),\r\n                    mouseX  = mouse[0],\r\n                    mouseY  = mouse[1],\r\n\r\n                    curValueX   = self.x.invert(mouseX);\r\n\r\n                var sameTimeArr = [],\r\n                    sameTimeValueArr = [];\r\n\r\n                self.dataTarget.forEach(function(d, i) {\r\n                    sameTimeArr[i] = d.value;\r\n                    sameTimeArr[i].sort(function(a, b) { return a.valueX - b.valueX; });\r\n                    var idx = self._isTimeDomain ? self.bisectDate(sameTimeArr[i], new Date(curValueX)) : self.bisectDate(sameTimeArr[i], curValueX);\r\n                    \r\n                    var d0, d1;\r\n                    \r\n                    d0 = (idx === 0) ? sameTimeArr[i][idx] : sameTimeArr[i][idx - 1];\r\n                    d1 = sameTimeArr[i][idx];\r\n\r\n                    // work out which date value is closest to the mouse\r\n                    sameTimeValueArr[i] = (curValueX - d0.valueX > d1.valueX - curValueX) ? d1 : d0;\r\n                });\r\n\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, sameTimeValueArr);\r\n                }\r\n            }\r\n        }\r\n\r\n        let eventName = eventType + '.event';\r\n\r\n        selector.on(eventName, eventFactory[eventName]);\r\n    }\r\n\r\n    /**\r\n     * Main draw function of Line Chart\r\n     */\r\n    draw() {\r\n        super.draw();\r\n\r\n        var self = this;\r\n\r\n        var axis    = new Axis(self.options.axis, self, self.width - self.margin.left - self.margin.right, self.height - self.margin.top - self.margin.bottom);\r\n        var title   = new Title(self.options.title, self);\r\n        var legend  = new Legend(self.options.legend, self);\r\n        var table  = new Table(self.options.table, self, self.dataTarget);\r\n\r\n        self.axis = axis;\r\n        self.title = title;\r\n        self.legend = legend;\r\n        self.table = table;\r\n\r\n        // Draw title\r\n        self.title.draw();\r\n\r\n        // Draw axis\r\n        self.axis.draw();\r\n\r\n        self.update(self.dataTarget);\r\n        self.updateSubChart(self.dataTarget);\r\n        self.updateOverlay();\r\n        self.updateHoverLine();\r\n        self.updateInteraction();\r\n\r\n        // Draw legend\r\n        self.legend.draw();\r\n        self.legend.updateInteractionForLineChart(self);\r\n\r\n        // Draw table\r\n        self.table.draw();\r\n    }\r\n    \r\n    /**\r\n     * Set option via stand-alone function\r\n     * @param {[type]} key   [description]\r\n     * @param {[type]} value [description]\r\n     */\r\n    setOption(key, value) {\r\n        super.setOption(key, value);\r\n\r\n        var self = this;\r\n\r\n        Helper.set(key, value, self.options);\r\n\r\n        self.updateConfig(self.options);\r\n    }\r\n\r\n    /**\r\n     * Update chart based on new data with optional dataConfig\r\n     * @param  {[type]} data       [description]\r\n     * @param  {[type]} dataConfig [description]\r\n     */\r\n    updateData(newData, newDataConfig) {\r\n        var self = this;\r\n\r\n        var newCfg = {};\r\n\r\n        if (!Helper.isEmpty(newDataConfig)) {\r\n\r\n            newCfg.data = {\r\n                plain: newData,\r\n                keys: newDataConfig,\r\n            };\r\n\r\n        } else {\r\n\r\n            newCfg.data = {\r\n                plain: newData,\r\n            };\r\n\r\n        }\r\n        \r\n        // Update chart\r\n        self.updateDataConfig(newCfg);\r\n        self.update(self.dataTarget);\r\n        self.updateSubChart(self.dataTarget);\r\n\r\n        // Update Axis\r\n        self.axis.update(self.x, self.y, 100);\r\n\r\n        // Update Legend\r\n        self.legend.update(self.dataTarget);\r\n        self.legend.updateInteractionForLineChart(self);\r\n\r\n        // Update Table\r\n        self.table.update(self.dataTarget);\r\n    }\r\n    /*=====  End of User's Functions  ======*/\r\n    \r\n    \r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/C9.LineChart.js\n **/","import Chart from './C9.Chart';\r\n\r\nimport Axis from './utils/C9.Axis';\r\nimport Title from './utils/C9.Title';\r\nimport Legend from './utils/C9.Legend';\r\nimport Table from './utils/C9.Table';\r\nimport Tooltip from './utils/C9.Tooltip';\r\n\r\nimport Helper from '../helper/C9.Helper';\r\nimport DataAdapter from '../helper/C9.DataAdapter';\r\n\r\nexport default class PieChart extends Chart {\r\n    constructor(options) {\r\n        super(options);\r\n\r\n        var self = this;\r\n\r\n        var config = {\r\n            radius: Math.min(self.width - self.margin.left - self.margin.right, self.height - self.margin.top - self.margin.bottom) / 2,\r\n            // showText: true\r\n        };\r\n\r\n        self.updateConfig(config);\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    get pie() {\r\n        return this._pie;\r\n    }\r\n\r\n    get arc() {\r\n        return this._arc;\r\n    }\r\n\r\n    get currentData() {\r\n        return this._currentData;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    set pie(arg) {\r\n        if (arg) {\r\n            this._pie = arg;\r\n        }\r\n    }\r\n\r\n    set arc(arg) {\r\n        if (arg) {\r\n            this._arc = arg;\r\n        }\r\n    }\r\n\r\n    set currentData(arg) {\r\n        if (arg) {\r\n            this._currentData = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n    \r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    /**\r\n     * Update Donut Chart Config\r\n     */\r\n    updateConfig(config) {\r\n        super.updateConfig(config);\r\n\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n\r\n        self.chartType  = 'pie';\r\n\r\n        var dataOption          = self.dataOption;\r\n        dataOption.colorRange   = self.colorRange;\r\n\r\n        var da = new DataAdapter(dataOption);\r\n        self.dataTarget     = da.getDataTarget(self.chartType);\r\n    }\r\n\r\n    /**\r\n     * Update Donut Chart Config\r\n     */\r\n    updateDataConfig(dataCfg) {\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(self.options, dataCfg);\r\n\r\n        self.chartType  = 'pie';\r\n\r\n        var dataOption          = self.dataOption;\r\n        dataOption.colorRange   = self.colorRange;\r\n\r\n        var da = new DataAdapter(dataOption);\r\n        self.dataTarget     = da.getDataTarget(self.chartType);\r\n    }\r\n\r\n    /**\r\n     * Update Donut Chart based on new data\r\n     * @param  {[type]} data [description]\r\n     */\r\n    update(data) {\r\n        var self = this;\r\n\r\n        var width   = self.width - self.margin.left - self.margin.right,\r\n            height  = self.height - self.margin.top - self.margin.bottom,\r\n            color   = self.colorRange;\r\n\r\n        self.arc = d3.svg.arc()\r\n                    .innerRadius(0)\r\n                    .outerRadius(self.options.radius);\r\n\r\n        //we can sort data here\r\n        self.pie = d3.layout.pie()\r\n                    .sort(null)\r\n                    .value(function(d) { return d.value; });\r\n\r\n        self.body.selectAll(\".c9-chart-pie.c9-custom-arc-container\").data([]).exit().remove();\r\n\r\n        //draw chart\r\n        var arcs = self.body\r\n                    .append('g')\r\n                        .attr('class', 'c9-chart-pie c9-custom-arc-container')\r\n                        .attr('transform', 'translate(' + (width / 2) + ',' + (height / 2) + ')')\r\n                        .selectAll('.c9-chart-pie.c9-custom-arc')\r\n                        .data(self.pie(self.dataTarget)).enter()\r\n                        .append('g')\r\n                            .attr('class', 'c9-chart-pie c9-custom-arc');\r\n\r\n        // Append main path contains pie\r\n        arcs.append('path')\r\n                .attr('class', 'c9-chart-pie c9-custom-path')\r\n                .attr('data-ref', function(d) { return d.data['data-ref']; })\r\n                .attr('d', self.arc)\r\n                .attr('fill', function(d, i) { return color(i); })\r\n                .attr('stroke', '#ffffff')\r\n                .each(function(d) { self.currentData = d; }); \r\n                // Current data used for calculate interpolation \r\n                // between current arc vs disabled arc\r\n\r\n\r\n        // Append middle text display name\r\n        // if (self.options.showText) {\r\n        //     arcs.append('text')\r\n        //             .attr('class', 'c9-chart-pie c9-custom-text')\r\n        //             .attr('transform', function(d) { return 'translate(' + self.arc.centroid(d) + ')'; })\r\n        //             .attr('dy', '.35em')\r\n        //             .attr('text-anchor', 'middle')\r\n        //             .text(function(d) { return d.data.name; });\r\n        // }\r\n        \r\n        self.updateInteraction();\r\n    }\r\n\r\n    /**\r\n     * Select all path as type PATH in Donut Chart via its CLASS\r\n     */\r\n    selectAllPath() {\r\n        var self = this;\r\n\r\n        return self.body\r\n                    .selectAll('path.c9-chart-pie.c9-custom-path');\r\n    }\r\n\r\n    /**\r\n     * Update Interaction: Hover\r\n     * @return {} \r\n     */\r\n    updateInteraction() {\r\n        var self    = this,\r\n            selector= self.selectAllPath(),\r\n            color   = self.colorRange,\r\n            chartInnerBefore = 0,\r\n            chartOuterBefore = self.options.radius,\r\n            chartInnerAfter = 0,\r\n            chartOuterAfter = self.options.radius * 1.2,\r\n            hoverOptions        = self.hover.options,\r\n            hoverEnable         = self.hover.enable,\r\n            onMouseOverCallback = hoverOptions.onMouseOver.callback,\r\n            onMouseOutCallback  = hoverOptions.onMouseOut.callback,\r\n            onClickCallback     = self.click.callback;\r\n\r\n        var tooltip = new Tooltip(self.options.tooltip);\r\n\r\n        // Main Event Dispatch for paths in pie chart\r\n        self.eventFactory = {\r\n            'click': function(d, i) {\r\n                if (Helper.isFunction(onClickCallback)) {\r\n                    onClickCallback.call(this, d);\r\n                }\r\n            },\r\n\r\n            'mouseover': function(d, i) {\r\n                if (!hoverEnable) return;\r\n\r\n                if (Helper.isFunction(onMouseOverCallback)) {\r\n                    onMouseOverCallback.call(this, d);\r\n                }\r\n\r\n                var selector = d3.select(this);\r\n                selector.transition()\r\n                        .attr('d', d3.svg.arc()\r\n                            .innerRadius(chartInnerAfter)\r\n                            .outerRadius(chartOuterAfter)\r\n                        );\r\n\r\n                // For legend\r\n                if (self.options.legend.show) {\r\n                    self.legend.item.each(function() {\r\n                        if (d3.select(this).attr('data-ref') !== d.data['data-ref'] && d3.select(this).attr('data-enable')) {\r\n                            d3.select(this).attr('opacity', '0.3');\r\n                        }\r\n                    });\r\n                }\r\n\r\n                // For Table\r\n                if (self.options.table.show) {\r\n                    var tr = d3.selectAll('.c9-table-container>.c9-table-body tr');\r\n                    tr.filter(function(i) { return i['data-ref'] != d.data['data-ref'] }).selectAll('td').style('opacity', '0.5');\r\n                    var selectedItem = tr.filter(function(i) { return i['data-ref'] == d.data['data-ref'] });\r\n                    //set its style and scroll to its pos\r\n                    selectedItem.selectAll('td').style('opacity', '1');\r\n                    Helper.scroll(d3.select('.c9-table-container')[0][0], selectedItem[0][0].offsetTop, 200);\r\n                }\r\n\r\n                // For Chart\r\n                self.selectAllPath().each(function(){\r\n                    if (d3.select(this).attr('data-ref') !== d.data['data-ref']) {\r\n                        d3.select(this).attr('opacity', '0.3');\r\n                    }\r\n                });\r\n\r\n                // For Tooltip\r\n                tooltip.draw(d, self, 'mouseover');\r\n            },\r\n            \r\n            'mouseout': function(d, i) {\r\n                if (!hoverEnable) return;\r\n\r\n                if (Helper.isFunction(onMouseOutCallback)) {\r\n                    onMouseOutCallback.call(this, d);\r\n                }\r\n\r\n                var selector = d3.select(this);\r\n                selector.transition()\r\n                        .duration(500)\r\n                        .ease('bounce')\r\n                        .attr('d', d3.svg.arc()\r\n                            .innerRadius(chartInnerBefore)\r\n                            .outerRadius(chartOuterBefore)\r\n                        );\r\n\r\n                // For legend\r\n                if (self.options.legend.show)\r\n                    self.legend.item.each(function() {\r\n                        if (d3.select(this).attr('data-ref') !== d.data['data-ref'] && d3.select(this).attr('data-enable')) {\r\n                            d3.select(this).attr('opacity', '1.0');\r\n                        }\r\n                    });\r\n\r\n                // For Table\r\n                if (self.options.table.show) {\r\n                    d3.selectAll('.c9-table-container>.c9-table-body tr').selectAll('td').style('opacity', '');\r\n                }\r\n                \r\n\r\n                // For Chart\r\n                self.selectAllPath().each(function(){\r\n                    if (d3.select(this).attr('data-ref') !== d.data['data-ref']) {\r\n                        d3.select(this).attr('opacity', '1.0');\r\n                    }\r\n                });\r\n\r\n                // For Tooltip\r\n                tooltip.draw(d, self, 'mouseout');\r\n            }\r\n        }\r\n\r\n        selector.on(self.eventFactory);\r\n    }\r\n    \r\n    /*=====  End of Main Functions  ======*/\r\n\r\n    /*========================================\r\n    =            User's Functions            =\r\n    ========================================*/\r\n    /**\r\n     * Custom Event Listener\r\n     * @param  {[type]}   eventType [description]\r\n     * @param  {Function} callback  [description]\r\n     * @return {[type]}             [description]\r\n     */\r\n    on(eventType, callback) {\r\n        super.on(eventType, callback);\r\n        \r\n        var self = this;\r\n        var selector    = self.selectAllPath();\r\n\r\n        // Update Event Factory\r\n        let eventFactory = {\r\n            'click.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            },\r\n            'mouseover.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            },\r\n            'mouseout.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            }\r\n        }\r\n\r\n        let eventName = eventType + '.event';\r\n\r\n        selector.on(eventName, eventFactory[eventName]);\r\n    }\r\n\r\n    /**\r\n     * Main draw function of Pie Chart\r\n     */\r\n    draw() {\r\n        super.draw();\r\n\r\n        var self = this;\r\n        \r\n        var title   = new Title(self.options.title, self);\r\n        var legend  = new Legend(self.options.legend, self, self.dataTarget);\r\n        var table   = new Table(self.options.table, self, self.dataTarget);\r\n\r\n        self.title = title;\r\n        self.legend = legend;\r\n        self.table = table;\r\n\r\n        // Draw title\r\n        self.title.draw();\r\n\r\n        // Update interaction of this own chart\r\n        self.update(self.dataTarget);\r\n        self.updateInteraction();\r\n        \r\n        // Draw legend\r\n        self.legend.draw();\r\n        self.legend.updateInteractionForDonutPieChart(self, self.selectAllPath(), self.pie, self.currentData, self.arc);    \r\n        \r\n        // Draw table\r\n        self.table.draw();\r\n        self.table.updateInteractionForDonutPieChart(self);\r\n    }\r\n    \r\n    /**\r\n     * Set option via stand-alone function\r\n     * @param {[type]} key   [description]\r\n     * @param {[type]} value [description]\r\n     */\r\n    setOption(key, value) {\r\n        super.setOption(key, value);\r\n\r\n        var self = this;\r\n\r\n        Helper.set(key, value, self.options);\r\n\r\n        self.updateConfig(self.options);\r\n    }\r\n\r\n    /**\r\n     * Update chart based on new data with optional dataConfig\r\n     * @param  {[type]} data       [description]\r\n     * @param  {[type]} dataConfig [description]\r\n     */\r\n    updateData(newData, newDataConfig) {\r\n        var self = this;\r\n\r\n        var newCfg = {};\r\n\r\n        if (!Helper.isEmpty(newDataConfig)) {\r\n\r\n            newCfg.data = {\r\n                plain: newData,\r\n                keys: newDataConfig,\r\n            };\r\n\r\n        } else {\r\n\r\n            newCfg.data = {\r\n                plain: newData,\r\n            };\r\n\r\n        }\r\n        \r\n        // Update Chart\r\n        self.updateDataConfig(newCfg);\r\n        self.update(self.dataTarget);\r\n\r\n        // Update Legend\r\n        self.legend.update(self.dataTarget);\r\n        self.legend.updateInteractionForDonutPieChart(self, self.selectAllPath(), self.pie, self.currentData, self.arc);    \r\n    \r\n        // Update Table\r\n        self.table.update(self.dataTarget);\r\n    }\r\n    /*=====  End of User's Functions  ======*/\r\n    \r\n    \r\n    \r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/C9.PieChart.js\n **/","import Chart from './C9.Chart';\r\n\r\nimport Axis from './utils/C9.Axis';\r\nimport Title from './utils/C9.Title';\r\nimport Legend from './utils/C9.Legend';\r\nimport Table from './utils/C9.Table';\r\nimport Tooltip from './utils/C9.Tooltip';\r\n\r\nimport Helper from '../helper/C9.Helper';\r\nimport DataAdapter from '../helper/C9.DataAdapter';\r\n\r\nexport default class TimeLine extends Chart {\r\n    constructor(options) {\r\n        super(options);\r\n\r\n        var self = this;\r\n\r\n        var config = {\r\n            separatorColor: \"rgb(154, 154, 154)\",\r\n            backgroundColor: null,\r\n            starting: 0,\r\n            ending: 0,\r\n            stack: true,\r\n            itemHeight: 25,\r\n            itemMargin: 15,\r\n            labelMargin: 50,\r\n            striped: null\r\n        };\r\n\r\n        self.updateConfig(config);\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    get maxStack() {\r\n        return this._maxStack;\r\n    }\r\n\r\n    get subChartX() {\r\n        return this._subChartX;\r\n    }\r\n\r\n    get subChartXAxis() {\r\n        return this._subChartXAxis;\r\n    }\r\n\r\n    get subChartWidth() {\r\n        return this._subChartWidth;\r\n    }\r\n\r\n    get subChartHeight() {\r\n        return this._subChartHeight;\r\n    }\r\n\r\n    get subChartMargin() {\r\n        return this._subChartMargin;\r\n    }\r\n\r\n    get brush() {\r\n        return this._brush;\r\n    }\r\n\r\n    get stackList() {\r\n        return this._stackList;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    set maxStack(arg) {\r\n        if (arg) {\r\n            this._maxStack = arg;\r\n        }\r\n    }\r\n\r\n    set subChartX(arg) {\r\n        if (arg) {\r\n            this._subChartX = arg;\r\n        }\r\n    }\r\n\r\n    set subChartXAxis(arg) {\r\n        if (arg) {\r\n            this._subChartXAxis = arg;\r\n        }\r\n    }\r\n\r\n    set subChartWidth(arg) {\r\n        if (arg) {\r\n            this._subChartWidth = arg;\r\n        }\r\n    }\r\n\r\n    set subChartHeight(arg) {\r\n        if (arg) {\r\n            this._subChartHeight = arg;\r\n        }\r\n    }\r\n\r\n    set subChartMargin(arg) {\r\n        if (arg) {\r\n            this._subChartMargin = arg;\r\n        }\r\n    }\r\n\r\n    set brush(arg) {\r\n        if (arg) {\r\n            this._brush = arg;\r\n        }\r\n    }\r\n\r\n    set stackList(arg) {\r\n        if (arg) {\r\n            this._stackList = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n    \r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n\r\n    updateConfig(config) {\r\n        super.updateConfig(config);\r\n\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n\r\n        self.chartType          = \"timeline\";\r\n        self.maxStack           = 1;\r\n        self.stackList          = {};\r\n\r\n        var dataOption          = self.dataOption;\r\n        dataOption.colorRange   = self.colorRange;\r\n\r\n        var da = new DataAdapter(dataOption);\r\n        self.dataTarget = da.getDataTarget(self.chartType);\r\n\r\n        var \r\n            maxStack = 0,\r\n            minTime = 0,\r\n            maxTime = 0,\r\n            width = self.width - self.margin.left - self.margin.right,\r\n            height = self.height - self.margin.top - self.margin.bottom;\r\n\r\n        // count number of stack and calculate min time, max time from data\r\n        if (self.options.stack || self.options.ending === 0 || self.options.starting === 0) {\r\n            \r\n            self.dataTarget.forEach(function (datum, index) {\r\n\r\n                if (self.options.stack && Object.keys(self.stackList).indexOf(index) == -1) {\r\n                    self.stackList[index] = maxStack;\r\n                    maxStack++;\r\n                }\r\n\r\n                datum.value.forEach(function (time, i) {\r\n                    if(self.options.starting === 0)\r\n                        if (time.start < minTime || minTime === 0)\r\n                            minTime = time.start;\r\n                    if(self.options.ending === 0) {\r\n                        if (time.start > maxTime)\r\n                            maxTime = time.start;\r\n                        if (time.end > maxTime)\r\n                            maxTime = time.end;\r\n                    }\r\n                });\r\n            });\r\n\r\n            if (self.options.ending === 0) {\r\n              self.options.ending = maxTime;\r\n            }\r\n            if (self.options.starting === 0) {\r\n              self.options.starting = minTime;\r\n            }\r\n        }\r\n\r\n        self.maxStack = maxStack;\r\n\r\n        self.x = d3.time.scale()\r\n                .domain([self.options.starting, self.options.ending])\r\n                .range([0, self.width]);\r\n    }\r\n\r\n    updateDataConfig(dataCfg) {\r\n\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(self.options, dataCfg);\r\n\r\n        self.chartType          = \"timeline\";\r\n        self.maxStack           = 1;\r\n        self.stackList          = {};\r\n\r\n        var dataOption          = self.dataOption;\r\n        dataOption.colorRange   = self.colorRange;\r\n\r\n        var da = new DataAdapter(dataOption);\r\n        self.dataTarget = da.getDataTarget(self.chartType);\r\n\r\n        var \r\n            maxStack = 0,\r\n            minTime = 0,\r\n            maxTime = 0,\r\n            width = self.width - self.margin.left - self.margin.right,\r\n            height = self.height - self.margin.top - self.margin.bottom;\r\n\r\n        // count number of stack and calculate min time, max time from data\r\n        if (self.options.stack || self.options.ending === 0 || self.options.starting === 0) {\r\n            \r\n            self.dataTarget.forEach(function (datum, index) {\r\n\r\n                if (self.options.stack && Object.keys(self.stackList).indexOf(index) == -1) {\r\n                    self.stackList[index] = maxStack;\r\n                    maxStack++;\r\n                }\r\n\r\n                datum.value.forEach(function (time, i) {\r\n                    if(self.options.starting === 0)\r\n                        if (time.start < minTime || minTime === 0)\r\n                            minTime = time.start;\r\n                    if(self.options.ending === 0) {\r\n                        if (time.start > maxTime)\r\n                            maxTime = time.start;\r\n                        if (time.end > maxTime)\r\n                            maxTime = time.end;\r\n                    }\r\n                });\r\n            });\r\n\r\n            if (self.options.ending === 0) {\r\n              self.options.ending = maxTime;\r\n            }\r\n            if (self.options.starting === 0) {\r\n              self.options.starting = minTime;\r\n            }\r\n        }\r\n\r\n        self.maxStack = maxStack;\r\n\r\n        self.x = d3.time.scale()\r\n                .domain([self.options.starting, self.options.ending])\r\n                .range([0, self.width]);\r\n    }\r\n\r\n    update(data) {\r\n        var self = this;\r\n\r\n        var width = self.width - self.margin.left - self.margin.right,\r\n            height = self.height - self.margin.top - self.margin.bottom;\r\n\r\n        var scale = width / (self.options.ending - self.options.starting);\r\n\r\n        var color = self.colorRange;\r\n\r\n        var stackList = self.stackList;\r\n\r\n        self.body.selectAll(\".c9-timeline-border-bar\").data([]).exit().remove();\r\n        self.body.selectAll(\".c9-timeline-chart.c9-background-container\").data([]).exit().remove();\r\n        self.body.selectAll(\".c9-timeline-chart.c9-stripe-background-container\").data([]).exit().remove();\r\n        self.body.selectAll(\".c9-timeline-chart.c9-rect-container\").data([]).exit().remove();\r\n        self.svg.selectAll(\".c9-timeline-chart.c9-label-container\").remove();\r\n        self.body.selectAll(\".c9-timeline-row-separator\").remove();\r\n\r\n        // Update clip-parth\r\n        self.svg.select('#clip').select('rect').attr('height', (self.options.itemHeight + self.options.itemMargin) * data.length);\r\n\r\n        //draw border\r\n        self.body.append(\"rect\")\r\n            .attr(\"class\", \"c9-timeline-border-bar\")\r\n            .attr(\"x\", 0)\r\n            .attr(\"width\", width)\r\n            .attr(\"y\", 0 - self.options.itemMargin / 2)\r\n            .attr(\"height\", (self.options.itemHeight + self.options.itemMargin) * data.length)\r\n            .attr(\"stroke\", \"rgb(154, 154, 154)\")\r\n            .attr(\"stroke-width\", 2)\r\n            .attr(\"fill\", \"none\");\r\n\r\n        var labelContainer = self.svg.append(\"g\")\r\n                                .attr('class', 'c9-timeline-chart c9-label-container');\r\n\r\n        data.forEach( function(datum, index) {\r\n            var barYAxis = ((self.options.itemHeight + self.options.itemMargin) * stackList[index]);\r\n            //draw background\r\n            if (self.options.backgroundColor) { \r\n                var bgContainer = self.body.append(\"g\")\r\n                                    .attr('class', 'c9-timeline-chart c9-background-container');\r\n\r\n                bgContainer.selectAll(\".c9-background-container\")\r\n                    .data(datum.value).enter()\r\n                    .append(\"rect\")\r\n                    .attr(\"class\", \"c9-timeline-background-bar\")\r\n                    .attr(\"x\", 0)\r\n                    .attr(\"width\", width)\r\n                    .attr(\"y\", barYAxis - self.options.itemMargin / 2)\r\n                    .attr(\"height\", self.options.itemHeight + self.options.itemMargin)\r\n                    .attr(\"fill\", Helper.isArray(self.options.backgroundColor) ? self.options.backgroundColor[index % (self.maxStack - 1)] : self.options.backgroundColor);\r\n            }\r\n\r\n            if (self.options.striped) { \r\n                var bgContainer = self.body.append(\"g\")\r\n                                    .attr('class', 'c9-timeline-chart c9-stripe-background-container');\r\n                bgContainer.selectAll(\".c9-stripe-background-container\")\r\n                    .data(datum.value).enter()\r\n                    .insert(\"rect\")\r\n                    .attr(\"class\", \"c9-timeline-stripe-background-bar\")\r\n                    .attr(\"x\", 0)\r\n                    .attr(\"width\", width)\r\n                    .attr(\"y\", barYAxis - self.options.itemMargin / 2)\r\n                    .attr(\"height\", self.options.itemHeight + self.options.itemMargin)\r\n                    .attr(\"fill\", index % 2 ? \"rgb(255, 255, 255)\" : \"rgb(230, 230, 230)\");\r\n            }\r\n\r\n            //draw item\r\n            var itemContainer = self.body.append(\"g\")\r\n                                    .attr('class', 'c9-timeline-chart c9-rect-container')\r\n                                    .attr(\"clip-path\", \"url(#clip)\");\r\n\r\n            itemContainer.selectAll(\".c9-rect-container\")\r\n                .data(datum.value).enter()\r\n                .append(function (d, i) {\r\n                    return document.createElementNS(d3.ns.prefix.svg, d.end != \"Invalid Date\" ? \"rect\" : \"circle\");\r\n                })\r\n                .attr('class', 'c9-timeline-custom-rect')\r\n                .attr(\"x\", function(d, i) { return self.getXPos(d,i,scale); })\r\n                .attr(\"y\", function(d, i) { return self.getStackPosition(d, i, index); })\r\n                .attr(\"width\", function (d, i) {\r\n                    return (d.end - d.start) * scale;\r\n                })\r\n                .attr(\"cy\", function (d, i) {\r\n                    return self.getStackPosition(d, i, index) + self.options.itemHeight / 2;\r\n                })\r\n                .attr(\"cx\", function(d, i) { return self.getXPos(d,i,scale); })\r\n                .attr(\"r\", self.options.itemHeight / 2)\r\n                .attr(\"height\", self.options.itemHeight)\r\n                .style(\"fill\", color(index));\r\n\r\n            if (self.options.separatorColor && index < self.maxStack - 1) {\r\n                var lineYAxis = ( self.options.itemHeight + self.options.itemMargin / 2 + (self.options.itemHeight + self.options.itemMargin) * stackList[index]);\r\n                self.body.append(\"svg:line\")\r\n                  .attr(\"class\", \"c9-timeline-row-separator\")\r\n                  .attr(\"x1\", 0)\r\n                  .attr(\"x2\", width)\r\n                  .attr(\"y1\", lineYAxis)\r\n                  .attr(\"y2\", lineYAxis)\r\n                  .attr(\"stroke-width\", 3)\r\n                  .attr(\"stroke\", Helper.isArray(self.options.separatorColor) ? self.options.separatorColor[index % (self.maxStack - 1)] : self.options.separatorColor);\r\n            }\r\n\r\n            //draw the label left side item\r\n            if (!Helper.isEmpty(datum.name) && datum.name != \"\") { \r\n                var rowsDown = self.margin.top + (self.options.itemHeight + self.options.itemMargin) * (stackList[index] === undefined ? 0 : stackList[index]) + self.options.itemHeight * 0.75;\r\n\r\n                labelContainer.append(\"text\")\r\n                    .attr(\"class\", \"c9-timeline-label\")\r\n                    .attr(\"transform\", \"translate(\" + self.options.labelMargin + \",\" + rowsDown + \")\")\r\n                    .text(datum.name);\r\n            }\r\n            //draw icon\r\n            else if (!Helper.isEmpty(datum.icon) && datum.icon != \"\") {\r\n                labelContainer.append(\"image\")\r\n                    .attr(\"class\", \"c9-timeline-label\")\r\n                    .attr(\"transform\", \"translate(\"+ self.options.labelMargin +\",\"+ (self.margin.top + (self.options.itemHeight + self.options.itemMargin) * stackList[index])+\")\")\r\n                    .attr(\"xlink:href\", datum.icon)\r\n                    .attr(\"width\", self.options.itemHeight)\r\n                    .attr(\"height\", self.options.itemHeight);\r\n            }\r\n        });\r\n\r\n        self.updateInteraction();\r\n    }\r\n\r\n    /**\r\n     * Update sub chart\r\n     */\r\n    updateSubChart(data) {\r\n        var self = this;\r\n\r\n        if (self.options.subchart.show) {\r\n            var width = self.width - self.margin.left - self.margin.right,\r\n                height = self.height - self.margin.top - self.margin.bottom;\r\n\r\n            // Set actual size for chart after initialization\r\n            var chartBox = self.body.node().getBBox();\r\n            // self.actualWidth = chartBox.width - 4 * self.point.radius;\r\n            self.actualHeight = chartBox.height;\r\n\r\n            /*----------  Sub Chart  ----------*/\r\n            \r\n            self.subChartWidth = width,\r\n            self.subChartHeight = self.options.subchart.height,\r\n            self.subChartMargin = {\r\n                'top': self.actualHeight + 100,\r\n                'left': self.margin.left\r\n            };\r\n\r\n            self.subChartX = d3.time.scale().range([0, self.subChartWidth]);\r\n\r\n            self.subChartX.domain([self.options.starting, self.options.ending]);\r\n\r\n            self.subChartXAxis = d3.svg.axis()\r\n                            .scale(self.subChartX)\r\n                            .orient(\"bottom\");\r\n\r\n            self.brush = d3.svg.brush()\r\n                            .x(self.subChartX)\r\n                            .on(\"brush\", function() {\r\n                                // Update axis\r\n                                self.x.domain(self.brush.empty() ? self.subChartX.domain() : self.brush.extent());\r\n                                self.axis.update(self.x, self.y, 500);\r\n                                var scale = width / (self.options.ending - self.options.starting);\r\n                                // Update main path of Line Chart\r\n                                self.body.selectAll(\".c9-timeline-custom-rect\")\r\n                                        .attr(\"x\", function(d, i) { return self.x(d.start); });\r\n                                        // .attr(\"x\", function(d, i) { return self.getXPos(d,i, scale); });\r\n                                        // .attr(\"y\", function(d, i) { return self.getStackPosition(d,i,stackList, index); })\r\n                                        // .attr(\"cx\", function(d, i) { return self.getXPos(d,i, scale); })\r\n                                        // .attr(\"cy\", function (d, i) {\r\n                                        //     return self.getStackPosition(d, i, stackList, index) + self.options.itemHeight / 2;\r\n                                        // });\r\n                            });\r\n\r\n            var scale = width / (self.options.ending - self.options.starting);\r\n\r\n            var color = self.colorRange;\r\n\r\n            self.svg.attr('height', self.height + self.subChartHeight);\r\n\r\n            self.svg.selectAll(\".c9-subchart-custom\").remove();\r\n            self.svg.selectAll(\".c9-subchart-custom .c9-subchart-axis\").remove();\r\n\r\n            var subChart = self.svg.append(\"g\")\r\n                            .attr(\"class\", \"c9-subchart-custom\")\r\n                            // .attr(\"clip-path\", \"url(#clip)\")\r\n                            .attr(\"transform\", \"translate(\" + self.subChartMargin.left + \",\" + self.subChartMargin.top + \")\");\r\n\r\n            var itemContainer = subChart.append('g')\r\n                                    .attr('class', 'c9-subchart-custom c9-subchart-timeline-container');\r\n                                    // .attr(\"clip-path\", \"url(#clip)\");\r\n\r\n            data.forEach(function(datum, index) {\r\n                if (!datum.enable) return;\r\n\r\n                itemContainer.selectAll(\".c9-subchart-timeline-container\")\r\n                    .data(datum.value).enter()\r\n                    .append(function (d, i) {\r\n                        return document.createElementNS(d3.ns.prefix.svg, d.end != \"Invalid Date\" ? \"rect\" : \"circle\");\r\n                    })\r\n                    .attr('class', 'c9-timeline-custom-rect')\r\n                    // .attr(\"x\", function(d, i) { return self.getXPos(d,i, scale); })\r\n                    .attr(\"x\", function(d, i) { return self.subChartX(d.start); })\r\n                    .attr(\"y\", function(d, i) { return self.getStackPosition(d, i , index); })\r\n                    // .attr(\"width\", function (d, i) {\r\n                    //     return (d.end - d.start) * scale;\r\n                    // })\r\n                    .attr(\"width\", function (d, i) {\r\n                        return self.subChartX(d.end) - self.subChartX(d.start);\r\n                    })\r\n                    .attr(\"cy\", function (d, i) {\r\n                        return self.getStackPosition(d, i, index) + self.options.itemHeight / 2;\r\n                    })\r\n                    // .attr(\"cx\", function(d, i) { return self.getXPos(d,i, scale); })\r\n                    .attr(\"cx\", function(d, i) { return self.subChartX(d.start); })\r\n                    .attr(\"r\", self.options.itemHeight / 2)\r\n                    .attr(\"height\", self.options.itemHeight / 2)\r\n                    .style(\"fill\", color(index));\r\n            });\r\n            \r\n\r\n            itemContainer.append(\"g\")\r\n                .attr(\"class\", \"c9-subchart-axis\")\r\n                .attr(\"transform\", \"translate(0,\" + self.subChartHeight + \")\")\r\n                .call(self.subChartXAxis);\r\n\r\n            //append the brush for the selection of subsection  \r\n            itemContainer.append(\"g\")\r\n                .attr(\"class\", \"c9-subchart-brush\")\r\n                .call(self.brush)\r\n                .selectAll(\"rect\")\r\n                .attr(\"height\", self.subChartHeight);\r\n\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Select all path as type RECT in Timeline Chart via its CLASS\r\n     */\r\n    selectAllRect() {\r\n        var self = this;\r\n\r\n        return self.body\r\n                    .selectAll('.c9-timeline-custom-rect');\r\n    }\r\n\r\n    /**\r\n     * Update Interaction: Hover\r\n     * @return {} \r\n     */\r\n    updateInteraction() {\r\n        var self    = this,\r\n            selector= self.selectAllRect(),\r\n            hoverOptions        = self.hover.options,\r\n            hoverEnable         = self.hover.enable,\r\n            onMouseOverCallback = hoverOptions.onMouseOver.callback,\r\n            onMouseOutCallback  = hoverOptions.onMouseOut.callback,\r\n            onClickCallback     = self.click.callback;\r\n\r\n        var tooltip = new Tooltip(self.options.tooltip);\r\n\r\n        // Main Event Dispatch for paths in pie chart\r\n        self.eventFactory = {\r\n            'click': function(d, i) {\r\n                if (Helper.isFunction(onClickCallback)) {\r\n                    onClickCallback.call(this, d);\r\n                }\r\n            },\r\n\r\n            'mouseover': function(d, i) {\r\n                if (!hoverEnable) return;\r\n\r\n                if (Helper.isFunction(onMouseOverCallback)) {\r\n                    onMouseOverCallback.call(this, d);\r\n                }\r\n\r\n                d3.select(this).style(\"fill\", function (d, i) { return self.getLightenColor(d.color || color(i)); });\r\n\r\n                tooltip.draw(d, self, 'mouseover');\r\n            },\r\n            \r\n            'mouseout': function(d, i) {\r\n                if (!hoverEnable) return;\r\n\r\n                if (Helper.isFunction(onMouseOutCallback)) {\r\n                    onMouseOutCallback.call(this, d);\r\n                }\r\n\r\n                d3.select(this).style(\"fill\", function (d, i) { return d.color || color(i); });\r\n\r\n                tooltip.draw(d, self, 'mouseout');\r\n            }\r\n        };\r\n\r\n        selector.on(self.eventFactory);\r\n    }\r\n\r\n    getXPos(d, i, scale) {\r\n        var self = this;\r\n        return (d.start - self.options.starting) * scale;\r\n    }\r\n\r\n    getStackPosition(d, i, index) {\r\n        var self = this;\r\n\r\n        var stackList = self.stackList;\r\n        \r\n        if (self.options.stack) {\r\n            return (self.options.itemHeight + self.options.itemMargin) * stackList[index];\r\n        }\r\n        return 0;\r\n    }\r\n    \r\n    /*=====  End of Main Functions  ======*/\r\n\r\n    /*========================================\r\n    =            User's Functions            =\r\n    ========================================*/\r\n\r\n    /**\r\n     * Custom Event Listener\r\n     * @param  {[type]}   eventType [description]\r\n     * @param  {Function} callback  [description]\r\n     * @return {[type]}             [description]\r\n     */\r\n    on(eventType, callback) {\r\n        super.on(eventType, callback);\r\n        \r\n        var self = this;\r\n        var selector    = self.selectAllRect();\r\n\r\n        // Update Event Factory\r\n        let eventFactory = {\r\n            'click.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            },\r\n            'mouseover.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            },\r\n            'mouseout.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            }\r\n        }\r\n\r\n        let eventName = eventType + '.event';\r\n\r\n        selector.on(eventName, eventFactory[eventName]);\r\n    }\r\n    \r\n    /**\r\n     * Main draw function\r\n     */\r\n    draw() {\r\n        super.draw();\r\n\r\n        var self = this;\r\n        \r\n        var axis    = new Axis(self.options.axis, self, self.width - self.margin.left - self.margin.right, (self.options.itemHeight + self.options.itemMargin) * self.maxStack);\r\n        var title   = new Title(self.options.title, self);  \r\n        var legend  = new Legend(self.options.legend, self, self.colorRange, self.dataTarget);\r\n\r\n        self.axis = axis;\r\n        self.title = title;\r\n        self.legend = legend;\r\n\r\n        // Draw title\r\n        self.title.draw();\r\n\r\n        // Draw axis\r\n        self.axis.draw();\r\n\r\n        self.update(self.dataTarget);\r\n        self.updateSubChart(self.dataTarget);\r\n        self.updateInteraction();\r\n    }\r\n\r\n    /**\r\n     * Set option via stand-alone function\r\n     * @param {[type]} key   [description]\r\n     * @param {[type]} value [description]\r\n     */\r\n    setOption(key, value) {\r\n        super.setOption(key, value);\r\n\r\n        var self = this;\r\n\r\n        Helper.set(key, value, self.options);\r\n\r\n        self.updateConfig(self.options);\r\n    }\r\n\r\n    /**\r\n     * Update chart based on new data with optional dataConfig\r\n     * @param  {[type]} data       [description]\r\n     * @param  {[type]} dataConfig [description]\r\n     */\r\n    updateData(newData, newDataConfig) {\r\n        var self = this;\r\n\r\n        var newCfg = {};\r\n\r\n        if (!Helper.isEmpty(newDataConfig)) {\r\n\r\n            newCfg.data = {\r\n                plain: newData,\r\n                keys: newDataConfig,\r\n            };\r\n\r\n        } else {\r\n\r\n            newCfg.data = {\r\n                plain: newData,\r\n            };\r\n\r\n        }\r\n        \r\n        // Update chart\r\n        self.updateDataConfig(newCfg);\r\n        self.update(self.dataTarget);\r\n        self.updateSubChart(self.dataTarget);\r\n\r\n        // Update Axis\r\n        self.axis.update(self.x, self.y, 100);\r\n    }\r\n    /*=====  End of User's Functions  ======*/\r\n    \r\n    \r\n    \r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/C9.TimeLine.js\n **/","import Helper from '../helper/C9.Helper';\r\nimport Tooltip from '../charts/utils/C9.Tooltip';\r\nimport DataAdapter from '../helper/C9.DataAdapter';\r\nexport default class Map {\r\n    constructor(options) {\r\n        var self    = this;\r\n        var config  = {\r\n            // container\r\n            id: \"body\",\r\n            // Layers:\r\n            // BingMaps, OSM, Raster, Tile, TileImage, Vector, VectorTile,...\r\n            // REF: http://openlayers.org/en/latest/apidoc/ol.source.html?stableonly=true\r\n            layers: {\r\n                type: \"Tile\",\r\n                source: {\r\n                    name: \"OSM\"\r\n                }\r\n            }, \r\n            view: {\r\n                lat: 0,\r\n                lon: 0,\r\n                zoom: 2\r\n            },\r\n            data: null,\r\n            format: null\r\n        };\r\n\r\n        self._options = Helper.mergeDeep(config, options);\r\n        self._dataSource      = self._options.data;\r\n        self.initMapConfig();\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n\r\n    // get id() {\r\n    //     return this._options.id;\r\n    // }\r\n\r\n    // get height() {\r\n    //     return this._height;\r\n    // }\r\n\r\n    // get width() {\r\n    //     return this._width;\r\n    // }\r\n\r\n    // get view() {\r\n    //     return this._view;\r\n    // }\r\n\r\n    // get markers() {\r\n    //     return this._markers;\r\n    // }\r\n\r\n    // get layers() {\r\n    //     return this._layers;\r\n    // }\r\n\r\n    get dataSource() {\r\n        return this._dataSource;\r\n    }\r\n\r\n    get data() {\r\n        return this._data;\r\n    }\r\n\r\n    get options() {\r\n        return this._options;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n    \r\n    \r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n\r\n    // set id(newId) {\r\n    //     if (newId) {\r\n    //         this._options.id = newId;\r\n    //     }\r\n    // }\r\n\r\n    // set height(newHeight) {\r\n    //     if (newHeight) {\r\n    //         this._height = newHeight;    \r\n    //     }\r\n    // }\r\n\r\n    // set width(newWidth) {\r\n    //     if (newWidth) {\r\n    //         this._width = newWidth;\r\n    //     }\r\n    // }\r\n\r\n    // set view(newView) {\r\n    //     if (newView) {\r\n    //         this._view = newView;\r\n    //     }\r\n    // }\r\n\r\n    // set markers(newMarkers) {\r\n    //     if (newMarkers) {\r\n    //         this._markers = newMarkers;\r\n    //     }\r\n    // }\r\n\r\n    // set layers(newLayers) {\r\n    //     if (newLayers) {\r\n    //         this._layers = newLayers;\r\n    //     }\r\n    // }\r\n\r\n    set dataSource(newData) {\r\n        if (newData) {\r\n            this._dataSource = newData;\r\n        }\r\n    }\r\n\r\n    set data(newData) {\r\n        if (newData) {\r\n            this._data = newData;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n    \r\n    \r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    \r\n    initMapConfig() {\r\n        var self = this;\r\n\r\n        //c9Layers contain all layers\r\n        self.c9Layers = [];\r\n        //c9Markers contain all markers\r\n        // self.c9Markers = new ol.source.Vector({});\r\n        //c9Objects contain all polygons, lines\r\n        self.c9Objs = new ol.source.Vector({});\r\n        //init all thing relating to user's data\r\n\r\n        //layer\r\n        self.initLayer();\r\n        \r\n        //quick markers\r\n        // self.initMarker();\r\n\r\n        //object\r\n        // self.initObj();\r\n\r\n        //init popup\r\n        var popup = document.createElement('div');\r\n        popup.id = 'c9MapPopup';\r\n        popup.className = 'c9-map-tooltip-container c9-custom-tooltip-container c9-tooltip-top';\r\n        document.body.appendChild(popup);\r\n    }\r\n\r\n    draw() {\r\n        var self = this;\r\n        var view = self.options.view,\r\n            id   = self.options.id;\r\n\r\n        self.c9View = new ol.View({\r\n            center: ol.proj.fromLonLat([view.lon, view.lat]),\r\n            zoom: view.zoom > 2 ? view.zoom : 2,\r\n            minZoom: 2,\r\n        });\r\n        self.c9Map = new ol.Map({\r\n            target: id,\r\n            layers: self.c9Layers,\r\n            view: self.c9View,\r\n            interactions : ol.interaction.defaults({doubleClickZoom: false})\r\n        });\r\n\r\n        /******************** ADD C9 OBJECTS ********************/\r\n        self.c9ObjsLayer = new ol.layer.Vector({ \r\n            source: self.c9Objs,\r\n            map: self.c9Map\r\n        });\r\n        /********************************************************/\r\n\r\n        /********************* ADD C9 POPUP *********************/\r\n        self.c9Popup = new ol.Overlay({\r\n            positioning: 'bottom-center',\r\n            element: document.getElementById('c9MapPopup')\r\n        });\r\n\r\n        //add overlay to contain popup\r\n        self.c9Map.addOverlay(self.c9Popup);\r\n        /********************************************************/\r\n\r\n        /********************* HOVER STYLE **********************/\r\n        self.c9CustomHover = new ol.layer.Vector({\r\n            source: new ol.source.Vector(),\r\n            map: self.c9Map,\r\n            style: new ol.style.Style({\r\n                stroke: new ol.style.Stroke({\r\n                    color: 'rgb(0, 153, 255)',\r\n                    width: 3\r\n                }),\r\n                fill: new ol.style.Fill({\r\n                    color: 'rgba(255, 255, 255, 0.6)'\r\n                })\r\n            })\r\n        });\r\n        /********************************************************/\r\n        //adapt data to obj\r\n        self.update(self.dataSource);\r\n        //define interaction\r\n        self.updateInteraction();\r\n\r\n    }\r\n    /*=====  End of Main Functions  ======*/\r\n\r\n    /**\r\n     * Create layer\r\n     * @param  {String} type of layer\r\n     * @param  {source} source data defined by C9\r\n     */\r\n    createLayer(options){\r\n        var self = this;\r\n        if (Helper.isEmpty(options)) return;\r\n        \r\n        var type = options.type || 'Tile',\r\n            source = options.source || {name: 'OSM'};\r\n            // style = options.style;\r\n\r\n        var layer = new ol.layer[type];\r\n        layer.setSource(self.setupSource(source));\r\n        // if (!Helper.isEmpty(style)) layer.setStyle(style);\r\n\r\n        //adapt source data to c9obj\r\n        //support maximum 2 source level\r\n        var containFeature = true, s;\r\n        try {\r\n            s = layer.getSource();\r\n            s.getFeatures();\r\n        }\r\n        catch (err) {\r\n            try {\r\n                s = layer.getSource().getSource();\r\n                s.getFeatures();\r\n            }\r\n            catch (err) {\r\n                containFeature = false;    \r\n            }\r\n        }\r\n        if (containFeature) {\r\n            var readFormat = function(feature) {\r\n                var result = {};\r\n                feature.getKeys().forEach(function(k) {\r\n                    result[k] = feature.getProperties()[k];\r\n                });\r\n                return result;\r\n            }\r\n            \r\n            //register layer loaded event to set data for obj\r\n            s.once('change', function(e) {\r\n                if (s.getState() == 'ready') {\r\n                    var objs = s.getFeatures();\r\n                    // self.c9Objs.addFeatures(objs);\r\n\r\n                    objs.forEach(function(o) {\r\n                        //set data & some attrs\r\n                        var type = o.getGeometry().getType();\r\n                        o.set('data', readFormat(o));\r\n                        // o.set('type', 'c9-' + (type == 'point' ? 'marker' : type.toLowerCase()));\r\n                        // if (type.toLowerCase() == 'polygon' || type.toLowerCase() == 'multipolygon' || type.toLowerCase() == 'line') {\r\n                        //     o.set('c9-style', {\r\n                        //         strokeWidth: 2,\r\n                        //         strokeColor: 'steelblue',\r\n                        //         fillColor: 'rgba(0, 0, 255, 0.1)'\r\n                        //     });\r\n                            // set style\r\n                            // o.setStyle(new ol.style.Style({\r\n                            //     stroke: new ol.style.Stroke({\r\n                            //         width: 2,\r\n                            //         color: 'steelblue'\r\n                            //     }),\r\n                            //     fill: new ol.style.Fill({\r\n                            //         color: 'rgba(0, 0, 255, 0.1)'\r\n                            //     })\r\n                            // }))    \r\n                        // } \r\n                        // else if (type.toLowerCase() == 'point') {\r\n                        //     o.setStyle(new ol.style.Style({\r\n                        //         image: new ol.style.Icon({\r\n                        //             anchor: [0.5, 1], //middle-width and bottom-height of image\r\n                        //             src: 'http://s21.postimg.org/blklb8scn/marker_icon.png',\r\n                        //             scale: 1\r\n                        //         })\r\n                        //     }))\r\n                        // }\r\n                    });\r\n                }\r\n            })\r\n        }\r\n\r\n        self.c9Layers.push(layer);\r\n    }\r\n\r\n    /**\r\n     * Init Layer base on first user's data\r\n     */\r\n    initLayer() {\r\n        var self = this;\r\n        var layers = self.options.layers;\r\n\r\n        if (layers instanceof Array) {\r\n            layers.forEach(function(l, i) {\r\n                self.createLayer({type: l.type, source: l.source, style: l.style});\r\n            })\r\n        }\r\n        else {\r\n            self.createLayer({type: layers.type, source: layers.source, style: layers.style});\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Setup source for layer\r\n     * @param  {Object} source data style defined by c9\r\n     * @return {String} return source (ol.source)\r\n     */\r\n    setupSource(s){\r\n        var source = undefined;\r\n        switch (s.name) {\r\n            case 'BingMaps':\r\n                source = new ol.source.BingMaps({\r\n                    key: s.key,\r\n                    imagerySet: s.imagerySet || 'Road'\r\n                });\r\n                break;\r\n            case 'Stamen':\r\n                source = new ol.source.Stamen({\r\n                    layer: s.layer || 'watercolor'\r\n                });\r\n                break;\r\n            /********** TileJSON require ol >= v3.8.2 **********/\r\n            case 'TileJSON':\r\n                source = new ol.source.TileJSON({\r\n                    url: s.url,\r\n                    crossOrigin: s.crossOrigin || 'anonymous'\r\n                });\r\n                break;\r\n            case 'TileArcGISRest':\r\n                source = new ol.source.TileArcGISRest({\r\n                    url: s.url\r\n                });\r\n                break;\r\n            case 'Vector':\r\n                source = new ol.source.Vector({\r\n                    url: s.url,\r\n                    format: s.format === undefined ? null : new ol.format[s.format]({\r\n                        extractStyles: s.extractStyles || false\r\n                    })\r\n                });\r\n                break;\r\n            case 'Cluster':\r\n                source = new ol.source.Cluster({\r\n                    distance: s.distance || 20,\r\n                    source: this.setupSource(s.source)\r\n                });\r\n                break;\r\n            case 'ImageVector':\r\n                source = new ol.source.ImageVector({\r\n                    source: this.setupSource(s.source),\r\n                    // default style\r\n                    style: new ol.style.Style({\r\n                        fill: new ol.style.Fill({\r\n                            color: 'rgba(255, 255, 255, 0.6)'\r\n                        }),\r\n                        stroke: new ol.style.Stroke({\r\n                            color: '#319FD3',\r\n                            width: 1\r\n                        })\r\n                    })\r\n                });\r\n                break;\r\n            default: \r\n                source = new ol.source.OSM();\r\n                break;\r\n\r\n        }\r\n\r\n        return source;\r\n    }\r\n\r\n    /**\r\n     * define some interactions\r\n     */\r\n    updateInteraction(){\r\n        var self = this;\r\n        const LEFT_KEY = 37, RIGHT_KEY = 39, DEL_KEY = 46, DURATION = 1000, LOAD_MAP_DELAY = 500;\r\n\r\n        // add default interaction of ol3\r\n        // self.c9Map.addInteraction(self.c9DefaultHoverStyle = new ol.interaction.Select({\r\n        //     condition: ol.events.condition.pointerMove\r\n        // }));\r\n\r\n        //normal: stroke 'rgb(49, 159, 211)' width: 1\r\n        //        fill '#fff'\r\n        \r\n\r\n        /******************* SOME HELPER FUNCTION ********************/\r\n        var getCenterLonLat = function(f) {\r\n            return ol.proj.transform(getCenter(f), 'EPSG:3857', 'EPSG:4326');\r\n        }\r\n        var getCenter = function(f) {\r\n            return ol.extent.getCenter(f.getGeometry().getExtent());\r\n        }\r\n        var transformCoordinates = function(c) {\r\n            return ol.proj.transform(c, 'EPSG:3857', 'EPSG:4326');\r\n        }\r\n        /**\r\n         * Create pan animation on object\r\n         * @param  {ol.Feature}\r\n         */\r\n        var panAnimation = function(feature){\r\n            if (self.c9View.getCenter()[0] == getCenter(feature)[0] && self.c9View.getCenter()[1] == getCenter(feature)[1]) return;\r\n\r\n            var pan = ol.animation.pan({\r\n                duration: DURATION,\r\n                source: (self.c9View.getCenter())\r\n            });\r\n            self.c9Map.beforeRender(pan);\r\n            self.c9View.setCenter(getCenter(feature));\r\n        }\r\n        /**\r\n         * Create marker's flash effect\r\n         * @param  {ol.Feature}\r\n         */\r\n        var createMarkerEffect = function(feature){\r\n            var duration = 3000;\r\n            var start = new Date().getTime();\r\n            var listenerKey;\r\n\r\n            function animate(event) {\r\n                var vectorContext = event.vectorContext;\r\n                var frameState = event.frameState;\r\n                var flashGeom = feature.getGeometry().clone();\r\n                var elapsed = frameState.time - start;\r\n                var elapsedRatio = elapsed / duration;\r\n                // radius will be 5 at start and 30 at end.\r\n                var radius = ol.easing.easeOut(elapsedRatio) * 25 + 5;\r\n                var opacity = ol.easing.easeOut(1 - elapsedRatio);\r\n\r\n                var style = new ol.style.Style({\r\n                    image: new ol.style.Circle({\r\n                        radius: radius,\r\n                        snapToPixel: false,\r\n                        stroke: new ol.style.Stroke({\r\n                            color: 'rgba(255, 0, 0, ' + opacity + ')',\r\n                            width: 0.25 + opacity\r\n                        })\r\n                    })\r\n                });\r\n\r\n                vectorContext.setStyle(style);\r\n                vectorContext.drawGeometry(flashGeom);\r\n                if (elapsed > duration) {\r\n                    ol.Observable.unByKey(listenerKey);\r\n                    return;\r\n                }\r\n                // tell OL3 to continue postcompose animation\r\n                self.c9Map.render();\r\n            }\r\n            listenerKey = self.c9Map.on('postcompose', animate);\r\n        }\r\n        /**\r\n         * Caculate distance between marker and center view, plus direction compare with center\r\n         * @param  {ol.Feature}\r\n         * @return {[Number, Boolean]} Array of distance value and direction value (left if true, right if false)\r\n         */\r\n        var distanceAndDirection = function(f) {\r\n            var center = transformCoordinates(self.c9View.getCenter());\r\n            var fCoordinates = getCenterLonLat(f);\r\n            return [Math.sqrt(Math.pow(fCoordinates[0] - center[0], 2) + Math.pow(fCoordinates[1] - center[1], 2)), (fCoordinates[0] - center[0]) <= 0];\r\n        }\r\n        var formatPopup = function(data) {\r\n            if (Helper.isEmpty(data)) return;\r\n            var capitalizeFirstLetter = function(string) { return string.charAt(0).toUpperCase() + string.slice(1); }\r\n            var strongSpan = function(strong, span) { if (span == '' || Helper.isEmpty(span)) return \"\"; return \"<strong>\" + capitalizeFirstLetter(strong) + \":</strong>\" + \"<span> \" + span + \"</span></br>\"; };\r\n            var result = strongSpan(\"Name\", data.name), v;\r\n            if (!Helper.isEmpty(data.coor)) result += (strongSpan(\"Lon\", data.coor.lon) + strongSpan(\"Lat\", data.coor.lat));\r\n\r\n            for (var i in v = data.value) {\r\n                result += strongSpan(i, v[i]);\r\n            }\r\n            return result;\r\n        }\r\n        /*************************************************************/\r\n        \r\n        //register pointer move event to show cursor as pointer if user hover on markers\r\n        self.c9Map.on('pointermove', function(evt) {\r\n            var f = self.c9Map.forEachFeatureAtPixel(evt.pixel, function(feature, layer){\r\n                return feature;\r\n            });\r\n\r\n            // new hover style\r\n            if (f !== self.lastHoveredObj) {\r\n                if (self.lastHoveredObj) {\r\n                    if (self.lastHoveredObj.get('type')) \r\n                        self.lastHoveredObj.setStyle(self.lastHoveredObj.get('c9-type'));\r\n                    else\r\n                        self.c9CustomHover.getSource().removeFeature(self.lastHoveredObj);\r\n                }\r\n                if (f) {\r\n                    var fStyle = f.get('c9-style'), strokeColor = 'rgb(0, 153, 255)', strokeWidth = 3, fillColor = 'rgba(255, 255, 255, 0.6)';\r\n                    if (fStyle) {\r\n                        strokeColor = fStyle.getStroke().getColor() == '#319FD3' ? 'rgb(0, 153, 255)' : self.getLightenColor(fStyle.getStroke().getColor());\r\n                        strokeWidth = fStyle.getStroke().getWidth() + 2;\r\n                        fillColor   = fStyle.getFill().getColor() == 'rgba(255, 255, 255, 0.6)' ? 'rgba(255, 255, 255, 0.6)' : self.getLightenColor(fStyle.getFill().getColor());\r\n                    }\r\n                    var newStyle = new ol.style.Style({\r\n                        stroke: new ol.style.Stroke({\r\n                            color: strokeColor,\r\n                            width: strokeWidth\r\n                        }),\r\n                        fill: new ol.style.Fill({\r\n                            color: fillColor\r\n                        })\r\n                    });\r\n                    if (fStyle) \r\n                        f.setStyle(newStyle);\r\n                    else {\r\n                        self.c9CustomHover.setStyle(newStyle);\r\n                        self.c9CustomHover.getSource().addFeature(f);    \r\n                    }\r\n                }\r\n                self.lastHoveredObj = f;\r\n            }\r\n            if (f) {\r\n                self.c9Map.getTargetElement().style.cursor = 'pointer';\r\n                // self.createMarkerEffect(f);\r\n                /************* LIGHTEN COLOR ***********/\r\n                // if (f.get('type') == 'c9-line' || f.get('type') == 'c9-polygon' || f.get('type') == 'c9-multipolygon'){\r\n                //     var fStyle = f.getStyle();\r\n                //     var defaultStyle = f.get('c9-style');\r\n\r\n                //     if (fStyle.getStroke().getWidth() == defaultStyle.strokeWidth)\r\n                //         f.setStyle(new ol.style.Style({\r\n                //             stroke: new ol.style.Stroke({\r\n                //                 width: fStyle.getStroke().getWidth() + 2,\r\n                //                 color: self.getLightenColor(fStyle.getStroke().getColor())\r\n                //             }),\r\n                //             fill: new ol.style.Fill({\r\n                //                 color: self.getLightenColor(fStyle.getFill().getColor())\r\n                //             })\r\n                //         }));\r\n                // }\r\n\r\n                // if (f !== self.lastHoveredObj) {\r\n                //     if (self.lastHoveredObj) {\r\n                //         self.c9CustomHover.getSource().removeFeature(self.lastHoveredObj);\r\n                //     }\r\n                //     if (f) {\r\n                //         self.c9CustomHover.getSource().addFeature(f);\r\n                //     }\r\n                //     self.lastHoveredObj = f;\r\n                // }\r\n\r\n                /****************************************/\r\n\r\n                /************** SHOW POPUP *************/\r\n                self.c9Popup.getElement().style.display = 'none';\r\n\r\n                // panAnimation(f);\r\n                \r\n                try {\r\n                    if (self.options.format) self.options.format(f.get('data'));\r\n                }\r\n                catch(err) {\r\n                    throw \"Check data format again\";\r\n                    return;\r\n                }\r\n\r\n                var content = self.options.format ? self.options.format(f.get('data')) : formatPopup(f.get('data'));\r\n                if (Helper.isEmpty(content) || content.toString().trim() == \"\") return;\r\n\r\n                self.c9Popup.getElement().style.display = 'block';\r\n                self.c9Popup.getElement().innerHTML = content;\r\n                // self.c9Popup.setPosition(getCenter(f));\r\n                self.c9Popup.setPosition(evt.coordinate);\r\n                /****************************************/\r\n                // var stop = new CustomEvent(\"click\", {detail: {message: \"stop\"}});\r\n                // self.c9Map.dispatchEvent(stop);\r\n            }\r\n            if (!f) {\r\n                self.c9Map.getTargetElement().style.cursor = '';\r\n                self.c9Popup.getElement().style.display = 'none';\r\n\r\n                //remove last obj style\r\n                // if (!Helper.isEmpty(self.lastHoveredObj) && (self.lastHoveredObj.get('type') == 'c9-line' || self.lastHoveredObj.get('type') == 'c9-polygon' || self.lastHoveredObj.get('type') == 'c9-multipolygon')) {\r\n                //     var defaultStyle = self.lastHoveredObj.get('c9-style');\r\n                //     self.lastHoveredObj.setStyle(defaultStyle);\r\n                // }   \r\n            }\r\n        });\r\n\r\n        //register map first render's event to show marker's effect\r\n        self.c9Map.once('postrender', function(evt) {\r\n            setTimeout(function(){\r\n                self.c9Objs.getFeatures().forEach(function(f, i){\r\n                    if (f.get('type') == 'c9-marker')\r\n                        createMarkerEffect(f);\r\n                })\r\n            }, LOAD_MAP_DELAY);\r\n        });\r\n\r\n        //register click event to show effect on markers\r\n        self.c9Map.on('click', function(evt){\r\n\r\n            // if (evt instanceof CustomEvent) return;\r\n            var f = self.c9Map.forEachFeatureAtPixel(evt.pixel, function(feature, layer){\r\n                self.lastSelectedObj = feature;\r\n                return feature;\r\n            });\r\n            if (f) {\r\n                // self.createMarkerEffect(f);\r\n                // self.c9Popup.getElement().style.display = 'none';\r\n\r\n                panAnimation(f);\r\n                \r\n                // try {\r\n                //     if (self.options.format) self.options.format(f.get('data'));\r\n                // }\r\n                // catch(err) {\r\n                //     throw \"Check data format again\";\r\n                //     return;\r\n                // }\r\n\r\n                // var content = self.options.format ? self.options.format(f.get('data')) : formatPopup(f.get('data'));\r\n                // if (Helper.isEmpty(content) || content.toString().trim() == \"\") return;\r\n\r\n                // self.c9Popup.getElement().style.display = 'block';\r\n                // self.c9Popup.getElement().innerHTML = content;\r\n                // self.c9Popup.setPosition(getCenter(f));\r\n\r\n                // // var stop = new CustomEvent(\"click\", {detail: {message: \"stop\"}});\r\n                // // self.c9Map.dispatchEvent(stop);\r\n            }\r\n            if (!f)\r\n                self.c9Popup.getElement().style.display = 'none';\r\n        });\r\n\r\n        //register keydown event to change center view\r\n        document.addEventListener('keydown', function(e) {\r\n            var keydownAnimate = function(k) {\r\n                var selectedFeature = undefined;\r\n                var minDistance = Infinity;\r\n                self.c9Objs.getFeatures().forEach(function(f, i) {\r\n                    if (f.get('type') == \"c9-marker\") {\r\n                        var checkAnimate = distanceAndDirection(f);\r\n\r\n                        if (((checkAnimate[1] && k == LEFT_KEY) || (!checkAnimate[1] && k == RIGHT_KEY)) && checkAnimate[0] < minDistance && checkAnimate[0] != 0) {\r\n                            minDistance = checkAnimate[0];\r\n                            selectedFeature = f;\r\n                        }\r\n                    }\r\n                });\r\n                if (selectedFeature) {\r\n                    setTimeout(createMarkerEffect(selectedFeature), LOAD_MAP_DELAY);\r\n                    panAnimation(selectedFeature);\r\n                }\r\n            }\r\n            switch(e.keyCode) {\r\n                case LEFT_KEY:\r\n                    keydownAnimate(LEFT_KEY);\r\n                    break;\r\n                case RIGHT_KEY:\r\n                    keydownAnimate(RIGHT_KEY);\r\n                    break;\r\n                case DEL_KEY:\r\n                    if (!Helper.isEmpty(self.lastSelectedObj) && !Helper.isEmpty(self.lastSelectedObj.get('type'))) self.c9Objs.removeFeature(self.lastSelectedObj);\r\n                    break;\r\n            }\r\n        })\r\n    }\r\n\r\n    // /**\r\n    //  * marker first set up\r\n    //  */\r\n    // initMarker() {\r\n    //     var self = this;\r\n    //     //data\r\n    //     var markers = self.markers;\r\n    //     //add marker layer to layer list (c9Layers)\r\n    //     self.c9Layers.push(new ol.layer.Vector({\r\n    //         source: self.c9Markers\r\n    //     }));\r\n\r\n    //     if (markers.length === 0) return;\r\n\r\n    //     if (markers instanceof Array) {\r\n    //         markers.forEach(function(m, i) {\r\n    //             self.createMarker({lat: m.lat, lon: m.lon, imgSrc: m.img, scale: m.scale});\r\n    //         });\r\n    //     }\r\n    //     else {\r\n    //         self.createMarker({lat: markers.lat, lon: markers.lon, imgSrc: markers.img, scale: markers.scale});\r\n    //     }\r\n    // }\r\n    /**\r\n     * obj first set up\r\n     */\r\n    // initObj() {\r\n    //     var self = this;\r\n\r\n    //     //add layer Vector to layer list (c9Layers)\r\n    //     self.c9Layers.push(new ol.layer.Vector({\r\n    //         source: self.c9Objs\r\n    //     }));\r\n    // }\r\n\r\n    /**\r\n     * create c9 obj\r\n     * @data  {Object} coordinate\r\n     * @options  {Object} some options: strokeWidth,strokeColor,fillColor,imgSrc,scale\r\n     * @return {}\r\n     */\r\n    createObj(data, options){\r\n        var self = this;\r\n\r\n        /**\r\n         * Create marker\r\n         * @param  {Number} latitude of marker\r\n         * @param  {Number} longitude of marker\r\n         * @param  {String} image source (support for both local and net)\r\n         * @param  {Number} scale image if its size is too large - default = 1\r\n         */\r\n        var createMarker = function(data, coor, options){\r\n\r\n            if (!Helper.isArray(coor) && coor.length != 2) return;\r\n\r\n            const DEFAULT_SRC = 'http://s21.postimg.org/blklb8scn/marker_icon.png'\r\n            const DEFAULT_SCALE = 1;\r\n\r\n            var lat    = coor[1],\r\n                lon    = coor[0],\r\n                imgSrc = options ? (options.imgSrc || DEFAULT_SRC) : DEFAULT_SRC,\r\n                scale  = options ? (options.scale  || DEFAULT_SCALE) : DEFAULT_SCALE;\r\n\r\n            var marker = new ol.Feature({\r\n                'data-ref': '',\r\n                type: 'c9-marker',\r\n                data: data,\r\n                geometry: new ol.geom.Point(ol.proj.fromLonLat([lon, lat]))\r\n            });\r\n\r\n            /**\r\n             * Create marker style\r\n             * @param  {String} image source\r\n             * @param  {Number} scale\r\n             * @return {ol.style.Style} return marker style\r\n             */\r\n            var createMarkerStyle = function(imgSrc, scale){\r\n                return new ol.style.Style({\r\n                    image: new ol.style.Icon({\r\n                        anchor: [0.5, 1], //middle-width and bottom-height of image\r\n                        src: imgSrc,\r\n                        scale: scale\r\n                    })\r\n                });\r\n            }\r\n\r\n            var markerStyle = createMarkerStyle(imgSrc, scale);\r\n            marker.set('c9-style', markerStyle);\r\n            marker.setStyle(markerStyle);\r\n\r\n            //add this marker to marker list (c9Objs)\r\n            self.c9Objs.addFeature(marker);\r\n        }\r\n\r\n        var coorAndType = self.normalizeCoordinate(data.coor);\r\n        if (coorAndType.coor == null) return;\r\n\r\n        //marker\r\n        if (coorAndType.type == \"marker\") {\r\n            createMarker(data, coorAndType.coor, options);\r\n            return;\r\n        }\r\n\r\n        // if (data == self.c9Markers) {\r\n        //     data = [];\r\n        //     self.c9Markers.getFeatures().forEach(function (d) {\r\n        //         data.push(ol.proj.transform(d.getGeometry().getCoordinates(), 'EPSG:3857', 'EPSG:4326'));\r\n        //     })\r\n        // }\r\n\r\n        var strokeWidth = options ? options.strokeWidth : 1;\r\n        var strokeColor = options ? options.strokeColor : \"#319FD3\";\r\n        var fillColor   = options ? options.fillColor   : \"rgba(255, 255, 255, 0.6)\";\r\n\r\n        var obj = new ol.Feature({\r\n            'data-ref': '',\r\n            type: \"c9-\" + coorAndType.type,\r\n            data: data,\r\n            geometry: coorAndType.type == \"polygon\" ? new ol.geom.Polygon(coorAndType.coor) : coorAndType.type == \"line\" ? new ol.geom.LineString(coorAndType.coor) : new ol.geom.MultiPolygon(coorAndType.coor)\r\n        });\r\n\r\n        obj.getGeometry().transform('EPSG:4326', 'EPSG:3857');\r\n\r\n        /**\r\n         * Create obj style\r\n         * @param  {Number} stroke width\r\n         * @param  {String} stroke color\r\n         * @param  {String} fill color\r\n         * @return {ol.style.Style} return obj style\r\n         */\r\n        var createObjStyle = function(strokeWidth, strokeColor, fillColor){\r\n            return new ol.style.Style({\r\n                stroke: new ol.style.Stroke({\r\n                    width: strokeWidth,\r\n                    color: strokeColor                \r\n                }),\r\n                fill: new ol.style.Fill({\r\n                    color: fillColor\r\n                })\r\n            });\r\n        }\r\n\r\n        var objStyle = createObjStyle(strokeWidth, strokeColor, fillColor);\r\n        obj.set('c9-style', objStyle);\r\n        obj.setStyle(objStyle);\r\n\r\n        //add this marker to marker list (c9Objs)\r\n        self.c9Objs.addFeature(obj);\r\n    }\r\n\r\n    /**\r\n     * normalize coordinate\r\n     * currently only support marker, linestring, polygon and multipolygon\r\n     * @coor  {Array} coordinate of object\r\n     * @return {Array} coordinate was normalized\r\n     */\r\n    normalizeCoordinate(coor){\r\n        var normCoor = [], type, error = {coor: null, type: null};\r\n        if ((Helper.isObject(coor) && coor.length == undefined) || (Helper.isArray(coor) && coor.length == 2 && !isNaN(coor[0]) && !isNaN(coor[1]))) {\r\n            // marker - [] - {}\r\n            type = \"marker\";\r\n            if (coor.length == undefined) {\r\n                if (Helper.isEmpty(coor.lat) || Helper.isEmpty(coor.lon))\r\n                    return error;\r\n                normCoor = [coor.lon, coor. lat];\r\n            }\r\n            else {\r\n                normCoor = coor;\r\n            }\r\n            \r\n        } else if (Helper.isArray(coor)) {\r\n            // linestring - [{},{}] - [[],[]] - [{},[]] - [[],{}]\r\n            var isArrayOrObject = function(obj) {\r\n                var result = {};\r\n                if (Helper.isObject(obj) && obj.length == undefined) {\r\n                    result['check'] = !Helper.isEmpty(obj.lat) && !Helper.isEmpty(obj.lon);\r\n                    if (result['check']) result['coor'] = [obj.lon, obj.lat];\r\n                }\r\n                else {\r\n                    result['check'] = Helper.isArray(obj) && obj.length == 2 && !isNaN(obj[0]) && !isNaN(obj[1]);\r\n                    if (result['check']) result['coor'] = obj;\r\n                }\r\n                return result;\r\n            }\r\n\r\n            // check data inside to eliminate case: multipolygon contains 2 polygons\r\n            if (coor.length == 2 && isArrayOrObject(coor[0]).check && isArrayOrObject(coor[1]).check) {\r\n                type = \"line\";\r\n                normCoor.push(isArrayOrObject(coor[0]).coor);\r\n                normCoor.push(isArrayOrObject(coor[1]).coor);\r\n            }\r\n            // multipolygon [[[[] || {}, ...]], [[[] || {}, ...]], ...]\r\n            else if (coor.length >= 2){\r\n                type = \"multipolygon\";\r\n                coor.forEach(function(pc, i) {\r\n                    if (Helper.isArray(pc) && pc.length == 1) {\r\n                        normCoor.push([[]]);\r\n                        pc[0].forEach(function(c) {\r\n                            // data - [] || {}\r\n                            var obj = isArrayOrObject(c);\r\n                            if (obj.check) normCoor[i][0].push(obj.coor);\r\n                        })\r\n                        // cannot create polygon with the number of points is less than 2\r\n                        if (normCoor[i][0].length <= 2) return error; \r\n                    }\r\n                    else return error; // because data format is not true\r\n                })\r\n            }\r\n            // polygon [[[] || {}, ...]]\r\n            else if (coor.length == 1) {\r\n                type = \"polygon\";\r\n                normCoor.push([]);\r\n                coor[0].forEach(function(c) {\r\n                    // data - [] || {}\r\n                    var obj = isArrayOrObject(c);\r\n                    if (obj.check) normCoor[0].push(obj.coor);\r\n                })\r\n                if (normCoor[0].length <= 2) return error;\r\n            }\r\n            else return error;\r\n        }\r\n        return {\r\n            coor: normCoor,\r\n            type: type\r\n        };\r\n    }\r\n\r\n    /**\r\n     * create obj base on user data\r\n     * @data  {Object} data structure: {coor: [], name: , value: }\r\n     */\r\n    update(data){\r\n        if (Helper.isEmpty(data)) return;\r\n        var self = this;\r\n\r\n        var da = new DataAdapter(data);\r\n        self.data = da.getDataTarget('map');\r\n\r\n        if (!Helper.isEmpty(self.c9Map)) {\r\n            if (Helper.isArray(self.data))\r\n                self.data.forEach(function(d){\r\n                    self.createObj(d);\r\n                })\r\n            else\r\n                self.createObj(self.data);\r\n        }\r\n    }\r\n\r\n    getObjs(){\r\n        return this.c9Objs.getFeatures();\r\n    }\r\n\r\n    getLayers() {\r\n        return this.c9Layers;\r\n    }\r\n\r\n    /**\r\n     * Custom Event Listener\r\n     * @param  {[type]}   eventType [description]\r\n     * @param  {Function} callback  [description]\r\n     */\r\n    on(eventType, callback) {\r\n        var self = this;\r\n        // Update Event Factory\r\n        let eventFactoryViewport = {\r\n            'click': function(evt) {\r\n                var f = self.c9Map.forEachFeatureAtPixel(self.c9Map.getEventPixel(evt), function(feature, layer){\r\n                    return feature;\r\n                });\r\n                if (Helper.isFunction(callback) && f) {\r\n                    callback.call(this, f.get('data'));\r\n                }\r\n            },\r\n            'pointermove': function(evt) {\r\n                var f = self.c9Map.forEachFeatureAtPixel(evt.pixel, function(feature, layer){\r\n                    return feature;\r\n                });\r\n                if (Helper.isFunction(callback) && f) {\r\n                    callback.call(this, f.get('data'));\r\n                }\r\n            }\r\n        }\r\n\r\n        if (eventType == \"click\")\r\n            self.c9Map.getViewport().addEventListener(eventType, eventFactoryViewport[eventType]);\r\n        else\r\n            self.c9Map.on(eventType, eventFactoryViewport[eventType]);\r\n    }\r\n\r\n    getLightenColor(color) {\r\n        if (color.includes('rgba')) {\r\n            var alpha = color.split(',')[color.split(',').length - 1].replace(')', '');\r\n            var currentColor = color.replace(',' + alpha, '').replace('a', '');\r\n            var newColor = Helper.shadeColor(-0.2, currentColor);\r\n            return 'rgba(' + newColor.split('(')[1].split(')')[0] + ',' + alpha.trim() + ')';\r\n        }\r\n        else\r\n            return Helper.shadeColor(-0.2, color);\r\n    }\r\n\r\n    /**\r\n     * set style: consist of layer, source and obj\r\n     * @obj   {ol.layer || ol.source || ol.Feature}\r\n     * @style {function || ol.style} style function || ol.style\r\n     */\r\n    setStyle(obj, style){\r\n        if (Helper.isEmpty(obj) || Helper.isEmpty(style)) return;\r\n        obj.setStyle(style);\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/map/C9.Map.js\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/C9.css\n ** module id = 15\n ** module chunks = 0\n **/"],"sourceRoot":""}