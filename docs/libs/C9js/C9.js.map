{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 8e45b09b752a93073899","webpack:///./src/index.js","webpack:///./src/charts/C9.BarChart.js","webpack:///./src/charts/C9.Chart.js","webpack:///./src/helper/C9.Helper.js","webpack:///./src/charts/utils/C9.Axis.js","webpack:///./src/charts/utils/C9.Title.js","webpack:///./src/charts/utils/C9.Legend.js","webpack:///./src/charts/utils/C9.Table.js","webpack:///./src/charts/utils/C9.Tooltip.js","webpack:///./src/helper/C9.DataAdapter.js","webpack:///./src/charts/C9.DonutChart.js","webpack:///./src/charts/C9.LineChart.js","webpack:///./src/charts/C9.PieChart.js","webpack:///./src/charts/C9.TimeLine.js","webpack:///./src/map/C9.Map.js","webpack:///./src/C9.css"],"names":["module","exports","BarChart","DonutChart","LineChart","PieChart","TimeLine","Map","DataAdapter","Helper","options","self","config","isLogaric","updateConfig","mergeDeep","chartType","dataOption","colorRange","da","dataTarget","getDataTarget","dataSource","barChartType","getDataTypeForBarChart","_groupNames","groups","length","stacks","_isGroup","width","margin","left","right","height","top","bottom","x","d3","scale","ordinal","rangeRoundBands","y","log","range","linear","minMax","getMinMax","domain","map","d","name","min","max","groupNames","xGroup","rangeBand","dataCfg","isGroup","data","body","selectAll","exit","remove","color","bar","enter","append","attr","bars","style","i","group","undefined","y1","y0","Math","abs","updateInteraction","groupNamesOld","newLabel","type","groupType","axis","update","xGroupOld","midGroup","indexOf","transition","duration","lower","upper","d1","floor","toString","split","d2","toFixed","hoverEnable","hover","enable","hoverOptions","selector","selectAllBar","onMouseOverCallback","onMouseOver","callback","onMouseOutCallback","onMouseOut","onClickCallback","click","tooltip","eventFactory","isFunction","call","table","show","tr","filter","selectedItem","scroll","select","offsetTop","getLightenColor","draw","on","eventType","eventName","title","legend","updateInteractionForBarChart","key","value","set","newData","newDataConfig","newCfg","isEmpty","plain","keys","updateDataConfig","_groupType","arg","_xGroup","Chart","id","template","fadeIn","fadeOut","onMouseMove","text","position","fontSize","size","fontColor","fontWeight","space","backgroundColor","format","container","headings","serial","file","url","time","tick","rotate","count","padding","values","hours","interval","label","grid","subchart","_options","merge","svg","shadeColor","dataConfig","_container","_id","_width","_height","_actualWidth","_actualHeight","_colorRange","err","_margin","_dataOption","_svg","_body","_hover","_click","_dataTarget","_dataSource","_eventFactory","_x","_y","_chartType","_title","_axis","_legend","_table","_tooltip","each","loopable","reverse","len","isArray","Object","setValue","setPrefix","constPrefix","Util","isObject","object","array","Array","prototype","func","target","source","obj3","attrname","get","_key","_data","_keys","_current","_value","_context","_handle","arr","sum","reduce","a","b","guid","replace","c","r","random","v","_temp","_min","_max","forEach","s","push","_newMin","_newMax","dateParser","parse","dateFormatter","p","from","to","convertColorToHex","sbcRip","l","RGB","slice","parseFloat","parseInt","round","h","f","t","element","difference","scrollTop","perTick","setTimeout","colour","colours","toLowerCase","assign","Axis","chart","_chart","isLogaricVariant","xScale","starting","ending","xAxis","orient","tickFormat","ticks","tickPadding","tickValues","yAxis","innerTickSize","outerTickSize","textAnchor","angle","sin","PI","textDx","textY","_xAxis","_yAxis","Title","node","getComputedTextLength","setYLocation","Legend","box","maxWidth","maxHeight","item","getSize","getBoundingClientRect","getXY","xy","items","itemHeight","numItemsCol","maxWidthCol","n","pos","preItem","newR","prePos","itemEventFactory","dataSet","totalEnable","updateDomain","subChartX","subChartY","subChartXAxis","updateSubChart","legendSelector","lightenLegendItem","normalizeLegendItem","path","pie","currentData","arc","chartInnerBefore","innerRadius","chartOuterBefore","radius","outerRadius","chartInnerAfter","chartOuterAfter","selectAllPath","attrTween","interpolate","ease","dataBackup","enableSet","enableSetOld","negElement","posElement","e","updateLegendInteraction","_item","_itemEventFactory","_maxWidth","_maxHeight","Table","headTbl","thead","bodyTbl","getTableStyle","tbody","hRows","bRows","valueY","selectAllRow","Tooltip","divOnHover","getTriangleClass","html","getFormatByChartType","getCoordinate","mouseover","mouseout","mousemove","_format","valueX","start","end","offset","getOffset","event","pageX","pageY","elem","window","pageYOffset","clientTop","pageXOffset","scrollLeft","clientLeft","setDefaultFormatByChartType","coor","timeFormat","_groups","_stacks","_timeFormat","_dataRefs","initDataSource","hasPlainData","executePlainData","hasFile","executeFile","_file","getCsv","getTsv","getText","getJson","getXml","getDataTargetForBarChart","getDataTargetForLineChart","getDataTargetForPieChart","getDataTargetForDonutChart","getDataTargetForTimelineChart","getDataTargetForMap","groupRefs","index","_dsArray","_stack","_stackItem","_negBase","_posBase","icon","_valueArray","_valueItem","Date","_valueXArray","_valueYArray","_parser","getDataValue","_v","getData","k","csv","tsv","JSON","json","xml","querySelectorAll","querySelector","textContent","R","layout","sort","arcs","updateInteractionForDonutPieChart","_pie","_arc","_currentData","point","fill","stroke","opacity","area","line","bisectDate","bisector","isTimeDomain","lineGen","areaGen","paddingX","paddingY","hoverLine","hoverCircle","valueXArray","valueYArray","extent","xDomain","yDomain","areaContainer","pathContainer","getLineStyle","pointContainer","_d","chartBox","getBBox","actualWidth","actualHeight","subChartWidth","subChartHeight","subChartMargin","_isTimeDomain","brush","empty","subChartAreaGen","subChart","subChartAreaContainer","selectRectLayer","onMouseMoveCallback","selectAllCircle","circle","mouse","mouseX","mouseY","curValueX","invert","sameTimeArr","sameTimeValueArr","idx","d0","checkBoundary","bound","checkWidth","updateOverlay","updateHoverLine","updateInteractionForLineChart","_bisectDate","_hoverLine","_subChartX","_subChartY","_subChartWidth","_subChartHeight","_subChartMargin","_subChartXAxis","_brush","_subChartAreaGen","_lineGen","_areaGen","separatorColor","stack","itemMargin","labelMargin","striped","maxStack","stackList","minTime","maxTime","datum","labelContainer","barYAxis","bgContainer","insert","itemContainer","document","createElementNS","ns","prefix","getXPos","getStackPosition","lineYAxis","rowsDown","selectAllRect","_maxStack","_stackList","layers","view","lat","lon","zoom","initMapConfig","c9Layers","c9Objs","ol","Vector","initLayer","popup","createElement","className","appendChild","c9View","View","center","proj","fromLonLat","minZoom","c9Map","interactions","interaction","defaults","doubleClickZoom","c9ObjsLayer","layer","c9Popup","Overlay","positioning","getElementById","addOverlay","c9CustomHover","Style","Stroke","Fill","setSource","setupSource","containFeature","getSource","getFeatures","readFormat","feature","result","getKeys","getProperties","once","getState","objs","o","getGeometry","getType","createLayer","BingMaps","imagerySet","Stamen","TileJSON","crossOrigin","TileArcGISRest","extractStyles","Cluster","distance","ImageVector","OSM","LEFT_KEY","RIGHT_KEY","DEL_KEY","DURATION","LOAD_MAP_DELAY","getCenterLonLat","transform","getCenter","getExtent","transformCoordinates","panAnimation","pan","animation","beforeRender","setCenter","createMarkerEffect","getTime","listenerKey","animate","vectorContext","frameState","flashGeom","clone","elapsed","elapsedRatio","easing","easeOut","image","Circle","snapToPixel","setStyle","drawGeometry","Observable","unByKey","render","distanceAndDirection","fCoordinates","sqrt","pow","formatPopup","capitalizeFirstLetter","string","charAt","toUpperCase","strongSpan","strong","span","evt","forEachFeatureAtPixel","pixel","lastHoveredObj","removeFeature","fStyle","strokeColor","strokeWidth","fillColor","getStroke","getColor","getWidth","getFill","newStyle","addFeature","getTargetElement","cursor","getElement","display","content","trim","innerHTML","setPosition","coordinate","lastSelectedObj","addEventListener","keydownAnimate","selectedFeature","minDistance","Infinity","checkAnimate","keyCode","createMarker","DEFAULT_SRC","DEFAULT_SCALE","imgSrc","marker","Feature","geometry","geom","Point","createMarkerStyle","Icon","anchor","src","markerStyle","coorAndType","normalizeCoordinate","obj","Polygon","LineString","MultiPolygon","createObjStyle","objStyle","normCoor","error","isNaN","isArrayOrObject","check","pc","createObj","eventFactoryViewport","getEventPixel","getViewport","includes","alpha","currentColor","newColor"],"mappings":"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","file":"C9.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"C9\"] = factory();\n\telse\n\t\troot[\"C9\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 8e45b09b752a93073899\n **/","// Chart Importer\r\nimport BarChart from './charts/C9.BarChart';\r\nimport DonutChart from './charts/C9.DonutChart';\r\nimport LineChart from './charts/C9.LineChart';\r\nimport PieChart from './charts/C9.PieChart';\r\nimport TimeLine from './charts/C9.TimeLine';\r\n\r\n// Map Importer\r\nimport Map from './map/C9.Map';\r\n\r\n// Helper Importer\r\nimport Helper from './helper/C9.Helper';\r\nimport DataAdapter from './helper/C9.DataAdapter';\r\n\r\n// CSS Importer\r\nimport styles from './C9.css';\r\n\r\nmodule.exports = {\r\n\tBarChart,\r\n\tDonutChart,\r\n\tLineChart,\r\n\tPieChart,\r\n\tTimeLine,\r\n\r\n\tMap,\r\n\t\r\n\tDataAdapter,\r\n\tHelper,\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","import Chart from './C9.Chart';\r\n\r\nimport Axis from './utils/C9.Axis';\r\nimport Title from './utils/C9.Title';\r\nimport Legend from './utils/C9.Legend';\r\nimport Table from './utils/C9.Table';\r\nimport Tooltip from './utils/C9.Tooltip';\r\n\r\nimport Helper from '../helper/C9.Helper';\r\nimport DataAdapter from '../helper/C9.DataAdapter';\r\n\r\nexport default class BarChart extends Chart {\r\n    constructor(options) {\r\n        super(options);\r\n\r\n        var self = this;\r\n\r\n        var config = {\r\n            // barWidth: undefined,\r\n            isLogaric: false,\r\n        };\r\n\r\n        self.updateConfig(config);\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    // get barWidth() {\r\n    //     return this._barWidth;\r\n    // }\r\n\r\n    get groupType() {\r\n        return this._groupType;\r\n    }\r\n    \r\n    get xGroup() {\r\n        return this._xGroup;\r\n    }\r\n\r\n    get groupNames() {\r\n        return this._groupNames;\r\n    }\r\n\r\n    get isGroup() {\r\n        return this._isGroup;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    // set barWidth(arg) {\r\n    //     if (arg) {\r\n    //         this._barWidth = arg;\r\n    //     }\r\n    // }\r\n\r\n    set groupType(arg) {\r\n        if (arg) {\r\n            this._groupType = arg;\r\n        }\r\n    }\r\n\r\n    set xGroup(arg) {\r\n        if (arg) {\r\n            this._xGroup = arg;\r\n        }\r\n    }\r\n\r\n    set groupNames(arg) {\r\n        if (arg) {\r\n            this._groupNames = arg;\r\n        }\r\n    }\r\n\r\n    set isGroup(arg) {\r\n        if (arg) {\r\n            this._isGroup = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n    \r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    /**\r\n     * Init Bar Chart Config\r\n     */\r\n    updateConfig(config){\r\n        super.updateConfig(config);\r\n\r\n        var self  = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n\r\n        self.chartType      = \"bar\";\r\n\r\n        var dataOption          = self.dataOption;\r\n        dataOption.colorRange   = self.colorRange;\r\n\r\n        var da = new DataAdapter(dataOption);\r\n        self.dataTarget = da.getDataTarget(self.chartType);\r\n        self.dataSource = da.dataSource;\r\n\r\n        var barChartType = da.getDataTypeForBarChart();\r\n        if (barChartType != \"single\") {\r\n            self._groupNames    = da.groups.length > 0 ? da.groups : da.stacks;  //define group names use for showing legend\r\n            self._isGroup       = barChartType == \"group\";\r\n        }\r\n\r\n        var width        = self.width - self.margin.left - self.margin.right,\r\n            height       = self.height - self.margin.top - self.margin.bottom;\r\n\r\n        // .1 to make outerPadding, according to: https://github.com/d3/d3/wiki/Ordinal-Scales\r\n        var x = d3.scale.ordinal().rangeRoundBands([0, width], .1),\r\n            y = self.options.isLogaric ? d3.scale.log().range([height, 0]) : d3.scale.linear().range([height, 0]);\r\n\r\n        var minMax = Helper.getMinMax(self.dataTarget, barChartType, self.options.isLogaric);\r\n\r\n        x.domain(self.dataTarget.map(function(d) {\r\n            return d[0].name;\r\n        }));\r\n\r\n        y.domain([minMax.min, minMax.max]);\r\n\r\n        /******** Handle for grouped, stacked bar chart ********/\r\n        if (self.groupNames) {\r\n            self.xGroup = d3.scale.ordinal();\r\n            self.xGroup.domain(self.groupNames).rangeRoundBands([0, x.rangeBand()]);\r\n        }\r\n        \r\n        /**********************************************/\r\n\r\n        // Make flexible width according to barWidth\r\n        // self.barWidth       = self.options.barWidth  ||  x.rangeBand();\r\n        self.x              = x;\r\n        self.y              = y;\r\n    }\r\n\r\n    /**\r\n     * Update Chart Data Config\r\n     * Notes: Merge Deep change order of Config and Option\r\n     * ---------------------------------------------------\r\n     */\r\n    updateDataConfig(dataCfg){\r\n        var self  = this;\r\n\r\n        self.options = Helper.mergeDeep(self.options, dataCfg);\r\n\r\n        var dataOption          = self.dataOption;\r\n        dataOption.colorRange   = self.colorRange;\r\n\r\n        var da = new DataAdapter(dataOption);\r\n        self.dataTarget = da.getDataTarget(self.chartType);\r\n        self.dataSource = da.dataSource;\r\n\r\n        var barChartType = da.getDataTypeForBarChart();\r\n        if (barChartType != \"single\") {\r\n            self.groupNames    = da.groups.length > 0 ? da.groups : da.stacks;  //define group names use for showing legend\r\n            self.isGroup       = barChartType == \"group\";\r\n        }\r\n\r\n        var width        = self.width - self.margin.left - self.margin.right,\r\n            height       = self.height - self.margin.top - self.margin.bottom;\r\n\r\n        // .1 to make outerPadding, according to: https://github.com/d3/d3/wiki/Ordinal-Scales\r\n        var x = d3.scale.ordinal().rangeRoundBands([0, width], .1),\r\n            y = self.options.isLogaric ? d3.scale.log().range([height, 0]) : d3.scale.linear().range([height, 0]);\r\n\r\n        var minMax = Helper.getMinMax(self.dataTarget, barChartType, self.options.isLogaric);\r\n\r\n        x.domain(self.dataTarget.map(function(d) {\r\n            return d[0].name;\r\n        }));\r\n\r\n        y.domain([minMax.min, minMax.max]);\r\n\r\n        /******** Handle for grouped, stacked bar chart ********/\r\n        if (self.groupNames) {\r\n            self.xGroup = d3.scale.ordinal();\r\n            self.xGroup.domain(self.groupNames).rangeRoundBands([0, x.rangeBand()]);\r\n        }\r\n        \r\n        /**********************************************/\r\n\r\n        // Make flexible width according to barWidth\r\n        // self.barWidth       = self.options.barWidth  ||  x.rangeBand();\r\n        self.x              = x;\r\n        self.y              = y;\r\n        \r\n    }\r\n\r\n    /**\r\n     * Update chart based on data\r\n     * @param  {[type]} data [description]\r\n     */\r\n    update(data) {\r\n        var self = this;\r\n\r\n        self.body.selectAll(\".c9-chart-bar.c9-custom-rect\").data([]).exit().remove();\r\n        self.body.selectAll(\".c9-chart-bar.c9-custom-bar\").data([]).exit().remove();\r\n\r\n        var color = self.colorRange,\r\n            x     = self.x,\r\n            y     = self.y,\r\n            xGroup= self.xGroup;\r\n\r\n        var bar = self.body\r\n                    .selectAll(\".c9-chart-bar.c9-custom-bar\")\r\n                    .data(data)\r\n                    .enter()\r\n                        .append(\"g\")\r\n                        .attr(\"class\", \"c9-chart-bar c9-custom-bar\")\r\n                        .attr(\"transform\", function(d) { return \"translate(\" + x(d[0].name) + \",0)\"; });\r\n\r\n        var bars = bar.selectAll(\".c9-chart-bar.c9-custom-rect\")\r\n            .data(function(d) { return d; });\r\n\r\n        bars.enter()\r\n            .append(\"rect\")\r\n            .attr(\"class\", \"c9-chart-bar c9-custom-rect\")\r\n            .style(\"fill\", function (d, i) { return d.color || color(i); })\r\n            .attr(\"x\", function(d) { return self.isGroup ? xGroup(d.group) : undefined; })\r\n            .attr(\"y\", function(d) { return y(d.y1); })\r\n            .attr(\"width\", function(d) { return self.isGroup ? xGroup.rangeBand() : x.rangeBand(); })\r\n            .attr(\"height\", function(d) { return self.options.isLogaric ? y(y.domain()[0]) - y(d.y0) : y(0) - y(Math.abs(d.y0)); });\r\n            \r\n        self.updateInteraction();\r\n    }\r\n\r\n    /**\r\n     * Update Interaction with Legend\r\n     * @param  {[type]} data          [description]\r\n     * @param  {[type]} groupNames    [description]\r\n     * @param  {[type]} groupNamesOld [description]\r\n     * @param  {[type]} newLabel      [description]\r\n     */\r\n    updateLegendInteraction(data, groupNames, groupNamesOld, newLabel){\r\n        var self = this;\r\n        var type = self.groupType;\r\n\r\n        var y = self.y;\r\n        var minMax = Helper.getMinMax(data, self.isGroup == false ? \"stack\" : null, self.options.isLogaric);\r\n        y.domain([minMax.min, minMax.max]);\r\n        self.axis.update(null, y, 750);\r\n        \r\n        var xGroup = d3.scale.ordinal();\r\n        xGroup.domain(groupNames).rangeRoundBands([0, self.x.rangeBand()]);\r\n\r\n        var xGroupOld = d3.scale.ordinal();\r\n        xGroupOld.domain(groupNamesOld).rangeRoundBands([0, self.x.rangeBand()]);\r\n\r\n        var midGroup = undefined;\r\n        //check add new label in the middle\r\n        if (groupNames.length > groupNamesOld.length && 0 < groupNames.indexOf(newLabel) && groupNames.indexOf(newLabel) < groupNames.length - 1 )\r\n            midGroup = groupNamesOld[groupNames.indexOf(newLabel)];\r\n\r\n        // self.body.selectAll(\".c9-custom-rect\").transition().duration(750).attr(\"height\", 0).remove();\r\n        self.body.selectAll(\".c9-chart-bar.c9-custom-rect\").data([]).exit().remove();\r\n        self.body.selectAll(\".c9-chart-bar.c9-custom-bar\").data([]).exit().remove();\r\n\r\n        var bar = self.body\r\n                    .selectAll(\".c9-chart-bar.c9-custom-bar\")\r\n                    .data(data)\r\n                    .enter()\r\n                    .append(\"g\")\r\n                    .attr(\"class\", \"c9-chart-bar c9-custom-bar\")\r\n                    .attr(\"transform\", function (d, i) { return \"translate(\" + self.x(self.dataTarget[i][0].name) + \",0)\"; });\r\n\r\n        var bars = bar.selectAll(\".c9-custom-rect\")\r\n            .data(function(d) { return d; });\r\n\r\n        bars.enter()\r\n            .append(\"rect\")\r\n            .attr(\"class\", \"c9-chart-bar c9-custom-rect\")\r\n            .style(\"fill\", function(d) { return d.color; })\r\n            .attr(\"x\", function(d) {\r\n                // use for stack\r\n                if (!self.isGroup) return undefined;\r\n                // use for group\r\n                // group member positioning at the end of groups, so its x is the position of right edge of bar\r\n                if (groupNames.length > groupNamesOld.length && d.group == newLabel && groupNames.indexOf(newLabel) == groupNames.length - 1)\r\n                    return self.x.rangeBand();\r\n                return midGroup ? d.group == newLabel ? xGroupOld(midGroup) : xGroupOld(d.group) : xGroupOld(d.group);\r\n            })\r\n            .attr(\"y\", function(d) { return self.isGroup ? y(d.y1) : self.options.isLogaric ? y(y.domain()[1]) : y(0); })\r\n            .attr(\"width\", function(d) {\r\n                return !self.isGroup ? self.x.rangeBand() : d.group == newLabel ? 0 : xGroupOld.rangeBand();\r\n            })\r\n            .attr(\"height\", function(d) { return self.options.isLogaric ? y(y.domain()[0]) - y(d.y0) : self.isGroup ? y(0) - y(Math.abs(d.y0)) : 0; });\r\n\r\n        bars.transition().duration(750)\r\n            .attr(\"x\", function(d) { return !self.isGroup ? undefined : xGroup(d.group); })\r\n            .attr(\"width\", function(d) { return !self.isGroup ? self.x.rangeBand() : xGroup.rangeBand(); })\r\n            .attr(\"y\", function(d) { return y(d.y1); })\r\n            .attr(\"height\", function(d) { return self.options.isLogaric ? y(y.domain()[0]) - y(d.y0) : y(0) - y(Math.abs(d.y0)); });\r\n            \r\n        self.updateInteraction();\r\n    }\r\n\r\n    /**\r\n     * Retrieve value from upper and lower bounds of each stack\r\n     * @param  {String} lower Lower bound of value\r\n     * @param  {String} upper Upper bound of value\r\n     * @return {String}       Value to return\r\n     */\r\n    retrieveValue(lower, upper) {\r\n        var d1 = Math.floor(lower) === lower ? 0 : lower.toString().split(\".\")[1].length;\r\n        var d2 = Math.floor(upper) === upper ? 0 : upper.toString().split(\".\")[1].length;\r\n        return d1 > d2 ? (upper - lower).toFixed(d1) : (upper - lower).toFixed(d2);\r\n    }\r\n    \r\n    /**\r\n     * Select all bars as type RECT in Bar Chart via its CLASS\r\n     */\r\n    selectAllBar() {\r\n        var self = this;\r\n\r\n        return self.body.selectAll('.c9-custom-rect');\r\n    }\r\n\r\n    /**\r\n     * Update Interaction: Hover\r\n     */\r\n    updateInteraction() {\r\n        var self = this,\r\n            hoverEnable     = self.hover.enable,\r\n            hoverOptions    = self.hover.options,\r\n            selector        = self.selectAllBar(),\r\n            onMouseOverCallback = hoverOptions.onMouseOver.callback,\r\n            onMouseOutCallback  = hoverOptions.onMouseOut.callback,\r\n            onClickCallback  = self.click.callback;\r\n\r\n        var tooltip = new Tooltip(self.options.tooltip);\r\n\r\n        // Update Event Factory\r\n        self.eventFactory = {\r\n            'click': function(d) {\r\n                if (Helper.isFunction(onClickCallback)) {\r\n                    onClickCallback.call(this, d);\r\n                }\r\n            },\r\n            'mouseover': function(d) {\r\n                if (!hoverEnable) return;\r\n                \r\n                if (Helper.isFunction(onMouseOverCallback)) {\r\n                    onMouseOverCallback.call(this, d);\r\n                }\r\n\r\n                // For table\r\n                if (self.options.table.show) {\r\n                    var tr = d3.selectAll('.c9-table-container>.c9-table-body tr');\r\n                    tr.filter(function(i) { return i['data-ref'] != d['data-ref'] }).selectAll('td').style('opacity', '0.5');\r\n                    var selectedItem = tr.filter(function(i) { return i['data-ref'] == d['data-ref'] });\r\n                    //set its style and scroll to its pos\r\n                    selectedItem.selectAll('td').style('opacity', '1');\r\n                    Helper.scroll(d3.select('.c9-table-container')[0][0], selectedItem[0][0].offsetTop, 200);\r\n                }\r\n\r\n                d3.select(this).style(\"fill\", function (d, i) { return self.getLightenColor(d.color || color(i)); });\r\n\r\n                tooltip.draw(d, self, 'mouseover');\r\n            },\r\n            'mouseout': function(d) {\r\n                if (!hoverEnable) return;\r\n\r\n                if (Helper.isFunction(onMouseOutCallback)) {\r\n                    onMouseOutCallback.call(this, d);\r\n                }\r\n\r\n                // For Table\r\n                if (self.options.table.show)\r\n                    d3.selectAll('.c9-table-container>.c9-table-body tr').selectAll('td').style('opacity', '');\r\n\r\n                d3.select(this).style(\"fill\", function (d, i) { return d.color || color(i); });\r\n\r\n                tooltip.draw(d, self, 'mouseout');\r\n            }\r\n        }\r\n\r\n        selector.on(self.eventFactory);\r\n    }\r\n    \r\n    /*=====  End of Main Functions  ======*/\r\n    \r\n    /*========================================\r\n    =            User's Functions            =\r\n    ========================================*/\r\n    \r\n\r\n    /**\r\n     * Custom Event Listener\r\n     * @param  {[type]}   eventType [description]\r\n     * @param  {Function} callback  [description]\r\n     */\r\n    on(eventType, callback) {\r\n        super.on(eventType, callback);\r\n        \r\n        var self = this;\r\n        var selector    = self.selectAllBar();\r\n\r\n        // Update Event Factory\r\n        let eventFactory = {\r\n            'click.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            },\r\n            'mouseover.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            },\r\n            'mouseout.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            }\r\n        }\r\n\r\n        let eventName = eventType + '.event';\r\n\r\n        selector.on(eventName, eventFactory[eventName]);\r\n    }\r\n    \r\n    /**\r\n     * [Main draw function of Bar Chart]\r\n     * @return {[type]} [description]\r\n     */\r\n    draw() {\r\n        super.draw();\r\n\r\n        var self = this;\r\n\r\n        var axis    = new Axis(self.options.axis, self, self.width - self.margin.left - self.margin.right, self.height - self.margin.top - self.margin.bottom);\r\n        var title   = new Title(self.options.title, self);\r\n        var legend  = new Legend(self.options.legend, self, self.dataTarget);\r\n        var table   = new Table(self.options.table, self, self.dataTarget);\r\n\r\n        self.axis = axis;\r\n        self.title = title;\r\n        self.table = table;\r\n        self.legend = legend;\r\n\r\n        \r\n        // Draw axis\r\n        self.axis.draw();\r\n        \r\n        // Draw title\r\n        self.title.draw();\r\n\r\n        // Update Chart based on dataTarget\r\n        self.update(self.dataTarget);\r\n        self.updateInteraction();\r\n\r\n        // Draw legend\r\n        self.legend.draw();\r\n        self.legend.updateInteractionForBarChart(self);\r\n\r\n        // Draw table\r\n        self.table.draw();\r\n        self.table.updateInteractionForBarChart(self);\r\n    }\r\n\r\n    /**\r\n     * Set option via stand-alone function\r\n     * @param {[type]} key   [description]\r\n     * @param {[type]} value [description]\r\n     */\r\n    setOption(key, value) {\r\n        super.setOption(key, value);\r\n\r\n        var self = this;\r\n\r\n        Helper.set(key, value, self.options);\r\n\r\n        self.updateConfig(self.options);\r\n    }\r\n\r\n    /**\r\n     * Update chart based on new data with optional dataConfig\r\n     * @param  {[type]} data       [description]\r\n     * @param  {[type]} dataConfig [description]\r\n     */\r\n    updateData(newData, newDataConfig) {\r\n        var self = this;\r\n\r\n        var newCfg = {};\r\n\r\n        if (!Helper.isEmpty(newDataConfig)) {\r\n\r\n            newCfg.data = {\r\n                plain: newData,\r\n                keys: newDataConfig,\r\n            };\r\n\r\n        } else {\r\n\r\n            newCfg.data = {\r\n                plain: newData,\r\n            };\r\n\r\n        }\r\n\r\n        // Update Chart\r\n        self.updateDataConfig(newCfg);\r\n        self.update(self.dataTarget);\r\n\r\n        // Update Axis\r\n        self.axis.update(self.x, self.y, 100);\r\n\r\n        // Update Legend\r\n        self.legend.update(self.dataTarget);\r\n        self.legend.updateInteractionForBarChart(self);\r\n\r\n        // Update Table\r\n        self.table.update(self.dataTarget);\r\n    }\r\n    /*=====  End of User's Functions  ======*/\r\n    \r\n    \r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/C9.BarChart.js\n **/","import Helper from '../helper/C9.Helper';\r\n\r\nexport default class Chart {\r\n    constructor(options) {\r\n        var self    = this;\r\n        var config  = {\r\n            // container\r\n            id: \"body\",\r\n            // size (width, height), margin, padding\r\n            width: 750,\r\n            height: 500,\r\n            margin: {\r\n                top: 100,\r\n                left: 50,\r\n                right: 50,\r\n                bottom: 50\r\n            },\r\n\r\n            // interaction in chart\r\n            hover: {\r\n                enable: true,\r\n                options: {\r\n                    template: '',\r\n                    onMouseOver: {\r\n                        fadeIn: 200,\r\n                        callback: function(data) {\r\n                            // console.dir(data);\r\n                        },\r\n                    },\r\n                    onMouseOut: {\r\n                        fadeOut: 500,\r\n                        callback: function(data) {\r\n                            // console.dir(data);\r\n                        },\r\n                    },\r\n                    onMouseMove: {\r\n                        callback: function(data) {\r\n                            // console.dir(data);\r\n                        },\r\n                    }\r\n                }\r\n            },\r\n\r\n            click: {\r\n                callback: function(data) {\r\n                    // console.dir(data);\r\n                },\r\n            },\r\n\r\n            // title\r\n            title: {\r\n                show      : true,\r\n                text      : \"Sample Chart\",\r\n                position  : 'top',\r\n                fontSize  : \"14px\"\r\n            },\r\n\r\n            // legend\r\n            legend: {\r\n                show      : true,\r\n                position  : \"top\",\r\n                size      : 10,\r\n                fontSize  : \"12px\",\r\n                fontColor : \"#999\",\r\n                fontWeight: 'bold',\r\n                margin    : [5, 5, 5, 5],\r\n                space     : 10,\r\n            },\r\n\r\n            // tooltip\r\n            tooltip: {\r\n                show: true,\r\n                position: 'left', // [top, right, bottom, left]\r\n                backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n                fontColor: '#fff',\r\n                fontSize: '11px',\r\n                format: null\r\n            },\r\n\r\n            // table \r\n            table: {\r\n                container: \"body\",\r\n                show: false,\r\n                headings: [\"Name\", \"Value\"],\r\n                style: \"stripe\", // \"strip\", \"border\"\r\n                serial: true,\r\n                hover: {\r\n                    enable: true,\r\n                    callback: null\r\n                },\r\n                click: {\r\n                    enable: true,\r\n                    callback: null\r\n                }\r\n            },\r\n\r\n            // color range\r\n            colorRange: \"category20\",\r\n\r\n            // data\r\n            data: {\r\n                // ALL OPTIONS AVAILABLE IN DATA CONFIG\r\n                plain: [],\r\n                file: {\r\n                    type: null,\r\n                    url: null,\r\n                },\r\n                keys: {\r\n                    name: \"name\",\r\n                    value: \"value\",\r\n                    time: \"time\"\r\n                },\r\n                groups: [],\r\n                stacks: [],\r\n            },\r\n\r\n            axis: {\r\n                x: {\r\n                    tick: {\r\n                        rotate: 0,\r\n                        count: 10,\r\n                        size: 6,\r\n                        padding: 3,\r\n                        format: undefined,\r\n                        values: [],\r\n                        //the following use for timeline chart\r\n                        type: d3.time.hours,\r\n                        interval: 1\r\n                    },\r\n                    label: {\r\n                        text: \"Name\",\r\n                        position: \"default\"\r\n                    },\r\n                    show: true,\r\n                    grid: false,\r\n                    type: \"\"\r\n                },\r\n                y: {\r\n                    tick: {\r\n                        rotate: 0,\r\n                        count: 10,\r\n                        size: 6,\r\n                        padding: 3,\r\n                        format: undefined,\r\n                        values: []\r\n                    },\r\n                    label: {\r\n                        text: \"Value\",\r\n                        position: \"default\"\r\n                    },\r\n                    show: true,\r\n                    grid: true,\r\n                    type: \"\"\r\n                }\r\n            },\r\n\r\n            // sub-chart\r\n            subchart: {\r\n                show: false,\r\n                height: 100,\r\n            },\r\n        };\r\n\r\n        self._options   = options;\r\n\r\n        self.updateConfig(config);\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    get container() {\r\n        return this._container;\r\n    }\r\n    \r\n    get id() {\r\n        if (this._id !== 'body') {\r\n            return '#' + this._id;\r\n        }\r\n        return this._id;\r\n    }\r\n\r\n    get width() {\r\n        return this._width;\r\n    }\r\n\r\n    get height() {\r\n        return this._height;\r\n    }\r\n\r\n    get actualWidth() {\r\n        return this._actualWidth;\r\n    }\r\n\r\n    get actualHeight() {\r\n        return this._actualHeight;\r\n    }\r\n\r\n    /**\r\n     * If colorRange is Array of color then scale range according to it\r\n     * If colorRange is a String like \"category20\", \"category20b\", etc. then scale using d3.scale.category\r\n     */\r\n    get colorRange() {\r\n        var color = this._colorRange;\r\n\r\n        if (typeof color == 'string') {\r\n            try {\r\n                return d3.scale[color]();    \r\n            }\r\n            catch(err) {\r\n                return function(i) {\r\n                    return color;\r\n                };\r\n            }\r\n        } else if (typeof color == 'object') {\r\n            return d3.scale.ordinal().range(color);\r\n        }\r\n    }\r\n\r\n    get margin() {\r\n        return this._margin;\r\n    }\r\n\r\n    get dataOption() {\r\n        return this._dataOption;\r\n    }\r\n\r\n    get svg() {\r\n        return this._svg;\r\n    }\r\n\r\n    get body() {\r\n        return this._body;\r\n    }\r\n\r\n    get options() {\r\n        return this._options;\r\n    }\r\n\r\n    get hover() {\r\n        return this._hover;\r\n    }\r\n\r\n    get click() {\r\n        return this._click;\r\n    }\r\n\r\n    get dataTarget() {\r\n        return this._dataTarget;\r\n    }\r\n\r\n    get dataSource() {\r\n        return this._dataSource;\r\n    }\r\n\r\n    get eventFactory() {\r\n        return this._eventFactory;\r\n    }\r\n\r\n    get x() {\r\n        return this._x;\r\n    }\r\n\r\n    get y() {\r\n        return this._y;\r\n    }\r\n\r\n    get chartType() {\r\n        return this._chartType;\r\n    }\r\n\r\n    get title() {\r\n        return this._title;\r\n    }\r\n\r\n    get axis() {\r\n        return this._axis;\r\n    }\r\n\r\n    get legend() {\r\n        return this._legend;\r\n    }\r\n\r\n    get table() {\r\n        return this._table;\r\n    }\r\n\r\n    get tooltip() {\r\n        return this._tooltip;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n    \r\n    \r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    set container(arg) {\r\n        if (arg) {\r\n            this._container = arg;\r\n        }\r\n    }\r\n    \r\n    set id(arg) {\r\n        if (arg) {\r\n            this._id = arg;\r\n        }\r\n    }\r\n\r\n    set width(arg) {\r\n        if (arg) {\r\n            this._width = arg;\r\n        }\r\n    }\r\n\r\n    set height(arg) {\r\n        if (arg) {\r\n            this._height = arg;\r\n        }\r\n    }\r\n\r\n    set actualWidth(arg) {\r\n        if (arg) {\r\n            this._actualWidth = arg;\r\n        }\r\n    }\r\n\r\n    set actualHeight(arg) {\r\n        if (arg) {\r\n            this._actualHeight = arg;\r\n        }\r\n    }\r\n\r\n    set colorRange(arg) {\r\n        if (arg) {\r\n            this._colorRange = arg;\r\n        }\r\n    }\r\n\r\n    set margin(arg) {\r\n        if (arg) {\r\n            this._margin = arg;\r\n        }\r\n    }\r\n\r\n    set dataOption(arg) {\r\n        if (arg) {\r\n            this._dataOption = arg;\r\n        }\r\n    }\r\n\r\n    set svg(arg) {\r\n        if (arg) {\r\n            this._svg = arg;\r\n        }\r\n    }\r\n\r\n    set body(arg) {\r\n        if (arg) {\r\n            this._body = arg;\r\n        }\r\n    }\r\n\r\n    set options(arg) {\r\n        if (arg) {\r\n            this._options = arg;\r\n        }\r\n    }\r\n\r\n    set hover(arg) {\r\n        if (arg) {\r\n            this._hover = arg;\r\n        }\r\n    }\r\n\r\n    set click(arg) {\r\n        if (arg) {\r\n            this._click = arg;\r\n        }\r\n    }\r\n\r\n    set dataTarget(arg) {\r\n        if (arg) {\r\n            this._dataTarget = arg;\r\n        }\r\n    }\r\n\r\n    set dataSource(arg) {\r\n        if (arg) {\r\n            this._dataSource = arg;\r\n        }\r\n    }\r\n\r\n    set eventFactory(arg) {\r\n        if (arg) {\r\n            this._eventFactory = arg;\r\n        }\r\n    }\r\n\r\n    set x(arg) {\r\n        if (arg) {\r\n            this._x = arg;\r\n        }\r\n    }\r\n\r\n    set y(arg) {\r\n        if (arg) {\r\n            this._y = arg;\r\n        }\r\n    }\r\n\r\n    set chartType(arg) {\r\n        if (arg) {\r\n            this._chartType = arg;\r\n        }\r\n    }\r\n\r\n    set title(arg) {\r\n        if (arg) {\r\n            this._title = arg;\r\n        }\r\n    }\r\n\r\n    set axis(arg) {\r\n        if (arg) {\r\n            this._axis = arg;\r\n        }\r\n    }\r\n\r\n    set legend(arg) {\r\n        if (arg) {\r\n            this._legend = arg;\r\n        }\r\n    }\r\n\r\n    set table(arg) {\r\n        if (arg) {\r\n            this._table = arg;\r\n        }\r\n    }\r\n\r\n    set tooltip(arg) {\r\n        if (arg) {\r\n            this._tooltip = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n    \r\n    \r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    /**\r\n     * Update parent config\r\n     */\r\n    updateConfig(config) {\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n\r\n        var options = self.options;\r\n\r\n        self.id        = options.id        || config.id;\r\n        self.width     = options.width     || config.width;\r\n        self.height    = options.height    || config.height;\r\n        self.colorRange= options.colorRange|| config.colorRange;\r\n        \r\n        self.margin    = Helper.merge(options.margin, config.margin);\r\n        self.hover     = Helper.merge(options.hover, config.hover);\r\n        self.click     = Helper.merge(options.click, config.click);\r\n        \r\n        self.dataOption= Helper.mergeDeep(config.data, options.data);\r\n\r\n        self.options.subchart  = Helper.merge(options.subchart, config.subchart);\r\n        self.options.table     = Helper.merge(options.table, config.table);\r\n        self.options.tooltip   = Helper.merge(options.tooltip, config.tooltip);\r\n        self.options.legend    = Helper.merge(options.legend, config.legend);\r\n        self.options.axis      = Helper.mergeDeep(config.axis, options.axis);\r\n    }\r\n\r\n    /**\r\n     * Draw or Re-draw Base Chart\r\n     */\r\n    draw() {\r\n        var self = this;\r\n\r\n        var margin  = self.margin,\r\n            id      = self.id,\r\n            width   = self.width - margin.left - margin.right,\r\n            height  = self.height - margin.top - margin.bottom;\r\n\r\n        self.container = d3.select(id);\r\n\r\n        // Remove existing chart at current container\r\n        self.container.selectAll(\".c9-svg\").data([]).exit().remove();\r\n\r\n        self.svg = d3.select(id)\r\n            .style('position', 'relative')\r\n            .append(\"svg\")\r\n            .attr('class', 'c9-svg')\r\n            .attr(\"width\", self.width)\r\n            .attr(\"height\", self.height)\r\n            .style('overflow', 'visible'); // to overwrite overflow: hidden by Boostrap as default\r\n\r\n\r\n        self.svg.append(\"defs\")\r\n            .append(\"clipPath\")\r\n                .attr(\"id\", \"clip\")\r\n            .append(\"rect\")\r\n                .attr(\"width\", width)\r\n                .attr(\"height\", height);\r\n\r\n        self.body = self.svg\r\n                    .append(\"g\")\r\n                    .attr('class', 'c9-chart c9-custom-container')\r\n                    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");               \r\n    }\r\n\r\n    /**\r\n     * Get lightening color to create effect when interacting\r\n     * @param  {[type]} color [description]\r\n     */\r\n    getLightenColor(color) {\r\n        return Helper.shadeColor(0.5, color);\r\n    }\r\n\r\n    /*=====  End of Main Functions  ======*/\r\n\r\n    /*========================================\r\n    =            User's Functions            =\r\n    ========================================*/\r\n    /**\r\n     * Custom Event Listener\r\n     * @param  {[type]}   eventType [description]\r\n     * @param  {Function} callback  [description]\r\n     */\r\n    on(eventType, callback) {\r\n\r\n    }\r\n\r\n    /**\r\n     * Set option via stand-alone function\r\n     * @param {[type]} key   [description]\r\n     * @param {[type]} value [description]\r\n     */\r\n    setOption(key, value) {\r\n        var self = this;\r\n\r\n        Helper.set(key, value, self.options);\r\n\r\n        // Self-update on Base Chart to make sure that self.options consisting\r\n        // of all new values\r\n        self.updateConfig(self.options);\r\n    }\r\n\r\n    /**\r\n     * Update chart based on new data with optional dataConfig\r\n     * @param  {[type]} data       [description]\r\n     * @param  {[type]} dataConfig [description]\r\n     */\r\n    updateData(data, dataConfig) {\r\n\r\n    }\r\n    /*=====  End of User's Functions  ======*/\r\n    \r\n\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/C9.Chart.js\n **/","var Helper = {\r\n    \r\n    each: function(loopable, callback, self, reverse) {\r\n        // Check to see if null or undefined firstly.\r\n        var i, len;\r\n        if (self.isArray(loopable)) {\r\n            len = loopable.length;\r\n            if (reverse) {\r\n                for (i = len - 1; i >= 0; i--) {\r\n                    callback.call(self, loopable[i], i);\r\n                }\r\n            } else {\r\n                for (i = 0; i < len; i++) {\r\n                    callback.call(self, loopable[i], i);\r\n                }\r\n            }\r\n        } else if (typeof loopable === 'object') {\r\n            var keys = Object.keys(loopable);\r\n            len = keys.length;\r\n            for (i = 0; i < len; i++) {\r\n                callback.call(self, loopable[keys[i]], keys[i]);\r\n            }\r\n        }\r\n    },\r\n\r\n    setValue: function(value, key) {\r\n        var self = this;\r\n        self[key] = value;\r\n    },\r\n\r\n    setPrefix: function(config) {\r\n        var constPrefix = '_';\r\n        if (config) {\r\n            return constPrefix + config;\r\n        }\r\n    },\r\n\r\n    isEmpty: function(value) {\r\n        return value === null || value === undefined || (Util.isArray(value) && value.length === 0) || (Util.isArray(value) && Util.isEmpty(value[0]));\r\n    },\r\n\r\n    isObject: function(object) {\r\n        return !Util.isEmpty(object) && typeof(object) === 'object';\r\n    },\r\n\r\n    isArray: function(array) {\r\n        return !Util.isEmpty(array) && (Array.isArray(array) || Object.prototype.toString.call(array) === '[object Array]');\r\n    },\r\n\r\n    isFunction: function(func) {\r\n        return !Util.isEmpty(func) && typeof(func) === 'function';\r\n    },\r\n\r\n    // Overlap source by target\r\n    merge: function(target, source){\r\n        var obj3 = {};\r\n        for (var attrname in source) { if (!Util.isEmpty(source[attrname])) obj3[attrname] = source[attrname]; }\r\n        for (var attrname in target) { if (!Util.isEmpty(target[attrname])) obj3[attrname] = target[attrname]; }\r\n        return obj3;\r\n    },\r\n\r\n    // Overlap target by source\r\n    mergeDeep: function(target, source) {\r\n        return mergeDeep(target, source);\r\n    },\r\n\r\n    get: function(_key, _data){\r\n        var _keys = _key.split(\".\");\r\n        var _current = _data;\r\n\r\n        for (var i = 0; i < _keys.length; i++) {\r\n\r\n            if ('undefined' == typeof(_current[_keys[i]])) {\r\n                return '';\r\n            } else {\r\n                _current = _current[_keys[i]];\r\n            }\r\n        }\r\n\r\n        return _current;\r\n    },\r\n    \r\n    set: function(_key, _value, _context) {\r\n        var _current = _context;  // a moving reference to internal objects within obj\r\n        var _keys = _key.split('.');\r\n        var len = _keys.length;\r\n        for(var i = 0; i < len-1; i++) {\r\n            var _handle = _keys[i];\r\n            if( !_current[_handle] ) _current[_handle] = {}\r\n            _current = _current[_handle];\r\n        }\r\n\r\n        _current[_keys[len-1]] = _value;\r\n    },\r\n\r\n    max: function(arr) {\r\n        return Math.max(...arr);\r\n    }, \r\n\r\n    min: function(arr) {\r\n        return Math.min(...arr);\r\n    }, \r\n\r\n    sum: function(arr) {\r\n        return arr.reduce(function(a, b) { return a + b; }, 0);\r\n    },\r\n\r\n    guid: function() {\r\n        return 'c9-xxxxxx-4xxx-yxxx'.replace(/[xy]/g, function(c) {\r\n            let r = Math.random()*16|0, \r\n                v = c == 'x' ? r : (r&0x3|0x8);\r\n            return v.toString(16);\r\n        });\r\n    },\r\n\r\n    getMinMax: function(data, type, isLogaric) {\r\n        var self  = this;\r\n        var _temp = new Array();\r\n        var _min  = 0,\r\n            _max  = 0;\r\n        if (type == \"stack\")\r\n            data.forEach(function (d){\r\n                d.forEach(function (s){\r\n                    if (s.y0 > 0)\r\n                        _temp.push(s.y1);\r\n                    else\r\n                        _temp.push(s.y1 + s.y0);\r\n                })\r\n            })\r\n        else\r\n            data.forEach(function (d){\r\n                d.forEach(function (s){\r\n                    _temp.push(s.y0);\r\n                })\r\n            });\r\n\r\n\r\n        var _newMin = self.min(_temp);\r\n        var _newMax = self.max(_temp);\r\n        if (_newMin < _min || isLogaric)\r\n            _min = _newMin;\r\n        if (_newMax > _max)\r\n            _max = _newMax;\r\n\r\n        return {min: _min, max: _max};\r\n    },\r\n    dateParser: function(format) {\r\n        return d3.time.format(format).parse;\r\n    },\r\n    dateFormatter: function(format) {\r\n        return d3.time.format(format);\r\n    },\r\n    // Convert color 'from' to 'to' (if any) in propotion of 'p'\r\n    // Use to lighten/darken specific color\r\n    shadeColor: function(p, from, to) {\r\n        // Convert color from 'Name' to 'Hex'\r\n        from = Util.convertColorToHex(from) || from;\r\n        \r\n        if(typeof(p)!=\"number\"||p<-1||p>1||typeof(from)!=\"string\"||(from[0]!='r'&&from[0]!='#')||(typeof(to)!=\"string\"&&typeof(to)!=\"undefined\"))return null; //ErrorCheck\r\n        if(!this.sbcRip)\r\n            this.sbcRip=function(d) {\r\n                var l=d.length,RGB=new Object();\r\n                if(l>9){\r\n                    d=d.split(\",\");\r\n                    if(d.length<3||d.length>4)return null;//ErrorCheck\r\n                    RGB[0]=i(d[0].slice(4)),RGB[1]=i(d[1]),RGB[2]=i(d[2]),RGB[3]=d[3]?parseFloat(d[3]):-1;\r\n                }else{\r\n                    if(l==8||l==6||l<4)return null; //ErrorCheck\r\n                    if(l<6)d=\"#\"+d[1]+d[1]+d[2]+d[2]+d[3]+d[3]+(l>4?d[4]+\"\"+d[4]:\"\"); //3 digit\r\n                    d=i(d.slice(1),16),RGB[0]=d>>16&255,RGB[1]=d>>8&255,RGB[2]=d&255,RGB[3]=l==9||l==5?r(((d>>24&255)/255)*10000)/10000:-1;\r\n                }\r\n                return RGB;\r\n            }\r\n        var i=parseInt,r=Math.round,h=from.length>9,h=typeof(to)==\"string\"?to.length>9?true:to==\"c\"?!h:false:h,b=p<0,p=b?p*-1:p,to=to&&to!=\"c\"?to:b?\"#000000\":\"#FFFFFF\",f=this.sbcRip(from),t=this.sbcRip(to);\r\n        if(!f||!t)return null; //ErrorCheck\r\n        if(h)return \"rgb(\"+r((t[0]-f[0])*p+f[0])+\",\"+r((t[1]-f[1])*p+f[1])+\",\"+r((t[2]-f[2])*p+f[2])+(f[3]<0&&t[3]<0?\")\":\",\"+(f[3]>-1&&t[3]>-1?r(((t[3]-f[3])*p+f[3])*10000)/10000:t[3]<0?f[3]:t[3])+\")\");\r\n        else return \"#\"+(0x100000000+(f[3]>-1&&t[3]>-1?r(((t[3]-f[3])*p+f[3])*255):t[3]>-1?r(t[3]*255):f[3]>-1?r(f[3]*255):255)*0x1000000+r((t[0]-f[0])*p+f[0])*0x10000+r((t[1]-f[1])*p+f[1])*0x100+r((t[2]-f[2])*p+f[2])).toString(16).slice(f[3]>-1||t[3]>-1?1:3);\r\n    },\r\n    //smooth scroll c9 table\r\n    scroll: function(element, to, duration) {\r\n        var self = this;\r\n        if (duration <= 0) return;\r\n        var difference = to - element.scrollTop;\r\n        var perTick = difference / duration * 10;\r\n\r\n        setTimeout(function() {\r\n            element.scrollTop = element.scrollTop + perTick;\r\n            if (element.scrollTop === to) return;\r\n            self.scroll(element, to, duration - 10);\r\n        }, 10);\r\n    }   \r\n};\r\n\r\nvar Util = {\r\n    isEmpty: function(value) {\r\n        return value === null || value === undefined;\r\n    },\r\n\r\n    isArray: function(array) {\r\n        return Array.isArray(array) || Object.prototype.toString.call(array) === '[object Array]';\r\n    },\r\n\r\n    isObject: function(object) {\r\n        return (object && typeof object === 'object' && !Array.isArray(object));\r\n    },\r\n\r\n    convertColorToHex: function(colour) {\r\n        var colours = {\r\n            \"aliceblue\":\"#f0f8ff\",\"antiquewhite\":\"#faebd7\",\"aqua\":\"#00ffff\",\"aquamarine\":\"#7fffd4\",\"azure\":\"#f0ffff\",\r\n            \"beige\":\"#f5f5dc\",\"bisque\":\"#ffe4c4\",\"black\":\"#000000\",\"blanchedalmond\":\"#ffebcd\",\"blue\":\"#0000ff\",\"blueviolet\":\"#8a2be2\",\"brown\":\"#a52a2a\",\"burlywood\":\"#deb887\",\r\n            \"cadetblue\":\"#5f9ea0\",\"chartreuse\":\"#7fff00\",\"chocolate\":\"#d2691e\",\"coral\":\"#ff7f50\",\"cornflowerblue\":\"#6495ed\",\"cornsilk\":\"#fff8dc\",\"crimson\":\"#dc143c\",\"cyan\":\"#00ffff\",\r\n            \"darkblue\":\"#00008b\",\"darkcyan\":\"#008b8b\",\"darkgoldenrod\":\"#b8860b\",\"darkgray\":\"#a9a9a9\",\"darkgreen\":\"#006400\",\"darkkhaki\":\"#bdb76b\",\"darkmagenta\":\"#8b008b\",\"darkolivegreen\":\"#556b2f\",\r\n            \"darkorange\":\"#ff8c00\",\"darkorchid\":\"#9932cc\",\"darkred\":\"#8b0000\",\"darksalmon\":\"#e9967a\",\"darkseagreen\":\"#8fbc8f\",\"darkslateblue\":\"#483d8b\",\"darkslategray\":\"#2f4f4f\",\"darkturquoise\":\"#00ced1\",\r\n            \"darkviolet\":\"#9400d3\",\"deeppink\":\"#ff1493\",\"deepskyblue\":\"#00bfff\",\"dimgray\":\"#696969\",\"dodgerblue\":\"#1e90ff\",\r\n            \"firebrick\":\"#b22222\",\"floralwhite\":\"#fffaf0\",\"forestgreen\":\"#228b22\",\"fuchsia\":\"#ff00ff\",\r\n            \"gainsboro\":\"#dcdcdc\",\"ghostwhite\":\"#f8f8ff\",\"gold\":\"#ffd700\",\"goldenrod\":\"#daa520\",\"gray\":\"#808080\",\"green\":\"#008000\",\"greenyellow\":\"#adff2f\",\r\n            \"honeydew\":\"#f0fff0\",\"hotpink\":\"#ff69b4\",\r\n            \"indianred \":\"#cd5c5c\",\"indigo\":\"#4b0082\",\"ivory\":\"#fffff0\",\"khaki\":\"#f0e68c\",\r\n            \"lavender\":\"#e6e6fa\",\"lavenderblush\":\"#fff0f5\",\"lawngreen\":\"#7cfc00\",\"lemonchiffon\":\"#fffacd\",\"lightblue\":\"#add8e6\",\"lightcoral\":\"#f08080\",\"lightcyan\":\"#e0ffff\",\"lightgoldenrodyellow\":\"#fafad2\",\r\n            \"lightgrey\":\"#d3d3d3\",\"lightgreen\":\"#90ee90\",\"lightpink\":\"#ffb6c1\",\"lightsalmon\":\"#ffa07a\",\"lightseagreen\":\"#20b2aa\",\"lightskyblue\":\"#87cefa\",\"lightslategray\":\"#778899\",\"lightsteelblue\":\"#b0c4de\",\r\n            \"lightyellow\":\"#ffffe0\",\"lime\":\"#00ff00\",\"limegreen\":\"#32cd32\",\"linen\":\"#faf0e6\",\r\n            \"magenta\":\"#ff00ff\",\"maroon\":\"#800000\",\"mediumaquamarine\":\"#66cdaa\",\"mediumblue\":\"#0000cd\",\"mediumorchid\":\"#ba55d3\",\"mediumpurple\":\"#9370d8\",\"mediumseagreen\":\"#3cb371\",\"mediumslateblue\":\"#7b68ee\",\r\n            \"mediumspringgreen\":\"#00fa9a\",\"mediumturquoise\":\"#48d1cc\",\"mediumvioletred\":\"#c71585\",\"midnightblue\":\"#191970\",\"mintcream\":\"#f5fffa\",\"mistyrose\":\"#ffe4e1\",\"moccasin\":\"#ffe4b5\",\r\n            \"navajowhite\":\"#ffdead\",\"navy\":\"#000080\",\r\n            \"oldlace\":\"#fdf5e6\",\"olive\":\"#808000\",\"olivedrab\":\"#6b8e23\",\"orange\":\"#ffa500\",\"orangered\":\"#ff4500\",\"orchid\":\"#da70d6\",\r\n            \"palegoldenrod\":\"#eee8aa\",\"palegreen\":\"#98fb98\",\"paleturquoise\":\"#afeeee\",\"palevioletred\":\"#d87093\",\"papayawhip\":\"#ffefd5\",\"peachpuff\":\"#ffdab9\",\"peru\":\"#cd853f\",\"pink\":\"#ffc0cb\",\"plum\":\"#dda0dd\",\"powderblue\":\"#b0e0e6\",\"purple\":\"#800080\",\r\n            \"red\":\"#ff0000\",\"rosybrown\":\"#bc8f8f\",\"royalblue\":\"#4169e1\",\r\n            \"saddlebrown\":\"#8b4513\",\"salmon\":\"#fa8072\",\"sandybrown\":\"#f4a460\",\"seagreen\":\"#2e8b57\",\"seashell\":\"#fff5ee\",\"sienna\":\"#a0522d\",\"silver\":\"#c0c0c0\",\"skyblue\":\"#87ceeb\",\"slateblue\":\"#6a5acd\",\"slategray\":\"#708090\",\"snow\":\"#fffafa\",\"springgreen\":\"#00ff7f\",\"steelblue\":\"#4682b4\",\r\n            \"tan\":\"#d2b48c\",\"teal\":\"#008080\",\"thistle\":\"#d8bfd8\",\"tomato\":\"#ff6347\",\"turquoise\":\"#40e0d0\",\r\n            \"violet\":\"#ee82ee\",\r\n            \"wheat\":\"#f5deb3\",\"white\":\"#ffffff\",\"whitesmoke\":\"#f5f5f5\",\r\n            \"yellow\":\"#ffff00\",\"yellowgreen\":\"#9acd32\"\r\n        };\r\n\r\n        if (typeof colours[colour.toLowerCase()] != 'undefined')\r\n            return colours[colour.toLowerCase()];\r\n\r\n        return false;\r\n    }\r\n};\r\n\r\nfunction mergeDeep(target, source) {\r\n    if (Util.isObject(target) && Util.isObject(source)) {\r\n        for (const key in source) {\r\n            if (Util.isObject(source[key])) {\r\n                if (Helper.isEmpty(target[key])) {\r\n                    Object.assign(target, {\r\n                        [key]: {}\r\n                    });\r\n                }\r\n                mergeDeep(target[key], source[key]);\r\n            } else {\r\n                Object.assign(target, {\r\n                    [key]: source[key]\r\n                });\r\n            }\r\n        }\r\n    }\r\n    return target;\r\n}\r\n\r\n\r\n\r\n\r\nmodule.exports = Helper;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/helper/C9.Helper.js\n **/","import Helper from '../../helper/C9.Helper';\r\n\r\nexport default class Axis {\r\n    constructor(options, chart, width, height) {\r\n        var self = this;\r\n\r\n        var config = {\r\n                x: {\r\n                    tick: {\r\n                        rotate: 0, \r\n                        count: 10, // number of ticks to display\r\n                        size: 6, // size of tick\r\n                        padding: 3,\r\n                        format: undefined,\r\n                        values: [],\r\n                        //the following use for timeline chart\r\n                        type: d3.time.hours,\r\n                        interval: 1\r\n                    },\r\n                    label: {\r\n                        text: \"Name\",\r\n                        position: \"default\"\r\n                    },\r\n                    show: true,\r\n                    grid: false,\r\n                    type: \"\"\r\n                },\r\n                y: {\r\n                    tick: {\r\n                        rotate: 0,\r\n                        count: 10,\r\n                        size: 6,\r\n                        padding: 3,\r\n                        format: undefined,\r\n                        values: []\r\n                    },\r\n                    label: {\r\n                        text: \"Value\",\r\n                        position: \"default\"\r\n                    },\r\n                    show: true,\r\n                    grid: true,\r\n                    type: \"\"\r\n                }\r\n            };\r\n\r\n        self._options   = options;\r\n        self._chart     = chart;\r\n        self._width     = width;\r\n        self._height    = height;\r\n\r\n        self.updateConfig(config);\r\n            \r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    \r\n    get x() {\r\n        return this._x;\r\n    }\r\n\r\n    get y() {\r\n        return this._y;\r\n    }\r\n\r\n    get xAxis() {\r\n        return this._xAxis;\r\n    }\r\n\r\n    get yAxis() {\r\n        return this._yAxis;\r\n    }\r\n\r\n    get chart() {\r\n        return this._chart;\r\n    }\r\n\r\n    get options() {\r\n        return this._options;\r\n    }\r\n\r\n    get width() {\r\n        return this._width;\r\n    }\r\n\r\n    get height() {\r\n        return this._height;\r\n    }\r\n\r\n    get data() {\r\n        return this._data;\r\n    }\r\n    \r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    \r\n    set x(arg) {\r\n        if (arg) {\r\n            this._x = arg;\r\n        }\r\n    }\r\n\r\n    set y(arg) {\r\n        if (arg) {\r\n            this._y = arg;\r\n        }\r\n    }\r\n\r\n    set xAxis(arg) {\r\n        if (arg) {\r\n            this._xAxis = arg;\r\n        }\r\n    }\r\n\r\n    set yAxis(arg) {\r\n        if (arg) {\r\n            this._yAxis = arg;\r\n        }\r\n    }\r\n\r\n    set chart(arg) {\r\n        if (arg) {\r\n            this._chart = arg;\r\n        }\r\n    }\r\n\r\n    set options(arg) {\r\n        if (arg) {\r\n            this._options = arg;\r\n        }\r\n    }\r\n\r\n    set width(arg) {\r\n        if (arg) {\r\n            this._width = arg;\r\n        }\r\n    }\r\n\r\n    set height(arg) {\r\n        if (arg) {\r\n            this._height = arg;\r\n        }\r\n    }\r\n\r\n    set data(arg) {\r\n        if (arg) {\r\n            this._data = arg;\r\n        }\r\n    }\r\n    \r\n    /*=====  End of Setter  ======*/\r\n    \r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    updateConfig(config) {\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n        \r\n        self.x = self.chart.x;\r\n        self.y = self.chart.y;\r\n\r\n        self.data       = self.chart.dataTarget;\r\n        self.isLogaricVariant = self.chart.options.isLogaric;\r\n\r\n        if (self.chart.chartType == \"timeline\") {\r\n            var xScale = d3.time.scale()\r\n                .domain([self.chart.options.starting, self.chart.options.ending])\r\n                .range([0, self.width]);\r\n\r\n            self.xAxis = d3.svg.axis()\r\n                .scale(xScale)\r\n                .orient(\"bottom\")\r\n                .tickFormat(self.options.x.tick.format === undefined ? d3.time.format(\"%I %p\") : self.options.x.tick.format)\r\n                // .tickSize(options.tickFormat === undefined ? 6 : options.tickFormat.tickSize)\r\n                .ticks(self.options.x.tick.type, self.options.x.tick.interval);\r\n            // delete options.starting;\r\n            // delete options.ending;\r\n        } else {\r\n            self.xAxis = d3.svg.axis()\r\n                .scale(self.x)\r\n                .orient(\"bottom\")\r\n                .tickPadding(self.options.x.tick.padding)\r\n                .ticks(self.options.x.tick.count)\r\n                .tickValues(self.options.x.tick.values.length > 0 ? self.options.x.tick.values : undefined)\r\n                .tickFormat(self.options.x.type == \"timeseries\" ? self.options.x.tick.format || d3.time.format(\"%Y-%m-%d\") : self.options.x.tick.format ? self.options.x.tick.format : undefined);\r\n\r\n            // In LOG scale, can't specify default number of ticks\r\n            // must be filter with tickFormat instead\r\n            // refer: https://github.com/d3/d3/wiki/Quantitative-Scales#log_ticks\r\n            if (self.isLogaricVariant) {\r\n                self.yAxis = d3.svg.axis()\r\n                    .scale(self.y)\r\n                    .orient(\"left\")\r\n                    .ticks(self.options.y.tick.count, self.options.y.type == \"timeseries\" ? self.options.y.tick.format || d3.time.format(\"%Y-%m-%d\") : self.options.y.tick.format ? self.options.y.tick.format : undefined)\r\n                    .tickPadding(self.options.y.tick.padding)\r\n                    .tickValues(self.options.y.tick.values.length > 0 ? self.options.y.tick.values : undefined);\r\n            } else {\r\n                self.yAxis = d3.svg.axis()\r\n                    .scale(self.y)\r\n                    .orient(\"left\")\r\n                    .ticks(self.options.y.tick.count)\r\n                    .tickPadding(self.options.y.tick.padding)\r\n                    .tickValues(self.options.y.tick.values.length > 0 ? self.options.y.tick.values : undefined)\r\n                    .tickFormat(self.options.y.type == \"timeseries\" ? self.options.y.tick.format || d3.time.format(\"%Y-%m-%d\") : self.options.y.tick.format ? self.options.y.tick.format : undefined);\r\n            }   \r\n        }\r\n\r\n        if (self.chart.chartType != \"timeline\") {\r\n            // Grid\r\n            if (self.options.x.grid) {\r\n                self.xAxis.innerTickSize(-self.height)\r\n                    .outerTickSize(0);\r\n            }\r\n\r\n            if (self.options.y.grid) {\r\n                self.yAxis.innerTickSize(-self.width)\r\n                    .outerTickSize(0);\r\n            }\r\n        }\r\n\r\n        var textAnchor = function(angle) {\r\n            var sin = Math.sin(angle * Math.PI / 180).toFixed(15);\r\n            return sin == 0 ? \"middle\" : (sin > 0 ? \"start\" : \"end\");\r\n        };\r\n\r\n        var textDx = function(angle) {\r\n            var sin = Math.sin(angle * Math.PI / 180).toFixed(15);\r\n            return 8 * sin;\r\n        };\r\n\r\n        var textY = function(angle) {\r\n            return 11.5 - 2.5 * (angle / 15) * (angle > 0 ? 1 : -1);\r\n        };\r\n\r\n        //draw x axis\r\n        self.chart.body.append(\"g\")\r\n            .attr(\"class\", \"c9-axis c9-axis-x\")\r\n            .attr(\"transform\", \"translate(0,\" + (self.height) + \")\")\r\n            .call(self.xAxis);\r\n        //draw tick\r\n        d3.select(\".c9-axis.c9-axis-x\").selectAll(\"text\")\r\n            .style(\"text-anchor\", textAnchor(self.options.x.tick.rotate))\r\n            .attr(\"y\", textY(self.options.x.tick.rotate))\r\n            .attr(\"x\", 0)\r\n            .attr(\"dy\", \".71em\")\r\n            .attr(\"dx\", textDx(self.options.x.tick.rotate))\r\n            .attr(\"transform\", \"rotate(\" + self.options.x.tick.rotate + \")\");\r\n        //draw label\r\n        d3.select(\".c9-axis.c9-axis-x\")\r\n            .append(\"text\")\r\n            .attr(\"class\", \"c9-axis c9-axis-x-text\")\r\n            .attr(\"dx\", \"-.8em\")\r\n            .attr(\"dy\", \"-.55em\")\r\n            .attr(\"x\", self.width + 20)\r\n            .attr(\"y\", 10)\r\n            .style(\"text-anchor\", \"start\")\r\n            .text(self.options.x.label.text);\r\n\r\n        //hide x axis\r\n        if (!self.options.x.show) {\r\n            d3.select(\".c9-axis.c9-axis-x>.domain\").style(\"display\", \"none\");\r\n            if (!self.options.x.grid) d3.selectAll(\".c9-axis.c9-axis-x>g.tick>line\").style(\"display\", \"none\");\r\n        }\r\n\r\n        if (self.chart.chartType != \"timeline\") {\r\n            self.chart.body.append(\"g\")\r\n                .attr(\"class\", \"c9-axis c9-axis-y\")\r\n                .call(self.yAxis);\r\n\r\n            d3.select(\".c9-axis.c9-axis-y\")\r\n                .append(\"text\")\r\n                .attr(\"class\", \"c9-axis c9-axis-y-text\")\r\n                .attr(\"y\", -10)\r\n                .attr(\"dy\", \".10\")\r\n                .style(\"text-anchor\", \"end\")\r\n                .text(self.options.y.label.text);\r\n\r\n            if (!self.options.y.show) {\r\n                d3.select(\".c9-axis.c9-axis-y>.domain\").style(\"display\", \"none\");\r\n                if (!self.options.y.grid) d3.selectAll(\".c9-axis.c9-axis-y>g.tick>line\").style(\"display\", \"none\");\r\n            }\r\n        }\r\n    }\r\n\r\n    update(x, y, duration) {\r\n        var self = this;\r\n\r\n        if (!Helper.isEmpty(x)) {\r\n            self.x = x;\r\n\r\n            if (self.chart.chartType == 'timeline') {\r\n                var xScale = d3.time.scale()\r\n                    .domain([self.chart.options.starting, self.chart.options.ending])\r\n                    .range([0, self.width]);\r\n\r\n                self.xAxis.scale(xScale);\r\n            } else {\r\n                self.xAxis.scale(self.x);\r\n            }\r\n\r\n            self.chart.body.select('.c9-axis.c9-axis-x').transition().duration(duration).call(self.xAxis);\r\n        }\r\n        if (!Helper.isEmpty(y)) {\r\n            self.y = y;\r\n\r\n            if (self.chart.chartType == 'timeline') {\r\n                return ;\r\n            } else {\r\n                self.yAxis.scale(self.y);\r\n            }\r\n\r\n            self.chart.body.select(\".c9-axis.c9-axis-y\").transition().duration(duration).call(self.yAxis);\r\n        }\r\n    }\r\n\r\n    draw() {\r\n        var self = this;\r\n\r\n        self.update(self.x, self.y, 100);\r\n    }\r\n    /*=====  End of Main Functions  ======*/  \r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/utils/C9.Axis.js\n **/","import Helper from '../../helper/C9.Helper';\r\n\r\nexport default class Title {\r\n    constructor(options, chart) {\r\n        var self = this;\r\n\r\n        var config = {\r\n            show      : true,\r\n            text      : \"Sample Chart\",\r\n            position  : 'top',\r\n            fontSize  : \"14px\"\r\n        };\r\n\r\n        self._options  = options;\r\n        self._chart    = chart;\r\n\r\n        self.updateConfig(config);\r\n            \r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    get chart() {\r\n        return this._chart;\r\n    }\r\n\r\n    get options() {\r\n        return this._options;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/ \r\n    set chart(arg) {\r\n        if (arg) {\r\n            this._chart = arg;\r\n        }\r\n    }\r\n\r\n    set options(arg) {\r\n        if (arg) {\r\n            this._options = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n    \r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    updateConfig(config) {\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n    }\r\n\r\n    draw() {\r\n        var self = this;\r\n\r\n        if (self.options.show) {\r\n            var text = self.chart.svg\r\n                            .append(\"g\")\r\n                                .attr('class', 'c9-custom-title c9-custom-title-container')\r\n                            .append(\"text\")\r\n                                .attr(\"class\", \"c9-custom-title c9-custom-title-text\");\r\n\r\n            // Get title self.chart.width: text.node().getComputedTextLength()           \r\n            text.attr(\"x\", (((self.chart.width - text.node().getComputedTextLength()) / 2)))           \r\n                .attr(\"y\", self.setYLocation(self.chart.height, self.chart.margin))\r\n                .attr(\"text-anchor\", \"middle\")  \r\n                .style(\"font-size\", self.options.fontSize)  \r\n                .text(self.options.text);\r\n        }\r\n    }\r\n\r\n    setYLocation(height, margin) {\r\n        var self = this;\r\n        \r\n        if (self.options.position === 'top') {\r\n            return (margin.top / 2);\r\n        } else if (self.options.position === 'bottom') {\r\n            return (height - margin.bottom / 2);\r\n        }\r\n    }\r\n    /*=====  End of Main Functions  ======*/\r\n    \r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/utils/C9.Title.js\n **/","import Helper from '../../helper/C9.Helper';\r\n\r\nexport default class Legend {\r\n    constructor(options, chart) {\r\n        var self = this;\r\n\r\n        var config = {\r\n            show      : true,\r\n            position  : \"top\",\r\n            size      : 10,\r\n            fontSize  : \"12px\",\r\n            fontColor : \"#999\",\r\n            fontWeight: 'bold',\r\n            margin    : [5, 5, 5, 5],\r\n            space     : 10,\r\n            box       : false,\r\n            // legendStyle     : \"rect\" // TODO: Allow user to choose type of legend (circle, rect, etc.)\r\n        };\r\n\r\n        \r\n        self._options   = options;\r\n        self._chart     = chart;\r\n\r\n        self.updateConfig(config);\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    get options() {\r\n        return this._options;\r\n    }\r\n\r\n    get data() {\r\n        return this._data;\r\n    }\r\n\r\n    get chart() {\r\n        return this._chart;\r\n    }\r\n\r\n    get item() {\r\n        return this._item;\r\n    }\r\n\r\n    get itemEventFactory() {\r\n        return this._itemEventFactory;\r\n    }\r\n    \r\n    get maxWidth() {\r\n        return this._maxWidth;\r\n    }\r\n\r\n    get maxHeight() {\r\n        return this._maxHeight;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    set options(arg) {\r\n        if (arg) {\r\n            this._options = arg;\r\n        }\r\n    }\r\n\r\n    set data(arg) {\r\n        if (arg) {\r\n            this._data = arg;\r\n        }\r\n    }\r\n\r\n    set chart(arg) {\r\n        if (arg) {\r\n            this._chart = arg;\r\n        }\r\n    }\r\n\r\n    set item(arg) {\r\n        if (arg) {\r\n            this._item = arg;\r\n        }\r\n    }\r\n\r\n    set itemEventFactory(arg) {\r\n        if (arg) {\r\n            this._itemEventFactory = arg;\r\n        }\r\n    }\r\n    \r\n    set maxWidth(arg) {\r\n        if (arg) {\r\n            this._maxWidth = arg;\r\n        }\r\n    }\r\n\r\n    set maxHeight(arg) {\r\n        if (arg) {\r\n            this._maxHeight = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n    \r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    updateConfig(config) {\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n\r\n        self.maxWidth   = self.chart.width;\r\n        self.maxHeight  = self.chart.height;\r\n        self.data       = self.chart.dataTarget;\r\n    }\r\n\r\n    update(data) {\r\n        var self = this;\r\n\r\n        self.data = data;\r\n\r\n        if (self.options.show) {\r\n            // Remove current legend\r\n            self.chart.svg.selectAll('.c9-custom-legend.c9-custom-legend-container').remove();\r\n\r\n            // var color = self.color;\r\n            var domain = [];\r\n\r\n            if (self.chart.chartType == \"bar\") {\r\n                self.data = self.data[self.data.reduce((p, c, i, a) => a[p].length > c.length ? p : i, 0)];\r\n            }\r\n\r\n            // Legend will be appended in main SVG container\r\n            // var container = d3.select(self._body[0][0].parentNode)\r\n            var container = self.chart.svg\r\n                .append(\"g\")\r\n                .attr(\"class\", \"c9-custom-legend c9-custom-legend-container\");\r\n            \r\n            // var legendBox = legendContainer.selectAll(\".c9-custom-legend.c9-custom-legend-box\").data([true]).enter();\r\n\r\n            self.item = container.selectAll(\"g.c9-custom-legend.c9-custom-legend-item\")\r\n                .data(self.data)\r\n                .enter().append(\"g\")\r\n                .attr(\"class\", \"c9-custom-legend c9-custom-legend-item\")\r\n                .attr('data-ref', function(d) { return d['data-ref']; })\r\n                .attr('data-enable', function(d) { return d['enable']; })\r\n                \r\n\r\n            self.item.append('rect')\r\n                .attr('class', 'c9-custom-legend c9-custom-legend-rect')\r\n                .attr('width', self.options.size)\r\n                .attr('height', self.options.size)\r\n                .attr('r', self.options.size)\r\n                .attr('fill', function(d){ return d.color || d[0].color; })\r\n                // .attr('stroke', function(d){ return d.color || d[0].color; })\r\n                .style('cursor', 'pointer');\r\n\r\n            self.item.append('rect')\r\n                .attr('width', 5)\r\n                .attr('height', self.options.size)\r\n                .attr('x', self.options.size)\r\n                .attr('y', 0)\r\n                .attr('opacity', 0)\r\n                .style('cursor', 'pointer');\r\n\r\n            self.item.append('text')\r\n                .attr('class', 'c9-custom-legend c9-custom-legend-text')\r\n                .attr('x', self.options.size + 5)\r\n                .attr('y', self.options.size)\r\n                .style('font-size', self.options.fontSize)\r\n                .style('font-weight', self.options.fontWeight)\r\n                .style('fill', self.options.fontColor)\r\n                .style('cursor', 'pointer')\r\n                // .attr('text-anchor', 'middle')\r\n                .text(function(d) { return self.chart.chartType == \"bar\" ? d.group : d.name; });\r\n\r\n            //caculate position for legend\r\n            var getSize = function(item) { \r\n                return item.getBoundingClientRect() \r\n            };\r\n            var getXY = function(item) { \r\n                var xy = d3.select(item).attr('transform').split(','); \r\n                return {\r\n                    x: parseFloat(xy[0].replace('translate(', '')), \r\n                    y: parseFloat(xy[1].replace(')', ''))\r\n                }; \r\n            };\r\n\r\n            var r = 0; // current row\r\n            var items = d3.selectAll(\".c9-custom-legend-item\")[0];\r\n            var itemHeight = getSize(items[0]).height;\r\n            var numItemsCol = Math.floor((self.maxHeight - self.options.margin[0] - self.options.margin[2]) / (itemHeight + self.options.space));\r\n            \r\n            if (self.options.space > itemHeight) numItemsCol++;\r\n            \r\n            var maxWidthCol = new Array(Math.floor(items.length / numItemsCol));\r\n\r\n            items.forEach(function (i, n) {\r\n                var pos = Math.floor(n / numItemsCol);\r\n                var width = getSize(i).width;\r\n                if (maxWidthCol[pos] == undefined || width > maxWidthCol[pos]) maxWidthCol[pos] = width;\r\n            });\r\n\r\n            if  (self.options.position == \"bottom\"){\r\n                self.item.attr(\"transform\", function(d, i) {\r\n                    if (i > 0) {\r\n                        var item  = items[i];\r\n                        var preItem  = items[i - 1];\r\n                        var newR = Math.floor((getXY(preItem).x + getSize(preItem).width + self.options.space + getSize(item).width + self.options.margin[1]) / self.maxWidth);\r\n                        if (newR > 0) r++;\r\n                        return \"translate(\" + (newR > 0 ? self.options.margin[3] : getXY(preItem).x + getSize(preItem).width + self.options.space) + \",\" + (self.maxHeight - self.options.margin[0] - itemHeight - r * (itemHeight + self.options.space)) + \")\";\r\n                    } else {\r\n                        return \"translate(\" + self.options.margin[3] + \",\" + (self.maxHeight - self.options.margin[0] - itemHeight) + \")\";\r\n                    }\r\n                });\r\n            } else if (self.options.position == \"left\") {\r\n                self.item.attr(\"transform\", function(d, i) {\r\n                    var pos = Math.floor(i / numItemsCol);\r\n\r\n                    if (i > 0) {\r\n                        var prePos = Math.floor((i - 1) / numItemsCol);\r\n                        var item  = items[i];\r\n                        var preItem  = items[i - 1];\r\n                        return \"translate(\" + (pos > prePos ? (maxWidthCol[pos] + self.options.space + getXY(preItem).x) : getXY(preItem).x) + \",\" + (pos > prePos ? self.options.margin[0] : getXY(preItem).y + getSize(preItem).height + self.options.space) + \")\";\r\n                    }\r\n                    else\r\n                        return \"translate(\" + self.options.margin[3] + \",\" + self.options.margin[0] + \")\";\r\n                });\r\n            } else if (self.options.position == \"right\") {\r\n                self.item.attr(\"transform\", function(d, i) {\r\n                    var pos = Math.floor(i / numItemsCol);\r\n                    if (i > 0) {\r\n                        var prePos = Math.floor((i - 1) / numItemsCol);\r\n                        var item  = items[i];\r\n                        var preItem  = items[i - 1];\r\n                        return \"translate(\" + (pos > prePos ? (getXY(preItem).x - self.options.space - maxWidthCol[pos]) : getXY(preItem).x) + \",\" + (pos > prePos ? self.options.margin[0] : getXY(preItem).y + getSize(preItem).height + self.options.space) + \")\";\r\n                    }\r\n                    else\r\n                        return \"translate(\" + (self.maxWidth - self.options.margin[3] - maxWidthCol[pos]) + \",\" + self.options.margin[0] + \")\";\r\n                });\r\n            } else {\r\n                self.item.attr(\"transform\", function(d, i) {\r\n                    if (i > 0) {\r\n                        var item  = items[i];\r\n                        var preItem  = items[i - 1];\r\n                        var newR = Math.floor((getXY(preItem).x + getSize(preItem).width + self.options.space + getSize(item).width + self.options.margin[1]) / self.maxWidth);\r\n                        if (newR > 0) r++;\r\n                        return \"translate(\" + (newR > 0 ? self.options.margin[3] : getXY(preItem).x + getSize(preItem).width + self.options.space) + \",\" + (self.options.margin[0] + r * (itemHeight + self.options.space)) + \")\";\r\n                    }\r\n                    else\r\n                        return \"translate(\" + self.options.margin[3] + \",\" + self.options.margin[0] + \")\";\r\n                });\r\n            }\r\n            \r\n            // if (self._legendBox && legendDomain.length > 0) {\r\n            //     var box = legendContainer[0][0].getBBox();\r\n            //     legendBox.attr(\"class\", \".c9-custom-legend.c9-custom-legend-box\")\r\n            //         .attr(\"x\", 0)\r\n            //         .attr(\"y\", 0)\r\n            //         .attr(\"width\", box.width + self._legendMargin[1] + self._legendMargin[3])\r\n            //         .attr(\"height\", box.height + self._legendMargin[2] + self._legendMargin[0])\r\n            //         .style(\"fill\", \"none\")\r\n            //         .style(\"stroke\", color);\r\n            // }\r\n        }\r\n    }\r\n\r\n    draw() {\r\n        var self = this;\r\n\r\n        self.update(self.chart.dataTarget);\r\n    }\r\n\r\n    /**\r\n     * Update interaction event dispatchers for legend\r\n     * For: Donut Chart, Pie Chart\r\n     */\r\n    updateInteractionForLineChart(chart) {\r\n\r\n        var self = this;\r\n\r\n        var hoverOptions        = chart.hover.options,\r\n            hoverEnable         = chart.hover.enable,\r\n            onMouseOverCallback = hoverOptions.onMouseOver.callback,\r\n            onMouseOutCallback  = hoverOptions.onMouseOut.callback,\r\n            onClickCallback     = chart.click.callback;\r\n\r\n        self.itemEventFactory = {\r\n\r\n            'click': function(item) {\r\n                if (Helper.isFunction(onClickCallback)) {\r\n                    onClickCallback.call(this, item);\r\n                }\r\n\r\n                var selector = d3.select(this);\r\n                var enable = true,\r\n                    dataSet = self.data;\r\n                var totalEnable = d3.sum(dataSet.map(function(d) {\r\n                    return (d.enable) ? 1 : 0;\r\n                }));\r\n\r\n                // Add pointer to cursor\r\n                // selector.style('cursor', 'pointer');\r\n\r\n                // If current selector is disabled, then turn it on back\r\n                // Else, set enable to false\r\n                if (selector.attr('data-enable') == 'false') {\r\n                    selector.attr('data-enable', true);\r\n                    selector.style('opacity', '1');\r\n                } else {\r\n                    if (totalEnable < 2) return;\r\n                    selector.attr('data-enable', false);\r\n                    selector.style('opacity', '0.1');\r\n                    enable = false;\r\n                }\r\n\r\n                // update line\r\n                var newData = [];\r\n                chart.dataTarget.forEach(function(_data) {\r\n                    if (_data['data-ref'] == item['data-ref']) _data.enable = enable;\r\n                    if (_data.enable) newData.push(_data);\r\n                });\r\n\r\n                chart.updateDomain(newData);\r\n                chart.axis.update(chart.x, chart.y, 750);\r\n                chart.update(newData);\r\n\r\n                // Update subchart\r\n                if (chart.options.subchart.show) {\r\n                    chart.subChartX.domain(chart.x.domain());\r\n                    chart.subChartY.domain(chart.y.domain());\r\n                    chart.svg.select('.c9-subchart-custom .c9-subchart-axis').transition().duration(750).call(chart.subChartXAxis);\r\n                    chart.updateSubChart(newData);\r\n                }\r\n            },\r\n\r\n            'mouseover': function(item) {\r\n                if (Helper.isFunction(onMouseOverCallback)) {\r\n                    onMouseOverCallback.call(this, item);\r\n                }\r\n\r\n                var legendSelector = d3.select(this);\r\n\r\n                // Add pointer to cursor and make it lighten\r\n                // legendSelector.style('cursor', 'pointer');\r\n                self.lightenLegendItem(legendSelector);\r\n            },\r\n\r\n            'mouseout': function(item) {\r\n                if (Helper.isFunction(onMouseOutCallback)) {\r\n                    onMouseOutCallback.call(this, item);\r\n                }\r\n\r\n                var legendSelector = d3.select(this);\r\n\r\n                // Add pointer to cursor\r\n                // legendSelector.style('cursor', 'pointer');\r\n                self.normalizeLegendItem(legendSelector);\r\n            }\r\n        \r\n        };\r\n\r\n        if (self.options.show) {\r\n            self.item.on(self.itemEventFactory);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Update interaction event dispatchers for legend\r\n     * For: Donut Chart, Pie Chart\r\n     */\r\n    updateInteractionForDonutPieChart(chart, path, pie, currentData, arc) {\r\n\r\n        var self = this;\r\n\r\n        var hoverOptions        = chart.hover.options,\r\n            hoverEnable         = chart.hover.enable,\r\n            onMouseOverCallback = hoverOptions.onMouseOver.callback,\r\n            onMouseOutCallback  = hoverOptions.onMouseOut.callback,\r\n            onClickCallback     = chart.click.callback;\r\n\r\n        var chartType = chart.chartType;\r\n\r\n        var chartInnerBefore    = chartType == 'pie' ?  0 : chart.options.innerRadius,\r\n            chartOuterBefore    = chartType == 'pie' ?  chart.options.radius : chart.options.outerRadius,\r\n            chartInnerAfter     = chartType == 'pie' ?  0 : chart.options.innerRadius,\r\n            chartOuterAfter     = chartType == 'pie' ?  chart.options.radius * 1.2 : chart.options.outerRadius * 1.2;\r\n\r\n        self.itemEventFactory = {\r\n\r\n            'click': function(item) {\r\n                if (Helper.isFunction(onClickCallback)) {\r\n                    onClickCallback.call(this, item);\r\n                }\r\n\r\n                var selector = d3.select(this);\r\n                var enable = true,\r\n                    dataSet = self.data;\r\n                var totalEnable = d3.sum(dataSet.map(function(d) {\r\n                    return (d.enable) ? 1 : 0;\r\n                }));\r\n\r\n                // Add pointer to cursor\r\n                // selector.style('cursor', 'pointer');\r\n\r\n                // If current selector is disabled, then turn it on back\r\n                // Else, set enable to false\r\n                if (selector.attr('data-enable') == 'false') {\r\n                    selector.attr('data-enable', true);\r\n                    selector.attr('opacity', '1.0');\r\n                } else {\r\n                    if (totalEnable < 2) return;\r\n                    selector.attr('data-enable', false);\r\n                    selector.attr('opacity', '0.1');\r\n                    enable = false;\r\n                }\r\n\r\n                /*----------  Reset opacity after click  ----------*/\r\n                \r\n                self.item.each(function() {\r\n                    if (d3.select(this).attr('data-ref') !== item['data-ref'] && d3.select(this).attr('data-enable') == 'true') {\r\n                        d3.select(this).attr('opacity', '1.0');\r\n                    }\r\n                });\r\n\r\n                chart.selectAllPath().each(function(){\r\n                    if (d3.select(this).attr('data-ref') !== item['data-ref']) {\r\n                        d3.select(this).attr('opacity', '1.0');\r\n                    }\r\n                });\r\n                /*----------  End Reset opacity after click  ----------*/\r\n                \r\n\r\n                chart.pie.value(function(d) {\r\n                    if (d[\"data-ref\"] == item[\"data-ref\"]) d.enable = enable;\r\n                    return (d.enable) ? d.value : 0;\r\n                });\r\n\r\n                path = path.data(chart.pie(dataSet));\r\n\r\n                path.transition()\r\n                    .duration(500)\r\n                    .attrTween('d', function(d) {\r\n                        var interpolate = d3.interpolate(chart.currentData, d);\r\n                        // Returns an interpolator between the two arbitrary values a and b. \r\n                        // The interpolator implementation is based on the type of the end value b.\r\n                        chart.currentData = interpolate(0);\r\n                        return function(t) {\r\n                            return arc(interpolate(t));\r\n                        };\r\n                    })\r\n                    // Remove stroke when re-draw arcs to avoid duplicate strokes\r\n                    .attr('stroke', 'none');;\r\n                \r\n            },\r\n\r\n            'mouseover': function(item) {\r\n                if (Helper.isFunction(onMouseOverCallback)) {\r\n                    onMouseOverCallback.call(this, item);\r\n                }\r\n\r\n                var legendSelector = d3.select(this);\r\n                // Add pointer to cursor\r\n                // legendSelector.style('cursor', 'pointer');\r\n                self.lightenLegendItem(legendSelector);\r\n\r\n                if (legendSelector.attr('data-enable')) {\r\n                    // For Legend\r\n                    self.item.each(function() {\r\n                        if (d3.select(this).attr('data-ref') !== item['data-ref'] && d3.select(this).attr('data-enable')) {\r\n                            d3.select(this).attr('opacity', '0.3');\r\n                        }\r\n                    });\r\n\r\n                    // For Chart\r\n                    chart.selectAllPath().each(function(){\r\n                        if (d3.select(this).attr('data-ref') !== item['data-ref']) {\r\n                            d3.select(this).attr('opacity', '0.3');\r\n                        }\r\n                    });\r\n\r\n                    var selector = d3.select(\"path[data-ref='\" + item['data-ref'] + \"']\");\r\n\r\n                    selector\r\n                        .transition()\r\n                            .duration(500)\r\n                            .ease('bounce')\r\n                            .attr('d', d3.svg.arc()\r\n                                .innerRadius(chartInnerAfter)\r\n                                .outerRadius(chartOuterAfter)\r\n                            );\r\n                }\r\n\r\n                \r\n\r\n            },\r\n\r\n            'mouseout': function(item) {\r\n                if (Helper.isFunction(onMouseOutCallback)) {\r\n                    onMouseOutCallback.call(this, item);\r\n                }\r\n\r\n                var legendSelector = d3.select(this);\r\n                // Add pointer to cursor\r\n                // legendSelector.style('cursor', 'pointer');\r\n                self.normalizeLegendItem(legendSelector);\r\n\r\n                // if (legendSelector.attr('data-enable') == 'true') {\r\n                    // For Legend\r\n                    self.item.each(function() {\r\n                        if (d3.select(this).attr('data-ref') !== item['data-ref'] && d3.select(this).attr('data-enable')) {\r\n                            d3.select(this).attr('opacity', '1.0');\r\n                        }\r\n                    });\r\n\r\n                    // For Chart\r\n                    chart.selectAllPath().each(function(){\r\n                        if (d3.select(this).attr('data-ref') !== item['data-ref']) {\r\n                            d3.select(this).attr('opacity', '1.0');\r\n                        }\r\n                    });\r\n\r\n                    var selector = d3.select(\"path[data-ref='\" + item['data-ref'] + \"']\");\r\n\r\n                    selector\r\n                        .transition()\r\n                            .duration(500)\r\n                            .ease('bounce')\r\n                            .attr('d', d3.svg.arc()\r\n                                .innerRadius(chartInnerBefore)\r\n                                .outerRadius(chartOuterBefore)\r\n                            );\r\n                // }\r\n\r\n            }\r\n        \r\n        };\r\n\r\n        if (self.options.show)\r\n            self.item.on(self.itemEventFactory);\r\n    }\r\n\r\n    /**\r\n     * Update interaction for barchart\r\n     * @param  {[type]} chart       [description]\r\n     * @return {[type]}             [description]\r\n     */\r\n    updateInteractionForBarChart(chart) {\r\n\r\n        var self = this;\r\n\r\n        var hoverOptions        = chart.hover.options,\r\n            hoverEnable         = chart.hover.enable,\r\n            onMouseOverCallback = hoverOptions.onMouseOver.callback,\r\n            onMouseOutCallback  = hoverOptions.onMouseOut.callback,\r\n            onClickCallback     = chart.click.callback;\r\n\r\n        self.itemEventFactory = {\r\n\r\n            'click': function(item) {\r\n                if (Helper.isFunction(onClickCallback)) {\r\n                    onClickCallback.call(this, item);\r\n                }\r\n\r\n                var selector = d3.select(this);\r\n                var enable = true,\r\n                    dataBackup = chart.dataTarget,\r\n                    dataSet = self.data;\r\n                var totalEnable = d3.sum(dataSet.map(function(d) {\r\n                    return (d.enable) ? 1 : 0;\r\n                }));\r\n\r\n                var enableSet = [];\r\n                var enableSetOld = [];\r\n                var data = [];\r\n                // Add pointer to cursor\r\n                // selector.style('cursor', 'pointer');\r\n\r\n                // If current selector is disabled, then turn it on back\r\n                // Else, set enable to false\r\n                if (selector.attr('data-enable') == 'false') {\r\n                    selector.attr('data-enable', 'true');\r\n                    selector.style('opacity', '1.0');\r\n                } else {\r\n                    if (totalEnable < 2) return;\r\n                    selector.attr('data-enable', 'false');\r\n                    selector.style('opacity', '0.1');\r\n                    enable = false;\r\n                }\r\n\r\n                //set current data for legend\r\n                self.data.forEach(function(d, i) {\r\n                    if (d.enable)\r\n                        enableSetOld.push(d.group);\r\n                    if (d.group == item.group)\r\n                        d.enable = enable;\r\n                    if (d.enable)\r\n                        enableSet.push(d.group);\r\n                });\r\n\r\n                dataBackup.forEach(function (d){\r\n                    var negElement = [];\r\n                    var posElement = [];\r\n                    d.forEach(function (s){\r\n                        enableSet.forEach(function (e, i) {\r\n                            if (e == s.group) {\r\n                                if (s.y0 < 0) negElement.push({e: s, s: i});\r\n                                else posElement.push({e: s, s: i})\r\n                            }\r\n                        });\r\n                    });\r\n                    if (!chart.isGroup) {\r\n                        if (negElement.length > 0) {\r\n                            if (negElement[0].e.y1 < 0) negElement[0].e.y1 = 0;\r\n                            for (var i = 1; i < negElement.length; i++) {\r\n                                negElement[i].e.y1 = negElement[i-1].e.y1 + negElement[i-1].e.y0;\r\n                            };\r\n                        }\r\n                        if (posElement.length > 0) {\r\n                            if (posElement[0].e.y1 - posElement[0].e.y0 != 0) posElement[0].e.y1 = posElement[0].e.y0;\r\n                            for (var i = 1; i < posElement.length; i++) {\r\n                                posElement[i].e.y1 = posElement[i-1].e.y1 + posElement[i].e.y0;\r\n                            };\r\n                        }\r\n                    }\r\n                    var element = new Array(negElement.length + posElement.length);\r\n                    for (var i = 0; i < negElement.length; i++) {\r\n                        element[negElement[i].s] = negElement[i].e;\r\n                    };\r\n                    for (var i = 0; i < posElement.length; i++) {\r\n                        element[posElement[i].s] = posElement[i].e;\r\n                    };\r\n                    data.push(element);\r\n                });\r\n\r\n                chart.updateLegendInteraction(data, enableSet, enableSetOld, item.group);\r\n                \r\n            },\r\n\r\n            'mouseover': function(item) {\r\n                var selector = d3.select(this);\r\n                // selector.style('cursor', 'pointer');\r\n                self.lightenLegendItem(selector);\r\n\r\n                if (selector.attr('data-enable') == 'true')\r\n                    d3.selectAll('.c9-custom-bar>.c9-custom-rect')\r\n                        .filter(function (d){ return d['group-ref'] != item['group-ref']; })\r\n                        .attr('opacity', 0.3);\r\n            },\r\n\r\n            'mouseout': function(item) {\r\n                var selector = d3.select(this);\r\n                // selector.style('cursor', 'pointer');\r\n                self.normalizeLegendItem(selector);\r\n\r\n                d3.selectAll('.c9-custom-bar>.c9-custom-rect')\r\n                    .filter(function (d){ return d['group-ref'] != item['group-ref']; })\r\n                    .attr('opacity', 1);\r\n            }\r\n        \r\n        };\r\n        if (self.options.show)\r\n            self.item.on(self.itemEventFactory);\r\n    }\r\n\r\n    lightenLegendItem(item) {\r\n        var self = this;\r\n\r\n        item.select('.c9-custom-legend-rect').attr('fill', function(d){ return Helper.shadeColor(0.5, d.color || d[0].color); });\r\n        item.select('.c9-custom-legend-text').style('fill', function(d){ return Helper.shadeColor(-0.5, self.options.fontColor); });\r\n    }\r\n\r\n    normalizeLegendItem(item) {\r\n        var self = this;\r\n\r\n        item.select('.c9-custom-legend-rect').attr('fill', function(d){ return d.color || d[0].color; });\r\n        item.select('.c9-custom-legend-text').style('fill', function(d){ return self.options.fontColor; });\r\n    }\r\n    /*=====  End of Main Functions  ======*/\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/utils/C9.Legend.js\n **/","import Helper from '../../helper/C9.Helper';\r\n\r\nexport default class Table {\r\n    constructor(options, chart) {\r\n        var self = this;\r\n\r\n        var config = {\r\n            container: \"body\",\r\n            show: false,\r\n            headings: [\"Name\", \"Value\"],\r\n            style: \"default\", // || \"stripe\"\r\n            serial: true,\r\n            hover: {\r\n                enable: true,\r\n                callback: null\r\n            },\r\n            click: {\r\n                enable: true,\r\n                callback: null\r\n            }\r\n        };\r\n\r\n\r\n        self._options   = options;\r\n        self._chart     = chart;\r\n\r\n        self.updateConfig(config);\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    get data() {\r\n        return this._data;\r\n    }\r\n\r\n    get chart() {\r\n        return this._chart;\r\n    }\r\n\r\n    get options() {\r\n        return this._options;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    set data(arg) {\r\n        if (arg) {\r\n            this._data = arg;\r\n        }\r\n    }\r\n\r\n    set chart(arg) {\r\n        if (arg) {\r\n            this._chart = arg;\r\n        }\r\n    }\r\n\r\n    set options(arg) {\r\n        if (arg) {\r\n            this._options = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n\r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    updateConfig(config) {\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n    }\r\n\r\n    update(data) {\r\n        var self = this;\r\n\r\n        if (self.chart.chartType == \"bar\" || self.chart.chartType == \"line\") {\r\n            //headings\r\n            if (self.options.headings.length < 3 && !data[0].value && data[0][0][\"group-ref\"] != undefined) \r\n                self.options.headings.push(\"Group\");\r\n\r\n            //data\r\n            self.data = [];\r\n            data.forEach(function(d) {\r\n                (Helper.isArray(d) ? d : d.value).forEach(function(b) {\r\n                    self.data.push(b);\r\n                })\r\n            });\r\n        } else {\r\n            self.data = data;\r\n        }\r\n\r\n        if (self.options.show) {\r\n            d3.selectAll('.c9-table').remove();\r\n            d3.selectAll('.c9-table-container').remove();\r\n\r\n            var headTbl = d3.select(self.options.container !== 'body' ? '#' + self.options.container : 'body')\r\n                            .append(\"table\")\r\n                                .attr('class', 'c9-table c9-table-header'),\r\n                thead = headTbl.append(\"thead\"),\r\n                bodyTbl = d3.select(self.options.container !== 'body' ? '#' + self.options.container : 'body')\r\n                                .append(\"div\")\r\n                                .attr('class', 'c9-table-container')\r\n                                    .append(\"table\")\r\n                                    .attr('class', function() {\r\n                                        return self.getTableStyle();\r\n                                    }),\r\n                tbody = bodyTbl.append(\"tbody\");\r\n\r\n            // Append serial no heading\r\n            // Bind each statistic to a line of the table\r\n            // Show serial no.\r\n            var hRows = thead.append(\"tr\");\r\n\r\n            if (self.options.serial) {\r\n                hRows.append(\"th\")\r\n                    .text(\"#\");\r\n            }\r\n\r\n            hRows.selectAll(\"thead\")\r\n                .data(self.options.headings)\r\n                .enter()\r\n                .append(\"th\")\r\n                    .text(function(d) {\r\n                        return d;\r\n                    });\r\n\r\n            // Bind each statistic to a line of the table\r\n            // Show serial no.\r\n            var bRows = tbody\r\n                .selectAll(\"tr\")\r\n                .data(self.data)\r\n                    .enter()\r\n                        .append(\"tr\")\r\n                        .attr(\"data-ref\", function (d){ return d[\"data-ref\"] });\r\n\r\n            if (self.options.serial) {\r\n                bRows.append(\"td\")\r\n                    .text(function(d, i) {\r\n                        return i + 1;\r\n                    });\r\n            }\r\n\r\n            // Add statistic names to each row\r\n            bRows.append(\"td\")\r\n                    .text(function(d) {\r\n                        return d.name;\r\n                    });\r\n\r\n            // Add values to each row\r\n            bRows.append(\"td\")\r\n                    .text(function(d) {\r\n                        return d.value || d.y0 || d.valueY;\r\n                    });\r\n\r\n            // Add group if chart is bar chart\r\n            if (self.chart.chartType == \"bar\" && self.options.headings.length < 3 && !data[0].value && data[0][0][\"group-ref\"] != undefined)\r\n                bRows.append(\"td\")\r\n                        .text(function(d) {\r\n                            return d.group;\r\n                        });\r\n        }\r\n    }\r\n\r\n    draw() {\r\n        var self = this;\r\n\r\n        self.update(self.chart.dataTarget);\r\n    }\r\n\r\n    updateInteractionForBarChart(chart) {\r\n\r\n        var self = this;\r\n\r\n        var hoverOptions        = chart.hover.options,\r\n            hoverEnable         = chart.hover.enable,\r\n            onMouseOverCallback = hoverOptions.callback,\r\n            onMouseOutCallback  = hoverOptions.onMouseOut.callback,\r\n            onClickCallback     = chart.click.callback;\r\n\r\n        self.itemEventFactory = {\r\n\r\n            'click': function(item) {\r\n                if (Helper.isFunction(onClickCallback)) {\r\n                    onClickCallback.call(this, item);\r\n                }\r\n                \r\n            },\r\n\r\n            'mouseover': function(item) {\r\n                if (!item) return;\r\n\r\n                var selector = d3.select(this);\r\n                selector.style('cursor', 'pointer');\r\n                // if (selector.attr('data-enable') == 'true')\r\n                    d3.selectAll('.c9-custom-bar>.c9-custom-rect')\r\n                        .filter(function (d){ return d['data-ref'] != item['data-ref']; })\r\n                        .attr('opacity', 0.3);\r\n            },\r\n\r\n            'mouseout': function(item) {\r\n                if (!item) return;\r\n                d3.select(this).style('cursor', 'pointer');\r\n                d3.selectAll('.c9-custom-bar>.c9-custom-rect')\r\n                    .filter(function (d){ return d['data-ref'] != item['data-ref']; })\r\n                    .attr('opacity', 1);\r\n            }\r\n        \r\n        };\r\n        if (self.options.show)\r\n            self.selectAllRow().on(self.itemEventFactory);\r\n    }\r\n\r\n    updateInteractionForDonutPieChart(chart) {\r\n\r\n        var self = this;\r\n\r\n        var hoverOptions        = chart.hover.options,\r\n            hoverEnable         = chart.hover.enable,\r\n            onMouseOverCallback = hoverOptions.callback,\r\n            onMouseOutCallback  = hoverOptions.onMouseOut.callback,\r\n            onClickCallback     = chart.click.callback;\r\n\r\n        var chartType = chart.chartType;\r\n\r\n        var chartInnerBefore    = chartType == 'pie' ?  0 : chart.options.innerRadius,\r\n            chartOuterBefore    = chartType == 'pie' ?  chart.options.radius : chart.options.outerRadius,\r\n            chartInnerAfter     = chartType == 'pie' ?  0 : chart.options.innerRadius,\r\n            chartOuterAfter     = chartType == 'pie' ?  chart.options.radius * 1.2 : chart.options.outerRadius * 1.2;\r\n        self.itemEventFactory = {\r\n\r\n            'click': function(item) {\r\n                if (Helper.isFunction(onClickCallback)) {\r\n                    onClickCallback.call(this, item);\r\n                }\r\n\r\n            },\r\n\r\n            'mouseover': function(item) {\r\n                if (!item)\r\n                    return;\r\n\r\n                if (Helper.isFunction(onMouseOverCallback)) {\r\n                    onMouseOverCallback.call(this, item);\r\n                }\r\n\r\n                var legendSelector = d3.select(this);\r\n                // Add pointer to cursor\r\n                legendSelector.style('cursor', 'pointer');\r\n                // if (legendSelector.attr('enable') == 'true') {\r\n\r\n                    // For Chart\r\n                    chart.selectAllPath().each(function(){\r\n                        if (d3.select(this).attr('data-ref') !== item['data-ref']) {\r\n                            d3.select(this).attr('opacity', '0.3');\r\n                        }\r\n                    });\r\n\r\n                    var selector = d3.select(\"path[data-ref='\" + item['data-ref'] + \"']\");\r\n\r\n                    selector\r\n                        .transition()\r\n                            .duration(500)\r\n                            .ease('bounce')\r\n                            .attr('d', d3.svg.arc()\r\n                                .innerRadius(chartInnerAfter)\r\n                                .outerRadius(chartOuterAfter)\r\n                            );\r\n                // }\r\n\r\n            },\r\n\r\n            'mouseout': function(item) {\r\n                if (!item)\r\n                    return;\r\n                \r\n                if (Helper.isFunction(onMouseOutCallback)) {\r\n                    onMouseOutCallback.call(this, item);\r\n                }\r\n\r\n                var legendSelector = d3.select(this);\r\n                // Add pointer to cursor\r\n                legendSelector.style('cursor', 'pointer');\r\n\r\n                chart.selectAllPath().each(function(){\r\n                    if (d3.select(this).attr('data-ref') !== item['data-ref']) {\r\n                        d3.select(this).attr('opacity', '1.0');\r\n                    }\r\n                });\r\n\r\n                var selector = d3.select(\"path[data-ref='\" + item['data-ref'] + \"']\");\r\n\r\n                selector\r\n                    .transition()\r\n                        .duration(500)\r\n                        .ease('bounce')\r\n                        .attr('d', d3.svg.arc()\r\n                            .innerRadius(chartInnerBefore)\r\n                            .outerRadius(chartOuterBefore)\r\n                        );\r\n            }\r\n        \r\n        };\r\n\r\n        if (self.options.show)\r\n            self.selectAllRow().on(self.itemEventFactory);\r\n    }\r\n\r\n    selectAllRow(){\r\n        return d3.selectAll(\".c9-table tr\");\r\n    }\r\n\r\n    getTableStyle() {\r\n        var self = this;\r\n\r\n        if (self.options.style === 'default') {\r\n            return 'c9-table c9-table-body';\r\n        } else if (self.options.style === 'stripe') {\r\n            return 'c9-table c9-table-body c9-stripe';\r\n        }\r\n    }\r\n    /*=====  End of Main Functions  ======*/\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/utils/C9.Table.js\n **/","import Helper from '../../helper/C9.Helper';\r\n\r\nexport default class Tooltip {\r\n    constructor(options) {\r\n        var self = this;\r\n\r\n        var config = {\r\n            show: true,\r\n            position: 'left', // [top, right, bottom, left]\r\n            backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n            fontColor: '#fff',\r\n            fontSize: '11px',\r\n            format: null\r\n        };\r\n\r\n        self._options           = options;\r\n\r\n        self.updateConfig(config);\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    get format() {\r\n        return this._format;\r\n    }\r\n\r\n    get eventFactory() {\r\n        return this._eventFactory;\r\n    }\r\n\r\n    get options() {\r\n        return this._options;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    set format(arg) {\r\n        if (arg) {\r\n            this._format = arg;\r\n        }\r\n    }\r\n\r\n    set eventFactory(arg) {\r\n        if (arg) {\r\n            this._eventFactory = arg;\r\n        }\r\n    }\r\n\r\n    set options(arg) {\r\n        if (arg) {\r\n            this._options = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n\r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    updateConfig(config) {\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n    }\r\n\r\n    /**\r\n     * Draw Tooltip\r\n     */\r\n    draw(data, chart, eventType) {\r\n        var self = this;\r\n\r\n        var format = self.format;\r\n\r\n        // First of all, remove all exisiting tooltips\r\n        d3.select(chart.id).selectAll('.c9-custom-tooltip-container').remove();\r\n\r\n        var selector = d3.select(chart.id);\r\n\r\n        // TODO: Add margin to tooltip configs\r\n        // Default: (100, 100) relative to mouse coordinate and chart margin transformation\r\n        var divOnHover = selector.append('div')\r\n                            .attr('class', function() { \r\n                                return 'c9-custom-tooltip-container ' + self.getTriangleClass(); \r\n                            })\r\n                            // .attr(\"transform\", function() { return 'translate(' + (d3.mouse(this)[0] - 100) +\",\"+ (d3.mouse(this)[1] - 100) + ')'; })\r\n                            .style('display', 'none')\r\n                            .style('position', 'absolute')\r\n                            .style('pointer-events', 'all')\r\n                            .style('background-color', self.options.backgroundColor)\r\n                            .style('color', self.options.fontColor)\r\n                            .style('font-size', self.options.fontSize);\r\n                            // .style('width', '100px')\r\n                            // .style('height', '50px')\r\n                            // .html(function() {\r\n                            //     return self.getFormatByChartType(chart, data);\r\n                            // });\r\n\r\n        self.eventFactory = {\r\n\r\n            'mouseover': function(_data) {\r\n                divOnHover\r\n                    .html(function() {\r\n                        return self.getFormatByChartType(chart, _data);\r\n                    })\r\n                    .transition()\r\n                    // .style('left', function() {return d3.mouse(this)[0] + 'px';})\r\n                    .style('left', function() {\r\n                        return self.getCoordinate(chart)['left'];\r\n                    })\r\n                    // .style('top', function() {return d3.mouse(this)[1]  + 'px';})\r\n                    .style('top', function() {\r\n                        return self.getCoordinate(chart)['top'];\r\n                    })\r\n                    .duration(200)\r\n                    .style(\"display\", 'block')\r\n                    .style('pointer-events', 'none');\r\n            },\r\n\r\n            'mousemove': function(_data) {\r\n                divOnHover\r\n                    .html(function() {\r\n                        return self.getFormatByChartType(chart, _data);\r\n                    })\r\n                    .transition()\r\n                    // .style('left', function() {return d3.mouse(this)[0] + 'px';})\r\n                    .style('left', function() {\r\n                        return self.getCoordinate(chart)['left'];\r\n                    })\r\n                    // .style('top', function() {return d3.mouse(this)[1]  + 'px';})\r\n                    .style('top', function() {\r\n                        return self.getCoordinate(chart)['top'];\r\n                    })\r\n                    .duration(200)\r\n                    .style(\"display\", 'block')\r\n                    .style('pointer-events', 'none');\r\n            },\r\n\r\n            'mouseout': function(_data) {\r\n                divOnHover\r\n                    .transition()\r\n                    .duration(200)      \r\n                    .style('display', 'none');\r\n\r\n            }\r\n\r\n        };\r\n\r\n        if (self.options.show) {\r\n\r\n            switch(eventType) {\r\n                case 'mouseover':\r\n                    self.eventFactory.mouseover(data);\r\n                    break;\r\n                case 'mouseout':\r\n                    self.eventFactory.mouseout(data);\r\n                    break;\r\n                case 'mousemove':\r\n                    self.eventFactory.mousemove(data);\r\n                    break;\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    getTriangleClass() {\r\n        var self = this;\r\n        let r ;\r\n\r\n        switch(self.options.position) {\r\n            case 'top':\r\n                r = 'c9-tooltip-top';\r\n                break;\r\n            case 'right':\r\n                r = 'c9-tooltip-right';\r\n                break;\r\n            case 'bottom':\r\n                r = 'c9-tooltip-bottom';\r\n                break;\r\n            case 'left':\r\n                r = 'c9-tooltip-left';\r\n                break;\r\n        }\r\n        return r;\r\n    }\r\n\r\n    setDefaultFormatByChartType(chart, data) {\r\n        // if (Helper.isEmpty(data)) { console.log(data);return false;}\r\n        var self = this;\r\n\r\n        let chartType = chart.chartType, format;\r\n\r\n        switch(chartType) {\r\n            case 'bar':\r\n                format = function(data) {\r\n                    return '<strong>' + data.name + '</strong>' + '<br><span>' + data.value + '</span>'\r\n                };\r\n                break;\r\n            case 'pie':\r\n                format = function(data) {\r\n                    return '<strong>' + data.data.name + '</strong>' + '<br><span>' + data.data.value + '</span>' \r\n                };\r\n                break;\r\n            case 'donut':\r\n                format = function(data) {\r\n                    return '<strong>' + data.data.name + '</strong>' + '<br><span>' + data.data.value + '</span>' \r\n                };\r\n                break;\r\n            case 'line':\r\n                format = function(data) {\r\n                    let _format = '';\r\n                    data.forEach(function(d, i){\r\n                        _format += '<strong>' + d.name + '</strong>' + '<br><span> Value X: ' + d.valueX + '</span>' + '<br><span> Value Y: ' + d.valueY + '</span><br>';    \r\n                    });\r\n                    return _format;\r\n                };\r\n                break;\r\n            case 'timeline':\r\n                format = function(data) {\r\n                    return '<strong>' + data.name + '</strong>' + '<br><span> Start at: ' + data.start + '</span><br><span> End at: ' + data.end + '</span>' \r\n                };\r\n                break;\r\n        }\r\n\r\n        // Update format for tooltip based on chart type\r\n        self.format     = self.options.format || format;\r\n        // console.log(self.format);\r\n    }\r\n\r\n    getCoordinate(chart) {\r\n        var self = this;\r\n        let r ;\r\n\r\n        var offset = self.getOffset(d3.select(chart.id)[0][0]);\r\n\r\n        switch(self.options.position) {\r\n            case 'top':\r\n                r = {\r\n                    'left': (d3.event.pageX - offset.left - 50) + 'px',\r\n                    'top': (d3.event.pageY - offset.top - 50) + 'px'\r\n                };\r\n                break;\r\n            case 'right':\r\n                r = {\r\n                    'left': (d3.event.pageX - offset.left - 50) + 'px',\r\n                    'top': (d3.event.pageY - offset.top - 50) + 'px'\r\n                };\r\n                break;\r\n            case 'bottom':\r\n                r = {\r\n                    'left': (d3.event.pageX - offset.left - 50) + 'px',\r\n                    'top': (d3.event.pageY - offset.top + 50) + 'px'\r\n                };\r\n                break;\r\n            case 'left':\r\n                r = {\r\n                    'left': (d3.event.pageX - offset.left + 50) + 'px',\r\n                    'top': (d3.event.pageY - offset.top - 50) + 'px'\r\n                };\r\n                break;\r\n        }\r\n        return r;\r\n    }\r\n\r\n    getOffset(elem) {\r\n        var box = { top: 0, left: 0 };\r\n\r\n        // BlackBerry 5, iOS 3 (original iPhone)\r\n        if ( typeof elem.getBoundingClientRect !== undefined ) {\r\n          box = elem.getBoundingClientRect();\r\n        }\r\n\r\n        return {\r\n          top: box.top  + ( window.pageYOffset || elem.scrollTop )  - ( elem.clientTop  || 0 ),\r\n          left: box.left + ( window.pageXOffset || elem.scrollLeft ) - ( elem.clientLeft || 0 )\r\n        };\r\n    }\r\n\r\n    getFormatByChartType(chart, data) {\r\n        var self = this;\r\n\r\n        self.setDefaultFormatByChartType(chart, data);\r\n\r\n        let r = self.format(data);\r\n\r\n        return r;\r\n    }\r\n    /*=====  End of Main Functions  ======*/\r\n\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/utils/C9.Tooltip.js\n **/","import Helper from './C9.Helper';\r\n\r\nexport default class DataAdapter {\r\n\r\n    constructor(options) {\r\n\r\n        var self = this;\r\n\r\n        var config = {\r\n            // ALL OPTIONS AVAILABLE IN DATA CONFIG\r\n            keys: {\r\n                name: \"name\",\r\n                value: \"value\",\r\n                x: \"value.x\",\r\n                y: \"value\",\r\n                coor: \"coor\"\r\n            },\r\n            groups: [],\r\n            stacks: [],\r\n            timeFormat: false,\r\n\r\n            // NO NEED TO ADD TO DATA OPTIONS\r\n            // Just use to define default parameters\r\n            colorRange: null,\r\n        };\r\n\r\n        self._keys      = Helper.merge(options.keys, config.keys);\r\n        self._groups    = options.groups    || config.groups;\r\n        self._stacks    = options.stacks    || config.stacks;\r\n        self._timeFormat    = options.timeFormat    || config.timeFormat;\r\n        self._colorRange= options.colorRange|| config.colorRange;\r\n\r\n        self._dataSource = null;\r\n        self._dataTarget = []; // Initialize new Array to use Array methods\r\n        self._dataRefs = [];\r\n        self.initDataSource(options);\r\n\r\n\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    get keys() {\r\n        return this._keys;\r\n    }\r\n\r\n    get dataSource() {\r\n        return this._dataSource;\r\n    }\r\n\r\n    get dataTarget() {\r\n        return this._dataTarget;\r\n    }\r\n\r\n    get groups() {\r\n        return this._groups;\r\n    }\r\n\r\n    get stacks() {\r\n        return this._stacks;\r\n    }\r\n\r\n    get colorRange() {\r\n        return this._colorRange;\r\n    }\r\n\r\n    get timeFormat() {\r\n        return this._timeFormat;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    set keys(arg) {\r\n        if (arg) {\r\n            this._keys = arg;\r\n        }\r\n    }\r\n\r\n    set dataSource(arg) {\r\n        if (arg) {\r\n            this._dataSource = arg;\r\n        }\r\n    }\r\n\r\n    set dataTarget(arg) {\r\n        if (arg) {\r\n            this._dataTarget = arg;\r\n        }\r\n    }\r\n\r\n    set groups(arg) {\r\n        if (arg) {\r\n            this._groups = arg;\r\n        }\r\n    }\r\n\r\n    set stacks(arg) {\r\n        if (arg) {\r\n            this._stacks = arg;\r\n        }\r\n    }\r\n\r\n    set colorRange(arg) {\r\n        if (arg) {\r\n            this._colorRange = arg;\r\n        }\r\n    }\r\n\r\n    set timeFormat(arg) {\r\n        if (arg) {\r\n            this._timeFormat = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n\r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    initDataSource(options) {\r\n        var self = this;\r\n\r\n        if (self.hasPlainData(options)) {\r\n            self.executePlainData(options);\r\n        } else if (self.hasFile(options)) {\r\n            self.executeFile(options);\r\n        }\r\n    }\r\n\r\n    hasPlainData(options) {\r\n        // return options.plain && Helper.isArray(options.plain);\r\n        return options.plain; // fix for map\r\n    }\r\n\r\n    hasFile(options) {\r\n        return options.file && Helper.isObject(options.file);\r\n    }\r\n\r\n    executePlainData(options) {\r\n        var self = this;\r\n\r\n        self._dataSource = options.plain;\r\n    }\r\n\r\n    executeFile(options) {\r\n        var self = this;\r\n\r\n        self._file  = Helper.merge(options.file, config.file);\r\n\r\n        if (self._file && self._file.type) {\r\n\r\n            switch(self._file.type) {\r\n                case \"csv\":\r\n                    self._dataSource = self.getCsv();\r\n                    break;\r\n                case \"tsv\":\r\n                    self._dataSource = self.getTsv();\r\n                    break;\r\n                case \"text\":\r\n                    self._dataSource = self.getText();\r\n                    break;\r\n                case \"json\":\r\n                    self._dataSource = self.getJson();\r\n                    break;\r\n                case \"xml\":\r\n                    self._dataSource = self.getXml();\r\n                    break;\r\n                case \"xhr\":\r\n                    self._dataSource = self.getJson();\r\n                    break;\r\n                default:\r\n                    self._dataSource = self.getJson();\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    getDataTypeForBarChart() {\r\n        var self = this;\r\n\r\n        if (!Helper.isEmpty(self.groups) && Helper.isArray(self.groups) && self.groups.length !== 1) {\r\n            return \"group\";\r\n        } else if (!Helper.isEmpty(self.stacks) && Helper.isArray(self.stacks)) {\r\n            return \"stack\";\r\n        }\r\n        // default grouped bar if user do not defined groups for array value\r\n        for (var i = self.dataSource.length - 1; i >= 0; i--) {\r\n            if (Helper.isArray(Helper.get(self.keys.value, self.dataSource[i])))\r\n                return \"group\";\r\n        }\r\n\r\n        return \"single\";\r\n    }\r\n\r\n    getDataTarget(type) {\r\n        var self = this;\r\n\r\n        switch(type) {\r\n            case \"bar\":\r\n                return self.getDataTargetForBarChart();\r\n                break;\r\n\r\n            case \"line\":\r\n                return self.getDataTargetForLineChart();\r\n                break;\r\n\r\n            case \"pie\":\r\n                return self.getDataTargetForPieChart();\r\n                break;\r\n\r\n            case \"donut\":\r\n                return self.getDataTargetForDonutChart();\r\n                break;\r\n\r\n            case \"timeline\":\r\n                return self.getDataTargetForTimelineChart();\r\n                break;\r\n\r\n            case \"map\":\r\n                return self.getDataTargetForMap();\r\n                break;\r\n\r\n            default:\r\n                return self.dataSource;\r\n                break;\r\n        }\r\n    }\r\n\r\n    getName(v) {\r\n        return v.name; \r\n    }\r\n\r\n    getValue(v) {\r\n        var self = this;\r\n\r\n        return Helper.get(self.keys, v);\r\n    }\r\n\r\n    /*=====  End of Main Functions  ======*/\r\n\r\n    /*=================================================\r\n    =            Normalize Data For Charts            =\r\n    =================================================*/\r\n    getDataTargetForBarChart() {\r\n        var self = this;\r\n\r\n        switch(self.getDataTypeForBarChart()) {\r\n            case \"single\":\r\n                let color = self.colorRange;\r\n                let groups = self.groups;\r\n\r\n                self.dataSource.forEach(function(data, index) {\r\n                    let _data = [{\r\n                        \"name\" : Helper.get(self.keys.name, data),\r\n                        \"value\": Helper.get(self.keys.value, data),\r\n                        \"y0\" : Helper.get(self.keys.value, data),\r\n                        \"y1\" : Helper.get(self.keys.value, data),\r\n                        \"group\": groups[0] || 'data' + (1),\r\n                        \"data-ref\": Helper.guid(),\r\n                        \"enable\" : true,\r\n                        \"color\": color(0),\r\n                    }];\r\n                    self.dataTarget.push(_data);\r\n                });\r\n\r\n                return self.dataTarget;\r\n                break;\r\n\r\n            case \"group\":\r\n                var groups = self.groups;\r\n                var groupRefs = [];\r\n                // Iterate over each group\r\n                self.dataSource.forEach(function(data, index) {\r\n                    let _dsArray    = Helper.get(self.keys.value, data);\r\n\r\n                    let _stack      = [],\r\n                        _stackItem = {\r\n                            \"color\": \"#ffffff\",\r\n                            \"y0\": 0,\r\n                            \"y1\": 1,\r\n                            \"group\": \"\",\r\n                            \"name\": \"\",\r\n                            \"data-ref\": \"\",\r\n                            \"group-ref\": \"\",\r\n                            \"enable\"    : true,\r\n                        },\r\n                        color = self.colorRange;\r\n\r\n                    // Iterate each single bar in a group\r\n                    if (Helper.isArray(_dsArray)) {\r\n                        _dsArray.forEach(function(d, i) {\r\n                            if (groupRefs.length - 1 < i)\r\n                                groupRefs.push(Helper.guid());\r\n                            if (Helper.isEmpty(groups[i]))\r\n                                groups.push('data' + (i+1));\r\n                            _stackItem = {\r\n                                \"color\": color(i),\r\n                                \"y0\": d,\r\n                                \"y1\": d > 0 ? d : 0,\r\n                                \"group\": groups[i],\r\n                                \"name\": Helper.get(self.keys.name, data),\r\n                                \"value\": d,\r\n                                \"data-ref\": Helper.guid(),\r\n                                \"group-ref\": groupRefs[i],\r\n                                \"enable\"    : true,\r\n                            };\r\n                            _stack.push(_stackItem);\r\n                        });\r\n                    } else {\r\n                        if (groupRefs.length == 0)\r\n                            groupRefs.push(Helper.guid());\r\n                        if (Helper.isEmpty(groups[0]))\r\n                            groups.push('data1');\r\n                        _stackItem = {\r\n                            \"color\": color(0),\r\n                            \"y0\": _dsArray,\r\n                            \"y1\": _dsArray > 0 ? _dsArray : 0,\r\n                            \"group\": groups[0],\r\n                            \"name\": Helper.get(self.keys.name, data),\r\n                            \"value\": _dsArray,\r\n                            \"data-ref\": Helper.guid(),\r\n                            \"group-ref\": groupRefs[0],\r\n                            \"enable\"    : true,\r\n                        };\r\n                        _stack.push(_stackItem);\r\n                    }\r\n\r\n                    self.dataTarget.push(_stack);\r\n                });\r\n\r\n                self.groups = groups;\r\n                return self.dataTarget;\r\n                break;\r\n\r\n            case \"stack\":\r\n                var stacks = self.stacks;\r\n                var groupRefs = [];\r\n                // Iterate over each group\r\n                self.dataSource.forEach(function(data, index) {\r\n                    let _dsArray    = Helper.get(self.keys.value, data);\r\n\r\n                    let _stack      = [],\r\n                        _stackItem = {\r\n                            \"color\": \"#ffffff\",\r\n                            \"y0\": 0,\r\n                            \"y1\": 1,\r\n                            \"group\": \"\",\r\n                            \"name\": \"\",\r\n                            \"data-ref\": \"\",\r\n                            \"enable\"    : true,\r\n                        },\r\n                        color = self.colorRange;\r\n\r\n                    // Iterate each single bar in a group\r\n                    if (Helper.isArray(_dsArray)) {\r\n                        let _negBase = 0;\r\n                        let _posBase = 0;\r\n                        _dsArray.forEach(function(d, i) {\r\n                            if (groupRefs.length - 1 < i)\r\n                                groupRefs.push(Helper.guid());\r\n                            if (Helper.isEmpty(stacks[i]))\r\n                                stacks.push('data' + (i+1));\r\n                            _stackItem = {\r\n                                \"color\": color(i),\r\n                                \"y0\": d,\r\n                                \"y1\": d > 0 ? d + _posBase : _negBase,\r\n                                \"group\": stacks[i],\r\n                                \"name\": Helper.get(self.keys.name, data),\r\n                                \"value\": d,\r\n                                \"data-ref\": Helper.guid(),\r\n                                \"group-ref\": groupRefs[i],\r\n                                \"enable\"    : true,\r\n                            };\r\n                            _stack.push(_stackItem);\r\n                            if (d > 0) _posBase += d;\r\n                            else _negBase += d;\r\n                        });\r\n                    } else {\r\n                        if (groupRefs.length == 0)\r\n                            groupRefs.push(Helper.guid());\r\n                        if (Helper.isEmpty(stacks[0]))\r\n                            stacks.push('data1');\r\n                        _stackItem = {\r\n                            \"color\": color(0),\r\n                            \"y0\": _dsArray,\r\n                            \"y1\": _dsArray > 0 ? _dsArray : 0,\r\n                            \"group\": stacks[0],\r\n                            \"name\": Helper.get(self.keys.name, data),\r\n                            \"value\": _dsArray,\r\n                            \"data-ref\": Helper.guid(),\r\n                            \"group-ref\": groupRefs[0],\r\n                            \"enable\"    : true,\r\n                        };\r\n                        _stack.push(_stackItem);\r\n                    }\r\n\r\n                    self.dataTarget.push(_stack);\r\n                });\r\n\r\n                self.stacks = stacks;\r\n                return self.dataTarget;\r\n                break;\r\n\r\n            default:\r\n                return self.dataSource;\r\n                break;\r\n        }\r\n    \r\n    }\r\n\r\n    getDataTargetForPieChart() {\r\n        var self = this;\r\n\r\n        let color = self.colorRange;\r\n        self.dataSource.forEach(function(data, index) {\r\n            let _data = {\r\n                \"color\"     : color(index),\r\n                \"name\"      : Helper.get(self.keys.name, data),\r\n                \"value\"     : Helper.get(self.keys.value, data),\r\n                \"data-ref\"  : Helper.guid(),\r\n                \"enable\"    : true,\r\n            };\r\n            self.dataTarget.push(_data);\r\n        });\r\n\r\n        return self.dataTarget;\r\n\r\n    }\r\n\r\n    getDataTargetForDonutChart() {\r\n        var self = this;\r\n\r\n        let color = self.colorRange;\r\n        self.dataSource.forEach(function(data, index) {\r\n            let _data = {\r\n                \"color\"     : color(index),\r\n                \"data-ref\"  : Helper.guid(),\r\n                \"enable\"    : true,\r\n                \"name\"      : Helper.get(self.keys.name, data),\r\n                \"value\"     : Helper.get(self.keys.value, data),\r\n            };\r\n\r\n            self.dataTarget.push(_data);\r\n        });\r\n\r\n        return self.dataTarget;\r\n\r\n    }\r\n\r\n    getDataTargetForTimelineChart() {\r\n        var self = this;\r\n\r\n        let color = self.colorRange;\r\n\r\n        self.dataSource.forEach(function(data, index) {\r\n\r\n            let _data = {\r\n                // \"color\"     : color(index),\r\n                \"icon\"      : data.icon,\r\n                \"name\"      : Helper.get(self.keys.name, data),\r\n                \"value\"     : [],\r\n                \"data-ref\"  : Helper.guid(),\r\n                \"enable\"    : true,\r\n            };\r\n\r\n            let _dsArray    = Helper.get(self.keys.value, data),\r\n                _valueArray = [],\r\n                _valueItem  = {\r\n                    \"name\": Helper.get(self.keys.name, data),\r\n                    \"start\": null ,\r\n                    \"end\": null ,\r\n                    \"color\": \"#fff\",\r\n                    \"data-ref\": null,\r\n                    \"enable\": true\r\n                };\r\n\r\n            if (Helper.isArray(_dsArray)) {\r\n                _dsArray.forEach(function(d, i) {\r\n                    _valueItem = {\r\n                        \"name\": Helper.get(self.keys.name, data),\r\n                        \"start\": new Date(d.start),\r\n                        \"end\": new Date(d.end) ,\r\n                        \"color\": color(index),\r\n                        \"data-ref\": Helper.guid(),\r\n                        \"enable\": true,\r\n                    };\r\n                    _valueArray.push(_valueItem);\r\n                });\r\n            } else {\r\n                _valueItem = {\r\n                    \"name\": Helper.get(self.keys.name, data),\r\n                    \"start\": new Date(d.start),\r\n                    \"end\": new Date(d.end) ,\r\n                    \"color\": color(index),\r\n                    \"data-ref\": Helper.guid(),\r\n                    \"enable\": true,\r\n                };\r\n                _valueArray.push(_valueItem);\r\n            }\r\n            _data.value = _valueArray;\r\n\r\n            self.dataTarget.push(_data);\r\n        });\r\n        return self.dataTarget;\r\n\r\n    }\r\n    \r\n    getDataTargetForLineChart() {\r\n        var self = this;\r\n\r\n        let color = self.colorRange;\r\n        self.dataSource.forEach(function(data, index) {\r\n            let _data = {\r\n                \"color\"     : color(index),\r\n                \"name\"      : Helper.get(self.keys.name, data),\r\n                \"value\"    : [],\r\n                \"data-ref\"  : Helper.guid(),\r\n                \"enable\"    : true,\r\n            };\r\n\r\n            let _valueXArray = Helper.get(self.keys.x, data),\r\n                _valueYArray = Helper.get(self.keys.y, data),\r\n                _valueArray = [],\r\n                _valueItem  = {\r\n                    \"name\"  : Helper.get(self.keys.name, data),\r\n                    \"valueX\": null,\r\n                    \"valueY\": null,\r\n                    \"data-ref\": Helper.guid(),\r\n                    \"enable\": true\r\n                };\r\n\r\n            if (Helper.isArray(_valueYArray)) {\r\n                /**\r\n                 *\r\n                 * CASE 1: [{name:, value: []}, {}, ..]\r\n                 *\r\n                 */\r\n                \r\n                if (!Helper.isArray(_valueXArray)) {\r\n                    _valueYArray.forEach(function(d, i) {\r\n                        _valueItem = {\r\n                            \"name\"  : Helper.get(self.keys.name, data),\r\n                            \"valueX\": i,\r\n                            \"valueY\": d,\r\n                            \"data-ref\": Helper.guid(),\r\n                            \"enable\": true\r\n                        };\r\n                        _valueArray.push(_valueItem);\r\n                    });\r\n                } else \r\n\r\n                /**\r\n                 *\r\n                 * CASE 2: [{name:, value: {x: [], y:[]}, {}, ..]\r\n                 *\r\n                 */\r\n                \r\n                if (Helper.isArray(_valueXArray) && !self.timeFormat) {\r\n                    _valueYArray.forEach(function(d, i) {\r\n                        _valueItem = {\r\n                            \"name\"  : Helper.get(self.keys.name, data),\r\n                            \"valueX\": !Helper.isEmpty(_valueXArray[i]) ? _valueXArray[i] : i,\r\n                            \"valueY\": d,\r\n                            \"data-ref\": Helper.guid(),\r\n                            \"enable\": true\r\n                        };\r\n                        _valueArray.push(_valueItem);\r\n                    });\r\n                } else \r\n\r\n                /**\r\n                 *\r\n                 * CASE 3: [{name:, value: {x: [], y:[]}, {}, ..] with config `timeFormat`\r\n                 *\r\n                 */\r\n                \r\n                if (Helper.isArray(_valueXArray) && self.timeFormat) {\r\n                    let _parser = Helper.dateParser(self.timeFormat);\r\n\r\n                    _valueYArray.forEach(function(d, i) {\r\n                        _valueItem = {\r\n                            \"name\"  : Helper.get(self.keys.name, data),\r\n                            \"valueX\": !Helper.isEmpty(_valueXArray[i]) ? _parser(_valueXArray[i]) : i,\r\n                            \"valueY\": d,\r\n                            \"data-ref\": Helper.guid(),\r\n                            \"enable\": true\r\n                        };\r\n                        _valueArray.push(_valueItem);\r\n                    });\r\n                }\r\n            }\r\n\r\n            _data.value = _valueArray;\r\n\r\n            self.dataTarget.push(_data);\r\n        });\r\n\r\n        return self.dataTarget;\r\n\r\n    }\r\n    /*=====  End of Normalize Data For Charts  ======*/\r\n    \r\n    /*=================================================\r\n    =              Normalize Data For Map             =\r\n    =================================================*/\r\n\r\n    getDataTargetForMap() {\r\n        var self = this;\r\n\r\n        var getDataValue = function(key, data, isArray){\r\n            let _keys = key.split('.');\r\n            let _value = Helper.get(key, data);\r\n            let _v;\r\n            if (_keys.length == 1 && keys[0] == 'value' && !isArray) {\r\n                _v = _value;\r\n            } else {\r\n                _v = new Object();\r\n                _v[_keys[_keys.length - 1]] = _value;\r\n            }\r\n            return _v;\r\n        }\r\n\r\n        var getData = function(data) {\r\n            let _data = {\r\n                \"name\": Helper.get(self.keys.name, data),\r\n                \"coor\": Helper.get(self.keys.coor, data),\r\n                \"value\": null\r\n            }\r\n            if (Helper.isArray(self.keys.value)) {\r\n                self.keys.value.forEach(function(k) {\r\n                    let _v = getDataValue(k, data, true);\r\n                    _data.value = Helper.merge(_data.value, _v);\r\n                });\r\n            }\r\n            else {\r\n                _data.value = getDataValue(self.keys.value, data, false);\r\n            }\r\n\r\n            return _data;\r\n        }\r\n\r\n        if (!Helper.isArray(self.dataSource)) \r\n            self.dataTarget = getData(self.dataSource);\r\n        else \r\n            self.dataSource.forEach(function(data) {\r\n                self.dataTarget.push(getData(data));\r\n            });\r\n\r\n        return self.dataTarget;\r\n    }\r\n\r\n    /*=====    End of Normalize Data For Map   ======*/\r\n\r\n\r\n    /*=============================\r\n    =            Utils            =\r\n    =============================*/\r\n    // getBarColorForBarChart() {\r\n    //     var self = this;\r\n\r\n    //     var color = self.colorRange;\r\n    //     if (typeof color == 'string') {\r\n    //         try {\r\n    //             return d3.scale[color]();    \r\n    //         }\r\n    //         catch(err) {\r\n    //             return function(i) {\r\n    //                 return color;\r\n    //             };\r\n    //         }\r\n    //     } else if (typeof color == 'object') {\r\n    //         return d3.scale.ordinal().range(color);\r\n    //     }\r\n    // }\r\n    \r\n    \r\n    /*=====  End of Utils  ======*/\r\n    \r\n\r\n    /*=============================================\r\n    =            Data Input From Files            =\r\n    =============================================*/\r\n    \r\n    getCsv() {\r\n\r\n        var self = this;\r\n\r\n        d3.csv(self.file.url, function(err, data) {\r\n            if (err) throw err;\r\n            \r\n            return data;\r\n        });\r\n\r\n    }\r\n\r\n    getTsv() {\r\n\r\n        var self = this;\r\n\r\n        d3.tsv(self.file.url, function(err, data) {\r\n            if (err) throw err;\r\n            \r\n            return data;\r\n        });\r\n\r\n    }\r\n\r\n    getText() {\r\n\r\n        var self = this;\r\n\r\n        d3.text(self.file.url, function(err, data) {\r\n            if (err) throw err;\r\n            \r\n            return JSON.parse(data);\r\n        });\r\n\r\n    }\r\n\r\n    getJson() {\r\n        var self = this;\r\n\r\n        d3.json(self.file.url, function(err, data) {\r\n            if (err) throw err;\r\n            \r\n            return data;\r\n        });\r\n    }\r\n\r\n    getXml() {\r\n        var self = this;\r\n\r\n        d3.xml(self.file.url, function(err, data) {\r\n            if (err) throw err;\r\n            \r\n            // Convert the XML document to an array of objects.\r\n            // Note that querySelectorAll returns a NodeList, not a proper Array,\r\n            // so we must use map.call to invoke array methods.\r\n            data = [].map.call(data.querySelectorAll(\"data\"), function(d) {\r\n                return {\r\n                    name: d.querySelector(\"name\").textContent,\r\n                    value: d.querySelector(\"value\").textContent\r\n                };\r\n            });\r\n\r\n            return data;\r\n        });\r\n    }\r\n    \r\n    /*=====  End of Data Input From Files  ======*/\r\n    \r\n\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/helper/C9.DataAdapter.js\n **/","import Chart from './C9.Chart';\r\n\r\nimport Axis from './utils/C9.Axis';\r\nimport Title from './utils/C9.Title';\r\nimport Legend from './utils/C9.Legend';\r\nimport Table from './utils/C9.Table';\r\nimport Tooltip from './utils/C9.Tooltip';\r\n\r\nimport Helper from '../helper/C9.Helper';\r\nimport DataAdapter from '../helper/C9.DataAdapter';\r\n\r\nexport default class DonutChart extends Chart {\r\n    constructor(options) {\r\n        super(options);\r\n\r\n        var self = this;\r\n\r\n        var R = Math.min(self.width - self.margin.left - self.margin.right, self.height - self.margin.top - self.margin.bottom) / 2;\r\n        var config = {\r\n            outerRadius: R,\r\n            innerRadius: R > 80 ? R - 80 : R - 40,\r\n            // showText: true // show/hide text on middle or each donut\r\n        };\r\n\r\n        self.updateConfig(config);\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    get pie() {\r\n        return this._pie;\r\n    }\r\n\r\n    get arc() {\r\n        return this._arc;\r\n    }\r\n\r\n    get currentData() {\r\n        return this._currentData;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    set pie(arg) {\r\n        if (arg) {\r\n            this._pie = arg;\r\n        }\r\n    }\r\n\r\n    set arc(arg) {\r\n        if (arg) {\r\n            this._arc = arg;\r\n        }\r\n    }\r\n\r\n    set currentData(arg) {\r\n        if (arg) {\r\n            this._currentData = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n    \r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    /**\r\n     * Update Donut Chart Config\r\n     */\r\n    updateConfig(config) {\r\n        super.updateConfig(config);\r\n\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n\r\n        self.chartType      = 'donut';\r\n\r\n        var dataOption          = self.dataOption;\r\n        dataOption.colorRange   = self.colorRange;\r\n\r\n        var da = new DataAdapter(dataOption);\r\n        self.dataTarget     = da.getDataTarget(self.chartType);\r\n    }\r\n\r\n    /**\r\n     * Update Donut Chart Config\r\n     */\r\n    updateDataConfig(dataCfg) {\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(self.options, dataCfg);\r\n\r\n        self.chartType      = 'donut';\r\n\r\n        var dataOption          = self.dataOption;\r\n        dataOption.colorRange   = self.colorRange;\r\n\r\n        var da = new DataAdapter(dataOption);\r\n        self.dataTarget     = da.getDataTarget(self.chartType);\r\n    }\r\n\r\n    /**\r\n     * Update Donut Chart based on new data\r\n     * @param  {[type]} data [description]\r\n     */\r\n    update(data) {\r\n        var self = this;\r\n\r\n        var width   = self.width - self.margin.left - self.margin.right,\r\n            height  = self.height - self.margin.top - self.margin.bottom,\r\n            color   = self.colorRange;\r\n\r\n        self.arc = d3.svg.arc()\r\n                    .outerRadius(self.options.outerRadius)\r\n                    .innerRadius(self.options.innerRadius);\r\n\r\n        //we can sort data here\r\n        self.pie = d3.layout.pie()\r\n                    .sort(null)\r\n                    .value(function(d) { return d.value; });\r\n\r\n        self.body.selectAll(\".c9-chart-donut.c9-custom-arc-container\").data([]).exit().remove();\r\n\r\n        //draw chart\r\n        var arcs = self.body\r\n                    .append('g')\r\n                        .attr('class', 'c9-chart-donut c9-custom-arc-container')\r\n                        .attr('transform', 'translate(' + (width / 2) + ',' + (height / 2) + ')')\r\n                        .selectAll('.c9-chart-donut.c9-custom-arc')\r\n                        .data(self.pie(data)).enter()\r\n                        .append('g')\r\n                            .attr('class', 'c9-chart-donut c9-custom-arc');\r\n\r\n        // Append main path contains donut\r\n        // TODO: add a unique class to allow Legend could find selected donut/pie\r\n        arcs.append('path')\r\n                .attr('class', 'c9-chart-donut c9-custom-path')\r\n                .attr('data-ref', function(d) { return d.data['data-ref']; })\r\n                .attr('d', self.arc)\r\n                .attr('fill', function(d, i) { return color(i); })\r\n                .attr('stroke', '#ffffff')\r\n                .each(function(d) { self.currentData = d; }); \r\n                // Current data used for calculate interpolation \r\n                // between current arc vs disabled arc\r\n\r\n\r\n        // Append middle text display name\r\n        // if (self.showText) {\r\n        //     arcs.append('text')\r\n        //             .attr('class', 'c9-chart-donut c9-custom-text')\r\n        //             .attr('transform', function(d) { return 'translate(' + self.arc.centroid(d) + ')'; })\r\n        //             .attr('dy', '.35em')\r\n        //             .attr('text-anchor', 'middle')\r\n        //             .text(function(d) { return d.data.name; });\r\n        // }\r\n        \r\n        self.updateInteraction();\r\n    }\r\n\r\n    /**\r\n     * Select all path as type PATH in Donut Chart via its CLASS\r\n     */\r\n    selectAllPath() {\r\n        var self = this;\r\n\r\n        return self.body\r\n                // .selectAll('g')\r\n                    .selectAll('path.c9-chart-donut.c9-custom-path');\r\n    }\r\n\r\n    /**\r\n     * Update Interaction: Hover\r\n     * @return {} \r\n     */\r\n    updateInteraction() {\r\n        var self    = this,\r\n            selector= self.selectAllPath(),\r\n            width   = self.width - self.margin.left - self.margin.right,\r\n            height  = self.height - self.margin.top - self.margin.bottom,\r\n            color   = self.colorRange,\r\n            chartInnerBefore = self.options.innerRadius,\r\n            chartOuterBefore = self.options.outerRadius,\r\n            chartInnerAfter = self.options.innerRadius,\r\n            chartOuterAfter = self.options.outerRadius * 1.2;\r\n\r\n        var hoverOptions        = self.hover.options,\r\n            hoverEnable         = self.hover.enable,\r\n            onMouseOverCallback = hoverOptions.onMouseOver.callback,\r\n            onMouseOutCallback  = hoverOptions.onMouseOut.callback,\r\n            onClickCallback  = self.click.callback;\r\n\r\n        var tooltip = new Tooltip(self.options.tooltip);\r\n\r\n        // Main Event Dispatch for paths in donut chart\r\n        self._eventFactory = {\r\n            'click': function(d, i) {\r\n                if (Helper.isFunction(onClickCallback)) {\r\n                    onClickCallback.call(this, d);\r\n                }\r\n            },\r\n\r\n            'mouseover': function(d, i) {\r\n                if (!hoverEnable) return;\r\n\r\n                if (Helper.isFunction(onMouseOverCallback)) {\r\n                    onMouseOverCallback.call(this, d);\r\n                }\r\n\r\n                var selector = d3.select(this);\r\n                selector.transition()\r\n                        .attr('d', d3.svg.arc()\r\n                            .innerRadius(chartInnerAfter)\r\n                            .outerRadius(chartOuterAfter)\r\n                        );\r\n\r\n                // For legend\r\n                if (self.options.legend.show)\r\n                    self.legend.item.each(function() {\r\n                        if (d3.select(this).attr('data-ref') !== d.data['data-ref'] && d3.select(this).attr('data-enable') == 'true') {\r\n                            d3.select(this).attr('opacity', '0.3');\r\n                        }\r\n                    });\r\n\r\n                // For Table\r\n                if (self.options.table.show) {\r\n                    var tr = d3.selectAll('.c9-table-container>.c9-table-body tr');\r\n                    tr.filter(function(i) { return i['data-ref'] != d.data['data-ref'] }).selectAll('td').style('opacity', '0.5');\r\n                    var selectedItem = tr.filter(function(i) { return i['data-ref'] == d.data['data-ref'] });\r\n                    //set its style and scroll to its pos\r\n                    selectedItem.selectAll('td').style('opacity', '1');\r\n                    Helper.scroll(d3.select('.c9-table-container')[0][0], selectedItem[0][0].offsetTop, 200);\r\n                }\r\n\r\n                // For Chart\r\n                self.selectAllPath().each(function(){\r\n                    if (d3.select(this).attr('data-ref') !== d.data['data-ref']) {\r\n                        d3.select(this).attr('opacity', '0.3');\r\n                    }\r\n                });\r\n\r\n                // For Tooltip\r\n                tooltip.draw(d, self, 'mouseover');\r\n            },\r\n            \r\n            'mouseout': function(d, i) {\r\n                if (!hoverEnable) return;\r\n\r\n                if (Helper.isFunction(onMouseOutCallback)) {\r\n                    onMouseOutCallback.call(this, d);\r\n                }\r\n\r\n                var selector = d3.select(this);\r\n                selector.transition()\r\n                        .duration(500)\r\n                        .ease('bounce')\r\n                        .attr('d', d3.svg.arc()\r\n                            .innerRadius(chartInnerBefore)\r\n                            .outerRadius(chartOuterBefore)\r\n                        );\r\n\r\n                // For legend\r\n                if (self.options.legend.show)\r\n                self.legend.item.each(function() {\r\n                    if (d3.select(this).attr('data-ref') !== d.data['data-ref'] && d3.select(this).attr('data-enable') == 'true') {\r\n                        d3.select(this).attr('opacity', '1.0');\r\n                    }\r\n                });\r\n\r\n                // For Table\r\n                if (self.options.table.show)\r\n                    d3.selectAll('.c9-table-container>.c9-table-body tr').selectAll('td').style('opacity', '');\r\n                \r\n                // For Chart\r\n                self.selectAllPath().each(function(){\r\n                    if (d3.select(this).attr('data-ref') !== d.data['data-ref']) {\r\n                        d3.select(this).attr('opacity', '1.0');\r\n                    }\r\n                });\r\n\r\n                // For Tooltip\r\n                tooltip.draw(d, self, 'mouseout');\r\n            }\r\n\r\n        };\r\n\r\n        selector.on(self._eventFactory);\r\n    }\r\n    \r\n    /*=====  End of Main Functions  ======*/\r\n    \r\n    /*========================================\r\n    =            User's Functions            =\r\n    ========================================*/\r\n    /**\r\n     * Custom Event Listener\r\n     * @param  {[type]}   eventType [description]\r\n     * @param  {Function} callback  [description]\r\n     * @return {[type]}             [description]\r\n     */\r\n    on(eventType, callback) {\r\n        super.on(eventType, callback);\r\n        \r\n        var self = this;\r\n        var selector    = self.selectAllPath();\r\n\r\n        // Update Event Factory\r\n        let eventFactory = {\r\n            'click.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            },\r\n            'mouseover.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            },\r\n            'mouseout.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            }\r\n        }\r\n\r\n        let eventName = eventType + '.event';\r\n\r\n        selector.on(eventName, eventFactory[eventName]);\r\n    }\r\n\r\n    /**\r\n     * Main draw function of Donut Chart\r\n     */\r\n    draw() {\r\n        super.draw();\r\n\r\n        var self = this;\r\n        \r\n        var title   = new Title(self.options.title, self);\r\n        var legend  = new Legend(self.options.legend, self, self.dataTarget);\r\n        var table   = new Table(self.options.table, self, self.dataTarget);\r\n\r\n        self.title = title;\r\n        self.legend = legend;\r\n        self.table = table;\r\n\r\n        // Draw title\r\n        self.title.draw();\r\n\r\n        // Update interaction of this own chart\r\n        self.update(self.dataTarget);\r\n        self.updateInteraction();\r\n\r\n        self.legend = legend;\r\n        self.table = table;\r\n\r\n        // Draw legend\r\n        self.legend.draw();\r\n        self.legend.updateInteractionForDonutPieChart(self, self.selectAllPath(), self.pie, self.currentData, self.arc);\r\n\r\n        // Draw table\r\n        self.table.draw();\r\n        self.table.updateInteractionForDonutPieChart(self);\r\n    }\r\n    \r\n    /**\r\n     * Set option via stand-alone function\r\n     * @param {[type]} key   [description]\r\n     * @param {[type]} value [description]\r\n     */\r\n    setOption(key, value) {\r\n        super.setOption(key, value);\r\n\r\n        var self = this;\r\n\r\n        Helper.set(key, value, self.options);\r\n\r\n        self.updateConfig(self.options);\r\n    }\r\n\r\n    /**\r\n     * Update chart based on new data with optional dataConfig\r\n     * @param  {[type]} data       [description]\r\n     * @param  {[type]} dataConfig [description]\r\n     */\r\n    updateData(newData, newDataConfig) {\r\n        var self = this;\r\n\r\n        var newCfg = {};\r\n\r\n        if (!Helper.isEmpty(newDataConfig)) {\r\n\r\n            newCfg.data = {\r\n                plain: newData,\r\n                keys: newDataConfig,\r\n            };\r\n\r\n        } else {\r\n\r\n            newCfg.data = {\r\n                plain: newData,\r\n            };\r\n\r\n        }\r\n        \r\n        // Update Chart\r\n        self.updateDataConfig(newCfg);\r\n        self.update(self.dataTarget);\r\n\r\n        // Update Legend\r\n        self.legend.update(self.dataTarget);\r\n        self.legend.updateInteractionForDonutPieChart(self, self.selectAllPath(), self.pie, self.currentData, self.arc);    \r\n    \r\n        // Update Table\r\n        self.table.update(self.dataTarget);\r\n    }\r\n    \r\n    \r\n    /*=====  End of User's Functions  ======*/\r\n    \r\n    \r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/C9.DonutChart.js\n **/","import Chart from './C9.Chart';\r\n\r\nimport Axis from './utils/C9.Axis';\r\nimport Title from './utils/C9.Title';\r\nimport Legend from './utils/C9.Legend';\r\nimport Table from './utils/C9.Table';\r\nimport Tooltip from './utils/C9.Tooltip';\r\n\r\nimport Helper from '../helper/C9.Helper';\r\nimport DataAdapter from '../helper/C9.DataAdapter';\r\n\r\nexport default class LineChart extends Chart {\r\n    constructor(options) {\r\n        super(options);\r\n\r\n        var self    = this;\r\n\r\n        var config  = {\r\n            point: {\r\n                show: true,\r\n                fill: \"steelblue\",\r\n                stroke: \"steelblue\",\r\n                'stroke-width': 1,\r\n                opacity: 1.0,\r\n                radius: 5,\r\n            },\r\n            area: {\r\n                show: true\r\n            },\r\n            line: {\r\n                style: \"solid\", // \"dash\", \"dot\"\r\n                width: 2\r\n            },\r\n            interpolate: \"linear\", // refer: https://www.dashingd3js.com/svg-paths-and-d3js\r\n        };\r\n\r\n        self.updateConfig(config);\r\n\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    get isTimeDomain() {\r\n        return this._isTimeDomain;\r\n    }\r\n\r\n    get bisectDate() {\r\n        return this._bisectDate;\r\n    }\r\n\r\n    get hoverLine() {\r\n        return this._hoverLine;\r\n    }\r\n\r\n    get subChartX() {\r\n        return this._subChartX;\r\n    }\r\n\r\n    get subChartY() {\r\n        return this._subChartY;\r\n    }\r\n\r\n    get subChartWidth() {\r\n        return this._subChartWidth;\r\n    }\r\n\r\n    get subChartHeight() {\r\n        return this._subChartHeight;\r\n    }\r\n\r\n    get subChartMargin() {\r\n        return this._subChartMargin;\r\n    }\r\n\r\n    get subChartXAxis() {\r\n        return this._subChartXAxis;\r\n    }\r\n\r\n    get brush() {\r\n        return this._brush;\r\n    }\r\n\r\n    get subChartAreaGen() {\r\n        return this._subChartAreaGen;\r\n    }\r\n\r\n    get lineGen() {\r\n        return this._lineGen;\r\n    }\r\n\r\n    get areaGen() {\r\n        return this._areaGen;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    set isTimeDomain(arg) {\r\n        if (arg) {\r\n            this._isTimeDomain = arg;\r\n        }\r\n    }\r\n\r\n    set bisectDate(arg) {\r\n        if (arg) {\r\n            this._bisectDate = arg;\r\n        }\r\n    }\r\n\r\n    set hoverLine(arg) {\r\n        if (arg) {\r\n            this._hoverLine = arg;\r\n        }\r\n    }\r\n\r\n    set subChartX(arg) {\r\n        if (arg) {\r\n            this._subChartX = arg;\r\n        }\r\n    }\r\n\r\n    set subChartY(arg) {\r\n        if (arg) {\r\n            this._subChartY = arg;\r\n        }\r\n    }\r\n\r\n    set subChartWidth(arg) {\r\n        if (arg) {\r\n            this._subChartWidth = arg;\r\n        }\r\n    }\r\n\r\n    set subChartHeight(arg) {\r\n        if (arg) {\r\n            this._subChartHeight = arg;\r\n        }\r\n    }\r\n\r\n    set subChartMargin(arg) {\r\n        if (arg) {\r\n            this._subChartMargin = arg;\r\n        }\r\n    }\r\n\r\n    set subChartXAxis(arg) {\r\n        if (arg) {\r\n            this._subChartXAxis = arg;\r\n        }\r\n    }\r\n\r\n    set brush(arg) {\r\n        if (arg) {\r\n            this._brush = arg;\r\n        }\r\n    }\r\n\r\n    set subChartAreaGen(arg) {\r\n        if (arg) {\r\n            this._subChartAreaGen = arg;\r\n        }\r\n    }\r\n\r\n    set lineGen(arg) {\r\n        if (arg) {\r\n            this._lineGen = arg;\r\n        }\r\n    }\r\n\r\n    set areaGen(arg) {\r\n        if (arg) {\r\n            this._areaGen = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n    \r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n\r\n    /**\r\n     * Init Line Chart Config\r\n     */\r\n    updateConfig(config) {\r\n        super.updateConfig(config);\r\n\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n\r\n        self.chartType = \"line\";\r\n        self.bisectDate = d3.bisector(function(d) { return d.valueX; }).left;\r\n\r\n        var dataOption          = self.dataOption;\r\n        dataOption.colorRange   = self.colorRange;\r\n\r\n        var da = new DataAdapter(dataOption);\r\n        self.dataTarget     = da.getDataTarget(self.chartType);\r\n        self.isTimeDomain   = da.timeFormat;\r\n\r\n        var width   = self.width - self.margin.left - self.margin.right,\r\n            height  = self.height - self.margin.top - self.margin.bottom;\r\n\r\n        self.x = (self.isTimeDomain) ? d3.time.scale().range([0, width]) : d3.scale.linear().range([0, width]),\r\n        self.y = d3.scale.linear().range([height, 0]);\r\n\r\n        self.updateDomain(self.dataTarget);\r\n\r\n        self.lineGen = d3.svg.line()\r\n                        .x(function(d) { return self.x(d.valueX); })\r\n                        .y(function(d) { return self.y(d.valueY); })\r\n                        .interpolate(self.options.interpolate);\r\n\r\n        self.areaGen = d3.svg.area()\r\n                        .x(function(d) { return self.x(d.valueX); })\r\n                        .y0(function(d) { return self.y(d.valueY); })\r\n                        .y1(height)\r\n                        .interpolate(self.options.interpolate);\r\n    }\r\n\r\n    /**\r\n     * Update data config\r\n     */\r\n    updateDataConfig(dataCfg) {\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(self.options, dataCfg);\r\n\r\n        self.chartType = \"line\";\r\n        self.bisectDate = d3.bisector(function(d) { return d.valueX; }).left;\r\n\r\n        var dataOption          = self.dataOption;\r\n        dataOption.colorRange   = self.colorRange;\r\n\r\n        var da = new DataAdapter(dataOption);\r\n        self.dataTarget     = da.getDataTarget(self.chartType);\r\n        self.isTimeDomain   = da.timeFormat;\r\n\r\n        var width   = self.width - self.margin.left - self.margin.right,\r\n            height  = self.height - self.margin.top - self.margin.bottom;\r\n\r\n        self.x = (self.isTimeDomain) ? d3.time.scale().range([0, width]) : d3.scale.linear().range([0, width]),\r\n        self.y = d3.scale.linear().range([height, 0]);\r\n\r\n        self.updateDomain(self.dataTarget);\r\n\r\n        self.lineGen = d3.svg.line()\r\n                        .x(function(d) { return self.x(d.valueX); })\r\n                        .y(function(d) { return self.y(d.valueY); })\r\n                        .interpolate(self.options.interpolate);\r\n\r\n        self.areaGen = d3.svg.area()\r\n                        .x(function(d) { return self.x(d.valueX); })\r\n                        .y0(function(d) { return self.y(d.valueY); })\r\n                        .y1(height)\r\n                        .interpolate(self.options.interpolate);\r\n    }\r\n\r\n    updateOverlay() {\r\n        var self = this;\r\n\r\n        var width   = self.width - self.margin.left - self.margin.right,\r\n            height  = self.height - self.margin.top - self.margin.bottom;\r\n\r\n        //** Create a invisible rect for mouse tracking\r\n        var paddingX = (self.x.domain()[1] - self.x.domain()[0]) * 0.01,\r\n            paddingY = (self.y.domain()[1] - self.y.domain()[0]) * 0.05;\r\n\r\n        self.body\r\n            .append('rect')\r\n            .attr('class', 'c9-chart-line c9-rect-overlay')\r\n            // .attr('width', self.actualWidth)\r\n            // .attr('height', self.actualHeight)\r\n            .attr('width', width - self.x(paddingX))\r\n            .attr('height', height)\r\n            .attr('x', self.x(paddingX) / 2)\r\n            .style('fill', 'none')\r\n            .style('pointer-events', 'all');\r\n    }\r\n\r\n    updateHoverLine() {\r\n        var self = this;\r\n\r\n        //** Add the line to the group\r\n        self.hoverLine = self.body\r\n                .append('g')\r\n                .attr('class', 'c9-chart-line c9-comparator-line')\r\n                .append('line')\r\n                .style('stroke', 'grey')\r\n                .style('stroke-opacity', 0);\r\n\r\n        self.hoverCircle = self.hoverLine\r\n                .append('circle')\r\n                .attr('class', 'c9-chart-line c9-comparator-line')\r\n                .attr('r', self.options.point.radius);\r\n    }\r\n\r\n    /**\r\n     * Update LineChart Domain\r\n     * @param  {[type]} data [description]\r\n     */\r\n    updateDomain(data) {\r\n        var self = this;\r\n\r\n        var valueXArray = d3.merge(data.map(function(_data) {\r\n            return _data.value.map(function(d) {\r\n                return d.valueX;\r\n            })\r\n        }));\r\n\r\n        var valueYArray = d3.merge(data.map(function(_data) {\r\n            return _data.value.map(function(d) {\r\n                return d.valueY;\r\n            })\r\n        }));\r\n\r\n        self.x.domain(d3.extent(valueXArray));\r\n\r\n        self.y.domain(d3.extent(valueYArray));\r\n\r\n        // Update domain if all values positive / negative\r\n        if (self.y.domain()[0] > 0 && self.y.domain()[1] > 0) {\r\n            self.y.domain([0, self.y.domain()[1]]);\r\n        } else if (self.y.domain()[0] < 0 && self.y.domain()[1] < 0) {\r\n            self.y.domain([self.y.domain()[0], 0]);\r\n        }\r\n\r\n        var xDomain = self.x.domain(), paddingX = (self.x.domain()[1] - self.x.domain()[0]) * 0.01;\r\n        var yDomain = self.y.domain(), paddingY = (self.y.domain()[1] - self.y.domain()[0]) * 0.05;\r\n            \r\n        self.x.domain([xDomain[0] - paddingX, xDomain[1] + paddingX]);\r\n        self.y.domain([yDomain[0], yDomain[1] + paddingY]);\r\n    }\r\n\r\n    /**\r\n     * Update main path of Line Chart when brushing\r\n     */\r\n    update(data) {\r\n        var self = this;\r\n\r\n        var width   = self.width - self.margin.left - self.margin.right,\r\n            height  = self.height - self.margin.top - self.margin.bottom;\r\n\r\n        self.updateDomain(data);\r\n\r\n        self.body.selectAll(\".c9-chart-line.c9-area-container\").data([]).exit().remove();\r\n        self.body.selectAll(\".c9-chart-line.c9-path-container\").data([]).exit().remove();\r\n        self.body.selectAll(\".c9-chart-line.c9-point-container\").data([]).exit().remove();\r\n\r\n        if (self.options.area.show) {\r\n            var areaContainer = self.body.append('g')\r\n                                .attr('class', 'c9-chart-line c9-area-container')\r\n                                .attr(\"clip-path\", \"url(#clip)\");\r\n\r\n            areaContainer.selectAll(\".c9-chart-line.c9-path-area-custom\")\r\n            // self.body.selectAll(\"dot\")\r\n                .data(data)\r\n                .enter()\r\n                .append('path')\r\n                .filter(function(d) {\r\n                    return d.enable;\r\n                })\r\n                // .attr(\"clip-path\", \"url(#clip)\")\r\n                .attr('class', 'c9-chart-line c9-path-area-custom')\r\n                .attr('d', function(d) {\r\n                    return self.areaGen(d.value);\r\n                })\r\n                .attr('data-ref', function(d) {\r\n                    return 'c9-' + d['data-ref'];\r\n                })\r\n                .style('fill', function(d) {\r\n                    return d.color;\r\n                })\r\n                .style('stroke', 'none')\r\n                .style('opacity', '0.5');\r\n        }\r\n\r\n        var pathContainer = self.body.append('g')\r\n                            .attr('class', 'c9-chart-line c9-path-container')\r\n                            .attr(\"clip-path\", \"url(#clip)\");\r\n            \r\n        pathContainer.selectAll(\".c9-chart-line.c9-path-line-custom\")\r\n        // self.body.selectAll(\"dot\")\r\n            .data(data)\r\n            .enter()\r\n            .append('path')\r\n            .filter(function(d) {\r\n                return d.enable;\r\n            })\r\n            .attr('class', 'c9-chart-line c9-path-line-custom')\r\n            .attr('d', function(d) {\r\n                return self.lineGen(d.value);\r\n            })\r\n            .attr('data-ref', function(d) {\r\n                return 'c9-' + d['data-ref'];\r\n            })\r\n            .style('stroke', function(d) {\r\n                return d.color;\r\n            })\r\n            .style('stroke-dasharray', function() {\r\n                return self.getLineStyle();\r\n            })\r\n            .style('stroke-width', self.options.line.width)\r\n            .style('fill', 'none');\r\n\r\n        if (self.options.point.show) {\r\n            var pointContainer = self.body.append('g')\r\n                                    .attr('class', 'c9-chart-line c9-point-container')\r\n                                    .attr(\"clip-path\", \"url(#clip)\");\r\n            \r\n            data.forEach(function(d) {\r\n                if (!d.enable) return;\r\n                pointContainer.selectAll(\".c9-chart-line.c9-point-container\")\r\n                // self.body.selectAll(\"dot\")\r\n                    .data(d.value)\r\n                    .enter()\r\n                    .append(\"circle\")\r\n                    // .attr(\"clip-path\", \"url(#clip)\")\r\n                    .attr('class', 'c9-chart-line c9-circle-custom')\r\n                    .attr(\"r\", self.options.point.radius)\r\n                    .attr(\"cx\", function(_d) {\r\n                        return self.x(_d.valueX);\r\n                    })\r\n                    .attr(\"cy\", function(_d) {\r\n                        return self.y(_d.valueY);\r\n                    })\r\n                    .attr(\"data-ref\", function(data) {\r\n                        return data[\"data-ref\"];\r\n                    })\r\n                    .style(\"fill\", self.options.point.fill)\r\n                    .style(\"stroke\", self.options.point.stroke)\r\n                    .style(\"stroke-width\", self.options.point['stroke-width'])\r\n                    .style(\"opacity\", self.options.point.opacity);\r\n            });\r\n        }\r\n\r\n        /*----------  Set actual size for chart after initialization  ----------*/\r\n        var chartBox = self.body.node().getBBox();\r\n        self.actualWidth = chartBox.width - 4 * self.options.point.radius;\r\n        self.actualHeight = chartBox.height;\r\n        /*----------  End of Set actual size for chart after initialization  ----------*/\r\n\r\n        self.updateInteraction();\r\n    }  \r\n\r\n    /**\r\n     * Update sub chart\r\n     */\r\n    updateSubChart(data) {\r\n        var self = this;\r\n\r\n        if (self.options.subchart.show) {\r\n            var width   = self.width - self.margin.left - self.margin.right,\r\n                height  = self.height - self.margin.top - self.margin.bottom;\r\n\r\n            /*----------  Sub Chart  ----------*/\r\n            self.subChartWidth = width,\r\n            self.subChartHeight = self.options.subchart.height;\r\n            if (Helper.isEmpty(self.subChartMargin)) {\r\n                self.subChartMargin = {\r\n                    'top': self.actualHeight + 100,\r\n                    'left': self.margin.left\r\n                }\r\n            }\r\n\r\n            self.subChartX = (self._isTimeDomain) ? d3.time.scale().range([0, self.subChartWidth]) : d3.scale.linear().range([0, self.subChartWidth]),\r\n            self.subChartY = d3.scale.linear().range([self.subChartHeight, 0]);\r\n\r\n            self.subChartX.domain(self.x.domain());\r\n            self.subChartY.domain(self.y.domain());\r\n\r\n            self.subChartXAxis = d3.svg.axis()\r\n                            .scale(self.subChartX)\r\n                            .orient(\"bottom\");\r\n\r\n            self.brush = d3.svg.brush()\r\n                            .x(self.subChartX)\r\n                            .on(\"brush\", function() {\r\n                                // Update axis\r\n                                self.x.domain(self.brush.empty() ? self.subChartX.domain() :self.brush.extent());\r\n                                self.axis.update(self.x, self.y, 500);\r\n\r\n                                // Update main path of Line Chart\r\n                                if (self.options.area.show) {\r\n                                    self.body.selectAll(\"path.c9-chart-line.c9-path-area-custom\")\r\n                                        .attr(\"d\",  function(d) { return self.areaGen(d.value) });\r\n                                }\r\n                                self.body.selectAll(\"path.c9-chart-line.c9-path-line-custom\")\r\n                                        .attr(\"d\",  function(d) { return self.lineGen(d.value) });\r\n\r\n                                if (self.options.point.show) {\r\n                                    self.body.selectAll(\"circle.c9-chart-line.c9-circle-custom\")\r\n                                            .attr(\"cx\", function(d) { return self.x(d.valueX); })\r\n                                            .attr(\"cy\", function(d) { return self.y(d.valueY); });\r\n                                }\r\n                            });\r\n\r\n            self.subChartAreaGen = d3.svg.area()\r\n                            .x(function(d) { return self.subChartX(d.valueX) })\r\n                            .y0(function(d) { return self.subChartY(d.valueY) })\r\n                            .y1(self.subChartHeight)\r\n                            .interpolate(self.options.interpolate);\r\n\r\n            self.svg.attr('height', self.height + self.subChartHeight);\r\n\r\n            self.svg.selectAll(\".c9-subchart-custom\").remove();\r\n            self.svg.selectAll(\".c9-subchart-custom .c9-subchart-axis\").remove();\r\n\r\n            var subChart = self.svg.append(\"g\")\r\n                            .attr(\"class\", \"c9-subchart-custom\")\r\n                            .attr(\"transform\", \"translate(\" + self.subChartMargin.left + \",\" + self.subChartMargin.top + \")\");\r\n\r\n            var subChartAreaContainer = subChart.append('g')\r\n                                    .attr('class', 'c9-subchart-custom c9-subchart-area-container')\r\n                                    .attr(\"clip-path\", \"url(#clip)\");\r\n\r\n            data.forEach(function(d,i) {\r\n                if (!d.enable) return;\r\n\r\n                subChartAreaContainer.append(\"path\")\r\n                    // .attr(\"clip-path\", \"url(#clip)\")\r\n                    .attr(\"class\", \"c9-subchart-area\")\r\n                    .attr(\"d\", function() { return self.subChartAreaGen(d.value) })\r\n                    .attr('data-ref', 'c9-'+d['data-ref'])\r\n                    .style('fill', d.color)\r\n                    .style('stroke', 'none')\r\n                    .style('opacity', '0.5');\r\n            });\r\n            \r\n\r\n            subChart.append(\"g\")\r\n                .attr(\"class\", \"c9-subchart-axis\")\r\n                .attr(\"transform\", \"translate(0,\" + self.subChartHeight + \")\")\r\n                .call(self.subChartXAxis);\r\n\r\n            //append the brush for the selection of subsection  \r\n            subChart.append(\"g\")\r\n                .attr(\"class\", \"c9-subchart-brush\")\r\n                .call(self.brush)\r\n                .selectAll(\"rect\")\r\n                .attr(\"height\", self.subChartHeight);\r\n\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Select all circle as type CIRCLE in Line Chart via its CLASS\r\n     */\r\n    selectAllCircle() {\r\n        var self = this;\r\n\r\n        return self.body\r\n                .selectAll('circle.c9-chart-line.c9-circle-custom');\r\n    }\r\n\r\n    /**\r\n     * Select all rect as type RECT in Line Chart via its CLASS\r\n     */\r\n    selectRectLayer() {\r\n        var self = this;\r\n\r\n        return d3\r\n                .selectAll('svg rect.c9-chart-line.c9-rect-overlay');\r\n    }\r\n\r\n    /**\r\n     * Update Interaction: Hover\r\n     */\r\n    updateInteraction() {\r\n        var self = this,\r\n            selector        = self.selectRectLayer(),\r\n            hoverEnable     = self.hover.enable,\r\n            hoverOptions    = self.hover.options,\r\n            onMouseOverCallback = hoverOptions.onMouseOver.callback,\r\n            onMouseOutCallback  = hoverOptions.onMouseOut.callback,\r\n            onMouseMoveCallback  = hoverOptions.onMouseMove.callback,\r\n            onClickCallback  = self.click.callback;\r\n\r\n        var tooltip = new Tooltip(self.options.tooltip);\r\n\r\n        // Update Event Factory\r\n        self.eventFactory = {\r\n            // 'click': function(d) {\r\n            //     if (Helper.isFunction(onClickCallback)) {\r\n            //         onClickCallback.call(this, d);\r\n            //     }\r\n            // },\r\n            // 'mouseover': function(d) {\r\n            //     if (!hoverEnable) return;\r\n                \r\n            //     if (Helper.isFunction(onMouseOverCallback)) {\r\n            //         onMouseOverCallback.call(this, d);\r\n            //     }\r\n\r\n            //     // tooltip.draw(d, self, 'mouseover');\r\n            // },\r\n            'mouseout': function(d) {\r\n                if (!hoverEnable) return;\r\n\r\n                // if (Helper.isFunction(onMouseOutCallback)) {\r\n                //     onMouseOutCallback.call(this, d);\r\n                // }\r\n\r\n                self.hoverLine.style('stroke-opacity', 0);\r\n\r\n                // Remove circle style before\r\n                self.selectAllCircle()[0].forEach(function(circle) {\r\n                    d3.select(circle)\r\n                        .style('fill', self.options.point.fill)\r\n                        .style('fill-opacity', self.options.point.opacity);\r\n                }); \r\n\r\n                tooltip.draw(d, self, 'mouseout');\r\n            },\r\n            'mousemove': function(d) {\r\n                if (!hoverEnable) return;\r\n\r\n\r\n                var mouse   = d3.mouse(this),\r\n                    mouseX  = mouse[0],\r\n                    mouseY  = mouse[1],\r\n\r\n                    curValueX   = self.x.invert(mouseX);\r\n\r\n                var sameTimeArr = [],\r\n                    sameTimeValueArr = [];\r\n\r\n                self.dataTarget.forEach(function(d, i) {\r\n                    sameTimeArr[i] = d.value;\r\n                    sameTimeArr[i].sort(function(a, b) { return a.valueX - b.valueX; });\r\n                    var idx = self._isTimeDomain ? self.bisectDate(sameTimeArr[i], new Date(curValueX)) : self.bisectDate(sameTimeArr[i], curValueX);\r\n                    \r\n                    var d0, d1;\r\n                    \r\n                    d0 = (idx === 0) ? sameTimeArr[i][idx] : sameTimeArr[i][idx - 1];\r\n                    d1 = !Helper.isEmpty(sameTimeArr[i][idx]) ? sameTimeArr[i][idx] : sameTimeArr[i][idx-1] ;\r\n\r\n                    // Check d0, d1 still in boundary or not\r\n                    // To work well with brushing\r\n                    d0 = self.checkBoundary(d0.valueX) === -1 ? d1 : d0;\r\n                    d1 = self.checkBoundary(d1.valueX) === 1 ? d0 : d1;\r\n\r\n                    // work out which date value is closest to the mouse\r\n                    sameTimeValueArr[i] = (curValueX - d0.valueX > d1.valueX - curValueX) ? d1 : d0;\r\n                });\r\n\r\n                if (Helper.isFunction(onMouseMoveCallback)) {\r\n                    onMouseMoveCallback.call(this, sameTimeValueArr);\r\n                }\r\n                \r\n                var x = self.x(!Helper.isEmpty(sameTimeValueArr[0].valueX) ? sameTimeValueArr[0].valueX : sameTimeValueArr[1].valueX);\r\n                var y = self.y(!Helper.isEmpty(sameTimeValueArr[0].valueY) ? sameTimeValueArr[0].valueY : sameTimeValueArr[1].valueY);\r\n\r\n                // console.log(x);\r\n\r\n                // Remove circle style before\r\n                self.selectAllCircle()[0].forEach(function(circle) {\r\n                    d3.select(circle)\r\n                        .style('fill', self.options.point.fill)\r\n                        .style('fill-opacity', self.options.point.opacity);\r\n                }); \r\n\r\n                // Update circle style after mouse move\r\n                for (let i=0; i < sameTimeValueArr.length; i++) {\r\n                    let circle = d3.select(\"circle[data-ref='\" + sameTimeValueArr[i]['data-ref'] + \"']\");\r\n                    circle\r\n                    .style('fill', 'steelblue')\r\n                    .style('fill-opacity', 1);\r\n                }\r\n\r\n                // focus.select('#focusCircle')\r\n                //     .attr('cx', x)\r\n                //     .attr('cy', y);\r\n                self.hoverLine\r\n                    .attr('x1', x).attr('y1', self.y(self.y.domain()[0]))\r\n                    .attr('x2', x).attr('y2', self.y(self.y.domain()[1]))\r\n                    .style('stroke-opacity', 1);\r\n                // self.hoverLine\r\n                //     .attr('x1', self.x(self.x.domain()[0])).attr('y1', y)\r\n                //     .attr('x2', self.x(self.x.domain()[1])).attr('y2', y)\r\n                //     .attr('stroke-opacity', 1);\r\n\r\n                //** Display Hover line\r\n                // self.hoverLine\r\n                //     .attr('x1', self.x(sameTimeValueArr[0].valueX))\r\n                //     .attr('x2', self.x(sameTimeValueArr[0].valueX))\r\n                //     .attr('stroke-opacity', 1);\r\n\r\n                tooltip.draw(sameTimeValueArr, self, 'mousemove');\r\n            }\r\n        }\r\n\r\n        selector.on(self.eventFactory);\r\n    }\r\n\r\n    getLineStyle() {\r\n        var self = this;\r\n\r\n        let r;\r\n\r\n        switch(self.options.line.style) {\r\n            case 'dot':\r\n                r = \"1, 1\";\r\n                break;\r\n            case 'solid':\r\n                r = 'none';\r\n                break;\r\n            case 'dash':\r\n                r = \"3, 3\";\r\n                break;\r\n            default:\r\n                r = 'none';\r\n                break;\r\n        }\r\n\r\n        return r;\r\n    }\r\n\r\n    checkBoundary(value) {\r\n        var self = this;\r\n\r\n        var bound = self.width - self.margin.left - self.margin.right,\r\n            checkWidth = self.x(value);\r\n\r\n        return checkWidth < 0 ? -1 : (checkWidth > bound) ? 1 : 0;\r\n    }\r\n    \r\n    /*=====  End of Main Functions  ======*/\r\n\r\n    /*========================================\r\n    =            User's Functions            =\r\n    ========================================*/\r\n    /**\r\n     * Custom Event Listener\r\n     * @param  {[type]}   eventType [description]\r\n     * @param  {Function} callback  [description]\r\n     */\r\n    on(eventType, callback) {\r\n        super.on(eventType, callback);\r\n        \r\n        var self = this;\r\n        var selector    = self.selectRectLayer();\r\n\r\n        // Update Event Factory\r\n        let eventFactory = {\r\n            'mousemove.event': function(d) {\r\n\r\n                var mouse   = d3.mouse(this),\r\n                    mouseX  = mouse[0],\r\n                    mouseY  = mouse[1],\r\n\r\n                    curValueX   = self.x.invert(mouseX);\r\n\r\n                var sameTimeArr = [],\r\n                    sameTimeValueArr = [];\r\n\r\n                self.dataTarget.forEach(function(d, i) {\r\n                    sameTimeArr[i] = d.value;\r\n                    sameTimeArr[i].sort(function(a, b) { return a.valueX - b.valueX; });\r\n                    var idx = self._isTimeDomain ? self.bisectDate(sameTimeArr[i], new Date(curValueX)) : self.bisectDate(sameTimeArr[i], curValueX);\r\n                    \r\n                    var d0, d1;\r\n                    \r\n                    d0 = (idx === 0) ? sameTimeArr[i][idx] : sameTimeArr[i][idx - 1];\r\n                    d1 = sameTimeArr[i][idx];\r\n\r\n                    // work out which date value is closest to the mouse\r\n                    sameTimeValueArr[i] = (curValueX - d0.valueX > d1.valueX - curValueX) ? d1 : d0;\r\n                });\r\n\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, sameTimeValueArr);\r\n                }\r\n            }\r\n        }\r\n\r\n        let eventName = eventType + '.event';\r\n\r\n        selector.on(eventName, eventFactory[eventName]);\r\n    }\r\n\r\n    /**\r\n     * Main draw function of Line Chart\r\n     */\r\n    draw() {\r\n        super.draw();\r\n\r\n        var self = this;\r\n\r\n        var axis    = new Axis(self.options.axis, self, self.width - self.margin.left - self.margin.right, self.height - self.margin.top - self.margin.bottom);\r\n        var title   = new Title(self.options.title, self);\r\n        var legend  = new Legend(self.options.legend, self);\r\n        var table  = new Table(self.options.table, self, self.dataTarget);\r\n\r\n        self.axis = axis;\r\n        self.title = title;\r\n        self.legend = legend;\r\n        self.table = table;\r\n\r\n        // Draw title\r\n        self.title.draw();\r\n\r\n        // Draw axis\r\n        self.axis.draw();\r\n\r\n        self.update(self.dataTarget);\r\n        self.updateSubChart(self.dataTarget);\r\n        self.updateOverlay();\r\n        self.updateHoverLine();\r\n        self.updateInteraction();\r\n\r\n        // Draw legend\r\n        self.legend.draw();\r\n        self.legend.updateInteractionForLineChart(self);\r\n\r\n        // Draw table\r\n        self.table.draw();\r\n    }\r\n    \r\n    /**\r\n     * Set option via stand-alone function\r\n     * @param {[type]} key   [description]\r\n     * @param {[type]} value [description]\r\n     */\r\n    setOption(key, value) {\r\n        super.setOption(key, value);\r\n\r\n        var self = this;\r\n\r\n        Helper.set(key, value, self.options);\r\n\r\n        self.updateConfig(self.options);\r\n    }\r\n\r\n    /**\r\n     * Update chart based on new data with optional dataConfig\r\n     * @param  {[type]} data       [description]\r\n     * @param  {[type]} dataConfig [description]\r\n     */\r\n    updateData(newData, newDataConfig) {\r\n        var self = this;\r\n\r\n        var newCfg = {};\r\n\r\n        if (!Helper.isEmpty(newDataConfig)) {\r\n\r\n            newCfg.data = {\r\n                plain: newData,\r\n                keys: newDataConfig,\r\n            };\r\n\r\n        } else {\r\n\r\n            newCfg.data = {\r\n                plain: newData,\r\n            };\r\n\r\n        }\r\n        \r\n        // Update chart\r\n        self.updateDataConfig(newCfg);\r\n        self.update(self.dataTarget);\r\n        self.updateSubChart(self.dataTarget);\r\n\r\n        // Update Axis\r\n        self.axis.update(self.x, self.y, 100);\r\n\r\n        // Update Legend\r\n        self.legend.update(self.dataTarget);\r\n        self.legend.updateInteractionForLineChart(self);\r\n\r\n        // Update Table\r\n        self.table.update(self.dataTarget);\r\n    }\r\n    /*=====  End of User's Functions  ======*/\r\n    \r\n    \r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/C9.LineChart.js\n **/","import Chart from './C9.Chart';\r\n\r\nimport Axis from './utils/C9.Axis';\r\nimport Title from './utils/C9.Title';\r\nimport Legend from './utils/C9.Legend';\r\nimport Table from './utils/C9.Table';\r\nimport Tooltip from './utils/C9.Tooltip';\r\n\r\nimport Helper from '../helper/C9.Helper';\r\nimport DataAdapter from '../helper/C9.DataAdapter';\r\n\r\nexport default class PieChart extends Chart {\r\n    constructor(options) {\r\n        super(options);\r\n\r\n        var self = this;\r\n\r\n        var config = {\r\n            radius: Math.min(self.width - self.margin.left - self.margin.right, self.height - self.margin.top - self.margin.bottom) / 2,\r\n            // showText: true\r\n        };\r\n\r\n        self.updateConfig(config);\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    get pie() {\r\n        return this._pie;\r\n    }\r\n\r\n    get arc() {\r\n        return this._arc;\r\n    }\r\n\r\n    get currentData() {\r\n        return this._currentData;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    set pie(arg) {\r\n        if (arg) {\r\n            this._pie = arg;\r\n        }\r\n    }\r\n\r\n    set arc(arg) {\r\n        if (arg) {\r\n            this._arc = arg;\r\n        }\r\n    }\r\n\r\n    set currentData(arg) {\r\n        if (arg) {\r\n            this._currentData = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n    \r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    /**\r\n     * Update Donut Chart Config\r\n     */\r\n    updateConfig(config) {\r\n        super.updateConfig(config);\r\n\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n\r\n        self.chartType  = 'pie';\r\n\r\n        var dataOption          = self.dataOption;\r\n        dataOption.colorRange   = self.colorRange;\r\n\r\n        var da = new DataAdapter(dataOption);\r\n        self.dataTarget     = da.getDataTarget(self.chartType);\r\n    }\r\n\r\n    /**\r\n     * Update Donut Chart Config\r\n     */\r\n    updateDataConfig(dataCfg) {\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(self.options, dataCfg);\r\n\r\n        self.chartType  = 'pie';\r\n\r\n        var dataOption          = self.dataOption;\r\n        dataOption.colorRange   = self.colorRange;\r\n\r\n        var da = new DataAdapter(dataOption);\r\n        self.dataTarget     = da.getDataTarget(self.chartType);\r\n    }\r\n\r\n    /**\r\n     * Update Donut Chart based on new data\r\n     * @param  {[type]} data [description]\r\n     */\r\n    update(data) {\r\n        var self = this;\r\n\r\n        var width   = self.width - self.margin.left - self.margin.right,\r\n            height  = self.height - self.margin.top - self.margin.bottom,\r\n            color   = self.colorRange;\r\n\r\n        self.arc = d3.svg.arc()\r\n                    .innerRadius(0)\r\n                    .outerRadius(self.options.radius);\r\n\r\n        //we can sort data here\r\n        self.pie = d3.layout.pie()\r\n                    .sort(null)\r\n                    .value(function(d) { return d.value; });\r\n\r\n        self.body.selectAll(\".c9-chart-pie.c9-custom-arc-container\").data([]).exit().remove();\r\n\r\n        //draw chart\r\n        var arcs = self.body\r\n                    .append('g')\r\n                        .attr('class', 'c9-chart-pie c9-custom-arc-container')\r\n                        .attr('transform', 'translate(' + (width / 2) + ',' + (height / 2) + ')')\r\n                        .selectAll('.c9-chart-pie.c9-custom-arc')\r\n                        .data(self.pie(self.dataTarget)).enter()\r\n                        .append('g')\r\n                            .attr('class', 'c9-chart-pie c9-custom-arc');\r\n\r\n        // Append main path contains pie\r\n        arcs.append('path')\r\n                .attr('class', 'c9-chart-pie c9-custom-path')\r\n                .attr('data-ref', function(d) { return d.data['data-ref']; })\r\n                .attr('d', self.arc)\r\n                .attr('fill', function(d, i) { return color(i); })\r\n                .attr('stroke', '#ffffff')\r\n                .each(function(d) { self.currentData = d; }); \r\n                // Current data used for calculate interpolation \r\n                // between current arc vs disabled arc\r\n\r\n\r\n        // Append middle text display name\r\n        // if (self.options.showText) {\r\n        //     arcs.append('text')\r\n        //             .attr('class', 'c9-chart-pie c9-custom-text')\r\n        //             .attr('transform', function(d) { return 'translate(' + self.arc.centroid(d) + ')'; })\r\n        //             .attr('dy', '.35em')\r\n        //             .attr('text-anchor', 'middle')\r\n        //             .text(function(d) { return d.data.name; });\r\n        // }\r\n        \r\n        self.updateInteraction();\r\n    }\r\n\r\n    /**\r\n     * Select all path as type PATH in Donut Chart via its CLASS\r\n     */\r\n    selectAllPath() {\r\n        var self = this;\r\n\r\n        return self.body\r\n                    .selectAll('path.c9-chart-pie.c9-custom-path');\r\n    }\r\n\r\n    /**\r\n     * Update Interaction: Hover\r\n     * @return {} \r\n     */\r\n    updateInteraction() {\r\n        var self    = this,\r\n            selector= self.selectAllPath(),\r\n            color   = self.colorRange,\r\n            chartInnerBefore = 0,\r\n            chartOuterBefore = self.options.radius,\r\n            chartInnerAfter = 0,\r\n            chartOuterAfter = self.options.radius * 1.2,\r\n            hoverOptions        = self.hover.options,\r\n            hoverEnable         = self.hover.enable,\r\n            onMouseOverCallback = hoverOptions.onMouseOver.callback,\r\n            onMouseOutCallback  = hoverOptions.onMouseOut.callback,\r\n            onClickCallback     = self.click.callback;\r\n\r\n        var tooltip = new Tooltip(self.options.tooltip);\r\n\r\n        // Main Event Dispatch for paths in pie chart\r\n        self.eventFactory = {\r\n            'click': function(d, i) {\r\n                if (Helper.isFunction(onClickCallback)) {\r\n                    onClickCallback.call(this, d);\r\n                }\r\n            },\r\n\r\n            'mouseover': function(d, i) {\r\n                if (!hoverEnable) return;\r\n\r\n                if (Helper.isFunction(onMouseOverCallback)) {\r\n                    onMouseOverCallback.call(this, d);\r\n                }\r\n\r\n                var selector = d3.select(this);\r\n                selector.transition()\r\n                        .attr('d', d3.svg.arc()\r\n                            .innerRadius(chartInnerAfter)\r\n                            .outerRadius(chartOuterAfter)\r\n                        );\r\n\r\n                // For legend\r\n                if (self.options.legend.show) {\r\n                    self.legend.item.each(function() {\r\n                        if (d3.select(this).attr('data-ref') !== d.data['data-ref'] && d3.select(this).attr('data-enable')) {\r\n                            d3.select(this).attr('opacity', '0.3');\r\n                        }\r\n                    });\r\n                }\r\n\r\n                // For Table\r\n                if (self.options.table.show) {\r\n                    var tr = d3.selectAll('.c9-table-container>.c9-table-body tr');\r\n                    tr.filter(function(i) { return i['data-ref'] != d.data['data-ref'] }).selectAll('td').style('opacity', '0.5');\r\n                    var selectedItem = tr.filter(function(i) { return i['data-ref'] == d.data['data-ref'] });\r\n                    //set its style and scroll to its pos\r\n                    selectedItem.selectAll('td').style('opacity', '1');\r\n                    Helper.scroll(d3.select('.c9-table-container')[0][0], selectedItem[0][0].offsetTop, 200);\r\n                }\r\n\r\n                // For Chart\r\n                self.selectAllPath().each(function(){\r\n                    if (d3.select(this).attr('data-ref') !== d.data['data-ref']) {\r\n                        d3.select(this).attr('opacity', '0.3');\r\n                    }\r\n                });\r\n\r\n                // For Tooltip\r\n                tooltip.draw(d, self, 'mouseover');\r\n            },\r\n            \r\n            'mouseout': function(d, i) {\r\n                if (!hoverEnable) return;\r\n\r\n                if (Helper.isFunction(onMouseOutCallback)) {\r\n                    onMouseOutCallback.call(this, d);\r\n                }\r\n\r\n                var selector = d3.select(this);\r\n                selector.transition()\r\n                        .duration(500)\r\n                        .ease('bounce')\r\n                        .attr('d', d3.svg.arc()\r\n                            .innerRadius(chartInnerBefore)\r\n                            .outerRadius(chartOuterBefore)\r\n                        );\r\n\r\n                // For legend\r\n                if (self.options.legend.show)\r\n                    self.legend.item.each(function() {\r\n                        if (d3.select(this).attr('data-ref') !== d.data['data-ref'] && d3.select(this).attr('data-enable')) {\r\n                            d3.select(this).attr('opacity', '1.0');\r\n                        }\r\n                    });\r\n\r\n                // For Table\r\n                if (self.options.table.show) {\r\n                    d3.selectAll('.c9-table-container>.c9-table-body tr').selectAll('td').style('opacity', '');\r\n                }\r\n                \r\n\r\n                // For Chart\r\n                self.selectAllPath().each(function(){\r\n                    if (d3.select(this).attr('data-ref') !== d.data['data-ref']) {\r\n                        d3.select(this).attr('opacity', '1.0');\r\n                    }\r\n                });\r\n\r\n                // For Tooltip\r\n                tooltip.draw(d, self, 'mouseout');\r\n            }\r\n        }\r\n\r\n        selector.on(self.eventFactory);\r\n    }\r\n    \r\n    /*=====  End of Main Functions  ======*/\r\n\r\n    /*========================================\r\n    =            User's Functions            =\r\n    ========================================*/\r\n    /**\r\n     * Custom Event Listener\r\n     * @param  {[type]}   eventType [description]\r\n     * @param  {Function} callback  [description]\r\n     * @return {[type]}             [description]\r\n     */\r\n    on(eventType, callback) {\r\n        super.on(eventType, callback);\r\n        \r\n        var self = this;\r\n        var selector    = self.selectAllPath();\r\n\r\n        // Update Event Factory\r\n        let eventFactory = {\r\n            'click.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            },\r\n            'mouseover.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            },\r\n            'mouseout.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            }\r\n        }\r\n\r\n        let eventName = eventType + '.event';\r\n\r\n        selector.on(eventName, eventFactory[eventName]);\r\n    }\r\n\r\n    /**\r\n     * Main draw function of Pie Chart\r\n     */\r\n    draw() {\r\n        super.draw();\r\n\r\n        var self = this;\r\n        \r\n        var title   = new Title(self.options.title, self);\r\n        var legend  = new Legend(self.options.legend, self, self.dataTarget);\r\n        var table   = new Table(self.options.table, self, self.dataTarget);\r\n\r\n        self.title = title;\r\n        self.legend = legend;\r\n        self.table = table;\r\n\r\n        // Draw title\r\n        self.title.draw();\r\n\r\n        // Update interaction of this own chart\r\n        self.update(self.dataTarget);\r\n        self.updateInteraction();\r\n        \r\n        // Draw legend\r\n        self.legend.draw();\r\n        self.legend.updateInteractionForDonutPieChart(self, self.selectAllPath(), self.pie, self.currentData, self.arc);    \r\n        \r\n        // Draw table\r\n        self.table.draw();\r\n        self.table.updateInteractionForDonutPieChart(self);\r\n    }\r\n    \r\n    /**\r\n     * Set option via stand-alone function\r\n     * @param {[type]} key   [description]\r\n     * @param {[type]} value [description]\r\n     */\r\n    setOption(key, value) {\r\n        super.setOption(key, value);\r\n\r\n        var self = this;\r\n\r\n        Helper.set(key, value, self.options);\r\n\r\n        self.updateConfig(self.options);\r\n    }\r\n\r\n    /**\r\n     * Update chart based on new data with optional dataConfig\r\n     * @param  {[type]} data       [description]\r\n     * @param  {[type]} dataConfig [description]\r\n     */\r\n    updateData(newData, newDataConfig) {\r\n        var self = this;\r\n\r\n        var newCfg = {};\r\n\r\n        if (!Helper.isEmpty(newDataConfig)) {\r\n\r\n            newCfg.data = {\r\n                plain: newData,\r\n                keys: newDataConfig,\r\n            };\r\n\r\n        } else {\r\n\r\n            newCfg.data = {\r\n                plain: newData,\r\n            };\r\n\r\n        }\r\n        \r\n        // Update Chart\r\n        self.updateDataConfig(newCfg);\r\n        self.update(self.dataTarget);\r\n\r\n        // Update Legend\r\n        self.legend.update(self.dataTarget);\r\n        self.legend.updateInteractionForDonutPieChart(self, self.selectAllPath(), self.pie, self.currentData, self.arc);    \r\n    \r\n        // Update Table\r\n        self.table.update(self.dataTarget);\r\n        self.table.updateInteractionForDonutPieChart(self);\r\n    }\r\n    /*=====  End of User's Functions  ======*/\r\n    \r\n    \r\n    \r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/C9.PieChart.js\n **/","import Chart from './C9.Chart';\r\n\r\nimport Axis from './utils/C9.Axis';\r\nimport Title from './utils/C9.Title';\r\nimport Legend from './utils/C9.Legend';\r\nimport Table from './utils/C9.Table';\r\nimport Tooltip from './utils/C9.Tooltip';\r\n\r\nimport Helper from '../helper/C9.Helper';\r\nimport DataAdapter from '../helper/C9.DataAdapter';\r\n\r\nexport default class TimeLine extends Chart {\r\n    constructor(options) {\r\n        super(options);\r\n\r\n        var self = this;\r\n\r\n        var config = {\r\n            separatorColor: \"rgb(154, 154, 154)\",\r\n            backgroundColor: null,\r\n            starting: 0,\r\n            ending: 0,\r\n            stack: true,\r\n            itemHeight: 25,\r\n            itemMargin: 15,\r\n            labelMargin: 50,\r\n            striped: null\r\n        };\r\n\r\n        self.updateConfig(config);\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n    get maxStack() {\r\n        return this._maxStack;\r\n    }\r\n\r\n    get subChartX() {\r\n        return this._subChartX;\r\n    }\r\n\r\n    get subChartXAxis() {\r\n        return this._subChartXAxis;\r\n    }\r\n\r\n    get subChartWidth() {\r\n        return this._subChartWidth;\r\n    }\r\n\r\n    get subChartHeight() {\r\n        return this._subChartHeight;\r\n    }\r\n\r\n    get subChartMargin() {\r\n        return this._subChartMargin;\r\n    }\r\n\r\n    get brush() {\r\n        return this._brush;\r\n    }\r\n\r\n    get stackList() {\r\n        return this._stackList;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n\r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n    set maxStack(arg) {\r\n        if (arg) {\r\n            this._maxStack = arg;\r\n        }\r\n    }\r\n\r\n    set subChartX(arg) {\r\n        if (arg) {\r\n            this._subChartX = arg;\r\n        }\r\n    }\r\n\r\n    set subChartXAxis(arg) {\r\n        if (arg) {\r\n            this._subChartXAxis = arg;\r\n        }\r\n    }\r\n\r\n    set subChartWidth(arg) {\r\n        if (arg) {\r\n            this._subChartWidth = arg;\r\n        }\r\n    }\r\n\r\n    set subChartHeight(arg) {\r\n        if (arg) {\r\n            this._subChartHeight = arg;\r\n        }\r\n    }\r\n\r\n    set subChartMargin(arg) {\r\n        if (arg) {\r\n            this._subChartMargin = arg;\r\n        }\r\n    }\r\n\r\n    set brush(arg) {\r\n        if (arg) {\r\n            this._brush = arg;\r\n        }\r\n    }\r\n\r\n    set stackList(arg) {\r\n        if (arg) {\r\n            this._stackList = arg;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n    \r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n\r\n    updateConfig(config) {\r\n        super.updateConfig(config);\r\n\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(config, self.options);\r\n\r\n        self.chartType          = \"timeline\";\r\n        self.maxStack           = 1;\r\n        self.stackList          = {};\r\n\r\n        var dataOption          = self.dataOption;\r\n        dataOption.colorRange   = self.colorRange;\r\n\r\n        var da = new DataAdapter(dataOption);\r\n        self.dataTarget = da.getDataTarget(self.chartType);\r\n\r\n        var \r\n            maxStack = 0,\r\n            minTime = 0,\r\n            maxTime = 0,\r\n            width = self.width - self.margin.left - self.margin.right,\r\n            height = self.height - self.margin.top - self.margin.bottom;\r\n\r\n        // count number of stack and calculate min time, max time from data\r\n        if (self.options.stack || self.options.ending === 0 || self.options.starting === 0) {\r\n            \r\n            self.dataTarget.forEach(function (datum, index) {\r\n\r\n                if (self.options.stack && Object.keys(self.stackList).indexOf(index) == -1) {\r\n                    self.stackList[index] = maxStack;\r\n                    maxStack++;\r\n                }\r\n\r\n                datum.value.forEach(function (time, i) {\r\n                    if(self.options.starting === 0)\r\n                        if (time.start < minTime || minTime === 0)\r\n                            minTime = time.start;\r\n                    if(self.options.ending === 0) {\r\n                        if (time.start > maxTime)\r\n                            maxTime = time.start;\r\n                        if (time.end > maxTime)\r\n                            maxTime = time.end;\r\n                    }\r\n                });\r\n            });\r\n\r\n            if (self.options.ending === 0) {\r\n              self.options.ending = maxTime;\r\n            }\r\n            if (self.options.starting === 0) {\r\n              self.options.starting = minTime;\r\n            }\r\n        }\r\n\r\n        self.maxStack = maxStack;\r\n\r\n        self.x = d3.time.scale()\r\n                .domain([self.options.starting, self.options.ending])\r\n                .range([0, self.width]);\r\n    }\r\n\r\n    updateDataConfig(dataCfg) {\r\n\r\n        var self = this;\r\n\r\n        self.options = Helper.mergeDeep(self.options, dataCfg);\r\n\r\n        self.chartType          = \"timeline\";\r\n        self.maxStack           = 1;\r\n        self.stackList          = {};\r\n\r\n        var dataOption          = self.dataOption;\r\n        dataOption.colorRange   = self.colorRange;\r\n\r\n        var da = new DataAdapter(dataOption);\r\n        self.dataTarget = da.getDataTarget(self.chartType);\r\n\r\n        var \r\n            maxStack = 0,\r\n            minTime = 0,\r\n            maxTime = 0,\r\n            width = self.width - self.margin.left - self.margin.right,\r\n            height = self.height - self.margin.top - self.margin.bottom;\r\n\r\n        // count number of stack and calculate min time, max time from data\r\n        if (self.options.stack || self.options.ending === 0 || self.options.starting === 0) {\r\n            \r\n            self.dataTarget.forEach(function (datum, index) {\r\n\r\n                if (self.options.stack && Object.keys(self.stackList).indexOf(index) == -1) {\r\n                    self.stackList[index] = maxStack;\r\n                    maxStack++;\r\n                }\r\n\r\n                datum.value.forEach(function (time, i) {\r\n                    if(self.options.starting === 0)\r\n                        if (time.start < minTime || minTime === 0)\r\n                            minTime = time.start;\r\n                    if(self.options.ending === 0) {\r\n                        if (time.start > maxTime)\r\n                            maxTime = time.start;\r\n                        if (time.end > maxTime)\r\n                            maxTime = time.end;\r\n                    }\r\n                });\r\n            });\r\n\r\n            if (self.options.ending === 0) {\r\n              self.options.ending = maxTime;\r\n            }\r\n            if (self.options.starting === 0) {\r\n              self.options.starting = minTime;\r\n            }\r\n        }\r\n\r\n        self.maxStack = maxStack;\r\n\r\n        self.x = d3.time.scale()\r\n                .domain([self.options.starting, self.options.ending])\r\n                .range([0, self.width]);\r\n    }\r\n\r\n    update(data) {\r\n        var self = this;\r\n\r\n        var width = self.width - self.margin.left - self.margin.right,\r\n            height = self.height - self.margin.top - self.margin.bottom;\r\n\r\n        var scale = width / (self.options.ending - self.options.starting);\r\n\r\n        var color = self.colorRange;\r\n\r\n        var stackList = self.stackList;\r\n\r\n        self.body.selectAll(\".c9-timeline-border-bar\").data([]).exit().remove();\r\n        self.body.selectAll(\".c9-timeline-chart.c9-background-container\").data([]).exit().remove();\r\n        self.body.selectAll(\".c9-timeline-chart.c9-stripe-background-container\").data([]).exit().remove();\r\n        self.body.selectAll(\".c9-timeline-chart.c9-rect-container\").data([]).exit().remove();\r\n        self.svg.selectAll(\".c9-timeline-chart.c9-label-container\").remove();\r\n        self.body.selectAll(\".c9-timeline-row-separator\").remove();\r\n\r\n        // Update clip-parth\r\n        self.svg.select('#clip').select('rect').attr('height', (self.options.itemHeight + self.options.itemMargin) * data.length);\r\n\r\n        //draw border\r\n        self.body.append(\"rect\")\r\n            .attr(\"class\", \"c9-timeline-border-bar\")\r\n            .attr(\"x\", 0)\r\n            .attr(\"width\", width)\r\n            .attr(\"y\", 0 - self.options.itemMargin / 2)\r\n            .attr(\"height\", (self.options.itemHeight + self.options.itemMargin) * data.length)\r\n            .attr(\"stroke\", \"rgb(154, 154, 154)\")\r\n            .attr(\"stroke-width\", 2)\r\n            .attr(\"fill\", \"none\");\r\n\r\n        var labelContainer = self.svg.append(\"g\")\r\n                                .attr('class', 'c9-timeline-chart c9-label-container');\r\n\r\n        data.forEach( function(datum, index) {\r\n            var barYAxis = ((self.options.itemHeight + self.options.itemMargin) * stackList[index]);\r\n            //draw background\r\n            if (self.options.backgroundColor) { \r\n                var bgContainer = self.body.append(\"g\")\r\n                                    .attr('class', 'c9-timeline-chart c9-background-container');\r\n\r\n                bgContainer.selectAll(\".c9-background-container\")\r\n                    .data(datum.value).enter()\r\n                    .append(\"rect\")\r\n                    .attr(\"class\", \"c9-timeline-background-bar\")\r\n                    .attr(\"x\", 0)\r\n                    .attr(\"width\", width)\r\n                    .attr(\"y\", barYAxis - self.options.itemMargin / 2)\r\n                    .attr(\"height\", self.options.itemHeight + self.options.itemMargin)\r\n                    .attr(\"fill\", Helper.isArray(self.options.backgroundColor) ? self.options.backgroundColor[index % (self.maxStack - 1)] : self.options.backgroundColor);\r\n            }\r\n\r\n            if (self.options.striped) { \r\n                var bgContainer = self.body.append(\"g\")\r\n                                    .attr('class', 'c9-timeline-chart c9-stripe-background-container');\r\n                bgContainer.selectAll(\".c9-stripe-background-container\")\r\n                    .data(datum.value).enter()\r\n                    .insert(\"rect\")\r\n                    .attr(\"class\", \"c9-timeline-stripe-background-bar\")\r\n                    .attr(\"x\", 0)\r\n                    .attr(\"width\", width)\r\n                    .attr(\"y\", barYAxis - self.options.itemMargin / 2)\r\n                    .attr(\"height\", self.options.itemHeight + self.options.itemMargin)\r\n                    .attr(\"fill\", index % 2 ? \"rgb(255, 255, 255)\" : \"rgb(230, 230, 230)\");\r\n            }\r\n\r\n            //draw item\r\n            var itemContainer = self.body.append(\"g\")\r\n                                    .attr('class', 'c9-timeline-chart c9-rect-container')\r\n                                    .attr(\"clip-path\", \"url(#clip)\");\r\n\r\n            itemContainer.selectAll(\".c9-rect-container\")\r\n                .data(datum.value).enter()\r\n                .append(function (d, i) {\r\n                    return document.createElementNS(d3.ns.prefix.svg, d.end != \"Invalid Date\" ? \"rect\" : \"circle\");\r\n                })\r\n                .attr('class', 'c9-timeline-custom-rect')\r\n                .attr(\"x\", function(d, i) { return self.getXPos(d,i,scale); })\r\n                .attr(\"y\", function(d, i) { return self.getStackPosition(d, i, index); })\r\n                .attr(\"width\", function (d, i) {\r\n                    return (d.end - d.start) * scale;\r\n                })\r\n                .attr(\"cy\", function (d, i) {\r\n                    return self.getStackPosition(d, i, index) + self.options.itemHeight / 2;\r\n                })\r\n                .attr(\"cx\", function(d, i) { return self.getXPos(d,i,scale); })\r\n                .attr(\"r\", self.options.itemHeight / 2)\r\n                .attr(\"height\", self.options.itemHeight)\r\n                .style(\"fill\", color(index));\r\n\r\n            if (self.options.separatorColor && index < self.maxStack - 1) {\r\n                var lineYAxis = ( self.options.itemHeight + self.options.itemMargin / 2 + (self.options.itemHeight + self.options.itemMargin) * stackList[index]);\r\n                self.body.append(\"svg:line\")\r\n                  .attr(\"class\", \"c9-timeline-row-separator\")\r\n                  .attr(\"x1\", 0)\r\n                  .attr(\"x2\", width)\r\n                  .attr(\"y1\", lineYAxis)\r\n                  .attr(\"y2\", lineYAxis)\r\n                  .attr(\"stroke-width\", 3)\r\n                  .attr(\"stroke\", Helper.isArray(self.options.separatorColor) ? self.options.separatorColor[index % (self.maxStack - 1)] : self.options.separatorColor);\r\n            }\r\n\r\n            //draw the label left side item\r\n            if (!Helper.isEmpty(datum.name) && datum.name != \"\") { \r\n                var rowsDown = self.margin.top + (self.options.itemHeight + self.options.itemMargin) * (stackList[index] === undefined ? 0 : stackList[index]) + self.options.itemHeight * 0.75;\r\n\r\n                labelContainer.append(\"text\")\r\n                    .attr(\"class\", \"c9-timeline-label\")\r\n                    .attr(\"transform\", \"translate(\" + self.options.labelMargin + \",\" + rowsDown + \")\")\r\n                    .text(datum.name);\r\n            }\r\n            //draw icon\r\n            else if (!Helper.isEmpty(datum.icon) && datum.icon != \"\") {\r\n                labelContainer.append(\"image\")\r\n                    .attr(\"class\", \"c9-timeline-label\")\r\n                    .attr(\"transform\", \"translate(\"+ self.options.labelMargin +\",\"+ (self.margin.top + (self.options.itemHeight + self.options.itemMargin) * stackList[index])+\")\")\r\n                    .attr(\"xlink:href\", datum.icon)\r\n                    .attr(\"width\", self.options.itemHeight)\r\n                    .attr(\"height\", self.options.itemHeight);\r\n            }\r\n        });\r\n\r\n        self.updateInteraction();\r\n    }\r\n\r\n    /**\r\n     * Update sub chart\r\n     */\r\n    updateSubChart(data) {\r\n        var self = this;\r\n\r\n        if (self.options.subchart.show) {\r\n            var width = self.width - self.margin.left - self.margin.right,\r\n                height = self.height - self.margin.top - self.margin.bottom;\r\n\r\n            // Set actual size for chart after initialization\r\n            var chartBox = self.body.node().getBBox();\r\n            // self.actualWidth = chartBox.width - 4 * self.point.radius;\r\n            self.actualHeight = chartBox.height;\r\n\r\n            /*----------  Sub Chart  ----------*/\r\n            \r\n            self.subChartWidth = width,\r\n            self.subChartHeight = self.options.subchart.height,\r\n            self.subChartMargin = {\r\n                'top': self.actualHeight + 100,\r\n                'left': self.margin.left\r\n            };\r\n\r\n            self.subChartX = d3.time.scale().range([0, self.subChartWidth]);\r\n\r\n            self.subChartX.domain([self.options.starting, self.options.ending]);\r\n\r\n            self.subChartXAxis = d3.svg.axis()\r\n                            .scale(self.subChartX)\r\n                            .orient(\"bottom\");\r\n\r\n            self.brush = d3.svg.brush()\r\n                            .x(self.subChartX)\r\n                            .on(\"brush\", function() {\r\n                                // Update axis\r\n                                self.x.domain(self.brush.empty() ? self.subChartX.domain() : self.brush.extent());\r\n                                self.axis.update(self.x, self.y, 500);\r\n                                var scale = width / (self.options.ending - self.options.starting);\r\n                                // Update main path of Line Chart\r\n                                self.body.selectAll(\".c9-timeline-custom-rect\")\r\n                                        .attr(\"x\", function(d, i) { return self.x(d.start); });\r\n                                        // .attr(\"x\", function(d, i) { return self.getXPos(d,i, scale); });\r\n                                        // .attr(\"y\", function(d, i) { return self.getStackPosition(d,i,stackList, index); })\r\n                                        // .attr(\"cx\", function(d, i) { return self.getXPos(d,i, scale); })\r\n                                        // .attr(\"cy\", function (d, i) {\r\n                                        //     return self.getStackPosition(d, i, stackList, index) + self.options.itemHeight / 2;\r\n                                        // });\r\n                            });\r\n\r\n            var scale = width / (self.options.ending - self.options.starting);\r\n\r\n            var color = self.colorRange;\r\n\r\n            self.svg.attr('height', self.height + self.subChartHeight);\r\n\r\n            self.svg.selectAll(\".c9-subchart-custom\").remove();\r\n            self.svg.selectAll(\".c9-subchart-custom .c9-subchart-axis\").remove();\r\n\r\n            var subChart = self.svg.append(\"g\")\r\n                            .attr(\"class\", \"c9-subchart-custom\")\r\n                            // .attr(\"clip-path\", \"url(#clip)\")\r\n                            .attr(\"transform\", \"translate(\" + self.subChartMargin.left + \",\" + self.subChartMargin.top + \")\");\r\n\r\n            var itemContainer = subChart.append('g')\r\n                                    .attr('class', 'c9-subchart-custom c9-subchart-timeline-container');\r\n                                    // .attr(\"clip-path\", \"url(#clip)\");\r\n\r\n            data.forEach(function(datum, index) {\r\n                if (!datum.enable) return;\r\n\r\n                itemContainer.selectAll(\".c9-subchart-timeline-container\")\r\n                    .data(datum.value).enter()\r\n                    .append(function (d, i) {\r\n                        return document.createElementNS(d3.ns.prefix.svg, d.end != \"Invalid Date\" ? \"rect\" : \"circle\");\r\n                    })\r\n                    .attr('class', 'c9-timeline-custom-rect')\r\n                    // .attr(\"x\", function(d, i) { return self.getXPos(d,i, scale); })\r\n                    .attr(\"x\", function(d, i) { return self.subChartX(d.start); })\r\n                    .attr(\"y\", function(d, i) { return self.getStackPosition(d, i , index); })\r\n                    // .attr(\"width\", function (d, i) {\r\n                    //     return (d.end - d.start) * scale;\r\n                    // })\r\n                    .attr(\"width\", function (d, i) {\r\n                        return self.subChartX(d.end) - self.subChartX(d.start);\r\n                    })\r\n                    .attr(\"cy\", function (d, i) {\r\n                        return self.getStackPosition(d, i, index) + self.options.itemHeight / 2;\r\n                    })\r\n                    // .attr(\"cx\", function(d, i) { return self.getXPos(d,i, scale); })\r\n                    .attr(\"cx\", function(d, i) { return self.subChartX(d.start); })\r\n                    .attr(\"r\", self.options.itemHeight / 2)\r\n                    .attr(\"height\", self.options.itemHeight / 2)\r\n                    .style(\"fill\", color(index));\r\n            });\r\n            \r\n\r\n            itemContainer.append(\"g\")\r\n                .attr(\"class\", \"c9-subchart-axis\")\r\n                .attr(\"transform\", \"translate(0,\" + self.subChartHeight + \")\")\r\n                .call(self.subChartXAxis);\r\n\r\n            //append the brush for the selection of subsection  \r\n            itemContainer.append(\"g\")\r\n                .attr(\"class\", \"c9-subchart-brush\")\r\n                .call(self.brush)\r\n                .selectAll(\"rect\")\r\n                .attr(\"height\", self.subChartHeight);\r\n\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Select all path as type RECT in Timeline Chart via its CLASS\r\n     */\r\n    selectAllRect() {\r\n        var self = this;\r\n\r\n        return self.body\r\n                    .selectAll('.c9-timeline-custom-rect');\r\n    }\r\n\r\n    /**\r\n     * Update Interaction: Hover\r\n     * @return {} \r\n     */\r\n    updateInteraction() {\r\n        var self    = this,\r\n            selector= self.selectAllRect(),\r\n            hoverOptions        = self.hover.options,\r\n            hoverEnable         = self.hover.enable,\r\n            onMouseOverCallback = hoverOptions.onMouseOver.callback,\r\n            onMouseOutCallback  = hoverOptions.onMouseOut.callback,\r\n            onClickCallback     = self.click.callback;\r\n\r\n        var tooltip = new Tooltip(self.options.tooltip);\r\n\r\n        // Main Event Dispatch for paths in pie chart\r\n        self.eventFactory = {\r\n            'click': function(d, i) {\r\n                if (Helper.isFunction(onClickCallback)) {\r\n                    onClickCallback.call(this, d);\r\n                }\r\n            },\r\n\r\n            'mouseover': function(d, i) {\r\n                if (!hoverEnable) return;\r\n\r\n                if (Helper.isFunction(onMouseOverCallback)) {\r\n                    onMouseOverCallback.call(this, d);\r\n                }\r\n\r\n                d3.select(this).style(\"fill\", function (d, i) { return self.getLightenColor(d.color || color(i)); });\r\n\r\n                tooltip.draw(d, self, 'mouseover');\r\n            },\r\n            \r\n            'mouseout': function(d, i) {\r\n                if (!hoverEnable) return;\r\n\r\n                if (Helper.isFunction(onMouseOutCallback)) {\r\n                    onMouseOutCallback.call(this, d);\r\n                }\r\n\r\n                d3.select(this).style(\"fill\", function (d, i) { return d.color || color(i); });\r\n\r\n                tooltip.draw(d, self, 'mouseout');\r\n            }\r\n        };\r\n\r\n        selector.on(self.eventFactory);\r\n    }\r\n\r\n    getXPos(d, i, scale) {\r\n        var self = this;\r\n        return (d.start - self.options.starting) * scale;\r\n    }\r\n\r\n    getStackPosition(d, i, index) {\r\n        var self = this;\r\n\r\n        var stackList = self.stackList;\r\n        \r\n        if (self.options.stack) {\r\n            return (self.options.itemHeight + self.options.itemMargin) * stackList[index];\r\n        }\r\n        return 0;\r\n    }\r\n    \r\n    /*=====  End of Main Functions  ======*/\r\n\r\n    /*========================================\r\n    =            User's Functions            =\r\n    ========================================*/\r\n\r\n    /**\r\n     * Custom Event Listener\r\n     * @param  {[type]}   eventType [description]\r\n     * @param  {Function} callback  [description]\r\n     * @return {[type]}             [description]\r\n     */\r\n    on(eventType, callback) {\r\n        super.on(eventType, callback);\r\n        \r\n        var self = this;\r\n        var selector    = self.selectAllRect();\r\n\r\n        // Update Event Factory\r\n        let eventFactory = {\r\n            'click.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            },\r\n            'mouseover.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            },\r\n            'mouseout.event': function(d) {\r\n                if (Helper.isFunction(callback)) {\r\n                    callback.call(this, d);\r\n                }\r\n            }\r\n        }\r\n\r\n        let eventName = eventType + '.event';\r\n\r\n        selector.on(eventName, eventFactory[eventName]);\r\n    }\r\n    \r\n    /**\r\n     * Main draw function\r\n     */\r\n    draw() {\r\n        super.draw();\r\n\r\n        var self = this;\r\n        \r\n        var axis    = new Axis(self.options.axis, self, self.width - self.margin.left - self.margin.right, (self.options.itemHeight + self.options.itemMargin) * self.maxStack);\r\n        var title   = new Title(self.options.title, self);  \r\n        var legend  = new Legend(self.options.legend, self, self.colorRange, self.dataTarget);\r\n\r\n        self.axis = axis;\r\n        self.title = title;\r\n        self.legend = legend;\r\n\r\n        // Draw title\r\n        self.title.draw();\r\n\r\n        // Draw axis\r\n        self.axis.draw();\r\n\r\n        self.update(self.dataTarget);\r\n        self.updateSubChart(self.dataTarget);\r\n        self.updateInteraction();\r\n    }\r\n\r\n    /**\r\n     * Set option via stand-alone function\r\n     * @param {[type]} key   [description]\r\n     * @param {[type]} value [description]\r\n     */\r\n    setOption(key, value) {\r\n        super.setOption(key, value);\r\n\r\n        var self = this;\r\n\r\n        Helper.set(key, value, self.options);\r\n\r\n        self.updateConfig(self.options);\r\n    }\r\n\r\n    /**\r\n     * Update chart based on new data with optional dataConfig\r\n     * @param  {[type]} data       [description]\r\n     * @param  {[type]} dataConfig [description]\r\n     */\r\n    updateData(newData, newDataConfig) {\r\n        var self = this;\r\n\r\n        var newCfg = {};\r\n\r\n        if (!Helper.isEmpty(newDataConfig)) {\r\n\r\n            newCfg.data = {\r\n                plain: newData,\r\n                keys: newDataConfig,\r\n            };\r\n\r\n        } else {\r\n\r\n            newCfg.data = {\r\n                plain: newData,\r\n            };\r\n\r\n        }\r\n        \r\n        // Update chart\r\n        self.updateDataConfig(newCfg);\r\n        self.update(self.dataTarget);\r\n        self.updateSubChart(self.dataTarget);\r\n\r\n        // Update Axis\r\n        self.axis.update(self.x, self.y, 100);\r\n    }\r\n    /*=====  End of User's Functions  ======*/\r\n    \r\n    \r\n    \r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/C9.TimeLine.js\n **/","import Helper from '../helper/C9.Helper';\r\nimport Tooltip from '../charts/utils/C9.Tooltip';\r\nimport DataAdapter from '../helper/C9.DataAdapter';\r\nexport default class Map {\r\n    constructor(options) {\r\n        var self    = this;\r\n        var config  = {\r\n            // container\r\n            id: \"body\",\r\n            // Layers:\r\n            // BingMaps, OSM, Raster, Tile, TileImage, Vector, VectorTile,...\r\n            // REF: http://openlayers.org/en/latest/apidoc/ol.source.html?stableonly=true\r\n            layers: {\r\n                type: \"Tile\",\r\n                source: {\r\n                    name: \"OSM\"\r\n                }\r\n            }, \r\n            view: {\r\n                lat: 0,\r\n                lon: 0,\r\n                zoom: 2\r\n            },\r\n            data: null,\r\n            tooltip: {\r\n                format: null\r\n            }\r\n        };\r\n\r\n        self._options = Helper.mergeDeep(config, options);\r\n        self._dataSource      = self._options.data;\r\n        self.initMapConfig();\r\n    }\r\n\r\n    /*==============================\r\n    =            Getter            =\r\n    ==============================*/\r\n\r\n    // get id() {\r\n    //     return this._options.id;\r\n    // }\r\n\r\n    // get height() {\r\n    //     return this._height;\r\n    // }\r\n\r\n    // get width() {\r\n    //     return this._width;\r\n    // }\r\n\r\n    // get view() {\r\n    //     return this._view;\r\n    // }\r\n\r\n    // get markers() {\r\n    //     return this._markers;\r\n    // }\r\n\r\n    // get layers() {\r\n    //     return this._layers;\r\n    // }\r\n\r\n    get dataSource() {\r\n        return this._dataSource;\r\n    }\r\n\r\n    get data() {\r\n        return this._data;\r\n    }\r\n\r\n    get options() {\r\n        return this._options;\r\n    }\r\n    /*=====  End of Getter  ======*/\r\n    \r\n    \r\n    /*==============================\r\n    =            Setter            =\r\n    ==============================*/\r\n\r\n    // set id(newId) {\r\n    //     if (newId) {\r\n    //         this._options.id = newId;\r\n    //     }\r\n    // }\r\n\r\n    // set height(newHeight) {\r\n    //     if (newHeight) {\r\n    //         this._height = newHeight;    \r\n    //     }\r\n    // }\r\n\r\n    // set width(newWidth) {\r\n    //     if (newWidth) {\r\n    //         this._width = newWidth;\r\n    //     }\r\n    // }\r\n\r\n    // set view(newView) {\r\n    //     if (newView) {\r\n    //         this._view = newView;\r\n    //     }\r\n    // }\r\n\r\n    // set markers(newMarkers) {\r\n    //     if (newMarkers) {\r\n    //         this._markers = newMarkers;\r\n    //     }\r\n    // }\r\n\r\n    // set layers(newLayers) {\r\n    //     if (newLayers) {\r\n    //         this._layers = newLayers;\r\n    //     }\r\n    // }\r\n\r\n    set dataSource(newData) {\r\n        if (newData) {\r\n            this._dataSource = newData;\r\n        }\r\n    }\r\n\r\n    set data(newData) {\r\n        if (newData) {\r\n            this._data = newData;\r\n        }\r\n    }\r\n    /*=====  End of Setter  ======*/\r\n    \r\n    \r\n    /*======================================\r\n    =            Main Functions            =\r\n    ======================================*/\r\n    \r\n    initMapConfig() {\r\n        var self = this;\r\n\r\n        //c9Layers contain all layers\r\n        self.c9Layers = [];\r\n        //c9Markers contain all markers\r\n        // self.c9Markers = new ol.source.Vector({});\r\n        //c9Objects contain all polygons, lines\r\n        self.c9Objs = new ol.source.Vector({});\r\n        //init all thing relating to user's data\r\n\r\n        //layer\r\n        self.initLayer();\r\n        \r\n        //quick markers\r\n        // self.initMarker();\r\n\r\n        //object\r\n        // self.initObj();\r\n\r\n        //init popup\r\n        var popup = document.createElement('div');\r\n        popup.id = 'c9MapPopup';\r\n        popup.className = 'c9-map-tooltip-container c9-custom-tooltip-container c9-tooltip-top';\r\n        document.body.appendChild(popup);\r\n    }\r\n\r\n    draw() {\r\n        var self = this;\r\n        var view = self.options.view,\r\n            id   = self.options.id;\r\n\r\n        self.c9View = new ol.View({\r\n            center: ol.proj.fromLonLat([view.lon, view.lat]),\r\n            zoom: view.zoom > 2 ? view.zoom : 2,\r\n            minZoom: 2,\r\n        });\r\n        self.c9Map = new ol.Map({\r\n            target: id,\r\n            layers: self.c9Layers,\r\n            view: self.c9View,\r\n            interactions : ol.interaction.defaults({doubleClickZoom: false})\r\n        });\r\n\r\n        /******************** ADD C9 OBJECTS ********************/\r\n        self.c9ObjsLayer = new ol.layer.Vector({ \r\n            source: self.c9Objs,\r\n            map: self.c9Map\r\n        });\r\n        /********************************************************/\r\n\r\n        /********************* ADD C9 POPUP *********************/\r\n        self.c9Popup = new ol.Overlay({\r\n            positioning: 'bottom-center',\r\n            element: document.getElementById('c9MapPopup')\r\n        });\r\n\r\n        //add overlay to contain popup\r\n        self.c9Map.addOverlay(self.c9Popup);\r\n        /********************************************************/\r\n\r\n        /********************* HOVER STYLE **********************/\r\n        self.c9CustomHover = new ol.layer.Vector({\r\n            source: new ol.source.Vector(),\r\n            map: self.c9Map,\r\n            style: new ol.style.Style({\r\n                stroke: new ol.style.Stroke({\r\n                    color: 'rgb(0, 153, 255)',\r\n                    width: 3\r\n                }),\r\n                fill: new ol.style.Fill({\r\n                    color: 'rgba(255, 255, 255, 0.6)'\r\n                })\r\n            })\r\n        });\r\n        /********************************************************/\r\n        //adapt data to obj\r\n        self.update(self.dataSource);\r\n        //define interaction\r\n        self.updateInteraction();\r\n\r\n    }\r\n    /*=====  End of Main Functions  ======*/\r\n\r\n    /**\r\n     * Create layer\r\n     * @param  {String} type of layer\r\n     * @param  {source} source data defined by C9\r\n     */\r\n    createLayer(options){\r\n        var self = this;\r\n        if (Helper.isEmpty(options)) return;\r\n        \r\n        var type = options.type || 'Tile',\r\n            source = options.source || {name: 'OSM'};\r\n            // style = options.style;\r\n\r\n        var layer = new ol.layer[type];\r\n        layer.setSource(self.setupSource(source));\r\n        // if (!Helper.isEmpty(style)) layer.setStyle(style);\r\n\r\n        //adapt source data to c9obj\r\n        //support maximum 2 source level\r\n        var containFeature = true, s;\r\n        try {\r\n            s = layer.getSource();\r\n            s.getFeatures();\r\n        }\r\n        catch (err) {\r\n            try {\r\n                s = layer.getSource().getSource();\r\n                s.getFeatures();\r\n            }\r\n            catch (err) {\r\n                containFeature = false;    \r\n            }\r\n        }\r\n        if (containFeature) {\r\n            var readFormat = function(feature) {\r\n                var result = {};\r\n                feature.getKeys().forEach(function(k) {\r\n                    result[k] = feature.getProperties()[k];\r\n                });\r\n                return result;\r\n            }\r\n            \r\n            //register layer loaded event to set data for obj\r\n            s.once('change', function(e) {\r\n                if (s.getState() == 'ready') {\r\n                    var objs = s.getFeatures();\r\n                    // self.c9Objs.addFeatures(objs);\r\n\r\n                    objs.forEach(function(o) {\r\n                        //set data & some attrs\r\n                        var type = o.getGeometry().getType();\r\n                        o.set('data', readFormat(o));\r\n                        // o.set('type', 'c9-' + (type == 'point' ? 'marker' : type.toLowerCase()));\r\n                        // if (type.toLowerCase() == 'polygon' || type.toLowerCase() == 'multipolygon' || type.toLowerCase() == 'line') {\r\n                        //     o.set('c9-style', {\r\n                        //         strokeWidth: 2,\r\n                        //         strokeColor: 'steelblue',\r\n                        //         fillColor: 'rgba(0, 0, 255, 0.1)'\r\n                        //     });\r\n                            // set style\r\n                            // o.setStyle(new ol.style.Style({\r\n                            //     stroke: new ol.style.Stroke({\r\n                            //         width: 2,\r\n                            //         color: 'steelblue'\r\n                            //     }),\r\n                            //     fill: new ol.style.Fill({\r\n                            //         color: 'rgba(0, 0, 255, 0.1)'\r\n                            //     })\r\n                            // }))    \r\n                        // } \r\n                        // else if (type.toLowerCase() == 'point') {\r\n                        //     o.setStyle(new ol.style.Style({\r\n                        //         image: new ol.style.Icon({\r\n                        //             anchor: [0.5, 1], //middle-width and bottom-height of image\r\n                        //             src: 'http://s21.postimg.org/blklb8scn/marker_icon.png',\r\n                        //             scale: 1\r\n                        //         })\r\n                        //     }))\r\n                        // }\r\n                    });\r\n                }\r\n            })\r\n        }\r\n\r\n        self.c9Layers.push(layer);\r\n    }\r\n\r\n    /**\r\n     * Init Layer base on first user's data\r\n     */\r\n    initLayer() {\r\n        var self = this;\r\n        var layers = self.options.layers;\r\n\r\n        if (layers instanceof Array) {\r\n            layers.forEach(function(l, i) {\r\n                self.createLayer({type: l.type, source: l.source, style: l.style});\r\n            })\r\n        }\r\n        else {\r\n            self.createLayer({type: layers.type, source: layers.source, style: layers.style});\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Setup source for layer\r\n     * @param  {Object} source data style defined by c9\r\n     * @return {String} return source (ol.source)\r\n     */\r\n    setupSource(s){\r\n        var source = undefined;\r\n        switch (s.name) {\r\n            case 'BingMaps':\r\n                source = new ol.source.BingMaps({\r\n                    key: s.key,\r\n                    imagerySet: s.imagerySet || 'Road'\r\n                });\r\n                break;\r\n            case 'Stamen':\r\n                source = new ol.source.Stamen({\r\n                    layer: s.layer || 'watercolor'\r\n                });\r\n                break;\r\n            /********** TileJSON require ol >= v3.8.2 **********/\r\n            case 'TileJSON':\r\n                source = new ol.source.TileJSON({\r\n                    url: s.url,\r\n                    crossOrigin: s.crossOrigin || 'anonymous'\r\n                });\r\n                break;\r\n            case 'TileArcGISRest':\r\n                source = new ol.source.TileArcGISRest({\r\n                    url: s.url\r\n                });\r\n                break;\r\n            case 'Vector':\r\n                source = new ol.source.Vector({\r\n                    url: s.url,\r\n                    format: s.format === undefined ? null : new ol.format[s.format]({\r\n                        extractStyles: s.extractStyles || false\r\n                    })\r\n                });\r\n                break;\r\n            case 'Cluster':\r\n                source = new ol.source.Cluster({\r\n                    distance: s.distance || 20,\r\n                    source: this.setupSource(s.source)\r\n                });\r\n                break;\r\n            case 'ImageVector':\r\n                source = new ol.source.ImageVector({\r\n                    source: this.setupSource(s.source),\r\n                    // default style\r\n                    style: new ol.style.Style({\r\n                        fill: new ol.style.Fill({\r\n                            color: 'rgba(255, 255, 255, 0.6)'\r\n                        }),\r\n                        stroke: new ol.style.Stroke({\r\n                            color: '#319FD3',\r\n                            width: 1\r\n                        })\r\n                    })\r\n                });\r\n                break;\r\n            default: \r\n                source = new ol.source.OSM();\r\n                break;\r\n\r\n        }\r\n\r\n        return source;\r\n    }\r\n\r\n    /**\r\n     * define some interactions\r\n     */\r\n    updateInteraction(){\r\n        var self = this;\r\n        const LEFT_KEY = 37, RIGHT_KEY = 39, DEL_KEY = 46, DURATION = 1000, LOAD_MAP_DELAY = 500;\r\n\r\n        // add default interaction of ol3\r\n        // self.c9Map.addInteraction(self.c9DefaultHoverStyle = new ol.interaction.Select({\r\n        //     condition: ol.events.condition.pointerMove\r\n        // }));\r\n\r\n        //normal: stroke 'rgb(49, 159, 211)' width: 1\r\n        //        fill '#fff'\r\n        \r\n\r\n        /******************* SOME HELPER FUNCTION ********************/\r\n        var getCenterLonLat = function(f) {\r\n            return ol.proj.transform(getCenter(f), 'EPSG:3857', 'EPSG:4326');\r\n        }\r\n        var getCenter = function(f) {\r\n            return ol.extent.getCenter(f.getGeometry().getExtent());\r\n        }\r\n        var transformCoordinates = function(c) {\r\n            return ol.proj.transform(c, 'EPSG:3857', 'EPSG:4326');\r\n        }\r\n        /**\r\n         * Create pan animation on object\r\n         * @param  {ol.Feature}\r\n         */\r\n        var panAnimation = function(feature){\r\n            if (self.c9View.getCenter()[0] == getCenter(feature)[0] && self.c9View.getCenter()[1] == getCenter(feature)[1]) return;\r\n\r\n            var pan = ol.animation.pan({\r\n                duration: DURATION,\r\n                source: (self.c9View.getCenter())\r\n            });\r\n            self.c9Map.beforeRender(pan);\r\n            self.c9View.setCenter(getCenter(feature));\r\n        }\r\n        /**\r\n         * Create marker's flash effect\r\n         * @param  {ol.Feature}\r\n         */\r\n        var createMarkerEffect = function(feature){\r\n            var duration = 3000;\r\n            var start = new Date().getTime();\r\n            var listenerKey;\r\n\r\n            function animate(event) {\r\n                var vectorContext = event.vectorContext;\r\n                var frameState = event.frameState;\r\n                var flashGeom = feature.getGeometry().clone();\r\n                var elapsed = frameState.time - start;\r\n                var elapsedRatio = elapsed / duration;\r\n                // radius will be 5 at start and 30 at end.\r\n                var radius = ol.easing.easeOut(elapsedRatio) * 25 + 5;\r\n                var opacity = ol.easing.easeOut(1 - elapsedRatio);\r\n\r\n                var style = new ol.style.Style({\r\n                    image: new ol.style.Circle({\r\n                        radius: radius,\r\n                        snapToPixel: false,\r\n                        stroke: new ol.style.Stroke({\r\n                            color: 'rgba(255, 0, 0, ' + opacity + ')',\r\n                            width: 0.25 + opacity\r\n                        })\r\n                    })\r\n                });\r\n\r\n                vectorContext.setStyle(style);\r\n                vectorContext.drawGeometry(flashGeom);\r\n                if (elapsed > duration) {\r\n                    ol.Observable.unByKey(listenerKey);\r\n                    return;\r\n                }\r\n                // tell OL3 to continue postcompose animation\r\n                self.c9Map.render();\r\n            }\r\n            listenerKey = self.c9Map.on('postcompose', animate);\r\n        }\r\n        /**\r\n         * Caculate distance between marker and center view, plus direction compare with center\r\n         * @param  {ol.Feature}\r\n         * @return {[Number, Boolean]} Array of distance value and direction value (left if true, right if false)\r\n         */\r\n        var distanceAndDirection = function(f) {\r\n            var center = transformCoordinates(self.c9View.getCenter());\r\n            var fCoordinates = getCenterLonLat(f);\r\n            return [Math.sqrt(Math.pow(fCoordinates[0] - center[0], 2) + Math.pow(fCoordinates[1] - center[1], 2)), (fCoordinates[0] - center[0]) <= 0];\r\n        }\r\n        var formatPopup = function(data) {\r\n            if (Helper.isEmpty(data)) return;\r\n            var capitalizeFirstLetter = function(string) { return string.charAt(0).toUpperCase() + string.slice(1); }\r\n            var strongSpan = function(strong, span) { if (span == '' || Helper.isEmpty(span)) return \"\"; return \"<strong>\" + capitalizeFirstLetter(strong) + \":</strong>\" + \"<span> \" + span + \"</span></br>\"; };\r\n            var result = strongSpan(\"Name\", data.name), v;\r\n            if (!Helper.isEmpty(data.coor)) result += (strongSpan(\"Lon\", data.coor.lon) + strongSpan(\"Lat\", data.coor.lat));\r\n\r\n            for (var i in v = data.value) {\r\n                result += strongSpan(i, v[i]);\r\n            }\r\n            return result;\r\n        }\r\n        /*************************************************************/\r\n        \r\n        //register pointer move event to show cursor as pointer if user hover on markers\r\n        self.c9Map.on('pointermove', function(evt) {\r\n            var f = self.c9Map.forEachFeatureAtPixel(evt.pixel, function(feature, layer){\r\n                return feature;\r\n            });\r\n\r\n            // new hover style\r\n            if (f !== self.lastHoveredObj) {\r\n                if (self.lastHoveredObj) {\r\n                    if (self.lastHoveredObj.get('type')) \r\n                        self.lastHoveredObj.setStyle(self.lastHoveredObj.get('c9-type'));\r\n                    else\r\n                        self.c9CustomHover.getSource().removeFeature(self.lastHoveredObj);\r\n                }\r\n                if (f) {\r\n                    var fStyle = f.get('c9-style'), strokeColor = 'rgb(0, 153, 255)', strokeWidth = 3, fillColor = 'rgba(255, 255, 255, 0.6)';\r\n                    if (fStyle) {\r\n                        strokeColor = fStyle.getStroke().getColor() == '#319FD3' ? 'rgb(0, 153, 255)' : self.getLightenColor(fStyle.getStroke().getColor());\r\n                        strokeWidth = fStyle.getStroke().getWidth() + 2;\r\n                        fillColor   = fStyle.getFill().getColor() == 'rgba(255, 255, 255, 0.6)' ? 'rgba(255, 255, 255, 0.6)' : self.getLightenColor(fStyle.getFill().getColor());\r\n                    }\r\n                    var newStyle = new ol.style.Style({\r\n                        stroke: new ol.style.Stroke({\r\n                            color: strokeColor,\r\n                            width: strokeWidth\r\n                        }),\r\n                        fill: new ol.style.Fill({\r\n                            color: fillColor\r\n                        })\r\n                    });\r\n                    if (fStyle) \r\n                        f.setStyle(newStyle);\r\n                    else {\r\n                        self.c9CustomHover.setStyle(newStyle);\r\n                        self.c9CustomHover.getSource().addFeature(f);    \r\n                    }\r\n                }\r\n                self.lastHoveredObj = f;\r\n            }\r\n            if (f) {\r\n                self.c9Map.getTargetElement().style.cursor = 'pointer';\r\n                // self.createMarkerEffect(f);\r\n                /************* LIGHTEN COLOR ***********/\r\n                // if (f.get('type') == 'c9-line' || f.get('type') == 'c9-polygon' || f.get('type') == 'c9-multipolygon'){\r\n                //     var fStyle = f.getStyle();\r\n                //     var defaultStyle = f.get('c9-style');\r\n\r\n                //     if (fStyle.getStroke().getWidth() == defaultStyle.strokeWidth)\r\n                //         f.setStyle(new ol.style.Style({\r\n                //             stroke: new ol.style.Stroke({\r\n                //                 width: fStyle.getStroke().getWidth() + 2,\r\n                //                 color: self.getLightenColor(fStyle.getStroke().getColor())\r\n                //             }),\r\n                //             fill: new ol.style.Fill({\r\n                //                 color: self.getLightenColor(fStyle.getFill().getColor())\r\n                //             })\r\n                //         }));\r\n                // }\r\n\r\n                // if (f !== self.lastHoveredObj) {\r\n                //     if (self.lastHoveredObj) {\r\n                //         self.c9CustomHover.getSource().removeFeature(self.lastHoveredObj);\r\n                //     }\r\n                //     if (f) {\r\n                //         self.c9CustomHover.getSource().addFeature(f);\r\n                //     }\r\n                //     self.lastHoveredObj = f;\r\n                // }\r\n\r\n                /****************************************/\r\n\r\n                /************** SHOW POPUP *************/\r\n                self.c9Popup.getElement().style.display = 'none';\r\n\r\n                // panAnimation(f);\r\n                \r\n                try {\r\n                    if (self.options.tooltip.format) self.options.tooltip.format(f.get('data'));\r\n                }\r\n                catch(err) {\r\n                    throw \"Check data format again\";\r\n                    return;\r\n                }\r\n\r\n                var content = self.options.tooltip.format ? self.options.tooltip.format(f.get('data')) : formatPopup(f.get('data'));\r\n                if (Helper.isEmpty(content) || content.toString().trim() == \"\") return;\r\n\r\n                self.c9Popup.getElement().style.display = 'block';\r\n                self.c9Popup.getElement().innerHTML = content;\r\n                // self.c9Popup.setPosition(getCenter(f));\r\n                self.c9Popup.setPosition(evt.coordinate);\r\n                /****************************************/\r\n                // var stop = new CustomEvent(\"click\", {detail: {message: \"stop\"}});\r\n                // self.c9Map.dispatchEvent(stop);\r\n            }\r\n            if (!f) {\r\n                self.c9Map.getTargetElement().style.cursor = '';\r\n                self.c9Popup.getElement().style.display = 'none';\r\n\r\n                //remove last obj style\r\n                // if (!Helper.isEmpty(self.lastHoveredObj) && (self.lastHoveredObj.get('type') == 'c9-line' || self.lastHoveredObj.get('type') == 'c9-polygon' || self.lastHoveredObj.get('type') == 'c9-multipolygon')) {\r\n                //     var defaultStyle = self.lastHoveredObj.get('c9-style');\r\n                //     self.lastHoveredObj.setStyle(defaultStyle);\r\n                // }   \r\n            }\r\n        });\r\n\r\n        //register map first render's event to show marker's effect\r\n        self.c9Map.once('postrender', function(evt) {\r\n            setTimeout(function(){\r\n                self.c9Objs.getFeatures().forEach(function(f, i){\r\n                    if (f.get('type') == 'c9-marker')\r\n                        createMarkerEffect(f);\r\n                })\r\n            }, LOAD_MAP_DELAY);\r\n        });\r\n\r\n        //register click event to show effect on markers\r\n        self.c9Map.on('click', function(evt){\r\n\r\n            // if (evt instanceof CustomEvent) return;\r\n            var f = self.c9Map.forEachFeatureAtPixel(evt.pixel, function(feature, layer){\r\n                self.lastSelectedObj = feature;\r\n                return feature;\r\n            });\r\n            if (f) {\r\n                // self.createMarkerEffect(f);\r\n                // self.c9Popup.getElement().style.display = 'none';\r\n\r\n                panAnimation(f);\r\n                \r\n                // try {\r\n                //     if (self.options.format) self.options.format(f.get('data'));\r\n                // }\r\n                // catch(err) {\r\n                //     throw \"Check data format again\";\r\n                //     return;\r\n                // }\r\n\r\n                // var content = self.options.format ? self.options.format(f.get('data')) : formatPopup(f.get('data'));\r\n                // if (Helper.isEmpty(content) || content.toString().trim() == \"\") return;\r\n\r\n                // self.c9Popup.getElement().style.display = 'block';\r\n                // self.c9Popup.getElement().innerHTML = content;\r\n                // self.c9Popup.setPosition(getCenter(f));\r\n\r\n                // // var stop = new CustomEvent(\"click\", {detail: {message: \"stop\"}});\r\n                // // self.c9Map.dispatchEvent(stop);\r\n            }\r\n            if (!f)\r\n                self.c9Popup.getElement().style.display = 'none';\r\n        });\r\n\r\n        //register keydown event to change center view\r\n        document.addEventListener('keydown', function(e) {\r\n            var keydownAnimate = function(k) {\r\n                var selectedFeature = undefined;\r\n                var minDistance = Infinity;\r\n                self.c9Objs.getFeatures().forEach(function(f, i) {\r\n                    if (f.get('type') == \"c9-marker\") {\r\n                        var checkAnimate = distanceAndDirection(f);\r\n\r\n                        if (((checkAnimate[1] && k == LEFT_KEY) || (!checkAnimate[1] && k == RIGHT_KEY)) && checkAnimate[0] < minDistance && checkAnimate[0] != 0) {\r\n                            minDistance = checkAnimate[0];\r\n                            selectedFeature = f;\r\n                        }\r\n                    }\r\n                });\r\n                if (selectedFeature) {\r\n                    setTimeout(createMarkerEffect(selectedFeature), LOAD_MAP_DELAY);\r\n                    panAnimation(selectedFeature);\r\n                }\r\n            }\r\n            switch(e.keyCode) {\r\n                case LEFT_KEY:\r\n                    keydownAnimate(LEFT_KEY);\r\n                    break;\r\n                case RIGHT_KEY:\r\n                    keydownAnimate(RIGHT_KEY);\r\n                    break;\r\n                case DEL_KEY:\r\n                    if (!Helper.isEmpty(self.lastSelectedObj) && !Helper.isEmpty(self.lastSelectedObj.get('type'))) self.c9Objs.removeFeature(self.lastSelectedObj);\r\n                    break;\r\n            }\r\n        })\r\n    }\r\n\r\n    // /**\r\n    //  * marker first set up\r\n    //  */\r\n    // initMarker() {\r\n    //     var self = this;\r\n    //     //data\r\n    //     var markers = self.markers;\r\n    //     //add marker layer to layer list (c9Layers)\r\n    //     self.c9Layers.push(new ol.layer.Vector({\r\n    //         source: self.c9Markers\r\n    //     }));\r\n\r\n    //     if (markers.length === 0) return;\r\n\r\n    //     if (markers instanceof Array) {\r\n    //         markers.forEach(function(m, i) {\r\n    //             self.createMarker({lat: m.lat, lon: m.lon, imgSrc: m.img, scale: m.scale});\r\n    //         });\r\n    //     }\r\n    //     else {\r\n    //         self.createMarker({lat: markers.lat, lon: markers.lon, imgSrc: markers.img, scale: markers.scale});\r\n    //     }\r\n    // }\r\n    /**\r\n     * obj first set up\r\n     */\r\n    // initObj() {\r\n    //     var self = this;\r\n\r\n    //     //add layer Vector to layer list (c9Layers)\r\n    //     self.c9Layers.push(new ol.layer.Vector({\r\n    //         source: self.c9Objs\r\n    //     }));\r\n    // }\r\n\r\n    /**\r\n     * create c9 obj\r\n     * @data  {Object} coordinate\r\n     * @options  {Object} some options: strokeWidth,strokeColor,fillColor,imgSrc,scale\r\n     * @return {}\r\n     */\r\n    createObj(data, options){\r\n        var self = this;\r\n\r\n        /**\r\n         * Create marker\r\n         * @param  {Number} latitude of marker\r\n         * @param  {Number} longitude of marker\r\n         * @param  {String} image source (support for both local and net)\r\n         * @param  {Number} scale image if its size is too large - default = 1\r\n         */\r\n        var createMarker = function(data, coor, options){\r\n\r\n            if (!Helper.isArray(coor) && coor.length != 2) return;\r\n\r\n            const DEFAULT_SRC = 'http://s21.postimg.org/blklb8scn/marker_icon.png'\r\n            const DEFAULT_SCALE = 1;\r\n\r\n            var lat    = coor[1],\r\n                lon    = coor[0],\r\n                imgSrc = options ? (options.imgSrc || DEFAULT_SRC) : DEFAULT_SRC,\r\n                scale  = options ? (options.scale  || DEFAULT_SCALE) : DEFAULT_SCALE;\r\n\r\n            var marker = new ol.Feature({\r\n                'data-ref': '',\r\n                type: 'c9-marker',\r\n                data: data,\r\n                geometry: new ol.geom.Point(ol.proj.fromLonLat([lon, lat]))\r\n            });\r\n\r\n            /**\r\n             * Create marker style\r\n             * @param  {String} image source\r\n             * @param  {Number} scale\r\n             * @return {ol.style.Style} return marker style\r\n             */\r\n            var createMarkerStyle = function(imgSrc, scale){\r\n                return new ol.style.Style({\r\n                    image: new ol.style.Icon({\r\n                        anchor: [0.5, 1], //middle-width and bottom-height of image\r\n                        src: imgSrc,\r\n                        scale: scale\r\n                    })\r\n                });\r\n            }\r\n\r\n            var markerStyle = createMarkerStyle(imgSrc, scale);\r\n            marker.set('c9-style', markerStyle);\r\n            marker.setStyle(markerStyle);\r\n\r\n            //add this marker to marker list (c9Objs)\r\n            self.c9Objs.addFeature(marker);\r\n        }\r\n\r\n        var coorAndType = self.normalizeCoordinate(data.coor);\r\n        if (coorAndType.coor == null) return;\r\n\r\n        //marker\r\n        if (coorAndType.type == \"marker\") {\r\n            createMarker(data, coorAndType.coor, options);\r\n            return;\r\n        }\r\n\r\n        // if (data == self.c9Markers) {\r\n        //     data = [];\r\n        //     self.c9Markers.getFeatures().forEach(function (d) {\r\n        //         data.push(ol.proj.transform(d.getGeometry().getCoordinates(), 'EPSG:3857', 'EPSG:4326'));\r\n        //     })\r\n        // }\r\n\r\n        var strokeWidth = options ? options.strokeWidth : 1;\r\n        var strokeColor = options ? options.strokeColor : \"#319FD3\";\r\n        var fillColor   = options ? options.fillColor   : \"rgba(255, 255, 255, 0.6)\";\r\n\r\n        var obj = new ol.Feature({\r\n            'data-ref': '',\r\n            type: \"c9-\" + coorAndType.type,\r\n            data: data,\r\n            geometry: coorAndType.type == \"polygon\" ? new ol.geom.Polygon(coorAndType.coor) : coorAndType.type == \"line\" ? new ol.geom.LineString(coorAndType.coor) : new ol.geom.MultiPolygon(coorAndType.coor)\r\n        });\r\n\r\n        obj.getGeometry().transform('EPSG:4326', 'EPSG:3857');\r\n\r\n        /**\r\n         * Create obj style\r\n         * @param  {Number} stroke width\r\n         * @param  {String} stroke color\r\n         * @param  {String} fill color\r\n         * @return {ol.style.Style} return obj style\r\n         */\r\n        var createObjStyle = function(strokeWidth, strokeColor, fillColor){\r\n            return new ol.style.Style({\r\n                stroke: new ol.style.Stroke({\r\n                    width: strokeWidth,\r\n                    color: strokeColor                \r\n                }),\r\n                fill: new ol.style.Fill({\r\n                    color: fillColor\r\n                })\r\n            });\r\n        }\r\n\r\n        var objStyle = createObjStyle(strokeWidth, strokeColor, fillColor);\r\n        obj.set('c9-style', objStyle);\r\n        obj.setStyle(objStyle);\r\n\r\n        //add this marker to marker list (c9Objs)\r\n        self.c9Objs.addFeature(obj);\r\n    }\r\n\r\n    /**\r\n     * normalize coordinate\r\n     * currently only support marker, linestring, polygon and multipolygon\r\n     * @coor  {Array} coordinate of object\r\n     * @return {Array} coordinate was normalized\r\n     */\r\n    normalizeCoordinate(coor){\r\n        var normCoor = [], type, error = {coor: null, type: null};\r\n        if ((Helper.isObject(coor) && coor.length == undefined) || (Helper.isArray(coor) && coor.length == 2 && !isNaN(coor[0]) && !isNaN(coor[1]))) {\r\n            // marker - [] - {}\r\n            type = \"marker\";\r\n            if (coor.length == undefined) {\r\n                if (Helper.isEmpty(coor.lat) || Helper.isEmpty(coor.lon))\r\n                    return error;\r\n                normCoor = [coor.lon, coor. lat];\r\n            }\r\n            else {\r\n                normCoor = coor;\r\n            }\r\n            \r\n        } else if (Helper.isArray(coor)) {\r\n            // linestring - [{},{}] - [[],[]] - [{},[]] - [[],{}]\r\n            var isArrayOrObject = function(obj) {\r\n                var result = {};\r\n                if (Helper.isObject(obj) && obj.length == undefined) {\r\n                    result['check'] = !Helper.isEmpty(obj.lat) && !Helper.isEmpty(obj.lon);\r\n                    if (result['check']) result['coor'] = [obj.lon, obj.lat];\r\n                }\r\n                else {\r\n                    result['check'] = Helper.isArray(obj) && obj.length == 2 && !isNaN(obj[0]) && !isNaN(obj[1]);\r\n                    if (result['check']) result['coor'] = obj;\r\n                }\r\n                return result;\r\n            }\r\n\r\n            // check data inside to eliminate case: multipolygon contains 2 polygons\r\n            if (coor.length == 2 && isArrayOrObject(coor[0]).check && isArrayOrObject(coor[1]).check) {\r\n                type = \"line\";\r\n                normCoor.push(isArrayOrObject(coor[0]).coor);\r\n                normCoor.push(isArrayOrObject(coor[1]).coor);\r\n            }\r\n            // multipolygon [[[[] || {}, ...]], [[[] || {}, ...]], ...]\r\n            else if (coor.length >= 2){\r\n                type = \"multipolygon\";\r\n                coor.forEach(function(pc, i) {\r\n                    if (Helper.isArray(pc) && pc.length == 1) {\r\n                        normCoor.push([[]]);\r\n                        pc[0].forEach(function(c) {\r\n                            // data - [] || {}\r\n                            var obj = isArrayOrObject(c);\r\n                            if (obj.check) normCoor[i][0].push(obj.coor);\r\n                        })\r\n                        // cannot create polygon with the number of points is less than 2\r\n                        if (normCoor[i][0].length <= 2) return error; \r\n                    }\r\n                    else return error; // because data format is not true\r\n                })\r\n            }\r\n            // polygon [[[] || {}, ...]]\r\n            else if (coor.length == 1) {\r\n                type = \"polygon\";\r\n                normCoor.push([]);\r\n                coor[0].forEach(function(c) {\r\n                    // data - [] || {}\r\n                    var obj = isArrayOrObject(c);\r\n                    if (obj.check) normCoor[0].push(obj.coor);\r\n                })\r\n                if (normCoor[0].length <= 2) return error;\r\n            }\r\n            else return error;\r\n        }\r\n        return {\r\n            coor: normCoor,\r\n            type: type\r\n        };\r\n    }\r\n\r\n    /**\r\n     * create obj base on user data\r\n     * @data  {Object} data structure: {coor: [], name: , value: }\r\n     */\r\n    update(data){\r\n        if (Helper.isEmpty(data)) return;\r\n        var self = this;\r\n\r\n        var da = new DataAdapter(data);\r\n        self.data = da.getDataTarget('map');\r\n\r\n        if (!Helper.isEmpty(self.c9Map)) {\r\n            if (Helper.isArray(self.data))\r\n                self.data.forEach(function(d){\r\n                    self.createObj(d);\r\n                })\r\n            else\r\n                self.createObj(self.data);\r\n        }\r\n    }\r\n\r\n    getObjs(){\r\n        return this.c9Objs.getFeatures();\r\n    }\r\n\r\n    getLayers() {\r\n        return this.c9Layers;\r\n    }\r\n\r\n    /**\r\n     * Custom Event Listener\r\n     * @param  {[type]}   eventType [description]\r\n     * @param  {Function} callback  [description]\r\n     */\r\n    on(eventType, callback) {\r\n        var self = this;\r\n        // Update Event Factory\r\n        let eventFactoryViewport = {\r\n            'click': function(evt) {\r\n                var f = self.c9Map.forEachFeatureAtPixel(self.c9Map.getEventPixel(evt), function(feature, layer){\r\n                    return feature;\r\n                });\r\n                if (Helper.isFunction(callback) && f) {\r\n                    callback.call(this, f.get('data'));\r\n                }\r\n            },\r\n            'pointermove': function(evt) {\r\n                var f = self.c9Map.forEachFeatureAtPixel(evt.pixel, function(feature, layer){\r\n                    return feature;\r\n                });\r\n                if (Helper.isFunction(callback) && f) {\r\n                    callback.call(this, f.get('data'));\r\n                }\r\n            }\r\n        }\r\n\r\n        if (eventType == \"click\")\r\n            self.c9Map.getViewport().addEventListener(eventType, eventFactoryViewport[eventType]);\r\n        else\r\n            self.c9Map.on(eventType, eventFactoryViewport[eventType]);\r\n    }\r\n\r\n    getLightenColor(color) {\r\n        if (color.includes('rgba')) {\r\n            var alpha = color.split(',')[color.split(',').length - 1].replace(')', '');\r\n            var currentColor = color.replace(',' + alpha, '').replace('a', '');\r\n            var newColor = Helper.shadeColor(-0.2, currentColor);\r\n            return 'rgba(' + newColor.split('(')[1].split(')')[0] + ',' + alpha.trim() + ')';\r\n        }\r\n        else\r\n            return Helper.shadeColor(-0.2, color);\r\n    }\r\n\r\n    /**\r\n     * set style: consist of layer, source and obj\r\n     * @obj   {ol.layer || ol.source || ol.Feature}\r\n     * @style {function || ol.style} style function || ol.style\r\n     */\r\n    setStyle(obj, style){\r\n        if (Helper.isEmpty(obj) || Helper.isEmpty(style)) return;\r\n        obj.setStyle(style);\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/map/C9.Map.js\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/C9.css\n ** module id = 15\n ** module chunks = 0\n **/"],"sourceRoot":""}