if(typeof WIND=="undefined"||!WIND){var WIND=WIND||{}}var wind_map=false;var wind_timeline=false;var wind_text=false;var wind_image=false;var wind_graphics=false;WIND.Annotation2DisplayerProxy=function(e,t,n){this._displayer=n;this._group=t;WIND.Annotation2DisplayerProxy.superclass.constructor.call(this,e,"Annotation2Displayer",{dragElId:"annotation2DisplayerProxy"});this.isTarget=false};YAHOO.lang.extend(WIND.Annotation2DisplayerProxy,YAHOO.util.DDProxy,{startDrag:function(e){WIND.Annotation2DisplayerProxy.superclass.startDrag.call(this,e);var t=this.getDragEl();var n=this.getEl();var r="";var i=0;for(var s=0;s<this._group.annotedObjects.length;s++){r+=document.getElementById(this._group.annotedObjects[s].object).innerHTML+" ";i+=Number(document.getElementById(this._group.annotedObjects[s].object).innerHTML.length)*5+4}t.innerHTML=r;this.innerHTML=r;t.style.width=i>0?i+"px":"100px"},endDrag:function(e){},onDragDrop:function(e,t){var n=t;var r=this.getDragEl();var i=YAHOO.util.Dom.getXY(r);var s=YAHOO.util.Dom.getXY(t);if(this._displayer.type=="timeline"){var o=this._displayer;var u=o.tl.getBand(0).getMinVisibleDate();var a=o.tl.getBand(0).getMaxVisibleDate();var f=o.width;var l=new Date(Math.round((i[0]-s[0])*(a-u)/f)+(u-new Date(0)));var c=o.eventSource._events.getUnit().getParser("iso8601");var h=new Timeline.DefaultEventSource.Event({id:this.innerHTML,start:l,instant:true,text:this.innerHTML,description:this.innerHTML});o.eventSource.add(h);o.tl.layout()}}});WIND.Interaction=function(e,t){this.event=e;if(t==null){this.reactions=[]}else if(t instanceof Array){this.reactions=t}else{this.reactions=[t]}};WIND.Interaction.prototype.addReaction=function(e){if(e instanceof Array){for(var t=0;t<e.length;t++){this.reactions.push(e[t])}}else{this.reactions.push(e)}};WIND.Interaction.prototype.runReactions_=function(){var e=this.reactions;for(var t=0;t<e.length;t++){if(e[t]instanceof WIND.ExternalReaction){var n;if(e[t].annotationApplied==null){var r=new Array;var i=e[t];while(i.dependency!=null){r.push(i.dependency);i=i.dependency}for(var s=r.length-1;s>0;s--){r[s-1].source=r[s].raise()}n=r[0].raise()}else n=e[t].annotationApplied;if(n instanceof WIND.Annotation){for(var o=0;o<n.annotedObjects.length;o++){n.annotedObjects[o].callFunction(e[t].effect_type,e[t].parameters)}}}}};WIND.Interaction.prototype.activate=function(){var e=this.reactions;for(var t=0;t<e.length;t++){if(e[t]instanceof WIND.ExternalReaction){var n;if(e[t].annotationApplied==null){var r=new Array;var i=e[t];while(i.dependency!=null){r.push(i.dependency);i=i.dependency}for(var s=r.length-1;s>0;s--){r[s-1].source=r[s].raise()}n=r[0].raise()}else n=e[t].annotationApplied;if(n instanceof WIND.Annotation){for(var o=0;o<n.annotedObjects.length;o++){n.annotedObjects[o].callFunction(e[t].effect_type,e[t].parameters)}}}}};WIND.UserEvent=function(e){this.type=e};WIND.SelectEvent=function(e,t,n){this.event_type=e;this.annotationSelected=t;if(n==null)this.target="all";else this.target=n};WIND.SelectEvent.prototype=new WIND.UserEvent("SelectEvent");WIND.SelectEvent.prototype.trigger=function(e){if(this.annotationSelected instanceof Array){var t=this.annotationSelected;var n;for(var r=0;r<t.length;r++){n=this.annotationSelected[r];for(var i=0;i<n.annotedObjects.length;i++){if(wind_map){if(n.annotedObjects[i]instanceof WIND.Map.Part){YAHOO.util.Event.delegate(vector_layer_id,this.event_type,function(t){e(this)},"path[id='"+n.annotedObjects[i].object+"']")}}if(wind_text){if(n.annotedObjects[i]instanceof WIND.Text.Part){n.annotedObjects[i].setStyle("text-decoration:underline;cursor:pointer");YAHOO.util.Event.addListener(document.getElementById(n.annotedObjects[i].object),this.event_type,function(t){e(this)},n,true)}}if(wind_timeline){if(n.annotedObjects[i]instanceof WIND.Timeline.Part){if(n.annotedObjects[i].viewer.base=="Simile"){var s=document.getElementsByClassName("timeline-event-label");for(var o=0;o<s.length;o++){if(s[o].innerHTML==n.entity){var u=window.document.getElementById(s[o].id);var a=window.document.getElementById(s[o].id.replace("label","tape0"))}}var f=YAHOO.util.Event.addListener(u,this.event_type,function(t){e(this)},this,true);var l=YAHOO.util.Event.addListener(a,this.event_type,function(t){e(this)},this,true)}else if(n.annotedObjects[i].viewer.base=="Chap"){if(n.annotedObjects[i].starting!=n.annotedObjects[i].ending)var s=document.getElementsByClassName("timeline-event");else var s=document.getElementsByClassName("timeline-event-dot-container");for(var o=0;o<s.length;o++){s[o].id=s[o].firstChild.innerHTML;if(s[o].id==n.entity){var u=window.document.getElementById(s[o].id)}}var f=YAHOO.util.Event.addListener(u,this.event_type,function(t){e(this)},this,true)}}}if(wind_image){if(n.annotedObjects[i]instanceof WIND.Image.Part){YAHOO.util.Event.delegate(n.annotedObjects[i].viewer.nomiddiv,this.event_type,function(t){e(this)},"[id='"+n.annotedObjects[i].object+"']")}}if(wind_graphics){if(n.annotedObjects[i]instanceof WIND.Graphics.Part){YAHOO.util.Event.delegate(n.annotedObjects[i].viewer.nomiddiv+"Outer",this.event_type,function(t){e(this)},"[id='"+n.annotedObjects[i].viewer.nomiddiv+"']")}}}}}else{var n=this.annotationSelected;for(var i=0;i<n.annotedObjects.length;i++){if(wind_map){if(n.annotedObjects[i]instanceof WIND.Map.Part){YAHOO.util.Event.delegate(vector_layer_id,this.event_type,function(t){e(this)},"path[id='"+n.annotedObjects[i].object+"']")}}else if(wind_timeline){if(n.annotedObjects[i]instanceof WIND.Timeline.Part){if(n.annotedObjects[i].viewer.base=="Simile"){var s=document.getElementsByClassName("timeline-event-label");for(var r=0;r<s.length;r++){if(s[r].innerHTML==n.entity){var u=window.document.getElementById(s[r].id);var a=window.document.getElementById(s[r].id.replace("label","tape0"))}}var f=YAHOO.util.Event.addListener(u,this.event_type,function(t){e(this)},this,true);var l=YAHOO.util.Event.addListener(a,this.event_type,function(t){e(this)},this,true)}else if(n.annotedObjects[i].viewer.base=="Chap"){if(n.annotedObjects[i].starting!=n.annotedObjects[i].ending)var s=document.getElementsByClassName("timeline-event");else var s=document.getElementsByClassName("timeline-event-dot-container");for(var r=0;r<s.length;r++){s[r].id=s[r].firstChild.innerHTML;if(s[r].id==n.entity){var u=window.document.getElementById(s[r].id)}}var f=YAHOO.util.Event.addListener(u,this.event_type,function(t){e(this)},this,true)}}}else if(wind_text){if(n.annotedObjects[i]instanceof WIND.Text.Part){n.annotedObjects[i].setStyle("text-decoration:underline;cursor:pointer");YAHOO.util.Event.addListener(document.getElementById(n.annotedObjects[i].object),this.event_type,function(t){e(this)},this,true)}}}}};WIND.InputEvent=function(e,t){this.event_type=e;this.event_tool=t;this.annotationCreated=null;this.target="all"};WIND.InputEvent.prototype=new WIND.UserEvent("InputEvent");WIND.InputEvent.prototype.trigger=function(e){this.event_tool.button.on("checkedChange",function(t){if(!t.prevValue){document.getElementById(this.event_tool.parentComponent.container).style.cursor="url('"+lib_path+"images/crayon.png'), auto";YAHOO.util.Event.addListener(this.event_tool.parentComponent.paragraphs[0].object,"mouseup",function(t){var n=null;if(window.getSelection){n=window.getSelection()}else if(document.getSelection){n=document.getSelection()}else{n=document.selection.createRange()}var r=null;if(n.getRangeAt){r=n.getRangeAt(0);r.setStart(n.anchorNode,0);r.setEnd(n.focusNode,n.focusNode.nodeValue.length)}else{r=document.createRange();r.setStart(n.anchorNode,n.anchorOffset);r.setEnd(n.focusNode,n.focusOffset)}var i=r.toString();if(i.endsWith(" "))i=i.substring(0,i.length-1);var s=-1;var o=-1;var u=this.event_tool.parentComponent.paragraphs[0].words;for(var a=0;a<u.length;a++){if(i.startsWith(u[a])){var f=true;s=a;for(var l=s;l<u.length;l++){if(i.endsWith(u[l])){o=l;for(var c=s;c<=o;c++){if(i.indexOf(u[c])==-1){f=false;break}}break}}if(f)break}}var h=new Array;if(o>=s&&s>=0){if(confirm('Do you want really to annotate "'+i+'" in the text?')){for(var l=s+1;l<=o+1;l++){document.getElementById(this.event_tool.parentComponent.paragraphs[0].object+"_token"+l).style.color="#008000";h.push(l)}n.removeAllRanges();var p=this.event_tool.parentComponent.createAnnotation("Place",i,1,s+1,o+1,null);p.contains=new Array;var d=new WIND.Representation("text",p,this.event_tool.parentComponent);this.annotationCreated=p;e(this)}}},this,true)}else{document.getElementById(this.event_tool.parentComponent.container).style.cursor="auto";YAHOO.util.Event.removeListener(this.event_tool.parentComponent.paragraphs[0].object,"mouseup")}},this,true)};WIND.Tool=function(e){this.type=e};WIND.SystemReaction=function(){};WIND.SystemReaction.prototype.setDependency=function(e){this.dependency=e};WIND.InternalReaction=function(e){this.type=e};WIND.InternalReaction.prototype=new WIND.SystemReaction;WIND.Projection=function(e,t){this.source=e;this.target=t;this.result=null};WIND.Projection.prototype=new WIND.InternalReaction("Projection");WIND.Projection.prototype.raise=function(){var e=false;if(this.target.type=="text"){if(this.source==null){this.source=this.dependency.result}var t;if(this.target.paragraphs.length==0)t=this.target.createParagraph();else t=this.target.paragraphs[0];t.setContent(this.source.entity);e=this.target.createAnnotation(this.source.semantics,this.source.entity,1,1,this.source.annotedObjects.length)}else if(this.target.type=="map"){e=new WIND.Annotation(this.source.semantics,this.source.entity,null);var n=new Array;for(var r=0;r<this.source.annotedObjects.length;r++){if(this.source.annotedObjects[r]instanceof WIND.Map.Part){n.push(this.source.annotedObjects[r])}}e.annotedObjects=n;this.target.annotations.push(e);for(var r=0;r<e.annotedObjects.length;r++){this.target.addSensiblePart(e.annotedObjects[r],true);e.annotedObjects[r].viewer=this.target}}this.result=e;return e};WIND.Calculation=function(e,t,n){this.source=e;this.func=t;this.target=n;this.result=null};WIND.Calculation.prototype=new WIND.InternalReaction("Calculation");WIND.Calculation.prototype.raise=function(){var e=false;if(this.func=="point_of_place"){var t=createXHR();var n=this.target;t.onreadystatechange=function(){if(t.readyState==4){if(t.status==200){var r=t.responseXML;if(r.getElementsByTagName("geoname")){var i=r.getElementsByTagName("geoname")[0];e=new WIND.Annotation("http://geotopia.univ-pau.fr/GeotopiaService#Town",i.getElementsByTagName("name")[0].childNodes[0].nodeValue,null);var s=OpenLayers.Util.extend({},OpenLayers.Feature.Vector.style["default"]);s.strokeColor="#0033CC";s.fillColor="#809FFE";s.fillOpacity=.3;var o=new WIND.Map.Part("POINT("+i.getElementsByTagName("lng")[0].childNodes[0].nodeValue+" "+i.getElementsByTagName("lat")[0].childNodes[0].nodeValue+")",null,s);o.geoname=i.getElementsByTagName("name")[0].childNodes[0].nodeValue;o.display=false;o.viewer=n;o.vlayer=n.vectorLayer;e.addSensiblePart(o,true)}}}};t.open("GET",lib_path+"php/geonames_get.php?place="+this.source.entity,false);t.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=utf-8");t.send(null)}else if(this.func=="geolocation_of_town"){var t=createXHR();var n=this.target;t.onreadystatechange=function(){if(t.readyState==4){if(t.status==200){var r=t.responseXML;if(r.getElementsByTagName("geoname")){var i=r.getElementsByTagName("geoname")[0];e=new WIND.Annotation("http://geotopia.univ-pau.fr/GeotopiaService#Town",i.getElementsByTagName("nom_com")[0].childNodes[0].nodeValue,null);var s=OpenLayers.Util.extend({},OpenLayers.Feature.Vector.style["default"]);s.strokeColor="#0033CC";s.fillColor="#809FFE";s.fillOpacity=.3;var o=new WIND.Map.Part(i.getElementsByTagName("astext")[0].textContent,null,s);o.geoname=i.getElementsByTagName("nom_com")[0].childNodes[0].nodeValue;o.display=false;o.viewer=n;o.vlayer=n.vectorLayer;e.addSensiblePart(o,true)}}}};t.open("GET",lib_path+"php/geolocation_of_town.php?place="+this.source.entity,false);t.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=utf-8");t.send(null)}else if(this.func=="prefecture_of_town"){var t=createXHR();var n=this.target;t.onreadystatechange=function(){if(t.readyState==4){if(t.status==200){var r=t.responseXML;if(r.getElementsByTagName("geoname")){var i=r.getElementsByTagName("geoname")[0];e=new WIND.Annotation("http://geotopia.univ-pau.fr/GeotopiaService#Prefecture",i.getElementsByTagName("nom_chf_l")[0].childNodes[0].nodeValue,null);var s=OpenLayers.Util.extend({},OpenLayers.Feature.Vector.style["default"]);s.strokeColor="#0033CC";s.fillColor="#809FFE";s.fillOpacity=.3;var o=new WIND.Map.Part(i.getElementsByTagName("astext")[0].textContent,null,s);o.geoname=i.getElementsByTagName("nom_chf_l")[0].childNodes[0].nodeValue;o.display=false;o.viewer=n;o.vlayer=n.vectorLayer;e.addSensiblePart(o,true)}}}};t.open("GET",lib_path+"php/prefecture_of_town.php?place="+this.source.entity,false);t.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=utf-8");t.send(null)}else if(this.func=="prefecture_of_department"){var t=createXHR();var n=this.target;t.onreadystatechange=function(){if(t.readyState==4){if(t.status==200){var r=t.responseXML;if(r.getElementsByTagName("geoname")){var i=r.getElementsByTagName("geoname")[0];e=new WIND.Annotation("http://geotopia.univ-pau.fr/GeotopiaService#Prefecture",i.getElementsByTagName("nom_chf_l")[0].childNodes[0].nodeValue,null);var s=OpenLayers.Util.extend({},OpenLayers.Feature.Vector.style["default"]);s.strokeColor="#0033CC";s.fillColor="#809FFE";s.fillOpacity=.3;var o=new WIND.Map.Part(i.getElementsByTagName("astext")[0].textContent,null,s);o.geoname=i.getElementsByTagName("nom_chf_l")[0].childNodes[0].nodeValue;o.display=false;o.viewer=n;o.vlayer=n.vectorLayer;e.addSensiblePart(o,true)}}}};t.open("GET",lib_path+"php/prefecture_of_department.php?place="+this.source.entity,false);t.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=utf-8");t.send(null)}else if(this.func=="department_of_town"){var t=createXHR();var n=this.target;t.onreadystatechange=function(){if(t.readyState==4){if(t.status==200){var r=t.responseXML;if(r.getElementsByTagName("geoname")){var i=r.getElementsByTagName("geoname")[0];e=new WIND.Annotation("http://geotopia.univ-pau.fr/GeotopiaService#Department",i.getElementsByTagName("nom_dept")[0].childNodes[0].nodeValue,null);var s=OpenLayers.Util.extend({},OpenLayers.Feature.Vector.style["default"]);s.strokeColor="#0033CC";s.fillColor="#809FFE";s.fillOpacity=.3;var o=new WIND.Map.Part(i.getElementsByTagName("astext")[0].textContent,null,s);o.geoname=i.getElementsByTagName("nom_dept")[0].childNodes[0].nodeValue;o.display=false;o.viewer=n;o.vlayer=n.vectorLayer;e.addSensiblePart(o,true)}}}};t.open("GET",lib_path+"php/department_of_town.php?place="+this.source.entity,false);t.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=utf-8");t.send(null)}this.result=e;return e};WIND.ExternalReaction=function(e,t,n){this.annotationApplied=e;this.effect_type=t;if(n instanceof Array)this.parameters=n;else this.parameters=[n]};WIND.ExternalReaction.prototype=new WIND.SystemReaction;WIND.Representation=function(e,t,n){if(e==n.type){this.type=e;this.annotation=t;this.parentComponent=n;t.contains.push(this)}};WIND.GUI=function(e,t){this.container=e;this.viewers=[];this.nbViewers=0;this.author=null;this.title=null;this.description=null;if(t){if(t.author)this.author=t.author;if(t.title)this.title=t.title;if(t.description)this.description=t.description}this.reactions=[];this.interactions=[];var n;if(document.getElementById(e))n=document.getElementById(e);else{n=document.createElement("div");n.id=e}if(this.title){var r=document.createElement("div");r.id=this.container+"-applicationTitle";r.style.position="absolute";r.style.left="10px";r.style.top="3px";var i=document.createElement("p");i.style.color="#3366CC";i.style.fontWeight="bold";i.style.fontSize="20px";i.innerHTML=this.title;r.appendChild(i);var i=document.createElement("p");i.style.fontSize="15px";i.innerHTML=this.description;r.appendChild(i);n.appendChild(r);var r=document.createElement("div");r.id=this.container+"-applicationFooter";r.style.position="absolute";r.style.left="10px";r.style.bottom="3px";var i=document.createElement("p");i.style.fontSize="9px";i.style.fontStyle="italic";if(this.author==null)i.innerHTML="This application is designed using WINDMash.";else i.innerHTML="This application is designed by "+this.author;r.appendChild(i);n.appendChild(r)}};WIND.GUI.prototype.createInteraction=function(e,t,n){var r=new WIND.Interaction(e,t,n);r.id=this.container+"_interaction"+(this.interactions.length+1);this.interactions.push(r);return r};WIND.GUI.prototype.createReaction=function(e,t,n){var r=new WIND.Reaction(e,t,n);if(r instanceof Array){for(var i=0;i<r.length;i++){r[i].id=this.container+"_reaction"+(this.reactions.length+1);this.reactions.push(r[i])}}else{r.id=this.container+"_reaction"+(this.reactions.length+1);this.reactions.push(r)}return r};WIND.SensiblePart=function(e){this.type=e;this.viewer=null};WIND.SensiblePart.prototype.callFunction=function(e,t){switch(this.type){case"text":case"list":switch(e){case"highlight":this.highlight();break;case"bold":this.bold();break;case"italicize":this.italicize();break;case"underline":this.underline();break;case"blink":this.blink();break;case"setStyleByClass":var n=t[0];this.setStyleByClass(n);break;case"setStyle":var n=t[0];this.setStyle(n);break;case"show":this.show();break;case"hide":this.hide();break;case"setDraggable":var n=t[0];var r=t[1];this.setDraggable(n,r);break}break;case"map":switch(e){case"zoom":this.zoomTo();break;case"zoomWith":this.zoomWith(t[0]);break;case"highlight":if(this.viewer.type=="map"){this.highlight()}break;case"focus":this.highlight();this.zoomTo();break;case"setFeatureStyle":var i=t[0];this.setFeatureStyle(i);break;case"show":this.show();break;case"hide":this.hide();break}break;case"timeline":switch(e){case"zoom":this.zoomTo();break;case"focus":this.highlight();this.zoomTo();break;case"highlight":this.highlight();break}break;case"calendar":if(e=="highlight")this.highlight();break;case"photo":switch(e){case"color":this.color(t[0],t[1]);break;case"focus":this.focus();break;case"show":this.show();break;case"hide":this.hide();break;case"move":this.move(t[0],t[1]);break;case"showRestPhoto":this.showRestPhoto();break;case"hideRestPhoto":this.hideRestPhoto(t[0]);break}break;case"photoviewer":if(e=="switchTo")this.switchTo(t[0]);break;case"popup":switch(e){case"show":this.show();break;case"hide":this.hide();break}break;case"image":switch(e){case"rotate":this.rotate(t[0]);break;case"contrast":this.contrast(t[0]);break;case"brightness":this.brightness(t[0]);break;case"contourdetect":this.contourdetect();break;case"blur":this.blur();break}break;case"graphics":switch(e){case"changeType":this.changeType(t[0]);break;case"changeTypeRound":this.changeTypeRound();break}break}};WIND.GUI.prototype.createViewer=function(e,t){this.nbViewers++;var n=this.container+"_viewer"+this.nbViewers;t.parentEl=this.container;if(e=="text"){var r=new WIND.Text(n,t);r.parentDocument=this;this.viewers.push(r);return r}else if(e=="map"){var i=new WIND.Map(n,t);i.parentDocument=this;this.viewers.push(i);return i}else if(e=="calendar"){var s=new WIND.Calendar(n,t);s.parentDocument=this;this.viewers.push(s);return s}else if(e=="timeline"){var o=new WIND.Timeline(n,t);o.parentDocument=this;this.viewers.push(o);return o}else if(e=="list"){var u=new WIND.List(n,t);u.parentDocument=this;this.viewers.push(u);return u}else if(e=="photo"){var a=new WIND.Photo(n,t);a.parentDocument=this;this.viewers.push(a);return a}else if(e=="video"){var f=new WIND.Video(n,t);f.parentDocument=this;this.viewers.push(f);return f}return null};WIND.GUI.prototype.getValue=function(){var e=[];for(var t=0;t<this.viewers.length;t++){e.push(this.viewers[t].getValue())}return{id:this.container,rdftype:"http://erozate.iutbayonne.univ-pau.fr/wind#GUI",author:this.author,title:this.title,description:this.description?this.description:"",contain:e}};WIND.LiveSensiblePart=function(e,t){this.viewer=e;this.func=t};WIND.Annotation=function(e,t,n){this.semantics=e;this.entity=t;if(n==null){this.annotedObjects=new Array}else{if(n instanceof Array){this.annotedObjects=n;for(var r=0;r<n.length;r++){n[r].annotation=this}}else{this.annotedObjects=[n];n.annotation=this}}this.contains=new Array};WIND.Annotation.prototype.addSensiblePart=function(e){this.annotedObjects.push(e);e.annotation=this};WIND.Selection=function(e){this.set=e;this.result=null};WIND.Selection.prototype.raise=function(){return this.result};WIND.Popup=function(e,t,n){this.x=e;this.y=t;this.container=n;var r=document.createElement("div");r.style.textAlign="right";r.innerHTML="<img src='close.gif' onclick='document.getElementById(\""+n+'").style.visibility = "hidden";\'>';document.getElementById(this.container).appendChild(r);this.content="";this.hide()};WIND.Popup.prototype=new WIND.SensiblePart("popup",this.container);WIND.Popup.prototype.setContent=function(e){this.content=e;var t=document.createElement("div");t.id=this.container+"Content";t.style.padding="10px";t.innerHTML=e;document.getElementById(this.container).appendChild(t)};WIND.Popup.prototype.getContent=function(){return this.content};WIND.Popup.prototype.createSensiblePart=function(e){var t=this.content;var n=0;var r;var i=[];if(t.startsWith(e))i.push(0);while(n<t.length&&n!=-1){r=t.indexOf(e,n+1);n=r;if(n!=-1)i.push(n)}var s="";var o=0;var u;for(var a=0;a<i.length;a++){u=i[a];s+=t.substring(o,u)+"<span id='"+e.trim()+a+"'>"+e+"</span>";o=u+e.length}s+=t.substring(o,t.length);document.getElementById(this.container+"Content").innerHTML=s;this.content=s;var f=[];for(var a=0;a<i.length;a++){f.push(new WIND.TextPart(e.trim()+a))}return f};WIND.Popup.prototype.createSensiblePartById=function(e){return new WIND.TextPart(e)};WIND.Popup.prototype.show=function(){document.getElementById(this.container).style.position="absolute";document.getElementById(this.container).style.left=this.x;document.getElementById(this.container).style.top=this.y;document.getElementById(this.container).style.border="1px #0033CC solid";document.getElementById(this.container).style.backgroundColor="#BFCFFE";document.getElementById(this.container).style.opacity=.8;document.getElementById(this.container).style.visibility="visible"};WIND.Popup.prototype.hide=function(){document.getElementById(this.container).style.visibility="hidden"};createXHR=function(){var e=null;if(window.XMLHttpRequest){e=new XMLHttpRequest}else if(window.ActiveXObject){try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}}return e};fixIE=function(){if(!Array.indexOf){Array.prototype.indexOf=function(e){var t=-1;for(var n=0;n<this.length;n++){var r=this[n];if(r==e){t=n;break}}return t}}if(!window.console){window.console={};window.console.log=function(e){var t=document.getElementsByTagName("body")[0];var n=document.createElement("div");n.innerHTML=e;t.insertBefore(n,t.lastChild)}}};String.prototype.startsWith=function(e){return this.length!=0&&this.indexOf(e)==0};String.prototype.endsWith=function(e){return this.length!=0&&this.lastIndexOf(e)==this.length-e.length};String.prototype.trim=function(){return this.replace(/\s+/g,"")};padZero=function(e){if(e<10){e=0+""+e}return e};WIND.getScriptLocation=function(){return"./scripts"}