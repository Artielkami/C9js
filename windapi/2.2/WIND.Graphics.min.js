function gradient(e,t){return e}wind_graphics=true;WIND.Graphics=function(e,t){this.draggable=false;this.resizable=false;this.top=10;this.left=10;this.width=600;this.height=600;this.color="#3366CC";this.border="#3366CC 2px solid";this.name="Graph Displayer";this.icon=lib_path+"images/lvizicon.png";this.header=false;this.removable=false;this.configurable=false;this.nomiddiv=e;if(t.draggable==true)this.draggable=t.draggable;if(t.resizable==true)this.resizable=t.resizable;if(t.header==true)this.header=t.header;if(t.removable==true)this.removable=t.removable;if(t.configurable==true)this.configurable=t.configurable;if(this.draggable==true||this.removable==true||this.configurable==true)this.header=true;var n=document.createElement("div");n.id=e+"Outer";n.style.position="absolute";if(t.top)this.top=t.top;n.style.top=this.top+"px";if(t.left)this.left=t.left;n.style.left=this.left+"px";if(t.width)this.width=t.width;n.style.width=this.width+"px";if(t.height)this.height=t.height;n.style.height=this.height+"px";if(t.color)this.color=t.color;if(t.border)this.border=t.border;n.style.border=this.border;if(t.parentEl)this.parentEl=t.parentEl;if(t.name)this.name=t.name;if(t.icon)this.icon=t.icon;if(t.type)this.type=t.type;var r=document.createElement("canvas");r.id="canvas";r.height="450";r.width="600";n.appendChild(r);var i;if(document.getElementById(e))i=document.getElementById(e);else{i=document.createElement("div");i.id=e}i.style.position="absolute";i.style.bottom="2px";i.style.overflow="auto";i.style.width="100%";if(this.header)i.style.height="90%";else i.style.height="100%";n.appendChild(i);if(t.parentEl){this.parentEl=t.parentEl;document.getElementById(t.parentEl).appendChild(n)}else document.body.appendChild(n);if(this.header){var s=document.createElement("div");s.id=e+"Handle";s.style.position="absolute";s.style.width="100%";s.style.height="20px";s.style.backgroundColor=this.color;if(this.draggable)s.style.cursor="move";s.style.zIndex=2;var o=document.createElement("img");o.src=this.icon;o.alt="[ ]";o.title="Graphics Displayer";o.style.cssFloat="left";s.appendChild(o);var u=document.createElement("span");u.style.color="#FFFFFF";u.style.paddingLeft="3px";u.appendChild(document.createTextNode(this.name));s.appendChild(u);var a=document.createElement("div");a.id=e+"Configuration";a.style.position="absolute";a.style.width="100%";a.style.marginTop="20px";a.style.backgroundColor="#E4E4E4";a.style.zIndex=2;a.style.display="none";n.appendChild(a);var f=document.createElement("span");f.appendChild(document.createTextNode("Name of displayer: "));a.appendChild(f);a.appendChild(document.createElement("br"));var l=document.createElement("input");l.type="text";l.id=e+"Configuration_Name";l.name=e+"Configuration_Name";l.size="30";a.appendChild(l);a.appendChild(document.createElement("br"));var c=document.createElement("input");c.type="button";c.id=e+"Configuration_OK";c.name=e+"Configuration_OK";c.value="OK";a.appendChild(c);this.eventConfigured=new YAHOO.util.CustomEvent("eventConfigured");var h=this;c.onclick=function(){var t=document.getElementById(e+"Configuration_Name").value;if(t!=null&&t!=""){h.name=t;u.removeChild(u.firstChild);u.appendChild(document.createTextNode(h.name))}a.style.display="none";h.eventConfigured.fire(h)};this.eventConfigured.subscribe(this.onConfigure,this,true);var p=document.createElement("input");p.type="button";p.id=e+"Configuration_Cancel";p.name=e+"Configuration_Cancel";p.value="Cancel";a.appendChild(p);p.onclick=function(){a.style.display="none"};if(this.removable){this.eventRemoved=new YAHOO.util.CustomEvent("eventRemoved");var d=document.createElement("img");d.src=lib_path+"images/close.png";d.alt="X";d.title="Delete";d.style.backgroundColor="#EFEFEF";d.style.cssFloat="right";d.style.cursor="pointer";s.appendChild(d);d.onclick=function(){if(confirm("Do you really want to delete it?")){h.destroy();h.eventRemoved.fire(h)}};this.eventRemoved.subscribe(this.onRemove,this,true)}if(this.configurable){var v=document.createElement("img");v.src=lib_path+"images/icons/gear.png";v.alt="*";v.title="Preferences";v.style.cssFloat="right";v.style.marginRight="10px";v.style.cursor="pointer";s.appendChild(v);v.onclick=function(){a.style.display="block"}}n.appendChild(s);if(this.draggable){var m=new YAHOO.util.DD(e+"Outer");m.setHandleElId(e+"Handle");this.eventDragged=new YAHOO.util.CustomEvent("eventDragged");m.on("endDragEvent",function(e){this.eventDragged.fire(this)},this,true);this.eventDragged.subscribe(this.onDrag,this,true);if(t.parentEl){var g=document.getElementById(t.parentEl);var y=n.offsetLeft-g.offsetLeft;var b=g.offsetLeft+g.offsetWidth-n.offsetLeft-n.offsetWidth;var w=n.offsetTop-g.offsetTop;var E=g.offsetTop+g.offsetHeight-n.offsetTop-n.offsetHeight;m.setXConstraint(y,b);m.setYConstraint(w)}else{var y=n.offsetLeft;var w=n.offsetTop;m.setXConstraint(y);m.setYConstraint(w)}}}if(this.resizable){var S=document.createElement("div");S.id="yui-gen0";S.className="yui-resize-handle yui-resize-handle-r";var x=document.createElement("div");x.className="yui-resize-handle-inner-r";S.appendChild(x);n.appendChild(S);var S=document.createElement("div");S.id="yui-gen1";S.className="yui-resize-handle yui-resize-handle-b";var x=document.createElement("div");x.className="yui-resize-handle-inner-b";S.appendChild(x);n.appendChild(S);var S=document.createElement("div");S.id="yui-gen2";S.className="yui-resize-handle yui-resize-handle-br";var x=document.createElement("div");x.className="yui-resize-handle-inner-br";S.appendChild(x);n.appendChild(S);var T=new YAHOO.util.Resize(e+"Outer",{minWidth:10,minHeight:10,maxWidth:1200,maxHeight:800});this.eventResized=new YAHOO.util.CustomEvent("eventResized");T.on("endResize",function(e){this.eventResized.fire(this)},this,true);this.eventResized.subscribe(this.onResize,this,true)}this.container=e;this.groups=[];this.interactionGraphics=[];this.parts=[];this.annotations=[];this.parentDocument=null;this.toolbar=null;this.rawData=[];this.data=[];this.canvasId="canvas";this.fillColor="rgba(204,0,153,0.2)";this.strokeColor="rgba(151,187,205,1)";this.pointColor="rgba(151,187,205,1)";this.pointStrokeColor="#fff";this.pointHighlightFill="#fff";this.pointHighlightStroke="rgba(151,187,205,1)";this.highlightColor="#F7464A"};WIND.Graphics.prototype.destroy=function(){var e=document.getElementById(this.container+"Outer");if(this.parentEl){var t=[];for(var n=0;n<this.parentDocument.viewers.length;n++){if(this.parentDocument.viewers[n].container!=this.container){t.push(this.parentDocument.viewers[n])}}this.parentDocument.viewers=t;document.getElementById(this.parentEl).removeChild(e)}else document.body.removeChild(e)};WIND.Graphics.prototype.onDrag=function(){this.top=document.getElementById(this.container+"Outer").offsetTop;this.left=document.getElementById(this.container+"Outer").offsetLeft};WIND.Graphics.prototype.onResize=function(){this.width=document.getElementById(this.container+"Outer").offsetWidth;this.height=document.getElementById(this.container+"Outer").offsetHeight};WIND.Graphics.prototype.onConfigure=function(){};WIND.Graphics.prototype.onRemove=function(){};WIND.Graphics.prototype.addToolBar=function(){if(this.toolbar==null){var e=document.createElement("div");e.style.position="absolute";e.style.top="22px";e.style.right="10px";e.style.zIndex="1000";var t=document.createElement("input");t.type="button";t.title="Bold";t.style.height="24px";t.style.width="30px";t.style.background="url(http://yui.yahooapis.com/2.8.0r4/build/editor/assets/skins/sam/editor-sprite.gif) no-repeat 5px 2px";t.style.border="#808080 1px solid";t.style.cursor="pointer";e.appendChild(t);var n=document.createElement("input");n.type="button";n.title="Italic";n.style.height="24px";n.style.width="30px";n.style.background="url(http://yui.yahooapis.com/2.8.0r4/build/editor/assets/skins/sam/editor-sprite.gif) no-repeat 5px -34px";n.style.border="#808080 1px solid";n.style.cursor="pointer";e.appendChild(n);var r=document.createElement("input");r.type="button";r.title="Underline";r.style.height="24px";r.style.width="30px";r.style.background="url(http://yui.yahooapis.com/2.8.0r4/build/editor/assets/skins/sam/editor-sprite.gif) no-repeat 5px -70px";r.style.border="#808080 1px solid";r.style.cursor="pointer";e.appendChild(r);var i=document.createElement("input");i.type="button";i.title="Strike Through";i.style.height="24px";i.style.width="30px";i.style.background="url(http://yui.yahooapis.com/2.8.0r4/build/editor/assets/skins/sam/editor-sprite.gif) no-repeat 5px -106px";i.style.border="#808080 1px solid";i.style.cursor="pointer";e.appendChild(i);var s=document.createElement("input");s.type="button";s.title="Font Color";s.style.height="24px";s.style.width="30px";s.style.background="url(http://yui.yahooapis.com/2.8.0r4/build/editor/assets/skins/sam/editor-sprite.gif) no-repeat 5px -214px";s.style.border="#808080 1px solid";s.style.cursor="pointer";e.appendChild(s);var o=document.createElement("input");o.type="button";o.title="Background Color";o.style.height="24px";o.style.width="30px";o.style.background="url(http://yui.yahooapis.com/2.8.0r4/build/editor/assets/skins/sam/editor-sprite.gif) no-repeat 5px -286px";o.style.border="#808080 1px solid";o.style.cursor="pointer";e.appendChild(o);document.getElementById(this.container+"Outer").appendChild(e);this.toolbar=e}else this.toolbar.style.visibility="visible"};WIND.Graphics.prototype.removeToolBar=function(){if(this.toolbar!=null)this.toolbar.style.visibility="hidden"};WIND.Graphics.prototype.addAnnotation=function(e){var t=false;for(var n=0;n<e.annotedObjects.length;n++){if(e.annotedObjects.type=="graphics"){t=true;break}}this.annotations.push(e)};WIND.Graphics.prototype.getValue=function(){return{id:this.container,ref:this.ref,rdftype:"http://erozate.iutbayonne.univ-pau.fr/wind#GraphicsComponent",name:this.name,position:{top:this.top,left:this.left},size:{width:this.width,height:this.height},style:{color:this.color,border:this.border,icon:this.icon},annotation:this.annotation,display:this.display,load:this.load,parameter:{draggable:this.draggable?"yes":"no",resizable:this.resizable?"yes":"no",removable:this.removable?"yes":"no",configurable:this.configurable?"yes":"no",header:this.header?"yes":"no",toolbar:"no"}}};WIND.Graphics.prototype.activateInteractions=function(){for(var e=0;e<this.interactionGraphics.length;e++){this.activateInteraction(this.interactionGraphics[e])}};WIND.Graphics.prototype.setData=function(e){this.rawData=e;if(this.type!="Pie"){this.data={};this.data.labels=e.labels;this.data.datasets=[];for(var t=0;t<e.datasets.length;t++){var n={};n.fillColor=this.fillColor;n.strokeColor=this.strokeColor;n.pointColor=this.pointColor;n.pointStrokeColor=this.pointStrokeColor;n.pointHighlightFill=this.pointHighlightFill;n.pointHighlightStroke=this.pointHighlightStroke;n.data=e.datasets[t];this.data.datasets.push(n)}}else{this.data=[];for(var t=0;t<e.labels.length;t++){var n={};n.label=e.labels[t];n.value=e.datasets[0][t];n.color=gradient(this.fillColor,t*10);n.highlight=gradient(this.highlightColor,t*10);this.data.push(n)}}this.draw()};WIND.Graphics.prototype.draw=function(){if(this.type=="Bar")this.drawBarChart();if(this.type=="Pie")this.drawPieChart();if(this.type=="Radar")this.drawRadarChart();if(this.type=="Line")this.drawLineChart()};WIND.Graphics.prototype.drawBarChart=function(){var e=this;var t=document.getElementById("canvas").getContext("2d");var n=(new Chart(t)).Bar(e.data,{responsive:true})};WIND.Graphics.prototype.drawLineChart=function(){var e=this;var t=document.getElementById("canvas").getContext("2d");var n=(new Chart(t)).Line(e.data,{responsive:true})};WIND.Graphics.prototype.drawPieChart=function(){var e=this;var t=document.getElementById("canvas").getContext("2d");var n=(new Chart(t)).Pie(e.data,{responsive:true})};WIND.Graphics.prototype.drawRadarChart=function(){var e=this;var t=document.getElementById("canvas").getContext("2d");var n=(new Chart(t)).Radar(e.data,{responsive:true})};WIND.Graphics.prototype.setColor=function(e){if(e.fillColor)this.fillColor=e.fillColor;if(e.strokeColor)this.strokeColor=e.strokeColor;if(e.pointColor)this.pointColor=e.pointColor;if(e.pointStrokeColor)this.pointStrokeColor=e.pointStrokeColor;if(e.pointHighlightFill)this.pointHighlightFill=e.pointHighlightFill;if(e.pointHighlightStroke)this.pointHighlightStroke=e.pointHighlightStroke;if(e.highlightColor)this.highlightColor=e.highlightColor};WIND.Graphics.prototype.createAnnotation=function(e,t){var n=this.createSensiblePart();var r=new WIND.Annotation(e,t,[n]);this.annotations.push(r);return r};WIND.Graphics.prototype.createSensiblePart=function(){var e=new WIND.Graphics.Part(this.canvasId);e.viewer=this;return e};WIND.Graphics.Part=function(e){this.object=e};WIND.Graphics.Part.prototype=new WIND.SensiblePart("graphics");WIND.Graphics.Part.prototype.changeType=function(e){this.viewer.type=e;this.viewer.setData(this.viewer.rawData)};WIND.Graphics.Part.prototype.changeTypeRound=function(){var e=["Line","Bar","Radar","Pie"];for(var t=0;t<e.length;t++){if(this.viewer.type==e[t]){if(t<3){this.changeType(e[t+1])}else{this.changeType(e[0])}break}}}