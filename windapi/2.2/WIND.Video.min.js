WIND.Video=function(e,t){this.draggable=false;this.resizable=false;this.top=10;this.left=10;this.width=600;this.height=400;this.color="#3366CC";this.border="#3366CC 2px solid";this.name="Video Displayer";this.icon=lib_path+"images/vvizicon.png";this.header=false;this.removable=false;this.configurable=false;if(t.draggable==true)this.draggable=t.draggable;if(t.resizable==true)this.resizable=t.resizable;if(t.header==true)this.header=t.header;if(t.removable==true)this.removable=t.removable;if(t.configurable==true)this.configurable=t.configurable;if(this.draggable==true||this.removable==true||this.configurable==true)this.header=true;var n=document.createElement("div");n.id=e+"Outer";n.style.position="absolute";if(t.top)this.top=t.top;n.style.top=this.top+"px";if(t.left)this.left=t.left;n.style.left=this.left+"px";if(t.width)this.width=t.width;n.style.width=this.width+"px";if(t.height)this.height=t.height;n.style.height=this.height+"px";if(t.color)this.color=t.color;if(t.border)this.border=t.border;n.style.border=this.border;if(t.parentEl)this.parentEl=t.parentEl;if(t.name)this.name=t.name;if(t.icon)this.icon=t.icon;var r;if(document.getElementById(e))r=document.getElementById(e);else{r=document.createElement("div");r.id=e}r.style.position="absolute";r.style.top="0px";r.style.width="100%";r.style.height="100%";n.appendChild(r);if(t.parentEl){this.parentEl=t.parentEl;document.getElementById(t.parentEl).appendChild(n)}else document.body.appendChild(n);if(this.header){var i=document.createElement("div");i.id=e+"Handle";i.style.position="absolute";i.style.width="100%";i.style.height="20px";i.style.backgroundColor=this.color;if(this.draggable)i.style.cursor="move";i.style.zIndex=2;var s=document.createElement("img");s.src=this.icon;s.alt="[ ]";s.title="VideoDisplayer";s.style.cssFloat="left";i.appendChild(s);var o=document.createElement("span");o.style.color="#FFFFFF";o.style.paddingLeft="3px";o.appendChild(document.createTextNode(this.name));i.appendChild(o);var u=document.createElement("div");u.id=e+"Configuration";u.style.position="absolute";u.style.width="100%";u.style.marginTop="20px";u.style.backgroundColor="#E4E4E4";u.style.zIndex=2;u.style.display="none";n.appendChild(u);var a=document.createElement("span");a.appendChild(document.createTextNode("Name of displayer: "));u.appendChild(a);u.appendChild(document.createElement("br"));var f=document.createElement("input");f.type="text";f.id=e+"Configuration_Name";f.name=e+"Configuration_Name";f.size="30";u.appendChild(f);u.appendChild(document.createElement("br"));var l=document.createElement("input");l.type="button";l.id=e+"Configuration_OK";l.name=e+"Configuration_OK";l.value="OK";u.appendChild(l);this.eventConfigured=new YAHOO.util.CustomEvent("eventConfigured");var c=this;l.onclick=function(){var t=document.getElementById(e+"Configuration_Name").value;if(t!=null&&t!=""){c.name=t;o.removeChild(o.firstChild);o.appendChild(document.createTextNode(c.name))}u.style.display="none";c.eventConfigured.fire(c)};this.eventConfigured.subscribe(this.onConfigure,this,true);var h=document.createElement("input");h.type="button";h.id=e+"Configuration_Cancel";h.name=e+"Configuration_Cancel";h.value="Cancel";u.appendChild(h);h.onclick=function(){u.style.display="none"};if(this.removable){this.eventRemoved=new YAHOO.util.CustomEvent("eventRemoved");var p=document.createElement("img");p.src=lib_path+"images/close.png";p.alt="X";p.title="Delete";p.style.backgroundColor="#EFEFEF";p.style.cssFloat="right";p.style.cursor="pointer";i.appendChild(p);p.onclick=function(){if(confirm("Do you really want to delete it?")){c.destroy();c.eventRemoved.fire(c)}};this.eventRemoved.subscribe(this.onRemove,this,true)}if(this.configurable){var d=document.createElement("img");d.src=lib_path+"images/gear.png";d.alt="*";d.title="Preferences";d.style.cssFloat="right";d.style.marginRight="10px";d.style.cursor="pointer";i.appendChild(d);d.onclick=function(){u.style.display="block"}}n.appendChild(i);if(this.draggable){var v=new YAHOO.util.DD(e+"Outer");v.setHandleElId(e+"Handle");this.eventDragged=new YAHOO.util.CustomEvent("eventDragged");v.on("endDragEvent",function(e){this.eventDragged.fire(this)},this,true);this.eventDragged.subscribe(this.onDrag,this,true);if(t.parentEl){var m=document.getElementById(t.parentEl);var g=n.offsetLeft-m.offsetLeft;var y=m.offsetLeft+m.offsetWidth-n.offsetLeft-n.offsetWidth;var b=n.offsetTop-m.offsetTop;var w=m.offsetTop+m.offsetHeight-n.offsetTop-n.offsetHeight;v.setXConstraint(g,y);v.setYConstraint(b)}else{var g=n.offsetLeft;var b=n.offsetTop;v.setXConstraint(g);v.setYConstraint(b)}}}if(this.resizable){var E=document.createElement("div");E.id="yui-gen0";E.className="yui-resize-handle yui-resize-handle-r";var S=document.createElement("div");S.className="yui-resize-handle-inner-r";E.appendChild(S);n.appendChild(E);var E=document.createElement("div");E.id="yui-gen1";E.className="yui-resize-handle yui-resize-handle-b";var S=document.createElement("div");S.className="yui-resize-handle-inner-b";E.appendChild(S);n.appendChild(E);var E=document.createElement("div");E.id="yui-gen2";E.className="yui-resize-handle yui-resize-handle-br";var S=document.createElement("div");S.className="yui-resize-handle-inner-br";E.appendChild(S);n.appendChild(E);var x=new YAHOO.util.Resize(e+"Outer",{minWidth:160,minHeight:160,maxWidth:1200,maxHeight:800});this.eventResized=new YAHOO.util.CustomEvent("eventResized");x.on("endResize",function(e){this.eventResized.fire(this)},this,true);this.eventResized.subscribe(this.onResize,this,true)}this.container=e;this.parentDocument=null;this.parts=[];this.annotations=[];this.interactionList=[]};WIND.Video.prototype.destroy=function(){var e=document.getElementById(this.container+"Outer");if(this.parentEl){var t=[];for(var n=0;n<this.parentDocument.viewers.length;n++){if(this.parentDocument.viewers[n].container!=this.container){t.push(this.parentDocument.viewers[n])}}this.parentDocument.viewers=t;document.getElementById(this.parentEl).removeChild(e)}else document.body.removeChild(e)};WIND.Video.prototype.onDrag=function(){this.top=document.getElementById(this.container+"Outer").offsetTop;this.left=document.getElementById(this.container+"Outer").offsetLeft};WIND.Video.prototype.onResize=function(){this.width=document.getElementById(this.container+"Outer").offsetWidth;this.height=document.getElementById(this.container+"Outer").offsetHeight};WIND.Video.prototype.onConfigure=function(){};WIND.Video.prototype.onRemove=function(){};WIND.Video.prototype.getValue=function(){return{id:this.container,ref:this.ref,rdftype:"http://erozate.iutbayonne.univ-pau.fr/wind#VideoComponent",name:this.name,innerText:this.innerText,position:{top:this.top,left:this.left},size:{width:this.width,height:this.height},style:{color:this.color,border:this.border,icon:this.icon},annotation:this.annotation,display:this.display,load:this.load,parameter:{draggable:this.draggable?"yes":"no",resizable:this.resizable?"yes":"no",removable:this.removable?"yes":"no",configurable:this.configurable?"yes":"no",header:this.header?"yes":"no",toolbar:"no"}}}