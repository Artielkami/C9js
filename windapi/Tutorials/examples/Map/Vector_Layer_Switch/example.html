<html>
    <head>
        <title>
            Vector Layer Switch
        </title>
		<script type="text/javascript" src="http://erozate.iutbayonne.univ-pau.fr/windapi/?v=2.1&file=WIND"></script>
        <script type="text/javascript" src="http://erozate.iutbayonne.univ-pau.fr/windapi/?v=2.1&file=WIND.Map"></script>
    </head>
    <body>
		<button onclick="ClicBouton();" style="margin-top:450px">Change vector layer</button>
		<span id="active_vl"></span>
        <script type="text/javascript">
			//Creating the map.
            var m = new WIND.Map('map', {'zoom':13,'latitude':43.468320,'longitude':-1.526535,'top':50});
			//Adding a new vector layer.
			m.addVectorLayer(1);
			m.addVectorLayer(2);
			//Creating the annotations.
			var blue_annot = m.createAnnotation("Triangle","Biarritz","POLYGON((-1.528261 43.479055,-1.527574 43.461411,-1.500065 43.469027))",{"style":"strokeColor:blue,strokeWidth:3,strokeOpacity:1,fillColor:blue,fillOpacity:0.3"},0);
			var red_annot = m.createAnnotation("Rectangle", "Biarritz","POLYGON((-1.509282 43.470566,-1.536919 43.470581,-1.536876 43.465986,-1.509410 43.466312))",{"style":"strokeColor:red,strokeWidth:3,strokeOpacity:0,fillColor:red,fillOpacity:0.3"},1);
			var green_annot = m.createAnnotation("Town","BIARRITZ","POLYGON((-1.53473560426471 43.47584195587,-1.53463140841806 43.4733200782232,-1.53462298399761 43.4730492635757,-1.53454069178911 43.4700771499591,-1.53455207474162 43.4696180082162,-1.53463756423718 43.4660089934496,-1.53477795907227 43.4651349392391,-1.53494063921874 43.4641301970978,-1.5349796207768 43.4638906693888,-1.53507852965996 43.463282004823,-1.53543638306069 43.4607703601141,-1.53651791063104 43.4593749034127,-1.53892160664922 43.4556475378783,-1.53974891639574 43.4543663350936,-1.5401462564577 43.4530676045572,-1.54032570212573 43.4514561170321,-1.54005502828546 43.449111396074,-1.54019326933917 43.4476436524392,-1.54101670516978 43.4474346620319,-1.54311132184683 43.447443808884,-1.54353103699008 43.4482709019401,-1.54389929479238 43.4474422422308,-1.54742120117921 43.4474050594494,-1.5507701983772 43.447384306966,-1.55411900842497 43.4480056798032,-1.55646205403527 43.4483798006253,-1.55915429422479 43.4494556356483,-1.56031017935104 43.4500148401858,-1.56119987921028 43.4504465556043,-1.56225813577727 43.451441203478,-1.56312974768827 43.4532260538206,-1.56486022617497 43.4552993866858,-1.56596896449366 43.4569694620838,-1.56652887035465 43.4578749114509,-1.56814874591227 43.4591326688313,-1.5692396297635 43.4598755808915,-1.57010817077675 43.4602842907968,-1.57036251831208 43.4604029011744,-1.57182988841485 43.4609177213653,-1.57378118691072 43.4613067270383,-1.57675224986306 43.4621205183127,-1.57708942366525 43.4625391863666,-1.57767387988759 43.4632622635676,-1.5782990153792 43.4639591200608,-1.57780165833875 43.4638885246366,-1.57731767297596 43.4640133093779,-1.5765835131678 43.4650945554972,-1.57636600270351 43.4654941866263,-1.57650368245153 43.46568608817,-1.57668802889067 43.4658567088303,-1.57708700375148 43.4658958315895,-1.57724495855419 43.4660323594036,-1.57762330755894 43.4661423292744,-1.57785348407414 43.4662587090014,-1.57781519395996 43.4664023615666,-1.57799159722612 43.4667876930978,-1.57768961855816 43.4670491631723,-1.5773156313888 43.4673132465984,-1.57715943163737 43.4675333415838,-1.57718878162033 43.46794153812,-1.57732330348288 43.4684180788308,-1.57662204576841 43.4682847782092,-1.57631393175145 43.4684567797822,-1.57602376797144 43.4685394727405,-1.57573740710691 43.4686570770319,-1.57538685110151 43.4685811415028,-1.5751627896513 43.4685542213477,-1.57483743312308 43.468494894819,-1.57438500528779 43.4687092382348,-1.57381692300112 43.4692401329566,-1.5734012553379 43.4697438485008,-1.57302019161052 43.4709194763496,-1.57258782123064 43.4717382149229,-1.57216221565571 43.4723247569588,-1.57174840856081 43.4726284064609,-1.57136700980956 43.4729092310039,-1.57040981464139 43.4739614064046,-1.56951668796561 43.4752267074885,-1.56927007496845 43.4762170468183,-1.56910486833586 43.4769900124351,-1.5685156231452 43.4776896795471,-1.56802282713398 43.4783508005643,-1.56760139161161 43.4794144753096,-1.5675403227544 43.4797640964138,-1.56761952178107 43.4800117353119,-1.56801806732777 43.4803127572682,-1.56824465236757 43.4803138303896,-1.56842632016774 43.4803412710667,-1.56869366646199 43.4804831301734,-1.56875803947563 43.4807416144552,-1.56877581717679 43.4809811684673,-1.56912686915684 43.4810426782035,-1.56936476937572 43.4810021035385,-1.56953519955675 43.4808650066838,-1.57004333134528 43.4810084492017,-1.57044786592392 43.4809824529466,-1.57078640707637 43.4810887390698,-1.57098713729471 43.4813536213364,-1.57110268707299 43.4816978763283,-1.57093303122728 43.4818462875746,-1.57074186642717 43.4819078518896,-1.57036403130939 43.4818895841431,-1.57017139019406 43.4819295521383,-1.57023064208711 43.4821129664039,-1.57038771866831 43.4822155193728,-1.57056104013393 43.4823071746059,-1.57036108437607 43.4824680225828,-1.57016541990512 43.4824637715952,-1.56984099432425 43.4823569718077,-1.56950462527113 43.4822825614301,-1.56936897650788 43.4824936536619,-1.56933938706141 43.4827029659987,-1.56912593602731 43.4828735784194,-1.5689162806583 43.4828925115175,-1.56876440264838 43.4828660542475,-1.56845107996978 43.4827145197434,-1.56811394480259 43.4824215834128,-1.56789177555203 43.4824852960781,-1.56789247807179 43.4826821711982,-1.5682191492406 43.4828218840791,-1.56855179213504 43.4830490057566,-1.5691303659075 43.4831249561391,-1.56930002541766 43.4833909672891,-1.56910056139809 43.4835383933657,-1.56921392920582 43.483643562164,-1.56938879144532 43.4837784612538,-1.5699104393101 43.4839121380364,-1.56997552422462 43.4837664858289,-1.57030902156268 43.4837987324877,-1.57050308311824 43.4839659229885,-1.57075639205396 43.4841299356019,-1.5709616908408 43.4842750694264,-1.5709727354248 43.4846231122489,-1.57102454646441 43.4849047314917,-1.57084749473343 43.4849657843878,-1.57072969099581 43.4845886210153,-1.57033110140989 43.4842876080377,-1.56996744398239 43.484062645531,-1.56955325513844 43.4839683742074,-1.56966142443598 43.4842046546506,-1.5693976464639 43.4843018352567,-1.56920127329349 43.4842872990077,-1.56878272905112 43.4841292669634,-1.56842195837802 43.4839464616629,-1.56813674483065 43.4839578202272,-1.56753510552651 43.4841661950948,-1.56700280795544 43.4841875264735,-1.56615568135299 43.4842841648496,-1.56596981599881 43.4841331645888,-1.56590630253606 43.48386640001,-1.56597834405285 43.4836565834932,-1.5664420175098 43.4834181606076,-1.56602364714555 43.4833869119484,-1.56585979451679 43.4832887214815,-1.56541002250465 43.4833781903259,-1.5650397144232 43.4834080831856,-1.56481330194103 43.483305969273,-1.56480249577851 43.4831476029346,-1.56447274202378 43.4831286056892,-1.56431846627643 43.4834197434387,-1.56390114936702 43.4834039118525,-1.56396142582994 43.4836233732398,-1.56423702149915 43.4838030885184,-1.56450293608314 43.4838408903215,-1.56487035391529 43.4834781258942,-1.56502247694581 43.4837571483157,-1.56564249247532 43.4838594522479,-1.56563824295048 43.4843987629428,-1.56511618833189 43.4847361983637,-1.56442256341254 43.4848417014093,-1.56307768756465 43.4847192144486,-1.56268780750045 43.484752899339,-1.56242602748367 43.4847757660202,-1.56123465494468 43.4852641787913,-1.5606554782446 43.4858026181785,-1.56018968280796 43.4862390228213,-1.55945171832161 43.4868161814052,-1.55875930786785 43.4873556080954,-1.55799132247496 43.4876379748409,-1.55704564665973 43.4881803503671,-1.55630952637012 43.4888893737339,-1.55593557788739 43.489157501149,-1.55521246019526 43.4894547220134,-1.55496945774695 43.4895665796674,-1.55457683697853 43.4897477502164,-1.55386319546517 43.4904549140541,-1.55359901073421 43.4913376078245,-1.55341942657891 43.4918822102985,-1.55346982823779 43.4921443006147,-1.55354070539347 43.4924159613811,-1.55358871049231 43.4925595856559,-1.55370554276155 43.4925285684132,-1.55412448230777 43.4924217071256,-1.55460540044419 43.4924765199974,-1.55499231073677 43.4925440008061,-1.55525116024384 43.4926439354117,-1.55547468182548 43.4928905002513,-1.55560419570862 43.4931497352926,-1.55552674633486 43.4933432455248,-1.55544606352193 43.4935100691509,-1.55551745747489 43.4936435708568,-1.55554699873237 43.4938486836588,-1.55559507366564 43.4942428122724,-1.55704200251407 43.4931163955548,-1.55606696744262 43.4939361008977,-1.55593685547262 43.4942088292913,-1.5557526810343 43.4944154694817,-1.55555404169106 43.4945968589497,-1.55526019847924 43.494773436147,-1.55507771673595 43.494859399355,-1.55475095384936 43.4949268571442,-1.55428769177246 43.49506933886,-1.55372259745515 43.4947350948944,-1.55343804791025 43.4946113416697,-1.55309971266946 43.4945503501374,-1.55281740437062 43.4944595031252,-1.55253839853754 43.4943963704375,-1.5524178640281 43.49424814448,-1.55218465884175 43.4940256329887,-1.55174434046946 43.4937559506382,-1.55111422865569 43.4936312474132,-1.55027982925543 43.4938757454424,-1.54970463528516 43.4941005886066,-1.54859146579023 43.4929520766788,-1.54783003924961 43.492686729833,-1.5475981254905 43.4925662209831,-1.5468138666423 43.492152211017,-1.54506115009648 43.491113288361,-1.54468649574912 43.490933996193,-1.54194297939829 43.4896275992717,-1.54000971122288 43.4883456227834,-1.53924626606126 43.4878400978093,-1.53806749333502 43.487139191693,-1.53792732169942 43.4870555722211,-1.53744053391234 43.4867668893337,-1.53533872902123 43.4856692346891,-1.53531030634403 43.4853331592835,-1.53522659192944 43.4843269396042,-1.5351532759614 43.4834533299791,-1.53495498587379 43.4810894449518,-1.53494591424047 43.4809763749141,-1.53483453744468 43.4782650644875,-1.53473560426471 43.47584195587))",{"style":"strokeColor:green,strokeWidth:1,strokeOpacity:0.5,fillColor:green,fillOpacity:0.3"},2);
			//Creating the events.
			var evt1 = new WIND.SelectEvent("click",blue_annot);
			var evt2 = new WIND.SelectEvent("click",red_annot);
			//Creating the reactions
			var react1 = new WIND.ExternalReaction(green_annot,"show");
			var react2 = new WIND.ExternalReaction(green_annot,"hide");
			//Creating the interactions
			var i1 = new WIND.Interaction(evt1, new Array(react1));
			var i2 = new WIND.Interaction(evt2, new Array(react2));
			//activate the interactions
			evt1.trigger(function(e){
				i1.activate();
			});
			evt2.trigger(function(e){
				i2.activate();
			});
			//Selecting the active layers
			var vl=0;
			var text = document.getElementById("active_vl");
			text.innerHTML="Current vector layer: "+vl+" (Triangle: show green annotation)";
			function ClicBouton(){
				if(vl==0)
				{
					vl=1;
					text.innerHTML="Current vector layer: "+vl+" (Rectangle: hide green annotation)";
				}
				else
				{
					vl=0;
					text.innerHTML="Current vector layer: "+vl+" (Triangle: show green annotation)";
				}
				m.SelectVectorLayer(vl,true);
			} 
        </script>
    </body>
</html>